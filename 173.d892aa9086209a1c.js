(self.webpackChunkgrade_scope_istic=self.webpackChunkgrade_scope_istic||[]).push([[173],{2384:($e,Ie,se)=>{"use strict";se.d(Ie,{z:()=>$t});var N=se(5861),te=se(6656),V=se(9505),Ae=se(4687);function re(F,s,f,h){return new(f||(f=Promise))(function(A,S){function fe(ee){try{v(h.next(ee))}catch(Te){S(Te)}}function he(ee){try{v(h.throw(ee))}catch(Te){S(Te)}}function v(ee){ee.done?A(ee.value):function p(A){return A instanceof f?A:new f(function(S){S(A)})}(ee.value).then(fe,he)}v((h=h.apply(F,s||[])).next())})}function xe(F,s){var h,p,A,S,f={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return S={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(S[Symbol.iterator]=function(){return this}),S;function fe(v){return function(ee){return function he(v){if(h)throw new TypeError("Generator is already executing.");for(;f;)try{if(h=1,p&&(A=2&v[0]?p.return:v[0]?p.throw||((A=p.return)&&A.call(p),0):p.next)&&!(A=A.call(p,v[1])).done)return A;switch(p=0,A&&(v=[2&v[0],A.value]),v[0]){case 0:case 1:A=v;break;case 4:return f.label++,{value:v[1],done:!1};case 5:f.label++,p=v[1],v=[0];continue;case 7:v=f.ops.pop(),f.trys.pop();continue;default:if(!(A=(A=f.trys).length>0&&A[A.length-1])&&(6===v[0]||2===v[0])){f=0;continue}if(3===v[0]&&(!A||v[1]>A[0]&&v[1]<A[3])){f.label=v[1];break}if(6===v[0]&&f.label<A[1]){f.label=A[1],A=v;break}if(A&&f.label<A[2]){f.label=A[2],f.ops.push(v);break}A[2]&&f.ops.pop(),f.trys.pop();continue}v=s.call(F,f)}catch(ee){v=[6,ee],p=0}finally{h=A=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,ee])}}}function Le(F){return[F.schema.primKey].concat(F.schema.indexes).map(function(f){return f.src}).join(",")}function Ft(F,s){return new Promise(function(f,h){var p=new FileReader;p.onabort=function(A){return h(new Error("file read aborted"))},p.onerror=function(A){return h(A.target.error)},p.onload=function(A){return f(A.target.result)},"binary"===s?p.readAsArrayBuffer(F):p.readAsText(F)})}function Et(F,s){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var f=new FileReaderSync;return"binary"===s?f.readAsArrayBuffer(F):f.readAsText(F)}var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rt(F,s){return F(s={exports:{}},s.exports),s.exports}for(var Dt=rt(function(F,s){F.exports=function(){function f(b){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(b)}function h(b,j,K,L,J,Ge,Xe){try{var Ye=b[Ge](Xe),ye=Ye.value}catch(Ut){return void K(Ut)}Ye.done?j(ye):Promise.resolve(ye).then(L,J)}function p(b){return function(){var j=this,K=arguments;return new Promise(function(L,J){var Ge=b.apply(j,K);function Xe(ye){h(Ge,L,J,Xe,Ye,"next",ye)}function Ye(ye){h(Ge,L,J,Xe,Ye,"throw",ye)}Xe(void 0)})}}function A(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}function S(b,j){for(var K=0;K<j.length;K++){var L=j[K];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(b,L.key,L)}}function he(b,j,K){return j in b?Object.defineProperty(b,j,{value:K,enumerable:!0,configurable:!0,writable:!0}):b[j]=K,b}function v(b,j){var K=Object.keys(b);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(b);j&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(b,J).enumerable})),K.push.apply(K,L)}return K}function ee(b){for(var j=1;j<arguments.length;j++){var K=null!=arguments[j]?arguments[j]:{};j%2?v(Object(K),!0).forEach(function(L){he(b,L,K[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(K)):v(Object(K)).forEach(function(L){Object.defineProperty(b,L,Object.getOwnPropertyDescriptor(K,L))})}return b}function Te(b,j){return function Oe(b){if(Array.isArray(b))return b}(b)||function ht(b,j){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b)){var K=[],L=!0,J=!1,Ge=void 0;try{for(var Ye,Xe=b[Symbol.iterator]();!(L=(Ye=Xe.next()).done)&&(K.push(Ye.value),!j||K.length!==j);L=!0);}catch(ye){J=!0,Ge=ye}finally{try{!L&&null!=Xe.return&&Xe.return()}finally{if(J)throw Ge}}return K}}(b,j)||function St(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ce(b){return function vt(b){if(Array.isArray(b)){for(var j=0,K=new Array(b.length);j<b.length;j++)K[j]=b[j];return K}}(b)||function Be(b){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b))return Array.from(b)}(b)||function an(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var H=function b(j){A(this,b),this.p=new Promise(j)};H.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(H.prototype[Symbol.toStringTag]="TypesonPromise"),H.prototype.then=function(b,j){var K=this;return new H(function(L,J){K.p.then(function(Ge){L(b?b(Ge):Ge)}).catch(function(Ge){return j?j(Ge):Promise.reject(Ge)}).then(L,J)})},H.prototype.catch=function(b){return this.then(null,b)},H.resolve=function(b){return new H(function(j){j(b)})},H.reject=function(b){return new H(function(j,K){K(b)})},["all","race"].forEach(function(b){H[b]=function(j){return new H(function(K,L){Promise[b](j.map(function(J){return J&&J.constructor&&"TypesonPromise"===J.constructor.__typeson__type__?J.p:J})).then(K,L)})}});var Ne={}.toString,It={}.hasOwnProperty,xt=Object.getPrototypeOf,Kt=It.toString;function P(b,j){return Qe(b)&&"function"==typeof b.then&&(!j||"function"==typeof b.catch)}function d(b){return Ne.call(b).slice(8,-1)}function D(b,j){if(!b||"object"!==f(b))return!1;var K=xt(b);if(!K)return null===j;var L=It.call(K,"constructor")&&K.constructor;return"function"!=typeof L?null===j:j===L||null!==j&&Kt.call(L)===Kt.call(j)||"function"==typeof j&&"string"==typeof L.__typeson__type__&&L.__typeson__type__===j.__typeson__type__}function T(b){return!(!b||"Object"!==d(b))&&(!xt(b)||D(b,Object))}function Qe(b){return b&&"object"===f(b)}function ut(b){return b.replace(/~/g,"~0").replace(/\./g,"~1")}function yt(b){return b.replace(/~1/g,".").replace(/~0/g,"~")}function bt(b,j){if(""===j)return b;var K=j.indexOf(".");if(K>-1){var L=b[yt(j.slice(0,K))];return void 0===L?void 0:bt(L,j.slice(K+1))}return b[yt(j)]}function Ze(b,j,K){if(""===j)return K;var L=j.indexOf(".");return L>-1?Ze(b[yt(j.slice(0,L))],j.slice(L+1),K):(b[yt(j)]=K,b)}var en=Object.keys,zt=Array.isArray,Zt={}.hasOwnProperty,ce=["type","replaced","iterateIn","iterateUnsetNumeric"];function pe(b,j){if(""===b.keypath)return-1;var K=b.keypath.match(/\./g)||0,L=j.keypath.match(/\./g)||0;return K&&(K=K.length),L&&(L=L.length),K>L?-1:K<L?1:b.keypath<j.keypath?-1:b.keypath>j.keypath}var Ve=function(){function b(j){A(this,b),this.options=j,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function fe(b,j,K){return j&&S(b.prototype,j),K&&S(b,K),b}(b,[{key:"stringify",value:function(K,L,J,Ge){Ge=ee({},this.options,{},Ge,{stringification:!0});var Xe=this.encapsulate(K,null,Ge);return zt(Xe)?JSON.stringify(Xe[0],L,J):Xe.then(function(Ye){return JSON.stringify(Ye,L,J)})}},{key:"stringifySync",value:function(K,L,J,Ge){return this.stringify(K,L,J,ee({throwOnBadSyncType:!0},Ge,{sync:!0}))}},{key:"stringifyAsync",value:function(K,L,J,Ge){return this.stringify(K,L,J,ee({throwOnBadSyncType:!0},Ge,{sync:!1}))}},{key:"parse",value:function(K,L,J){return J=ee({},this.options,{},J,{parse:!0}),this.revive(JSON.parse(K,L),J)}},{key:"parseSync",value:function(K,L,J){return this.parse(K,L,ee({throwOnBadSyncType:!0},J,{sync:!0}))}},{key:"parseAsync",value:function(K,L,J){return this.parse(K,L,ee({throwOnBadSyncType:!0},J,{sync:!1}))}},{key:"specialTypeNames",value:function(K,L){var J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return J.returnTypeNames=!0,this.encapsulate(K,L,J)}},{key:"rootTypeName",value:function(K,L){var J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return J.iterateNone=!0,this.encapsulate(K,L,J)}},{key:"encapsulate",value:function(K,L,J){var Xe=(J=ee({sync:!0},this.options,{},J)).sync,Ye=this,ye={},Ut=[],qt=[],Vt=[],tn=!("cyclic"in J)||J.cyclic,hn=J.encapsulateObserver,Me=ot("",K,tn,L||{},Vt);function mt(ie){var u=Object.values(ye);if(J.iterateNone)return u.length?u[0]:b.getJSONType(ie);if(u.length){if(J.returnTypeNames)return Ce(new Set(u));ie&&T(ie)&&!Zt.call(ie,"$types")?ie.$types=ye:ie={$:ie,$types:{$:ye}}}else Qe(ie)&&Zt.call(ie,"$types")&&(ie={$:ie,$types:!0});return!J.returnTypeNames&&ie}function Ot(ie,u){return it.apply(this,arguments)}function it(){return it=p(Ae.mark(function ie(u,o){var c;return Ae.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,Promise.all(o.map(function(M){return M[1].p}));case 2:return c=w.sent,w.next=5,Promise.all(c.map(function(){var M=p(Ae.mark(function G(ae){var Q,ge,Ke,at,_e,nt,Pe,ue,Z;return Ae.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(Q=[],ge=o.splice(0,1),Ke=Te(ge,1),at=Te(Ke[0],7),nt=at[4],Pe=at[5],ue=ot(_e=at[0],ae,at[2],at[3],Q,!0,at[6]),Z=D(ue,H),!_e||!Z){Se.next=11;break}return Se.next=8,ue.p;case 8:return nt[Pe]=Se.sent,Se.abrupt("return",Ot(u,Q));case 11:return _e?nt[Pe]=ue:u=Z?ue.p:ue,Se.abrupt("return",Ot(u,Q));case 13:case"end":return Se.stop()}},G)}));return function(G){return M.apply(this,arguments)}}()));case 5:return w.abrupt("return",u);case 6:case"end":return w.stop()}},ie)})),it.apply(this,arguments)}function tt(ie,u,o){Object.assign(ie,u);var c=ce.map(function(m){var w=ie[m];return delete ie[m],w});o(),ce.forEach(function(m,w){ie[m]=c[w]})}function ot(ie,u,o,c,m,w,M){var G,ae={},Q=f(u),ge=hn?function(Z){var me=M||c.type||b.getJSONType(u);hn(Object.assign(Z||ae,{keypath:ie,value:u,cyclic:o,stateObj:c,promisesData:m,resolvingTypesonPromise:w,awaitingTypesonPromise:D(u,H)},{type:me}))}:null;if(["string","boolean","number","undefined"].includes(Q))return void 0===u||"number"===Q&&(isNaN(u)||u===-1/0||u===1/0)?(G=c.replaced?u:Pt(ie,u,c,m,!1,w,ge))!==u&&(ae={replaced:G}):G=u,ge&&ge(),G;if(null===u)return ge&&ge(),u;if(o&&!c.iterateIn&&!c.iterateUnsetNumeric&&u&&"object"===f(u)){var Ke=Ut.indexOf(u);if(!(Ke<0))return ye[ie]="#",ge&&ge({cyclicKeypath:qt[Ke]}),"#"+qt[Ke];!0===o&&(Ut.push(u),qt.push(ie))}var qe,Fe=T(u),at=zt(u),_e=(Fe||at)&&(!Ye.plainObjectReplacers.length||c.replaced)||c.iterateIn?u:Pt(ie,u,c,m,Fe||at,null,ge);if(_e!==u?(G=_e,ae={replaced:_e}):""===ie&&D(u,H)?(m.push([ie,u,o,c,void 0,void 0,c.type]),G=u):at&&"object"!==c.iterateIn||"array"===c.iterateIn?(qe=new Array(u.length),ae={clone:qe}):(["function","symbol"].includes(f(u))||"toJSON"in u||D(u,H)||D(u,Promise)||D(u,ArrayBuffer))&&!Fe&&"object"!==c.iterateIn?G=u:(qe={},c.addLength&&(qe.length=u.length),ae={clone:qe}),ge&&ge(),J.iterateNone)return qe||G;if(!qe)return G;if(c.iterateIn){var dt=function(me){var ve={ownKeys:Zt.call(u,me)};tt(c,ve,function(){var Se=ie+(ie?".":"")+ut(me),De=ot(Se,u[me],!!o,c,m,w);D(De,H)?m.push([Se,De,!!o,c,qe,me,c.type]):void 0!==De&&(qe[me]=De)})};for(var nt in u)dt(nt);ge&&ge({endIterateIn:!0,end:!0})}else en(u).forEach(function(Z){var me=ie+(ie?".":"")+ut(Z);tt(c,{ownKeys:!0},function(){var Se=ot(me,u[Z],!!o,c,m,w);D(Se,H)?m.push([me,Se,!!o,c,qe,Z,c.type]):void 0!==Se&&(qe[Z]=Se)})}),ge&&ge({endIterateOwn:!0,end:!0});if(c.iterateUnsetNumeric){for(var Pe=u.length,wt=function(me){if(!(me in u)){var ve=ie+(ie?".":"")+me;tt(c,{ownKeys:!1},function(){var De=ot(ve,void 0,!!o,c,m,w);D(De,H)?m.push([ve,De,!!o,c,qe,me,c.type]):void 0!==De&&(qe[me]=De)})}},ue=0;ue<Pe;ue++)wt(ue);ge&&ge({endIterateUnsetNumeric:!0,end:!0})}return qe}function Pt(ie,u,o,c,m,w,M){for(var G=m?Ye.plainObjectReplacers:Ye.nonplainObjectReplacers,ae=G.length;ae--;){var Q=G[ae];if(Q.test(u,o)){var ge=Q.type;if(Ye.revivers[ge]){var Ke=ye[ie];ye[ie]=Ke?[ge].concat(Ke):ge}return Object.assign(o,{type:ge,replaced:!0}),!Xe&&Q.replaceAsync||Q.replace?(M&&M({replacing:!0}),ot(ie,Q[Xe||!Q.replaceAsync?"replace":"replaceAsync"](u,o),tn&&"readonly",o,c,w,ge)):(M&&M({typeDetected:!0}),ot(ie,u,tn&&"readonly",o,c,w,ge))}}return u}return Vt.length?Xe&&J.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Ot(Me,Vt)).then(mt):!Xe&&J.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():J.stringification&&Xe?[mt(Me)]:Xe?mt(Me):Promise.resolve(mt(Me))}},{key:"encapsulateSync",value:function(K,L,J){return this.encapsulate(K,L,ee({throwOnBadSyncType:!0},J,{sync:!0}))}},{key:"encapsulateAsync",value:function(K,L,J){return this.encapsulate(K,L,ee({throwOnBadSyncType:!0},J,{sync:!1}))}},{key:"revive",value:function(K,L){var J=K&&K.$types;if(!J)return K;if(!0===J)return K.$;var Xe=(L=ee({sync:!0},this.options,{},L)).sync,Ye=[],ye={},Ut=!0;J.$&&T(J.$)&&(K=K.$,J=J.$,Ut=!1);var qt=this;function Vt(it,tt){var ie=Te(qt.revivers[it]||[],1)[0];if(!ie)throw new Error("Unregistered type: "+it);return Xe&&!("revive"in ie)?tt:ie[Xe&&ie.revive?"revive":!Xe&&ie.reviveAsync?"reviveAsync":"revive"](tt,ye)}var un=[];function Me(it){return D(it,kt)?void 0:it}var Ot,mt=function tn(){var it=[];if(Object.entries(J).forEach(function(tt){var ot=Te(tt,2),Pt=ot[0],ie=ot[1];"#"!==ie&&[].concat(ie).forEach(function(u){Te(qt.revivers[u]||[null,{}],2)[1].plain&&(it.push({keypath:Pt,type:u}),delete J[Pt])})}),it.length)return it.sort(pe).reduce(function tt(ot,Pt){var ie=Pt.keypath,u=Pt.type;if(P(ot))return ot.then(function(m){return tt(m,{keypath:ie,type:u})});var o=bt(K,ie);if(D(o=Vt(u,o),H))return o.then(function(m){var w=Ze(K,ie,m);w===m&&(K=w)});var c=Ze(K,ie,o);c===o&&(K=c)},void 0)}();return D(mt,H)?Ot=mt.then(function(){return K}):(Ot=function hn(it,tt,ot,Pt,ie){if(!Ut||"$types"!==it){var u=J[it],o=zt(tt);if(o||T(tt)){var c=o?new Array(tt.length):{};for(en(tt).forEach(function(Ke){var Fe=hn(it+(it?".":"")+ut(Ke),tt[Ke],ot||c,c,Ke),at=function(qe){return D(qe,kt)?c[Ke]=void 0:void 0!==qe&&(c[Ke]=qe),qe};D(Fe,H)?un.push(Fe.then(function(_e){return at(_e)})):at(Fe)}),tt=c;Ye.length;){var m=Te(Ye[0],4),G=m[2],ae=m[3],Q=bt(m[0],m[1]);if(void 0===Q)break;G[ae]=Q,Ye.splice(0,1)}}if(!u)return tt;if("#"===u){var ge=bt(ot,tt.slice(1));return void 0===ge&&Ye.push([ot,tt.slice(1),Pt,ie]),ge}return[].concat(u).reduce(function Ke(Fe,at){return D(Fe,H)?Fe.then(function(_e){return Ke(_e,at)}):Vt(at,Fe)},tt)}}("",K,null),un.length&&(Ot=H.resolve(Ot).then(function(it){return H.all([it].concat(un))}).then(function(it){return Te(it,1)[0]}))),P(Ot)?Xe&&L.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():D(Ot,H)?Ot.p.then(Me):Ot:!Xe&&L.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Xe?Me(Ot):Promise.resolve(Me(Ot))}},{key:"reviveSync",value:function(K,L){return this.revive(K,ee({throwOnBadSyncType:!0},L,{sync:!0}))}},{key:"reviveAsync",value:function(K,L){return this.revive(K,ee({throwOnBadSyncType:!0},L,{sync:!1}))}},{key:"register",value:function(K,L){return L=L||{},[].concat(K).forEach(function J(Ge){var Xe=this;if(zt(Ge))return Ge.map(function(Ye){return J.call(Xe,Ye)});Ge&&en(Ge).forEach(function(Ye){if("#"===Ye)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(b.JSON_TYPES.includes(Ye))throw new TypeError("Plain JSON object types are reserved as type names");var ye=Ge[Ye],Ut=ye&&ye.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,qt=Ut.filter(function(ot){return ot.type===Ye});if(qt.length&&(Ut.splice(Ut.indexOf(qt[0]),1),delete this.revivers[Ye],delete this.types[Ye]),"function"==typeof ye){var Vt=ye;ye={test:function(Pt){return Pt&&Pt.constructor===Vt},replace:function(Pt){return ee({},Pt)},revive:function(Pt){return Object.assign(Object.create(Vt.prototype),Pt)}}}else if(zt(ye)){var un=Te(ye,3);ye={test:un[0],replace:un[1],revive:un[2]}}if(ye&&ye.test){var Ot={type:Ye,test:ye.test.bind(ye)};ye.replace&&(Ot.replace=ye.replace.bind(ye)),ye.replaceAsync&&(Ot.replaceAsync=ye.replaceAsync.bind(ye));var it="number"==typeof L.fallback?L.fallback:L.fallback?0:1/0;if(ye.testPlainObjects?this.plainObjectReplacers.splice(it,0,Ot):this.nonplainObjectReplacers.splice(it,0,Ot),ye.revive||ye.reviveAsync){var tt={};ye.revive&&(tt.revive=ye.revive.bind(ye)),ye.reviveAsync&&(tt.reviveAsync=ye.reviveAsync.bind(ye)),this.revivers[Ye]=[tt,{plain:ye.testPlainObjects}]}this.types[Ye]=ye}},this)},this),this}}]),b}(),kt=function b(){A(this,b)};return kt.__typeson__type__="TypesonUndefined",Ve.Undefined=kt,Ve.Promise=H,Ve.isThenable=P,Ve.toStringTag=d,Ve.hasConstructorOf=D,Ve.isObject=Qe,Ve.isPlainObject=T,Ve.isUserObject=function et(b){if(!b||"Object"!==d(b))return!1;var j=xt(b);return!j||D(b,Object)||et(j)},Ve.escapeKeyPathComponent=ut,Ve.unescapeKeyPathComponent=yt,Ve.getByKeyPath=bt,Ve.getJSONType=function Wt(b){return null===b?"null":Array.isArray(b)?"array":f(b)},Ve.JSON_TYPES=["null","boolean","number","string","array","object"],Ve}()}),je=rt(function(F,s){F.exports=function(){function f(u){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}function p(u,o){for(var c=0;c<o.length;c++){var m=o[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}function A(u,o,c){return o in u?Object.defineProperty(u,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[o]=c,u}function S(u,o){var c=Object.keys(u);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(u);o&&(m=m.filter(function(w){return Object.getOwnPropertyDescriptor(u,w).enumerable})),c.push.apply(c,m)}return c}function fe(u){return function(c){if(Array.isArray(c))return he(c)}(u)||function(c){if(typeof Symbol<"u"&&Symbol.iterator in Object(c))return Array.from(c)}(u)||function(c,m){if(c){if("string"==typeof c)return he(c,m);var w=Object.prototype.toString.call(c).slice(8,-1);if("Object"===w&&c.constructor&&(w=c.constructor.name),"Map"===w||"Set"===w)return Array.from(c);if("Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return he(c,m)}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(u,o){(null==o||o>u.length)&&(o=u.length);for(var c=0,m=new Array(o);c<o;c++)m[c]=u[c];return m}function v(u){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}function ee(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function Te(u,o){for(var c=0;c<o.length;c++){var m=o[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}function Ce(u,o,c){return o in u?Object.defineProperty(u,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[o]=c,u}function vt(u,o){var c=Object.keys(u);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(u);o&&(m=m.filter(function(w){return Object.getOwnPropertyDescriptor(u,w).enumerable})),c.push.apply(c,m)}return c}function Oe(u){for(var o=1;o<arguments.length;o++){var c=null!=arguments[o]?arguments[o]:{};o%2?vt(Object(c),!0).forEach(function(m){Ce(u,m,c[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(c)):vt(Object(c)).forEach(function(m){Object.defineProperty(u,m,Object.getOwnPropertyDescriptor(c,m))})}return u}function Be(u,o){return function(m){if(Array.isArray(m))return m}(u)||function(m,w){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(m)){var M=[],G=!0,ae=!1,Q=void 0;try{for(var ge,Ke=m[Symbol.iterator]();!(G=(ge=Ke.next()).done)&&(M.push(ge.value),!w||M.length!==w);G=!0);}catch(Fe){ae=!0,Q=Fe}finally{try{G||null==Ke.return||Ke.return()}finally{if(ae)throw Q}}return M}}(u,o)||an(u,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(u,o){if(u){if("string"==typeof u)return St(u,o);var c=Object.prototype.toString.call(u).slice(8,-1);return"Object"===c&&u.constructor&&(c=u.constructor.name),"Map"===c||"Set"===c?Array.from(u):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?St(u,o):void 0}}function St(u,o){(null==o||o>u.length)&&(o=u.length);for(var c=0,m=new Array(o);c<o;c++)m[c]=u[c];return m}var H=function u(o){ee(this,u),this.p=new Promise(o)};H.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(H.prototype[Symbol.toStringTag]="TypesonPromise"),H.prototype.then=function(u,o){var c=this;return new H(function(m,w){c.p.then(function(M){m(u?u(M):M)}).catch(function(M){return o?o(M):Promise.reject(M)}).then(m,w)})},H.prototype.catch=function(u){return this.then(null,u)},H.resolve=function(u){return new H(function(o){o(u)})},H.reject=function(u){return new H(function(o,c){c(u)})},["all","race"].forEach(function(u){H[u]=function(o){return new H(function(c,m){Promise[u](o.map(function(w){return w&&w.constructor&&"TypesonPromise"===w.constructor.__typeson__type__?w.p:w})).then(c,m)})}});var ft={}.toString,Ne={}.hasOwnProperty,It=Object.getPrototypeOf,xt=Ne.toString;function Kt(u,o){return T(u)&&"function"==typeof u.then&&(!o||"function"==typeof u.catch)}function P(u){return ft.call(u).slice(8,-1)}function d(u,o){if(!u||"object"!==v(u))return!1;var c=It(u);if(!c)return null===o;var m=Ne.call(c,"constructor")&&c.constructor;return"function"!=typeof m?null===o:o===m||null!==o&&xt.call(m)===xt.call(o)||"function"==typeof o&&"string"==typeof m.__typeson__type__&&m.__typeson__type__===o.__typeson__type__}function D(u){return!(!u||"Object"!==P(u))&&(!It(u)||d(u,Object))}function T(u){return u&&"object"===v(u)}function et(u){return u.replace(/~/g,"~0").replace(/\./g,"~1")}function Qe(u){return u.replace(/~1/g,".").replace(/~0/g,"~")}function ut(u,o){if(""===o)return u;var c=o.indexOf(".");if(c>-1){var m=u[Qe(o.slice(0,c))];return void 0===m?void 0:ut(m,o.slice(c+1))}return u[Qe(o)]}function yt(u,o,c){if(""===o)return c;var m=o.indexOf(".");return m>-1?yt(u[Qe(o.slice(0,m))],o.slice(m+1),c):(u[Qe(o)]=c,u)}function bt(u,o,c){return c?o?o(u):u:(u&&u.then||(u=Promise.resolve(u)),o?u.then(o):u)}var Ze=Object.keys,Wt=Array.isArray,en={}.hasOwnProperty,zt=["type","replaced","iterateIn","iterateUnsetNumeric"];function Zt(u){return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];try{return Promise.resolve(u.apply(this,o))}catch(m){return Promise.reject(m)}}}function ce(u,o){if(""===u.keypath)return-1;var c=u.keypath.match(/\./g)||0,m=o.keypath.match(/\./g)||0;return c&&(c=c.length),m&&(m=m.length),c>m?-1:c<m?1:u.keypath<o.keypath?-1:u.keypath>o.keypath}var pe=function(){function u(o){ee(this,u),this.options=o,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return c=u,m=[{key:"stringify",value:function(c,m,w,M){M=Oe(Oe(Oe({},this.options),M),{},{stringification:!0});var G=this.encapsulate(c,null,M);return Wt(G)?JSON.stringify(G[0],m,w):G.then(function(ae){return JSON.stringify(ae,m,w)})}},{key:"stringifySync",value:function(c,m,w,M){return this.stringify(c,m,w,Oe(Oe({throwOnBadSyncType:!0},M),{},{sync:!0}))}},{key:"stringifyAsync",value:function(c,m,w,M){return this.stringify(c,m,w,Oe(Oe({throwOnBadSyncType:!0},M),{},{sync:!1}))}},{key:"parse",value:function(c,m,w){return w=Oe(Oe(Oe({},this.options),w),{},{parse:!0}),this.revive(JSON.parse(c,m),w)}},{key:"parseSync",value:function(c,m,w){return this.parse(c,m,Oe(Oe({throwOnBadSyncType:!0},w),{},{sync:!0}))}},{key:"parseAsync",value:function(c,m,w){return this.parse(c,m,Oe(Oe({throwOnBadSyncType:!0},w),{},{sync:!1}))}},{key:"specialTypeNames",value:function(c,m){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return w.returnTypeNames=!0,this.encapsulate(c,m,w)}},{key:"rootTypeName",value:function(c,m){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return w.iterateNone=!0,this.encapsulate(c,m,w)}},{key:"encapsulate",value:function(c,m,w){var M=Zt(function(ue,Z){return bt(Promise.all(Z.map(function(me){return me[1].p})),function(me){return bt(Promise.all(me.map(Zt(function(ve){var An,Sn,Se=!1,De=[],Ht=Be(Z.splice(0,1),1),At=Be(Ht[0],7),Qt=At[0],nn=At[4],_t=At[5],Rt=Pe(Qt,ve,At[2],At[3],De,!0,At[6]),Xt=d(Rt,H);return An=function(cn){return Se?cn:(Qt?nn[_t]=Rt:ue=Xt?Rt.p:Rt,M(ue,De))},(Sn=function(){if(Qt&&Xt)return bt(Rt.p,function(cn){return nn[_t]=cn,Se=!0,M(ue,De)})}())&&Sn.then?Sn.then(An):An(Sn)}))),function(){return ue})})}),G=(w=Oe(Oe({sync:!0},this.options),w)).sync,ae=this,Q={},ge=[],Ke=[],Fe=[],at=!("cyclic"in w)||w.cyclic,_e=w.encapsulateObserver,qe=Pe("",c,at,m||{},Fe);function dt(ue){var Z=Object.values(Q);if(w.iterateNone)return Z.length?Z[0]:u.getJSONType(ue);if(Z.length){if(w.returnTypeNames)return function ht(u){return function(c){if(Array.isArray(c))return St(c)}(u)||function(c){if(typeof Symbol<"u"&&Symbol.iterator in Object(c))return Array.from(c)}(u)||an(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(Z));ue&&D(ue)&&!en.call(ue,"$types")?ue.$types=Q:ue={$:ue,$types:{$:Q}}}else T(ue)&&en.call(ue,"$types")&&(ue={$:ue,$types:!0});return!w.returnTypeNames&&ue}function nt(ue,Z,me){Object.assign(ue,Z);var ve=zt.map(function(Se){var De=ue[Se];return delete ue[Se],De});me(),zt.forEach(function(Se,De){ue[Se]=ve[De]})}function Pe(ue,Z,me,ve,Se,De,Ht){var At,Qt={},Mt=v(Z),ct=_e?function(bn){var lt=Ht||ve.type||u.getJSONType(Z);_e(Object.assign(bn||Qt,{keypath:ue,value:Z,cyclic:me,stateObj:ve,promisesData:Se,resolvingTypesonPromise:De,awaitingTypesonPromise:d(Z,H)},{type:lt}))}:null;if(["string","boolean","number","undefined"].includes(Mt))return void 0===Z||Number.isNaN(Z)||Z===Number.NEGATIVE_INFINITY||Z===Number.POSITIVE_INFINITY?(At=ve.replaced?Z:wt(ue,Z,ve,Se,!1,De,ct))!==Z&&(Qt={replaced:At}):At=Z,ct&&ct(),At;if(null===Z)return ct&&ct(),Z;if(me&&!ve.iterateIn&&!ve.iterateUnsetNumeric&&Z&&"object"===v(Z)){var nn=ge.indexOf(Z);if(!(nn<0))return Q[ue]="#",ct&&ct({cyclicKeypath:Ke[nn]}),"#"+Ke[nn];!0===me&&(ge.push(Z),Ke.push(ue))}var _t,Gt=D(Z),Rt=Wt(Z),Xt=(Gt||Rt)&&(!ae.plainObjectReplacers.length||ve.replaced)||ve.iterateIn?Z:wt(ue,Z,ve,Se,Gt||Rt,null,ct);if(Xt!==Z?(At=Xt,Qt={replaced:Xt}):""===ue&&d(Z,H)?(Se.push([ue,Z,me,ve,void 0,void 0,ve.type]),At=Z):Rt&&"object"!==ve.iterateIn||"array"===ve.iterateIn?(_t=new Array(Z.length),Qt={clone:_t}):(["function","symbol"].includes(v(Z))||"toJSON"in Z||d(Z,H)||d(Z,Promise)||d(Z,ArrayBuffer))&&!Gt&&"object"!==ve.iterateIn?At=Z:(_t={},ve.addLength&&(_t.length=Z.length),Qt={clone:_t}),ct&&ct(),w.iterateNone)return _t||At;if(!_t)return At;if(ve.iterateIn){var cn=function(lt){var gn={ownKeys:en.call(Z,lt)};nt(ve,gn,function(){var wn=ue+(ue?".":"")+et(lt),Rn=Pe(wn,Z[lt],!!me,ve,Se,De);d(Rn,H)?Se.push([wn,Rn,!!me,ve,_t,lt,ve.type]):void 0!==Rn&&(_t[lt]=Rn)})};for(var kn in Z)cn(kn);ct&&ct({endIterateIn:!0,end:!0})}else Ze(Z).forEach(function(bn){var lt=ue+(ue?".":"")+et(bn);nt(ve,{ownKeys:!0},function(){var gn=Pe(lt,Z[bn],!!me,ve,Se,De);d(gn,H)?Se.push([lt,gn,!!me,ve,_t,bn,ve.type]):void 0!==gn&&(_t[bn]=gn)})}),ct&&ct({endIterateOwn:!0,end:!0});if(ve.iterateUnsetNumeric){for(var An=Z.length,Sn=function(lt){if(!(lt in Z)){var gn=ue+(ue?".":"")+lt;nt(ve,{ownKeys:!1},function(){var wn=Pe(gn,void 0,!!me,ve,Se,De);d(wn,H)?Se.push([gn,wn,!!me,ve,_t,lt,ve.type]):void 0!==wn&&(_t[lt]=wn)})}},Pn=0;Pn<An;Pn++)Sn(Pn);ct&&ct({endIterateUnsetNumeric:!0,end:!0})}return _t}function wt(ue,Z,me,ve,Se,De,Ht){for(var At=Se?ae.plainObjectReplacers:ae.nonplainObjectReplacers,Qt=At.length;Qt--;){var Mt=At[Qt];if(Mt.test(Z,me)){var ct=Mt.type;if(ae.revivers[ct]){var nn=Q[ue];Q[ue]=nn?[ct].concat(nn):ct}return Object.assign(me,{type:ct,replaced:!0}),!G&&Mt.replaceAsync||Mt.replace?(Ht&&Ht({replacing:!0}),Pe(ue,Mt[G||!Mt.replaceAsync?"replace":"replaceAsync"](Z,me),at&&"readonly",me,ve,De,ct)):(Ht&&Ht({typeDetected:!0}),Pe(ue,Z,at&&"readonly",me,ve,De,ct))}}return Z}return Fe.length?G&&w.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(M(qe,Fe)).then(dt):!G&&w.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():w.stringification&&G?[dt(qe)]:G?dt(qe):Promise.resolve(dt(qe))}},{key:"encapsulateSync",value:function(c,m,w){return this.encapsulate(c,m,Oe(Oe({throwOnBadSyncType:!0},w),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(c,m,w){return this.encapsulate(c,m,Oe(Oe({throwOnBadSyncType:!0},w),{},{sync:!1}))}},{key:"revive",value:function(c,m){var w=c&&c.$types;if(!w)return c;if(!0===w)return c.$;var M=(m=Oe(Oe({sync:!0},this.options),m)).sync,G=[],ae={},Q=!0;w.$&&D(w.$)&&(c=c.$,w=w.$,Q=!1);var ge=this;function Ke(dt,nt){var Pe=Be(ge.revivers[dt]||[],1)[0];if(!Pe)throw new Error("Unregistered type: "+dt);return M&&!("revive"in Pe)?nt:Pe[M&&Pe.revive?"revive":!M&&Pe.reviveAsync?"reviveAsync":"revive"](nt,ae)}var Fe=[];function at(dt){return d(dt,Ve)?void 0:dt}var _e,qe=function(){var nt=[];if(Object.entries(w).forEach(function(Pe){var wt=Be(Pe,2),ue=wt[0],Z=wt[1];"#"!==Z&&[].concat(Z).forEach(function(me){Be(ge.revivers[me]||[null,{}],2)[1].plain&&(nt.push({keypath:ue,type:me}),delete w[ue])})}),nt.length)return nt.sort(ce).reduce(function Pe(wt,ue){var Z=ue.keypath,me=ue.type;if(Kt(wt))return wt.then(function(De){return Pe(De,{keypath:Z,type:me})});var ve=ut(c,Z);if(d(ve=Ke(me,ve),H))return ve.then(function(De){var Ht=yt(c,Z,De);Ht===De&&(c=Ht)});var Se=yt(c,Z,ve);Se===ve&&(c=Se)},void 0)}();return d(qe,H)?_e=qe.then(function(){return c}):(_e=function dt(nt,Pe,wt,ue,Z){if(!Q||"$types"!==nt){var me=w[nt],ve=Wt(Pe);if(ve||D(Pe)){var Se=ve?new Array(Pe.length):{};for(Ze(Pe).forEach(function(_t){var Gt=dt(nt+(nt?".":"")+et(_t),Pe[_t],wt||Se,Se,_t),Rt=function(cn){return d(cn,Ve)?Se[_t]=void 0:void 0!==cn&&(Se[_t]=cn),cn};d(Gt,H)?Fe.push(Gt.then(function(Xt){return Rt(Xt)})):Rt(Gt)}),Pe=Se;G.length;){var De=Be(G[0],4),Qt=De[2],Mt=De[3],ct=ut(De[0],De[1]);if(void 0===ct)break;Qt[Mt]=ct,G.splice(0,1)}}if(!me)return Pe;if("#"===me){var nn=ut(wt,Pe.slice(1));return void 0===nn&&G.push([wt,Pe.slice(1),ue,Z]),nn}return[].concat(me).reduce(function _t(Gt,Rt){return d(Gt,H)?Gt.then(function(Xt){return _t(Xt,Rt)}):Ke(Rt,Gt)},Pe)}}("",c,null),Fe.length&&(_e=H.resolve(_e).then(function(dt){return H.all([dt].concat(Fe))}).then(function(dt){return Be(dt,1)[0]}))),Kt(_e)?M&&m.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():d(_e,H)?_e.p.then(at):_e:!M&&m.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():M?at(_e):Promise.resolve(at(_e))}},{key:"reviveSync",value:function(c,m){return this.revive(c,Oe(Oe({throwOnBadSyncType:!0},m),{},{sync:!0}))}},{key:"reviveAsync",value:function(c,m){return this.revive(c,Oe(Oe({throwOnBadSyncType:!0},m),{},{sync:!1}))}},{key:"register",value:function(c,m){return m=m||{},[].concat(c).forEach(function w(M){var G=this;if(Wt(M))return M.map(function(ae){return w.call(G,ae)});M&&Ze(M).forEach(function(ae){if("#"===ae)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(u.JSON_TYPES.includes(ae))throw new TypeError("Plain JSON object types are reserved as type names");var Q=M[ae],ge=Q&&Q.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Ke=ge.filter(function(nt){return nt.type===ae});if(Ke.length&&(ge.splice(ge.indexOf(Ke[0]),1),delete this.revivers[ae],delete this.types[ae]),"function"==typeof Q){var Fe=Q;Q={test:function(Pe){return Pe&&Pe.constructor===Fe},replace:function(Pe){return Oe({},Pe)},revive:function(Pe){return Object.assign(Object.create(Fe.prototype),Pe)}}}else if(Wt(Q)){var at=Be(Q,3);Q={test:at[0],replace:at[1],revive:at[2]}}if(Q&&Q.test){var _e={type:ae,test:Q.test.bind(Q)};Q.replace&&(_e.replace=Q.replace.bind(Q)),Q.replaceAsync&&(_e.replaceAsync=Q.replaceAsync.bind(Q));var qe="number"==typeof m.fallback?m.fallback:m.fallback?0:Number.POSITIVE_INFINITY;if(Q.testPlainObjects?this.plainObjectReplacers.splice(qe,0,_e):this.nonplainObjectReplacers.splice(qe,0,_e),Q.revive||Q.reviveAsync){var dt={};Q.revive&&(dt.revive=Q.revive.bind(Q)),Q.reviveAsync&&(dt.reviveAsync=Q.reviveAsync.bind(Q)),this.revivers[ae]=[dt,{plain:Q.testPlainObjects}]}this.types[ae]=Q}},this)},this),this}}],m&&Te(c.prototype,m),u;var c,m}(),Ve=function u(){ee(this,u)};Ve.__typeson__type__="TypesonUndefined",pe.Undefined=Ve,pe.Promise=H,pe.isThenable=Kt,pe.toStringTag=P,pe.hasConstructorOf=d,pe.isObject=T,pe.isPlainObject=D,pe.isUserObject=function u(o){if(!o||"Object"!==P(o))return!1;var c=It(o);return!c||d(o,Object)||u(c)},pe.escapeKeyPathComponent=et,pe.unescapeKeyPathComponent=Qe,pe.getByKeyPath=ut,pe.getJSONType=function(o){return null===o?"null":Array.isArray(o)?"array":v(o)},pe.JSON_TYPES=["null","boolean","number","string","array","object"];for(var kt={userObject:{test:function(o,c){return pe.isUserObject(o)},replace:function(o){return function(m){for(var w=1;w<arguments.length;w++){var M=null!=arguments[w]?arguments[w]:{};w%2?S(Object(M),!0).forEach(function(G){A(m,G,M[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(M)):S(Object(M)).forEach(function(G){Object.defineProperty(m,G,Object.getOwnPropertyDescriptor(M,G))})}return m}({},o)},revive:function(o){return o}}},b=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(o,c){return!!Array.isArray(o)&&(Object.keys(o).some(function(m){return String(Number.parseInt(m))!==m})&&(c.iterateIn="object",c.addLength=!0),!0)},replace:function(o,c){return c.iterateUnsetNumeric=!0,o},revive:function(o){if(Array.isArray(o))return o;var c=[];return Object.keys(o).forEach(function(m){c[m]=o[m]}),c}}},{sparseUndefined:{test:function(o,c){return void 0===o&&!1===c.ownKeys},replace:function(o){return 0},revive:function(o){}}}],j={undef:{test:function(o,c){return void 0===o&&(c.ownKeys||!("ownKeys"in c))},replace:function(o){return 0},revive:function(o){return new pe.Undefined}}},K={StringObject:{test:function(o){return"String"===pe.toStringTag(o)&&"object"===f(o)},replace:function(o){return String(o)},revive:function(o){return new String(o)}},BooleanObject:{test:function(o){return"Boolean"===pe.toStringTag(o)&&"object"===f(o)},replace:function(o){return!!o},revive:function(o){return new Boolean(o)}},NumberObject:{test:function(o){return"Number"===pe.toStringTag(o)&&"object"===f(o)},replace:function(o){return Number(o)},revive:function(o){return new Number(o)}}},L=[{nan:{test:function(o){return Number.isNaN(o)},replace:function(o){return"NaN"},revive:function(o){return Number.NaN}}},{infinity:{test:function(o){return o===Number.POSITIVE_INFINITY},replace:function(o){return"Infinity"},revive:function(o){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(o){return o===Number.NEGATIVE_INFINITY},replace:function(o){return"-Infinity"},revive:function(o){return Number.NEGATIVE_INFINITY}}}],J={date:{test:function(o){return"Date"===pe.toStringTag(o)},replace:function(o){var c=o.getTime();return Number.isNaN(c)?"NaN":c},revive:function(o){return"NaN"===o?new Date(Number.NaN):new Date(o)}}},Ge={regexp:{test:function(o){return"RegExp"===pe.toStringTag(o)},replace:function(o){return{source:o.source,flags:(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":"")}},revive:function(o){return new RegExp(o.source,o.flags)}}},Xe={map:{test:function(o){return"Map"===pe.toStringTag(o)},replace:function(o){return fe(o.entries())},revive:function(o){return new Map(o)}}},Ye={set:{test:function(o){return"Set"===pe.toStringTag(o)},replace:function(o){return fe(o.values())},revive:function(o){return new Set(o)}}},ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ut=new Uint8Array(256),qt=0;qt<64;qt++)Ut[ye.charCodeAt(qt)]=qt;var Vt=function(o,c,m){null==m&&(m=o.byteLength);for(var w=new Uint8Array(o,c||0,m),M=w.length,G="",ae=0;ae<M;ae+=3)G+=ye[w[ae]>>2],G+=ye[(3&w[ae])<<4|w[ae+1]>>4],G+=ye[(15&w[ae+1])<<2|w[ae+2]>>6],G+=ye[63&w[ae+2]];return M%3==2?G=G.slice(0,-1)+"=":M%3==1&&(G=G.slice(0,-2)+"=="),G},tn=function(o){var c,m,w,M,G=o.length,ae=.75*o.length,Q=0;"="===o[o.length-1]&&(ae--,"="===o[o.length-2]&&ae--);for(var ge=new ArrayBuffer(ae),Ke=new Uint8Array(ge),Fe=0;Fe<G;Fe+=4)c=Ut[o.charCodeAt(Fe)],m=Ut[o.charCodeAt(Fe+1)],w=Ut[o.charCodeAt(Fe+2)],M=Ut[o.charCodeAt(Fe+3)],Ke[Q++]=c<<2|m>>4,Ke[Q++]=(15&m)<<4|w>>2,Ke[Q++]=(3&w)<<6|63&M;return ge},un={arraybuffer:{test:function(o){return"ArrayBuffer"===pe.toStringTag(o)},replace:function(o,c){c.buffers||(c.buffers=[]);var m=c.buffers.indexOf(o);return m>-1?{index:m}:(c.buffers.push(o),Vt(o))},revive:function(o,c){if(c.buffers||(c.buffers=[]),"object"===f(o))return c.buffers[o.index];var m=tn(o);return c.buffers.push(m),m}}},hn=typeof self>"u"?st:self,Me={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(u){var o=u,c=hn[o];c&&(Me[u.toLowerCase()]={test:function(w){return pe.toStringTag(w)===o},replace:function(w,M){var G=w.buffer,ae=w.byteOffset,Q=w.length;M.buffers||(M.buffers=[]);var ge=M.buffers.indexOf(G);return ge>-1?{index:ge,byteOffset:ae,length:Q}:(M.buffers.push(G),{encoded:Vt(G),byteOffset:ae,length:Q})},revive:function(w,M){M.buffers||(M.buffers=[]);var G,ae=w.byteOffset,Q=w.length;return"index"in w?G=M.buffers[w.index]:(G=tn(w.encoded),M.buffers.push(G)),new c(G,ae,Q)}})});var mt={dataview:{test:function(o){return"DataView"===pe.toStringTag(o)},replace:function(o,c){var m=o.buffer,w=o.byteOffset,M=o.byteLength;c.buffers||(c.buffers=[]);var G=c.buffers.indexOf(m);return G>-1?{index:G,byteOffset:w,byteLength:M}:(c.buffers.push(m),{encoded:Vt(m),byteOffset:w,byteLength:M})},revive:function(o,c){c.buffers||(c.buffers=[]);var m,w=o.byteOffset,M=o.byteLength;return"index"in o?m=c.buffers[o.index]:(m=tn(o.encoded),c.buffers.push(m)),new DataView(m,w,M)}}},Ot={IntlCollator:{test:function(o){return pe.hasConstructorOf(o,Intl.Collator)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.Collator(o.locale,o)}},IntlDateTimeFormat:{test:function(o){return pe.hasConstructorOf(o,Intl.DateTimeFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.DateTimeFormat(o.locale,o)}},IntlNumberFormat:{test:function(o){return pe.hasConstructorOf(o,Intl.NumberFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.NumberFormat(o.locale,o)}}};function it(u){for(var o=new Uint8Array(u.length),c=0;c<u.length;c++)o[c]=u.charCodeAt(c);return o.buffer}var tt={file:{test:function(o){return"File"===pe.toStringTag(o)},replace:function(o){var c=new XMLHttpRequest;if(c.overrideMimeType("text/plain; charset=x-user-defined"),c.open("GET",URL.createObjectURL(o),!1),c.send(),200!==c.status&&0!==c.status)throw new Error("Bad File access: "+c.status);return{type:o.type,stringContents:c.responseText,name:o.name,lastModified:o.lastModified}},revive:function(o){var c=o.name,m=o.type,M=o.lastModified;return new File([it(o.stringContents)],c,{type:m,lastModified:M})},replaceAsync:function(o){return new pe.Promise(function(c,m){var w=new FileReader;w.addEventListener("load",function(){c({type:o.type,stringContents:w.result,name:o.name,lastModified:o.lastModified})}),w.addEventListener("error",function(){m(w.error)}),w.readAsBinaryString(o)})}}},ot={bigint:{test:function(o){return"bigint"==typeof o},replace:function(o){return String(o)},revive:function(o){return BigInt(o)}}},Pt={bigintObject:{test:function(o){return"object"===f(o)&&pe.hasConstructorOf(o,BigInt)},replace:function(o){return String(o)},revive:function(o){return new Object(BigInt(o))}}},ie={cryptokey:{test:function(o){return"CryptoKey"===pe.toStringTag(o)&&o.extractable},replaceAsync:function(o){return new pe.Promise(function(c,m){crypto.subtle.exportKey("jwk",o).catch(function(w){m(w)}).then(function(w){c({jwk:w,algorithm:o.algorithm,usages:o.usages})})})},revive:function(o){return crypto.subtle.importKey("jwk",o.jwk,o.algorithm,!0,o.usages)}}};return[kt,j,b,K,L,J,Ge,{imagedata:{test:function(o){return"ImageData"===pe.toStringTag(o)},replace:function(o){return{array:fe(o.data),width:o.width,height:o.height}},revive:function(o){return new ImageData(new Uint8ClampedArray(o.array),o.width,o.height)}}},{imagebitmap:{test:function(o){return"ImageBitmap"===pe.toStringTag(o)||o&&o.dataset&&"ImageBitmap"===o.dataset.toStringTag},replace:function(o){var c=document.createElement("canvas");return c.getContext("2d").drawImage(o,0,0),c.toDataURL()},revive:function(o){var c=document.createElement("canvas"),m=c.getContext("2d"),w=document.createElement("img");return w.addEventListener("load",function(){m.drawImage(w,0,0)}),w.src=o,c},reviveAsync:function(o){var c=document.createElement("canvas"),m=c.getContext("2d"),w=document.createElement("img");return w.addEventListener("load",function(){m.drawImage(w,0,0)}),w.src=o,createImageBitmap(c)}}},tt,{file:tt.file,filelist:{test:function(o){return"FileList"===pe.toStringTag(o)},replace:function(o){for(var c=[],m=0;m<o.length;m++)c[m]=o.item(m);return c},revive:function(o){return new(function(){function c(){(function h(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")})(this,c),this._files=arguments[0],this.length=this._files.length}return w=c,M=[{key:"item",value:function(w){return this._files[w]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}],M&&p(w.prototype,M),c;var w,M}())(o)}}},{blob:{test:function(o){return"Blob"===pe.toStringTag(o)},replace:function(o){var c=new XMLHttpRequest;if(c.overrideMimeType("text/plain; charset=x-user-defined"),c.open("GET",URL.createObjectURL(o),!1),c.send(),200!==c.status&&0!==c.status)throw new Error("Bad Blob access: "+c.status);return{type:o.type,stringContents:c.responseText}},revive:function(o){var c=o.type;return new Blob([it(o.stringContents)],{type:c})},replaceAsync:function(o){return new pe.Promise(function(c,m){var w=new FileReader;w.addEventListener("load",function(){c({type:o.type,stringContents:w.result})}),w.addEventListener("error",function(){m(w.error)}),w.readAsBinaryString(o)})}}}].concat("function"==typeof Map?Xe:[],"function"==typeof Set?Ye:[],"function"==typeof ArrayBuffer?un:[],"function"==typeof Uint8Array?Me:[],"function"==typeof DataView?mt:[],typeof Intl<"u"?Ot:[],typeof crypto<"u"?ie:[],typeof BigInt<"u"?[ot,Pt]:[])}()}),We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nt=new Uint8Array(256),ze=0;ze<64;ze++)Nt[We.codePointAt(ze)]=ze;var Tt=function(s,f,h){null==h&&(h=s.byteLength);for(var p=new Uint8Array(s,f||0,h),A=p.length,S="",fe=0;fe<A;fe+=3)S+=We[p[fe]>>2],S+=We[(3&p[fe])<<4|p[fe+1]>>4],S+=We[(15&p[fe+1])<<2|p[fe+2]>>6],S+=We[63&p[fe+2]];return A%3==2?S=S.slice(0,-1)+"=":A%3==1&&(S=S.slice(0,-2)+"=="),S},Yt=function(s){var A,S,fe,he,f=s.length,h=.75*s.length,p=0;"="===s[s.length-1]&&(h--,"="===s[s.length-2]&&h--);for(var v=new ArrayBuffer(h),ee=new Uint8Array(v),Te=0;Te<f;Te+=4)A=Nt[s.codePointAt(Te)],S=Nt[s.codePointAt(Te+1)],fe=Nt[s.codePointAt(Te+2)],he=Nt[s.codePointAt(Te+3)],ee[p++]=A<<2|S>>4,ee[p++]=(15&S)<<4|fe>>2,ee[p++]=(3&fe)<<6|63&he;return v},Lt=typeof self>"u"?global:self,Re={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(F){var s=F,f=Lt[s];f&&(Re[F.toLowerCase()+"2"]={test:function(h){return Dt.toStringTag(h)===s},replace:function(h){return{buffer:h.buffer,byteOffset:h.byteOffset,length:h.length}},revive:function(h){return new f(h.buffer,h.byteOffset,h.length)}})});var be={arraybuffer:{test:function(F){return"ArrayBuffer"===Dt.toStringTag(F)},replace:function(F){return Tt(F,0,F.byteLength)},revive:function(F){return Yt(F)}}},Ue=(new Dt).register(je),rn="FileReaderSync"in self,sn=[],pn=0;Ue.register([be,Re,{blob2:{test:function(F){return"Blob"===Dt.toStringTag(F)},replace:function(F){if(F.isClosed)throw new Error("The Blob is closed");if(rn){var s=Et(F,"binary"),f=Tt(s,0,s.byteLength);return{type:F.type,data:f}}sn.push(F);var h={type:F.type,data:{start:pn,end:pn+F.size}};return pn+=F.size,h},finalize:function(F,s){F.data=Tt(s,0,s.byteLength)},revive:function(F){var s=F.type;return new Blob([Yt(F.data)],{type:s})}}}]),Ue.mustFinalize=function(){return sn.length>0},Ue.finalize=function(F){return re(void 0,void 0,void 0,function(){var s,f,h,p,A,S,fe,v,ee;return xe(this,function(Te){switch(Te.label){case 0:return[4,Ft(new Blob(sn),"binary")];case 1:if(s=Te.sent(),F)for(f=0,h=F;f<h.length;f++)if((p=h[f]).$types)for(fe in(S=(A=p.$types).$)&&(A=A.$),A)(v=Ue.types[A[fe]])&&v.finalize&&(ee=V.ZP.getByKeyPath(p,S?"$."+fe:fe),v.finalize(ee,s.slice(ee.start,ee.end)));return sn=[],[2]}})})};var En=1,Kn_Stream=function(){},z=rt(function(F,s){!function(f){var h="object"==typeof process&&process.env?process.env:self;f.parser=function(P){return new vt(P)},f.CParser=vt,f.CStream=Be,f.createStream=function Oe(P){return new Be(P)},f.MAX_BUFFER_LENGTH=10485760,f.DEBUG="debug"===h.CDEBUG,f.INFO="debug"===h.CDEBUG||"info"===h.CDEBUG,f.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var fe,p={textNode:void 0,numberNode:""},A=f.EVENTS.filter(function(P){return"error"!==P&&"end"!==P}),S=0;for(var he in f.STATE={BEGIN:S++,VALUE:S++,OPEN_OBJECT:S++,CLOSE_OBJECT:S++,OPEN_ARRAY:S++,CLOSE_ARRAY:S++,TEXT_ESCAPE:S++,STRING:S++,BACKSLASH:S++,END:S++,OPEN_KEY:S++,CLOSE_KEY:S++,TRUE:S++,TRUE2:S++,TRUE3:S++,FALSE:S++,FALSE2:S++,FALSE3:S++,FALSE4:S++,NULL:S++,NULL2:S++,NULL3:S++,NUMBER_DECIMAL_POINT:S++,NUMBER_DIGIT:S++},f.STATE)f.STATE[f.STATE[he]]=he;S=f.STATE;const v_tab=9,v_lineFeed=10,v_carriageReturn=13,v_space=32,v_doubleQuote=34,v_plus=43,v_comma=44,v_minus=45,v_period=46,v__0=48,v__9=57,v_colon=58,v_E=69,v_openBracket=91,v_backslash=92,v_closeBracket=93,v_a=97,v_b=98,v_e=101,v_f=102,v_l=108,v_n=110,v_r=114,v_s=115,v_t=116,v_u=117,v_openBrace=123,v_closeBrace=125;function Te(P){for(var d in p)P[d]=p[d]}Object.create||(Object.create=function(P){function d(){this.__proto__=P}return d.prototype=P,new d}),Object.getPrototypeOf||(Object.getPrototypeOf=function(P){return P.__proto__}),Object.keys||(Object.keys=function(P){var d=[];for(var D in P)P.hasOwnProperty(D)&&d.push(D);return d});var Ce=/[\\"\n]/g;function vt(P){if(!(this instanceof vt))return new vt(P);var d=this;Te(d),d.bufferCheckPosition=f.MAX_BUFFER_LENGTH,d.q=d.c=d.p="",d.opt=P||{},d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.state=S.BEGIN,d.stack=new Array,d.position=d.column=0,d.line=1,d.slashed=!1,d.unicodeI=0,d.unicodeS=null,d.depth=0,ht(d,"onready")}vt.prototype={end:function(){It(this)},write:function Kt(P){var d=this;if(this.error)throw this.error;if(d.closed)return Ne(d,"Cannot write after close. Assign an onready handler.");if(null===P)return It(d);var D=0,T=P.charCodeAt(0),et=d.p;for(f.DEBUG&&console.log("write -> ["+P+"]");T&&(et=T,d.c=T=P.charCodeAt(D++),et!==T?d.p=et:et=d.p,T);)switch(f.DEBUG&&console.log(D,T,f.STATE[d.state]),d.position++,T===v_lineFeed?(d.line++,d.column=0):d.column++,d.state){case S.BEGIN:T===v_openBrace?d.state=S.OPEN_OBJECT:T===v_openBracket?d.state=S.OPEN_ARRAY:xt(T)||Ne(d,"Non-whitespace before {[.");continue;case S.OPEN_KEY:case S.OPEN_OBJECT:if(xt(T))continue;if(d.state===S.OPEN_KEY)d.stack.push(S.CLOSE_KEY);else{if(T===v_closeBrace){ht(d,"onopenobject"),this.depth++,ht(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||S.VALUE;continue}d.stack.push(S.CLOSE_OBJECT)}T===v_doubleQuote?d.state=S.STRING:Ne(d,'Malformed object key should start with "');continue;case S.CLOSE_KEY:case S.CLOSE_OBJECT:if(xt(T))continue;T===v_colon?(d.state===S.CLOSE_OBJECT?(d.stack.push(S.CLOSE_OBJECT),St(d,"onopenobject"),this.depth++):St(d,"onkey"),d.state=S.VALUE):T===v_closeBrace?(an(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||S.VALUE):T===v_comma?(d.state===S.CLOSE_OBJECT&&d.stack.push(S.CLOSE_OBJECT),St(d),d.state=S.OPEN_KEY):Ne(d,"Bad object");continue;case S.OPEN_ARRAY:case S.VALUE:if(xt(T))continue;if(d.state===S.OPEN_ARRAY){if(ht(d,"onopenarray"),this.depth++,d.state=S.VALUE,T===v_closeBracket){ht(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||S.VALUE;continue}d.stack.push(S.CLOSE_ARRAY)}T===v_doubleQuote?d.state=S.STRING:T===v_openBrace?d.state=S.OPEN_OBJECT:T===v_openBracket?d.state=S.OPEN_ARRAY:T===v_t?d.state=S.TRUE:T===v_f?d.state=S.FALSE:T===v_n?d.state=S.NULL:T===v_minus?d.numberNode+="-":v__0<=T&&T<=v__9?(d.numberNode+=String.fromCharCode(T),d.state=S.NUMBER_DIGIT):Ne(d,"Bad value");continue;case S.CLOSE_ARRAY:if(T===v_comma)d.stack.push(S.CLOSE_ARRAY),St(d,"onvalue"),d.state=S.VALUE;else if(T===v_closeBracket)an(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||S.VALUE;else{if(xt(T))continue;Ne(d,"Bad array")}continue;case S.STRING:void 0===d.textNode&&(d.textNode="");var Qe=D-1,ut=d.slashed,yt=d.unicodeI;e:for(;;){for(f.DEBUG&&console.log(D,T,f.STATE[d.state],ut);yt>0;)if(d.unicodeS+=String.fromCharCode(T),T=P.charCodeAt(D++),d.position++,4===yt?(d.textNode+=String.fromCharCode(parseInt(d.unicodeS,16)),yt=0,Qe=D-1):yt++,!T)break e;if(T===v_doubleQuote&&!ut){d.state=d.stack.pop()||S.VALUE,d.textNode+=P.substring(Qe,D-1),d.position+=D-1-Qe;break}if(T===v_backslash&&!ut&&(ut=!0,d.textNode+=P.substring(Qe,D-1),d.position+=D-1-Qe,T=P.charCodeAt(D++),d.position++,!T))break;if(ut){if(ut=!1,T===v_n?d.textNode+="\n":T===v_r?d.textNode+="\r":T===v_t?d.textNode+="\t":T===v_f?d.textNode+="\f":T===v_b?d.textNode+="\b":T===v_u?(yt=1,d.unicodeS=""):d.textNode+=String.fromCharCode(T),T=P.charCodeAt(D++),d.position++,Qe=D-1,T)continue;break}Ce.lastIndex=D;var bt=Ce.exec(P);if(null===bt){d.textNode+=P.substring(Qe,(D=P.length+1)-1),d.position+=D-1-Qe;break}if(D=bt.index+1,!(T=P.charCodeAt(bt.index))){d.textNode+=P.substring(Qe,D-1),d.position+=D-1-Qe;break}}d.slashed=ut,d.unicodeI=yt;continue;case S.TRUE:T===v_r?d.state=S.TRUE2:Ne(d,"Invalid true started with t"+T);continue;case S.TRUE2:T===v_u?d.state=S.TRUE3:Ne(d,"Invalid true started with tr"+T);continue;case S.TRUE3:T===v_e?(ht(d,"onvalue",!0),d.state=d.stack.pop()||S.VALUE):Ne(d,"Invalid true started with tru"+T);continue;case S.FALSE:T===v_a?d.state=S.FALSE2:Ne(d,"Invalid false started with f"+T);continue;case S.FALSE2:T===v_l?d.state=S.FALSE3:Ne(d,"Invalid false started with fa"+T);continue;case S.FALSE3:T===v_s?d.state=S.FALSE4:Ne(d,"Invalid false started with fal"+T);continue;case S.FALSE4:T===v_e?(ht(d,"onvalue",!1),d.state=d.stack.pop()||S.VALUE):Ne(d,"Invalid false started with fals"+T);continue;case S.NULL:T===v_u?d.state=S.NULL2:Ne(d,"Invalid null started with n"+T);continue;case S.NULL2:T===v_l?d.state=S.NULL3:Ne(d,"Invalid null started with nu"+T);continue;case S.NULL3:T===v_l?(ht(d,"onvalue",null),d.state=d.stack.pop()||S.VALUE):Ne(d,"Invalid null started with nul"+T);continue;case S.NUMBER_DECIMAL_POINT:T===v_period?(d.numberNode+=".",d.state=S.NUMBER_DIGIT):Ne(d,"Leading zero not followed by .");continue;case S.NUMBER_DIGIT:v__0<=T&&T<=v__9?d.numberNode+=String.fromCharCode(T):T===v_period?(-1!==d.numberNode.indexOf(".")&&Ne(d,"Invalid number has two dots"),d.numberNode+="."):T===v_e||T===v_E?((-1!==d.numberNode.indexOf("e")||-1!==d.numberNode.indexOf("E"))&&Ne(d,"Invalid number has two exponential"),d.numberNode+="e"):T===v_plus||T===v_minus?(et===v_e||et===v_E||Ne(d,"Invalid symbol in number"),d.numberNode+=String.fromCharCode(T)):(H(d),D--,d.state=d.stack.pop()||S.VALUE);continue;default:Ne(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&function ee(P){var d=Math.max(f.MAX_BUFFER_LENGTH,10),D=0;for(var T in p){var et=void 0===P[T]?0:P[T].length;et>d&&("text"===T?closeText(P):Ne(P,"Max buffer length exceeded: "+T)),D=Math.max(D,et)}P.bufferCheckPosition=f.MAX_BUFFER_LENGTH-D+P.position}(d),d},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{fe=Kn_Stream}catch{fe=function(){}}function Be(P){if(!(this instanceof Be))return new Be(P);this._parser=new vt(P),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var d=this;fe.apply(d),this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(D){d.emit("error",D),d._parser.error=null},A.forEach(function(D){Object.defineProperty(d,"on"+D,{get:function(){return d._parser["on"+D]},set:function(T){if(!T)return d.removeAllListeners(D),d._parser["on"+D]=T,T;d.on(D,T)},enumerable:!0,configurable:!1})})}function ht(P,d,D){f.INFO&&console.log("-- emit",d,D),P[d]&&P[d](D)}function an(P,d,D){St(P),ht(P,d,D)}function St(P,d){P.textNode=function ft(P,d){return void 0===d||(P.trim&&(d=d.trim()),P.normalize&&(d=d.replace(/\s+/g," "))),d}(P.opt,P.textNode),void 0!==P.textNode&&ht(P,d||"onvalue",P.textNode),P.textNode=void 0}function H(P){P.numberNode&&ht(P,"onvalue",parseFloat(P.numberNode)),P.numberNode=""}function Ne(P,d){return St(P),d+="\nLine: "+P.line+"\nColumn: "+P.column+"\nChar: "+P.c,d=new Error(d),P.error=d,ht(P,"onerror",d),P}function It(P){return(P.state!==S.VALUE||0!==P.depth)&&Ne(P,"Unexpected end"),St(P),P.c="",P.closed=!0,ht(P,"onend"),vt.call(P,P.opt),P}function xt(P){return P===v_carriageReturn||P===v_lineFeed||P===v_space||P===v_tab}(Be.prototype=Object.create(fe.prototype,{constructor:{value:Be}})).write=function(P){P=new Buffer(P);for(var d=0;d<P.length;d++){var D=P[d];if(this.bytes_remaining>0){for(var T=0;T<this.bytes_remaining;T++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+T]=P[T];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,d=d+T-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&D>=128){if(D>=194&&D<=223&&(this.bytes_in_sequence=2),D>=224&&D<=239&&(this.bytes_in_sequence=3),D>=240&&D<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+d>P.length){for(var et=0;et<=P.length-1-d;et++)this.temp_buffs[this.bytes_in_sequence][et]=P[d+et];return this.bytes_remaining=d+this.bytes_in_sequence-P.length,!0}this.string=P.slice(d,d+this.bytes_in_sequence).toString(),d=d+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var Qe=d;Qe<P.length&&!(P[Qe]>=128);Qe++);this.string=P.slice(d,Qe).toString(),this._parser.write(this.string),this.emit("data",this.string),d=Qe-1}}},Be.prototype.end=function(P){return P&&P.length&&this._parser.write(P.toString()),this._parser.end(),!0},Be.prototype.on=function(P,d){var D=this;return!D._parser["on"+P]&&-1!==A.indexOf(P)&&(D._parser["on"+P]=function(){var T=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);T.splice(0,0,P),D.emit.apply(D,T)}),fe.prototype.on.call(D,P,d)},Be.prototype.destroy=function(){Te(this._parser),this.emit("close")}}(s)});function He(F,s,f){return re(this,void 0,void 0,function(){function h(){return re(this,void 0,void 0,function(){var Oe,Be,ht;return xe(this,function(H){switch(H.label){case 0:Oe=function(ft){var Ne,It,xt,Kt,P,d,D,T,et,Qe,ut,yt;return xe(this,function(bt){switch(bt.label){case 0:if(!ft.rows)return[2,"break"];if(!ft.rows.incomplete&&0===ft.rows.length)return[2,"continue"];if(v&&V.ZP.ignoreTransaction(function(){return v(ee)}),It=F.table(Ne=ft.tableName),xt=he.tables.filter(function(Ze){return Ze.name===Ne})[0].schema,!It){if(f.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(ft.tableName," is missing in installed database"))}if(!f.acceptChangedPrimaryKey&&xt.split(",")[0]!=It.schema.primKey.src)throw new Error("Primary key differs for table ".concat(ft.tableName,". "));for(Kt=ft.rows,P=[],d=0;d<Kt.length&&!(D=Kt[d]).incomplete;d++)P.push(Ue.revive(D));return et=(T=f.filter)?P.filter(ft.inbound?function(Ze){return T(Ne,Ze)}:function(Ze){return T(Ne,Ze[1],Ze[0])}):P,Qe=ft.inbound?[void 0,et]:[et.map(function(Ze){return Ze[0]}),P.map(function(Ze){return Ze[1]})],ut=Qe[0],yt=Qe[1],f.overwriteValues?[4,It.bulkPut(yt,ut)]:[3,2];case 1:return bt.sent(),[3,4];case 2:return[4,It.bulkAdd(yt,ut)];case 3:bt.sent(),bt.label=4;case 4:return ee.completedRows+=P.length,P.incomplete||(ee.completedTables+=1),Kt.splice(0,P.length),[2]}})},Be=0,ht=he.data,H.label=1;case 1:return Be<ht.length?[5,Oe(ht[Be])]:[3,4];case 2:if("break"===H.sent())return[3,4];H.label=3;case 3:return Be++,[3,1];case 4:for(;he.data.length>0&&he.data[0].rows&&!he.data[0].rows.incomplete;)he.data.splice(0,1);return A.done()||A.eof()?[3,8]:fe?(A.pullSync(p),[3,7]):[3,5];case 5:return[4,V.ZP.waitFor(A.pullAsync(p))];case 6:H.sent(),H.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var p,A,fe,he,v,ee,Te,Ce;return xe(this,function(Oe){switch(Oe.label){case 0:return[4,jt(s,p=(f=f||{}).chunkSizeBytes||1048576)];case 1:if(A=Oe.sent(),fe="FileReaderSync"in self,he=A.result.data,!f.acceptNameDiff&&F.name!==he.databaseName)throw new Error("Name differs. Current database name is ".concat(F.name," but export is ").concat(he.databaseName));if(!f.acceptVersionDiff&&F.verno!==he.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(F.verno," but export is ").concat(he.databaseVersion));if(v=f.progressCallback,ee={done:!1,completedRows:0,completedTables:0,totalRows:he.tables.reduce(function(Be,ht){return Be+ht.rowCount},0),totalTables:he.tables.length},v&&V.ZP.ignoreTransaction(function(){return v(ee)}),!f.clearTablesBeforeImport)return[3,5];Te=0,Ce=F.tables,Oe.label=2;case 2:return Te<Ce.length?[4,Ce[Te].clear()]:[3,5];case 3:Oe.sent(),Oe.label=4;case 4:return Te++,[3,2];case 5:return f.noTransaction?[4,h()]:[3,7];case 6:return Oe.sent(),[3,9];case 7:return[4,F.transaction("rw",F.tables,h)];case 8:Oe.sent(),Oe.label=9;case 9:return ee.done=!0,v&&V.ZP.ignoreTransaction(function(){return v(ee)}),[2]}})})}function jt(F,s){return re(this,void 0,void 0,function(){var f,h;return xe(this,function(p){switch(p.label){case 0:f="slice"in F?function R(F){var s=0,f=function q(F){var h,A,S,s=z.parser(),f=0,p=[],fe=!1,he=!1;return s.onopenobject=function(v){var ee={incomplete:!0};h||(h=ee),A&&(p.push([S,A,he]),F&&(he?A.push(ee):A[S]=ee)),A=ee,S=v,he=!1,++f},s.onkey=function(v){return S=v},s.onvalue=function(v){return he?A.push(v):A[S]=v},s.oncloseobject=function(){var v;if(delete A.incomplete,S=null,0==--f)fe=!0;else{var ee=A;v=p.pop(),S=v[0],A=v[1],he=v[2],F||(he?A.push(ee):A[S]=ee)}},s.onopenarray=function(){var v=[];v.incomplete=!0,h||(h=v),A&&(p.push([S,A,he]),F&&(he?A.push(v):A[S]=v)),A=v,he=!0,S=null,++f},s.onclosearray=function(){var v;if(delete A.incomplete,S=null,0==--f)fe=!0;else{var ee=A;v=p.pop(),S=v[0],A=v[1],he=v[2],F||(he?A.push(ee):A[S]=ee)}},{write:function(v){return s.write(v),h},done:function(){return fe}}}(!0),h={pullAsync:function(p){return re(this,void 0,void 0,function(){var A,S,fe;return xe(this,function(he){switch(he.label){case 0:return A=F.slice(s,s+p),s+=p,[4,Ft(A,"text")];case 1:return S=he.sent(),fe=f.write(S),h.result=fe||{},[2,fe]}})})},pullSync:function(p){var A=F.slice(s,s+p);s+=p;var S=Et(A,"text"),fe=f.write(S);return h.result=fe||{},fe},done:function(){return f.done()},eof:function(){return s>=F.size},result:{}};return h}(F):F,p.label=1;case 1:return f.eof()?[3,3]:[4,f.pullAsync(s)];case 2:return p.sent(),f.result.data&&f.result.data.data?[3,3]:[3,1];case 3:if(!(h=f.result)||"dexie"!=h.formatName)throw new Error("Given file is not a dexie export");if(h.formatVersion>En)throw new Error("Format version ".concat(h.formatVersion," not supported"));if(!h.data)throw new Error("No data in export file");if(!h.data.databaseName)throw new Error("Missing databaseName in export file");if(!h.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!h.data.tables)throw new Error("Missing tables in export file");return[2,f]}})})}V.ZP.prototype.export=function(F){return function vn(F,s){return re(this,void 0,void 0,function(){function f(){return re(this,void 0,void 0,function(){var v,ee,Te,Ce,vt,Oe,Be,ht;return xe(this,function(St){switch(St.label){case 0:return[4,Promise.all(F.tables.map(function(H){return H.count()}))];case 1:(v=St.sent()).forEach(function(H,ft){return p[ft].rowCount=H}),he.totalRows=v.reduce(function(H,ft){return H+ft}),ee=JSON.stringify(S,void 0,A?2:void 0),Te=ee.lastIndexOf("]"),Ce=ee.substring(0,Te),h.push(Ce),vt=s.filter,Oe=function(H){var ft,Ne,It,xt,P,d,D,T,et,Qe;return xe(this,function(yt){switch(yt.label){case 0:ft=F.table(H),It=!!(Ne=ft.schema.primKey).keyPath,xt=s.numRowsPerChunk||2e3,P=JSON.stringify(It?{tableName:ft.name,inbound:!0,rows:[]}:{tableName:ft.name,inbound:!1,rows:[]},void 0,A?2:void 0),A&&(P=P.split("\n").join("\n    ")),d=P.lastIndexOf("]"),h.push(P.substring(0,d)),D=null,T=0,et=!0,Qe=function(){var bt,Ze,Wt,en,zt,Zt,ce,pe;return xe(this,function(Ve){switch(Ve.label){case 0:return fe&&V.ZP.ignoreTransaction(function(){return fe(he)}),[4,(bt=null==D?ft.limit(xt):ft.where(":id").above(D).limit(xt)).toArray()];case 1:return 0===(Ze=Ve.sent()).length?[2,"break"]:(null!=D&&T>0&&(h.push(","),A&&h.push("\n      ")),et=Ze.length===xt,It?(Wt=vt?Ze.filter(function(kt){return vt(H,kt)}):Ze,en=Wt.map(function(kt){return Ue.encapsulate(kt)}),Ue.mustFinalize()?[4,V.ZP.waitFor(Ue.finalize(en))]:[3,3]):[3,4]);case 2:Ve.sent(),Ve.label=3;case 3:return pe=JSON.stringify(en,void 0,A?2:void 0),A&&(pe=pe.split("\n").join("\n      ")),h.push(new Blob([pe.substring(1,pe.length-1)])),T=Wt.length,D=Ze.length>0?V.ZP.getByKeyPath(Ze[Ze.length-1],Ne.keyPath):null,[3,8];case 4:return[4,bt.primaryKeys()];case 5:return zt=Ve.sent(),Zt=zt.map(function(kt,b){return[kt,Ze[b]]}),vt&&(Zt=Zt.filter(function(kt){return vt(H,kt[1],kt[0])})),ce=Zt.map(function(kt){return Ue.encapsulate(kt)}),Ue.mustFinalize()?[4,V.ZP.waitFor(Ue.finalize(ce))]:[3,7];case 6:Ve.sent(),Ve.label=7;case 7:pe=JSON.stringify(ce,void 0,A?2:void 0),A&&(pe=pe.split("\n").join("\n      ")),h.push(new Blob([pe.substring(1,pe.length-1)])),T=Zt.length,D=zt.length>0?zt[zt.length-1]:null,Ve.label=8;case 8:return he.completedRows+=Ze.length,[2]}})},yt.label=1;case 1:return et?[5,Qe()]:[3,3];case 2:return"break"===yt.sent()?[3,3]:[3,1];case 3:return h.push(P.substr(d)),he.completedTables+=1,he.completedTables<he.totalTables&&h.push(","),[2]}})},Be=0,ht=p,St.label=2;case 2:return Be<ht.length?[5,Oe(ht[Be].name)]:[3,5];case 3:St.sent(),St.label=4;case 4:return Be++,[3,2];case 5:return h.push(ee.substr(Te)),he.done=!0,fe&&V.ZP.ignoreTransaction(function(){return fe(he)}),[2]}})})}var h,p,A,S,fe,he;return xe(this,function(v){switch(v.label){case 0:s=s||{},h=[],p=F.tables.map(function(ee){return{name:ee.name,schema:Le(ee),rowCount:0}}),A=s.prettyJson,S={formatName:"dexie",formatVersion:1,data:{databaseName:F.name,databaseVersion:F.verno,tables:p,data:[]}},fe=s.progressCallback,he={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:F.tables.length},v.label=1;case 1:return v.trys.push([1,,6,7]),s.noTransaction?[4,f()]:[3,3];case 2:return v.sent(),[3,5];case 3:return[4,F.transaction("r",F.tables,f)];case 4:v.sent(),v.label=5;case 5:return[3,7];case 6:return Ue.finalize(),[7];case 7:return[2,new Blob(h,{type:"text/json"})]}})})}(this,F)},V.ZP.prototype.import=function(F,s){return He(this,F,s)},V.ZP.import=function(F,s){return function we(F,s){return re(this,void 0,void 0,function(){var h,p,A;return xe(this,function(S){switch(S.label){case 0:return[4,jt(F,(s=s||{}).chunkSizeBytes||1048576)];case 1:return h=S.sent(),(A=new V.ZP((p=h.result.data).databaseName)).version(p.databaseVersion).stores(function gt(F){for(var s={},f=0,h=F.tables;f<h.length;f++){var p=h[f];s[p.name]=p.schema}return s}(p)),[4,He(A,h,s)];case 2:return S.sent(),[2,A]}})})}(F,s)};class ke extends V.ZP{constructor(s){super("correctExam"+s),(0,te.Z)(this,"examId",void 0),(0,te.Z)(this,"exams",void 0),(0,te.Z)(this,"templates",void 0),(0,te.Z)(this,"alignImages",void 0),(0,te.Z)(this,"nonAlignImages",void 0),this.examId=s,this.version(3).stores({exams:"++id",templates:"++id, examId, [examId+pageNumber]",alignImages:"++id, examId,[examId+pageNumber]",nonAlignImages:"++id, examId,[examId+pageNumber]"})}resetDatabase(){var s=this;return(0,N.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.exams.clear(),s.templates.clear(),s.alignImages.clear(),s.nonAlignImages.clear()})})()}removeElementForExam(){var s=this;return(0,N.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.exams.delete(s.examId),s.templates.where("examId").equals(s.examId).toArray().then(f=>s.templates.bulkDelete(f.map(h=>h.id))),s.alignImages.where("examId").equals(s.examId).toArray().then(f=>s.alignImages.bulkDelete(f.map(h=>h.id))),s.nonAlignImages.where("examId").equals(s.examId).toArray().then(f=>s.nonAlignImages.bulkDelete(f.map(h=>h.id)))})})()}removePageAlignForExam(){var s=this;return(0,N.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.exams.delete(s.examId),s.alignImages.where("examId").equals(s.examId).toArray().then(f=>s.alignImages.bulkDelete(f.map(h=>h.id)))})})()}removeElementForExamForPages(s,f){var h=this;return(0,N.Z)(function*(){yield h.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=f).toArray().then(p=>h.alignImages.bulkDelete(p.map(A=>A.id))),h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=f).toArray().then(p=>h.nonAlignImages.bulkDelete(p.map(A=>A.id)))})})()}removePageAlignForExamForPage(s){var f=this;return(0,N.Z)(function*(){yield f.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{f.alignImages.where({examId:f.examId,pageNumber:s}).delete()})})()}removePageNonAlignForExamForPage(s){var f=this;return(0,N.Z)(function*(){yield f.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{f.nonAlignImages.where({examId:f.examId,pageNumber:s}).delete()})})()}removePageAlignForExamForPages(s,f){var h=this;return(0,N.Z)(function*(){yield h.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=f).toArray().then(p=>h.alignImages.bulkDelete(p.map(A=>A.id)))})})()}removePageNonAlignForExamForPages(s,f){var h=this;return(0,N.Z)(function*(){yield h.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=f).toArray().then(p=>h.nonAlignImages.bulkDelete(p.map(A=>A.id)))})})()}removeExam(){var s=this;return(0,N.Z)(function*(){yield s.transaction("rw","exams",()=>{s.exams.delete(s.examId)})})()}addAligneImage(s){var f=this;return(0,N.Z)(function*(){yield f.alignImages.put(s)})()}addNonAligneImage(s){var f=this;return(0,N.Z)(function*(){yield f.nonAlignImages.put(s)})()}export(s){return super.export(s)}import(s,f){return super.import(s,f)}countPageTemplate(){var s=this;return(0,N.Z)(function*(){return yield s.templates.where("examId").equals(s.examId).count()})()}countAlignImage(){var s=this;return(0,N.Z)(function*(){return yield s.alignImages.where("examId").equals(s.examId).count()})()}countNonAlignImage(){var s=this;return(0,N.Z)(function*(){return yield s.nonAlignImages.where("examId").equals(s.examId).count()})()}getFirstNonAlignImage(s){var f=this;return(0,N.Z)(function*(){return yield f.nonAlignImages.where({examId:f.examId,pageNumber:s}).first()})()}getFirstAlignImage(s){var f=this;return(0,N.Z)(function*(){return yield f.alignImages.where({examId:f.examId,pageNumber:s}).first()})()}getFirstTemplate(s){var f=this;return(0,N.Z)(function*(){return yield f.templates.where({examId:f.examId,pageNumber:s}).first()})()}getNonAlignImageBetweenAndSortByPageNumber(s,f){var h=this;return(0,N.Z)(function*(){return yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=f).sortBy("pageNumber")})()}getAlignImageBetweenAndSortByPageNumber(s,f){var h=this;return(0,N.Z)(function*(){return yield h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=f).sortBy("pageNumber")})()}getNonAlignImagesForPageNumbers(s){var f=this;return(0,N.Z)(function*(){return yield f.nonAlignImages.where({examId:f.examId}).filter(h=>s.includes(h.pageNumber)).sortBy("pageNumber")})()}getAlignImagesForPageNumbers(s){var f=this;return(0,N.Z)(function*(){return yield f.alignImages.where({examId:f.examId}).filter(h=>s.includes(h.pageNumber)).sortBy("pageNumber")})()}getNonAlignSortByPageNumber(){var s=this;return(0,N.Z)(function*(){return yield s.nonAlignImages.where({examId:s.examId}).sortBy("pageNumber")})()}moveNonAlignPages(s,f){var h=this;return(0,N.Z)(function*(){s!==f&&(yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber===s).modify(p=>{p.pageNumber=-1e3}),s<f?yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>s&&p.pageNumber<=f).modify(p=>{p.pageNumber=p.pageNumber-1}):yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber<s&&p.pageNumber>=f).modify(p=>{p.pageNumber=p.pageNumber+1}),yield h.nonAlignImages.where({examId:h.examId}).filter(p=>-1e3===p.pageNumber).modify(p=>{p.pageNumber=f}))})()}moveAlignPages(s,f){var h=this;return(0,N.Z)(function*(){s!==f&&(yield h.alignImages.where({examId:h.examId,pageNumber:s}).modify(p=>{p.pageNumber=-1e3}),s<f?yield h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>s&&p.pageNumber<=f).modify(p=>{p.pageNumber=p.pageNumber-1}):yield h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber<s&&p.pageNumber>=f).modify(p=>{p.pageNumber=p.pageNumber+1}),yield h.alignImages.where({examId:h.examId,pageNumber:-1e3}).modify(p=>{p.pageNumber=f}))})()}getAlignSortByPageNumber(){var s=this;return(0,N.Z)(function*(){return yield s.alignImages.where({examId:s.examId}).sortBy("pageNumber")})()}addExam(){var s=this;return(0,N.Z)(function*(){return yield s.exams.add({id:s.examId})})()}addTemplate(s){var f=this;return(0,N.Z)(function*(){return yield f.templates.add({examId:f.examId,pageNumber:s.pageNumber,value:s.value})})()}countNonAlignWithPageNumber(s){var f=this;return(0,N.Z)(function*(){return yield f.nonAlignImages.where({examId:f.examId,pageNumber:s}).count()})()}countAlignWithPageNumber(s){var f=this;return(0,N.Z)(function*(){return yield f.alignImages.where({examId:f.examId,pageNumber:s}).count()})()}}class $t{constructor(){(0,te.Z)(this,"dbs",new Map)}resetDatabase(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s);return void 0===h&&(h=new ke(s),f.dbs.set(s,h)),h.resetDatabase()})()}removeExam(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s);return void 0===h&&(h=new ke(s),f.dbs.set(s,h)),h.removeExam()})()}removeElementForExam(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s);return void 0===h&&(h=new ke(s),f.dbs.set(s,h)),h.removeElementForExam()})()}removeElementForExamForPages(s,f,h){var p=this;return(0,N.Z)(function*(){let A=p.dbs.get(s);return void 0===A&&(A=new ke(s),p.dbs.set(s,A)),A.removeElementForExamForPages(f,h)})()}removePageAlignForExam(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s);return void 0===h&&(h=new ke(s),f.dbs.set(s,h)),h.removePageAlignForExam()})()}removePageAlignForExamForPage(s,f){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new ke(s),h.dbs.set(s,p)),p.removePageAlignForExamForPage(f)})()}removePageNonAlignForExamForPage(s,f){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new ke(s),h.dbs.set(s,p)),p.removePageNonAlignForExamForPage(f)})()}removePageAlignForExamForPages(s,f,h){var p=this;return(0,N.Z)(function*(){let A=p.dbs.get(s);return void 0===A&&(A=new ke(s),p.dbs.set(s,A)),A.removePageAlignForExamForPages(f,h)})()}removePageNonAlignForExamForPages(s,f,h){var p=this;return(0,N.Z)(function*(){let A=p.dbs.get(s);return void 0===A&&(A=new ke(s),p.dbs.set(s,A)),A.removePageNonAlignForExamForPages(f,h)})()}addAligneImage(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s.examId);return void 0===h&&(h=new ke(s.examId),f.dbs.set(s.examId,h)),h.addAligneImage(s)})()}addNonAligneImage(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s.examId);return void 0===h&&(h=new ke(s.examId),f.dbs.set(s.examId,h)),h.addNonAligneImage(s)})()}export(s,f){let h=this.dbs.get(s);return void 0===h&&(h=new ke(s),this.dbs.set(s,h)),h.export(f)}import(s,f,h){let p=this.dbs.get(s);return void 0===p&&(p=new ke(s),this.dbs.set(s,p)),p.import(f,h)}countPageTemplate(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s);return void 0===h&&(h=new ke(s),f.dbs.set(s,h)),h.countPageTemplate()})()}countAlignImage(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s);return void 0===h&&(h=new ke(s),f.dbs.set(s,h)),h.countAlignImage()})()}countNonAlignImage(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s);return void 0===h&&(h=new ke(s),f.dbs.set(s,h)),h.countNonAlignImage()})()}getFirstNonAlignImage(s,f){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new ke(s),h.dbs.set(s,p)),p.getFirstNonAlignImage(f)})()}getFirstAlignImage(s,f){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new ke(s),h.dbs.set(s,p)),p.getFirstAlignImage(f)})()}getFirstTemplate(s,f){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new ke(s),h.dbs.set(s,p)),p.getFirstTemplate(f)})()}getNonAlignImageBetweenAndSortByPageNumber(s,f,h){var p=this;return(0,N.Z)(function*(){let A=p.dbs.get(s);return void 0===A&&(A=new ke(s),p.dbs.set(s,A)),A.getNonAlignImageBetweenAndSortByPageNumber(f,h)})()}getAlignImageBetweenAndSortByPageNumber(s,f,h){var p=this;return(0,N.Z)(function*(){let A=p.dbs.get(s);return void 0===A&&(A=new ke(s),p.dbs.set(s,A)),A.getAlignImageBetweenAndSortByPageNumber(f,h)})()}getNonAlignImagesForPageNumbers(s,f){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new ke(s),h.dbs.set(s,p)),p.getNonAlignImagesForPageNumbers(f)})()}getAlignImagesForPageNumbers(s,f){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new ke(s),h.dbs.set(s,p)),p.getAlignImagesForPageNumbers(f)})()}getNonAlignSortByPageNumber(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s);return void 0===h&&(h=new ke(s),f.dbs.set(s,h)),h.getNonAlignSortByPageNumber()})()}getAlignSortByPageNumber(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s);return void 0===h&&(h=new ke(s),f.dbs.set(s,h)),h.getAlignSortByPageNumber()})()}addExam(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s);return void 0===h&&(h=new ke(s),f.dbs.set(s,h)),h.addExam()})()}addTemplate(s){var f=this;return(0,N.Z)(function*(){let h=f.dbs.get(s.examId);return void 0===h&&(h=new ke(s.examId),f.dbs.set(s.examId,h)),h.addTemplate(s)})()}countNonAlignWithPageNumber(s,f){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new ke(s),h.dbs.set(s,p)),p.countNonAlignWithPageNumber(f)})()}countAlignWithPageNumber(s,f){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new ke(s),h.dbs.set(s,p)),p.countAlignWithPageNumber(f)})()}moveNonAlignPages(s,f,h){var p=this;return(0,N.Z)(function*(){let A=p.dbs.get(s);return void 0===A&&(A=new ke(s),p.dbs.set(s,A)),A.moveNonAlignPages(f,h)})()}moveAlignPages(s,f,h){var p=this;return(0,N.Z)(function*(){let A=p.dbs.get(s);return void 0===A&&(A=new ke(s),p.dbs.set(s,A)),A.moveAlignPages(f,h)})()}}new $t},5592:($e,Ie,se)=>{"use strict";se.d(Ie,{y:()=>gt});var N=se(305),te=se(5113),V=se(4850),Ae=se(8407),re=se(2653),xe=se(4674),Le=se(1441);let gt=(()=>{class rt{constructor(je){je&&(this._subscribe=je)}lift(je){const We=new rt;return We.source=this,We.operator=je,We}subscribe(je,We,Nt){const ze=function st(rt){return rt&&rt instanceof N.Lv||function Et(rt){return rt&&(0,xe.m)(rt.next)&&(0,xe.m)(rt.error)&&(0,xe.m)(rt.complete)}(rt)&&(0,te.Nn)(rt)}(je)?je:new N.Hp(je,We,Nt);return(0,Le.x)(()=>{const{operator:Tt,source:Yt}=this;ze.add(Tt?Tt.call(ze,Yt):Yt?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(je){try{return this._subscribe(je)}catch(We){je.error(We)}}forEach(je,We){return new(We=Ft(We))((Nt,ze)=>{const Tt=new N.Hp({next:Yt=>{try{je(Yt)}catch(Lt){ze(Lt),Tt.unsubscribe()}},error:ze,complete:Nt});this.subscribe(Tt)})}_subscribe(je){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(je)}[V.L](){return this}pipe(...je){return(0,Ae.U)(je)(this)}toPromise(je){return new(je=Ft(je))((We,Nt)=>{let ze;this.subscribe(Tt=>ze=Tt,Tt=>Nt(Tt),()=>We(ze))})}}return rt.create=Dt=>new rt(Dt),rt})();function Ft(rt){var Dt;return null!==(Dt=rt??re.config.Promise)&&void 0!==Dt?Dt:Promise}},305:($e,Ie,se)=>{"use strict";se.d(Ie,{Hp:()=>Nt,Lv:()=>rt});var N=se(4674),te=se(5113),V=se(2653),Ae=se(3894),re=se(2420);const xe=Ft("C",void 0,void 0);function Ft(Re,be,Ue){return{kind:Re,value:be,error:Ue}}var Et=se(7599),st=se(1441);class rt extends te.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,te.Nn)(be)&&be.add(this)):this.destination=Lt}static create(be,Ue,rn){return new Nt(be,Ue,rn)}next(be){this.isStopped?Yt(function gt(Re){return Ft("N",Re,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Yt(function Le(Re){return Ft("E",void 0,Re)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Yt(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Dt=Function.prototype.bind;function je(Re,be){return Dt.call(Re,be)}class We{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Ue}=this;if(Ue.next)try{Ue.next(be)}catch(rn){ze(rn)}}error(be){const{partialObserver:Ue}=this;if(Ue.error)try{Ue.error(be)}catch(rn){ze(rn)}else ze(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Ue){ze(Ue)}}}class Nt extends rt{constructor(be,Ue,rn){let sn;if(super(),(0,N.m)(be)||!be)sn={next:be??void 0,error:Ue??void 0,complete:rn??void 0};else{let pn;this&&V.config.useDeprecatedNextContext?(pn=Object.create(be),pn.unsubscribe=()=>this.unsubscribe(),sn={next:be.next&&je(be.next,pn),error:be.error&&je(be.error,pn),complete:be.complete&&je(be.complete,pn)}):sn=be}this.destination=new We(sn)}}function ze(Re){V.config.useDeprecatedSynchronousErrorHandling?(0,st.O)(Re):(0,Ae.h)(Re)}function Yt(Re,be){const{onStoppedNotification:Ue}=V.config;Ue&&Et.z.setTimeout(()=>Ue(Re,be))}const Lt={closed:!0,next:re.Z,error:function Tt(Re){throw Re},complete:re.Z}},2653:($e,Ie,se)=>{"use strict";se.d(Ie,{config:()=>N});const N={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7599:($e,Ie,se)=>{"use strict";se.d(Ie,{z:()=>N});const N={setTimeout(te,V,...Ae){const{delegate:re}=N;return re?.setTimeout?re.setTimeout(te,V,...Ae):setTimeout(te,V,...Ae)},clearTimeout(te){const{delegate:V}=N;return(V?.clearTimeout||clearTimeout)(te)},delegate:void 0}},4850:($e,Ie,se)=>{"use strict";se.d(Ie,{L:()=>N});const N="function"==typeof Symbol&&Symbol.observable||"@@observable"},9732:($e,Ie,se)=>{"use strict";se.d(Ie,{B:()=>te});const te=(0,se(2306).d)(V=>function(re){V(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((xe,Le)=>`${Le+1}) ${xe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re})},9039:($e,Ie,se)=>{"use strict";function N(te,V){if(te){const Ae=te.indexOf(V);0<=Ae&&te.splice(Ae,1)}}se.d(Ie,{P:()=>N})},2306:($e,Ie,se)=>{"use strict";function N(te){const Ae=te(re=>{Error.call(re),re.stack=(new Error).stack});return Ae.prototype=Object.create(Error.prototype),Ae.prototype.constructor=Ae,Ae}se.d(Ie,{d:()=>N})},1441:($e,Ie,se)=>{"use strict";se.d(Ie,{O:()=>Ae,x:()=>V});var N=se(2653);let te=null;function V(re){if(N.config.useDeprecatedSynchronousErrorHandling){const xe=!te;if(xe&&(te={errorThrown:!1,error:null}),re(),xe){const{errorThrown:Le,error:gt}=te;if(te=null,Le)throw gt}}else re()}function Ae(re){N.config.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=re)}},2737:($e,Ie,se)=>{"use strict";function N(te){return te}se.d(Ie,{y:()=>N})},4674:($e,Ie,se)=>{"use strict";function N(te){return"function"==typeof te}se.d(Ie,{m:()=>N})},2420:($e,Ie,se)=>{"use strict";function N(){}se.d(Ie,{Z:()=>N})},3894:($e,Ie,se)=>{"use strict";se.d(Ie,{h:()=>V});var N=se(2653),te=se(7599);function V(Ae){te.z.setTimeout(()=>{const{onUnhandledError:re}=N.config;if(!re)throw Ae;re(Ae)})}},7061:($e,Ie,se)=>{var N=se(8698).default;function te(){"use strict";$e.exports=te=function(){return V},$e.exports.__esModule=!0,$e.exports.default=$e.exports;var V={},Ae=Object.prototype,re=Ae.hasOwnProperty,xe=Object.defineProperty||function(z,R,q){z[R]=q.value},Le="function"==typeof Symbol?Symbol:{},gt=Le.iterator||"@@iterator",Ft=Le.asyncIterator||"@@asyncIterator",Et=Le.toStringTag||"@@toStringTag";function st(z,R,q){return Object.defineProperty(z,R,{value:q,enumerable:!0,configurable:!0,writable:!0}),z[R]}try{st({},"")}catch{st=function(q,de,we){return q[de]=we}}function rt(z,R,q,de){var Ee=Object.create((R&&R.prototype instanceof We?R:We).prototype),He=new vn(de||[]);return xe(Ee,"_invoke",{value:rn(z,q,He)}),Ee}function Dt(z,R,q){try{return{type:"normal",arg:z.call(R,q)}}catch(de){return{type:"throw",arg:de}}}V.wrap=rt;var je={};function We(){}function Nt(){}function ze(){}var Tt={};st(Tt,gt,function(){return this});var Yt=Object.getPrototypeOf,Lt=Yt&&Yt(Yt(En([])));Lt&&Lt!==Ae&&re.call(Lt,gt)&&(Tt=Lt);var Re=ze.prototype=We.prototype=Object.create(Tt);function be(z){["next","throw","return"].forEach(function(R){st(z,R,function(q){return this._invoke(R,q)})})}function Ue(z,R){function q(we,Ee,He,jt){var Jt=Dt(z[we],z,Ee);if("throw"!==Jt.type){var ke=Jt.arg,$t=ke.value;return $t&&"object"==N($t)&&re.call($t,"__await")?R.resolve($t.__await).then(function(mn){q("next",mn,He,jt)},function(mn){q("throw",mn,He,jt)}):R.resolve($t).then(function(mn){ke.value=mn,He(ke)},function(mn){return q("throw",mn,He,jt)})}jt(Jt.arg)}var de;xe(this,"_invoke",{value:function(Ee,He){function jt(){return new R(function(Jt,ke){q(Ee,He,Jt,ke)})}return de=de?de.then(jt,jt):jt()}})}function rn(z,R,q){var de="suspendedStart";return function(we,Ee){if("executing"===de)throw new Error("Generator is already running");if("completed"===de){if("throw"===we)throw Ee;return{value:void 0,done:!0}}for(q.method=we,q.arg=Ee;;){var He=q.delegate;if(He){var jt=sn(He,q);if(jt){if(jt===je)continue;return jt}}if("next"===q.method)q.sent=q._sent=q.arg;else if("throw"===q.method){if("suspendedStart"===de)throw de="completed",q.arg;q.dispatchException(q.arg)}else"return"===q.method&&q.abrupt("return",q.arg);de="executing";var Jt=Dt(z,R,q);if("normal"===Jt.type){if(de=q.done?"completed":"suspendedYield",Jt.arg===je)continue;return{value:Jt.arg,done:q.done}}"throw"===Jt.type&&(de="completed",q.method="throw",q.arg=Jt.arg)}}}function sn(z,R){var q=R.method,de=z.iterator[q];if(void 0===de)return R.delegate=null,"throw"===q&&z.iterator.return&&(R.method="return",R.arg=void 0,sn(z,R),"throw"===R.method)||"return"!==q&&(R.method="throw",R.arg=new TypeError("The iterator does not provide a '"+q+"' method")),je;var we=Dt(de,z.iterator,R.arg);if("throw"===we.type)return R.method="throw",R.arg=we.arg,R.delegate=null,je;var Ee=we.arg;return Ee?Ee.done?(R[z.resultName]=Ee.value,R.next=z.nextLoc,"return"!==R.method&&(R.method="next",R.arg=void 0),R.delegate=null,je):Ee:(R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,je)}function pn(z){var R={tryLoc:z[0]};1 in z&&(R.catchLoc=z[1]),2 in z&&(R.finallyLoc=z[2],R.afterLoc=z[3]),this.tryEntries.push(R)}function fn(z){var R=z.completion||{};R.type="normal",delete R.arg,z.completion=R}function vn(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(pn,this),this.reset(!0)}function En(z){if(z){var R=z[gt];if(R)return R.call(z);if("function"==typeof z.next)return z;if(!isNaN(z.length)){var q=-1,de=function we(){for(;++q<z.length;)if(re.call(z,q))return we.value=z[q],we.done=!1,we;return we.value=void 0,we.done=!0,we};return de.next=de}}return{next:Kn}}function Kn(){return{value:void 0,done:!0}}return Nt.prototype=ze,xe(Re,"constructor",{value:ze,configurable:!0}),xe(ze,"constructor",{value:Nt,configurable:!0}),Nt.displayName=st(ze,Et,"GeneratorFunction"),V.isGeneratorFunction=function(z){var R="function"==typeof z&&z.constructor;return!!R&&(R===Nt||"GeneratorFunction"===(R.displayName||R.name))},V.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,ze):(z.__proto__=ze,st(z,Et,"GeneratorFunction")),z.prototype=Object.create(Re),z},V.awrap=function(z){return{__await:z}},be(Ue.prototype),st(Ue.prototype,Ft,function(){return this}),V.AsyncIterator=Ue,V.async=function(z,R,q,de,we){void 0===we&&(we=Promise);var Ee=new Ue(rt(z,R,q,de),we);return V.isGeneratorFunction(R)?Ee:Ee.next().then(function(He){return He.done?He.value:Ee.next()})},be(Re),st(Re,Et,"Generator"),st(Re,gt,function(){return this}),st(Re,"toString",function(){return"[object Generator]"}),V.keys=function(z){var R=Object(z),q=[];for(var de in R)q.push(de);return q.reverse(),function we(){for(;q.length;){var Ee=q.pop();if(Ee in R)return we.value=Ee,we.done=!1,we}return we.done=!0,we}},V.values=En,vn.prototype={constructor:vn,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(fn),!R)for(var q in this)"t"===q.charAt(0)&&re.call(this,q)&&!isNaN(+q.slice(1))&&(this[q]=void 0)},stop:function(){this.done=!0;var R=this.tryEntries[0].completion;if("throw"===R.type)throw R.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var q=this;function de(ke,$t){return He.type="throw",He.arg=R,q.next=ke,$t&&(q.method="next",q.arg=void 0),!!$t}for(var we=this.tryEntries.length-1;we>=0;--we){var Ee=this.tryEntries[we],He=Ee.completion;if("root"===Ee.tryLoc)return de("end");if(Ee.tryLoc<=this.prev){var jt=re.call(Ee,"catchLoc"),Jt=re.call(Ee,"finallyLoc");if(jt&&Jt){if(this.prev<Ee.catchLoc)return de(Ee.catchLoc,!0);if(this.prev<Ee.finallyLoc)return de(Ee.finallyLoc)}else if(jt){if(this.prev<Ee.catchLoc)return de(Ee.catchLoc,!0)}else{if(!Jt)throw new Error("try statement without catch or finally");if(this.prev<Ee.finallyLoc)return de(Ee.finallyLoc)}}}},abrupt:function(R,q){for(var de=this.tryEntries.length-1;de>=0;--de){var we=this.tryEntries[de];if(we.tryLoc<=this.prev&&re.call(we,"finallyLoc")&&this.prev<we.finallyLoc){var Ee=we;break}}Ee&&("break"===R||"continue"===R)&&Ee.tryLoc<=q&&q<=Ee.finallyLoc&&(Ee=null);var He=Ee?Ee.completion:{};return He.type=R,He.arg=q,Ee?(this.method="next",this.next=Ee.finallyLoc,je):this.complete(He)},complete:function(R,q){if("throw"===R.type)throw R.arg;return"break"===R.type||"continue"===R.type?this.next=R.arg:"return"===R.type?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):"normal"===R.type&&q&&(this.next=q),je},finish:function(R){for(var q=this.tryEntries.length-1;q>=0;--q){var de=this.tryEntries[q];if(de.finallyLoc===R)return this.complete(de.completion,de.afterLoc),fn(de),je}},catch:function(R){for(var q=this.tryEntries.length-1;q>=0;--q){var de=this.tryEntries[q];if(de.tryLoc===R){var we=de.completion;if("throw"===we.type){var Ee=we.arg;fn(de)}return Ee}}throw new Error("illegal catch attempt")},delegateYield:function(R,q,de){return this.delegate={iterator:En(R),resultName:q,nextLoc:de},"next"===this.method&&(this.arg=void 0),je}},V}$e.exports=te,$e.exports.__esModule=!0,$e.exports.default=$e.exports},8698:$e=>{function Ie(se){return $e.exports=Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},$e.exports.__esModule=!0,$e.exports.default=$e.exports,Ie(se)}$e.exports=Ie,$e.exports.__esModule=!0,$e.exports.default=$e.exports},4687:($e,Ie,se)=>{var N=se(7061)();$e.exports=N;try{regeneratorRuntime=N}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=N:Function("r","regeneratorRuntime = r")(N)}},9505:($e,Ie,se)=>{"use strict";se.d(Ie,{ZP:()=>Cn});const N=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,te=Object.keys,V=Array.isArray;function Ae(t,e){return"object"!=typeof e||te(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||N.Promise||(N.Promise=Promise);const re=Object.getPrototypeOf,xe={}.hasOwnProperty;function Le(t,e){return xe.call(t,e)}function gt(t,e){"function"==typeof e&&(e=e(re(t))),(typeof Reflect>"u"?te:Reflect.ownKeys)(e).forEach(n=>{Et(t,n,e[n])})}const Ft=Object.defineProperty;function Et(t,e,n,r){Ft(t,e,Ae(n&&Le(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function st(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Et(t.prototype,"constructor",t),{extend:gt.bind(null,t.prototype)}}}}const rt=Object.getOwnPropertyDescriptor;function Dt(t,e){let n;return rt(t,e)||(n=re(t))&&Dt(n,e)}const je=[].slice;function We(t,e,n){return je.call(t,e,n)}function Nt(t,e){return e(t)}function ze(t){if(!t)throw new Error("Assertion Failed")}function Tt(t){N.setImmediate?setImmediate(t):setTimeout(t,0)}function Yt(t,e){return t.reduce((n,r,i)=>{var a=e(r,i);return a&&(n[a[0]]=a[1]),n},{})}function Lt(t,e){if(Le(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var a=Lt(t,e[r]);n.push(a)}return n}var l=e.indexOf(".");if(-1!==l){var g=t[e.substr(0,l)];return void 0===g?void 0:Lt(g,e.substr(l+1))}}function Re(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){ze("string"!=typeof n&&"length"in n);for(var r=0,i=e.length;r<i;++r)Re(t,e[r],n[r])}else{var a=e.indexOf(".");if(-1!==a){var l=e.substr(0,a),g=e.substr(a+1);if(""===g)void 0===n?V(t)&&!isNaN(parseInt(l))?t.splice(l,1):delete t[l]:t[l]=n;else{var y=t[l];y&&Le(t,l)||(y=t[l]={}),Re(y,g,n)}}else void 0===n?V(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function be(t){var e={};for(var n in t)Le(t,n)&&(e[n]=t[n]);return e}const Ue=[].concat;function rn(t){return Ue.apply([],t)}const sn="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(rn([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>N[t]),pn=sn.map(t=>N[t]);Yt(sn,t=>[t,!0]);let fn=null;function vn(t){fn=typeof WeakMap<"u"&&new WeakMap;const e=En(t);return fn=null,e}function En(t){if(!t||"object"!=typeof t)return t;let e=fn&&fn.get(t);if(e)return e;if(V(t)){e=[],fn&&fn.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(En(t[n]))}else if(pn.indexOf(t.constructor)>=0)e=t;else{const a=re(t);for(var i in e=a===Object.prototype?{}:Object.create(a),fn&&fn.set(t,e),t)Le(t,i)&&(e[i]=En(t[i]))}return e}const{toString:Kn}={};function z(t){return Kn.call(t).slice(8,-1)}const R=typeof Symbol<"u"?Symbol.iterator:"@@iterator",q="symbol"==typeof R?function(t){var e;return null!=t&&(e=t[R])&&e.apply(t)}:function(){return null},de={};function we(t){var e,n,r,i;if(1===arguments.length){if(V(t))return t.slice();if(this===de&&"string"==typeof t)return[t];if(i=q(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Ee=typeof Symbol<"u"?t=>"AsyncFunction"===t[Symbol.toStringTag]:()=>!1;var He=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function jt(t,e){He=t,Jt=e}var Jt=()=>!0;const ke=!new Error("").stack;function $t(){if(ke)try{throw new Error}catch(t){return t}return new Error}function mn(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(Jt).map(r=>"\n"+r).join("")):""}var F=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],s=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(F),f={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function h(t,e){this._e=$t(),this.name=t,this.message=e}function p(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join("\n")}function A(t,e,n,r){this._e=$t(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=p(t,e)}function S(t,e){this._e=$t(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=p(t,e)}st(h).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+mn(this._e,2))}},toString:function(){return this.name+": "+this.message}}),st(A).from(h),st(S).from(h);var fe=s.reduce((t,e)=>(t[e]=e+"Error",t),{});const he=h;var v=s.reduce((t,e)=>{var n=e+"Error";function r(i,a){this._e=$t(),this.name=n,i?"string"==typeof i?(this.message=`${i}${a?"\n "+a:""}`,this.inner=a||null):"object"==typeof i&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=f[e]||n,this.inner=null)}return st(r).from(he),t[e]=r,t},{});v.Syntax=SyntaxError,v.Type=TypeError,v.Range=RangeError;var ee=F.reduce((t,e)=>(t[e+"Error"]=v[e],t),{}),Te=s.reduce((t,e)=>(-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=v[e]),t),{});function Ce(){}function vt(t){return t}function Oe(t,e){return null==t||t===vt?e:function(n){return e(t(n))}}function Be(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function ht(t,e){return t===Ce?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Be(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Be(i,this.onerror):i),void 0!==a?a:n}}function an(t,e){return t===Ce?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Be(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Be(r,this.onerror):r)}}function St(t,e){return t===Ce?e:function(n){var r=t.apply(this,arguments);Ae(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var l=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Be(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Be(a,this.onerror):a),void 0===r?void 0===l?void 0:l:Ae(r,l)}}function H(t,e){return t===Ce?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function ft(t,e){return t===Ce?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return e.apply(r,a)})}return e.apply(this,arguments)}}Te.ModifyError=A,Te.DexieError=h,Te.BulkError=S;var Ne={};const It=100,[xt,Kt,P]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,re(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,re(e),t]})(),d=Kt&&Kt.then,D=xt&&xt.constructor,T=!!P;var et=!1,Qe=P?()=>{P.then(qt)}:N.setImmediate?setImmediate.bind(null,qt):N.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{qt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(qt,0)},ut=function(t,e){pe.push([t,e]),bt&&(Qe(),bt=!1)},yt=!0,bt=!0,Ze=[],Wt=[],en=null,zt=vt,Zt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:at,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{at(t[0],t[1])}catch{}})}},ce=Zt,pe=[],Ve=0,kt=[];function b(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ce,this._lib=!1;var e=this._PSD=ce;if(He&&(this._stackHolder=$t(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==Ne)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&J(this,this._value))}this._state=null,this._value=null,++e.ref,L(this,t)}const j={get:function(){var t=ce,e=ot;function n(r,i){var a=!t.global&&(t!==ce||e!==ot);const l=a&&!o();var g=new b((y,O)=>{Xe(this,new K(ge(r,t,a,l),ge(i,t,a,l),y,O,t))});return He&&Ut(g,this),g}return n.prototype=Ne,n},set:function(t){Et(this,"then",t&&t.prototype===Ne?j:{get:function(){return t},set:j.set})}};function K(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function L(t,e){try{e(n=>{if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Vt();n&&"function"==typeof n.then?L(t,(i,a)=>{n instanceof b?n._then(i,a):n.then(i,a)}):(t._state=!0,t._value=n,Ge(t)),r&&tn()}},J.bind(null,t))}catch(n){J(t,n)}}function J(t,e){if(Wt.push(e),null===t._state){var n=t._lib&&Vt();e=zt(e),t._state=!1,t._value=e,He&&null!==e&&"object"==typeof e&&!e._promise&&function(r,i,a){try{(()=>{var r=Dt(e,"stack");e._promise=t,Et(e,"stack",{get:()=>et?r&&(r.get?r.get.apply(e):r.value):t.stack})}).apply(null,void 0)}catch(l){}}(),r=t,Ze.some(i=>i._value===r._value)||Ze.push(r),Ge(t),n&&tn()}var r}function Ge(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Xe(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===Ve&&(++Ve,ut(()=>{0==--Ve&&un()},[]))}function Xe(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ve,ut(Ye,[n,t,e])}else t._listeners.push(e)}function Ye(t,e,n){try{en=e;var r,i=e._value;e._state?r=t(i):(Wt.length&&(Wt=[]),r=t(i),-1===Wt.indexOf(i)&&function(a){for(var l=Ze.length;l;)if(Ze[--l]._value===a._value)return void Ze.splice(l,1)}(e)),n.resolve(r)}catch(a){n.reject(a)}finally{en=null,0==--Ve&&un(),--n.psd.ref||n.psd.finalize()}}function ye(t,e,n){if(e.length===n)return e;var r="";if(!1===t._state){var i,a,l=t._value;null!=l?(i=l.name||"Error",a=l.message||l,r=mn(l,0)):(i=l,a=""),e.push(i+(a?": "+a:"")+r)}return He&&((r=mn(t._stackHolder,2))&&-1===e.indexOf(r)&&e.push(r),t._prev&&ye(t._prev,e,n)),e}function Ut(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function qt(){Vt()&&tn()}function Vt(){var t=yt;return yt=!1,bt=!1,t}function tn(){var t,e,n;do{for(;pe.length>0;)for(t=pe,pe=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(pe.length>0);yt=!0,bt=!0}function un(){var t=Ze;Ze=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=kt.slice(0),n=e.length;n;)e[--n]()}function hn(t){return new b(Ne,!1,t)}function Me(t,e){var n=ce;return function(){var r=Vt(),i=ce;try{return M(n,!0),t.apply(this,arguments)}catch(a){e&&e(a)}finally{M(i,!1),r&&tn()}}}gt(b.prototype,{then:j,_then:function(t,e){Xe(this,new K(null,null,t,e,ce))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return this.then(null,"function"==typeof e?r=>r instanceof e?n(r):hn(r):r=>r&&r.name===e?n(r):hn(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),hn(e)))},stack:{get:function(){if(this._stack)return this._stack;try{et=!0;var t=ye(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{et=!1}}},timeout:function(t,e){return t<1/0?new b((n,r)=>{var i=setTimeout(()=>r(new v.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Et(b.prototype,Symbol.toStringTag,"Dexie.Promise"),Zt.env=G(),gt(b,{all:function(){var t=we.apply(null,arguments).map(c);return new b(function(e,n){0===t.length&&e([]);var r=t.length;t.forEach((i,a)=>b.resolve(i).then(l=>{t[a]=l,--r||e(t)},n))})},resolve:t=>{if(t instanceof b)return t;if(t&&"function"==typeof t.then)return new b((n,r)=>{t.then(n,r)});var e=new b(Ne,!0,t);return Ut(e,en),e},reject:hn,race:function(){var t=we.apply(null,arguments).map(c);return new b((e,n)=>{t.map(r=>b.resolve(r).then(e,n))})},PSD:{get:()=>ce,set:t=>ce=t},totalEchoes:{get:()=>ot},newPSD:ie,usePSD:ae,scheduler:{get:()=>ut,set:t=>{ut=t}},rejectionMapper:{get:()=>zt,set:t=>{zt=t}},follow:(t,e)=>new b((n,r)=>ie((i,a)=>{var l=ce;l.unhandleds=[],l.onunhandled=a,l.finalize=Be(function(){var g;g=()=>{0===this.unhandleds.length?i():a(this.unhandleds[0])},kt.push(function y(){g(),kt.splice(kt.indexOf(y),1)}),++Ve,ut(()=>{0==--Ve&&un()},[])},l.finalize),t()},e,n,r))}),D&&(D.allSettled&&Et(b,"allSettled",function(){const t=we.apply(null,arguments).map(c);return new b(e=>{0===t.length&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,a)=>b.resolve(i).then(l=>r[a]={status:"fulfilled",value:l},l=>r[a]={status:"rejected",reason:l}).then(()=>--n||e(r)))})}),D.any&&typeof AggregateError<"u"&&Et(b,"any",function(){const t=we.apply(null,arguments).map(c);return new b((e,n)=>{0===t.length&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((a,l)=>b.resolve(a).then(g=>e(g),g=>{i[l]=g,--r||n(new AggregateError(i))}))})}));const mt={awaits:0,echoes:0,id:0};var Ot=0,it=[],tt=0,ot=0,Pt=0;function ie(t,e,n,r){var i=ce,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Pt;var l=Zt.env;a.env=T?{Promise:b,PromiseProp:{value:b,configurable:!0,writable:!0},all:b.all,race:b.race,allSettled:b.allSettled,any:b.any,resolve:b.resolve,reject:b.reject,nthen:Ke(l.nthen,a),gthen:Ke(l.gthen,a)}:{},e&&Ae(a,e),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=ae(a,t,n,r);return 0===a.ref&&a.finalize(),g}function u(){return mt.id||(mt.id=++Ot),++mt.awaits,mt.echoes+=It,mt.id}function o(){return!!mt.awaits&&(0==--mt.awaits&&(mt.id=0),mt.echoes=mt.awaits*It,!0)}function c(t){return mt.echoes&&t&&t.constructor===D?(u(),t.then(e=>(o(),e),e=>(o(),_e(e)))):t}function m(t){++ot,mt.echoes&&0!=--mt.echoes||(mt.echoes=mt.id=0),it.push(ce),M(t,!0)}function w(){var t=it[it.length-1];it.pop(),M(t,!1)}function M(t,e){var n=ce;if((e?!mt.echoes||tt++&&t===ce:!tt||--tt&&t===ce)||Q(e?m.bind(null,t):w),t!==ce&&(ce=t,n===Zt&&(Zt.env=G()),T)){var r=Zt.env.Promise,i=t.env;Kt.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(N,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function G(){var t=N.Promise;return T?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(N,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Kt.then,gthen:t.prototype.then}:{}}function ae(t,e,n,r,i){var a=ce;try{return M(t,!0),e(n,r,i)}finally{M(a,!1)}}function Q(t){d.call(xt,t)}function ge(t,e,n,r){return"function"!=typeof t?t:function(){var i=ce;n&&u(),M(e,!0);try{return t.apply(this,arguments)}finally{M(i,!1),r&&Q(o)}}}function Ke(t,e){return function(n,r){return t.call(this,ge(n,e),ge(r,e))}}-1===(""+d).indexOf("[native code]")&&(u=o=Ce);const Fe="unhandledrejection";function at(t,e){var n;try{n=e.onuncatched(t)}catch{}if(!1!==n)try{var r,i={promise:e,reason:t};if(N.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Fe,!0,!0),Ae(r,i)):N.CustomEvent&&Ae(r=new CustomEvent(Fe,{detail:i}),i),r&&N.dispatchEvent&&(dispatchEvent(r),!N.PromiseRejectionEvent&&N.onunhandledrejection))try{N.onunhandledrejection(r)}catch{}He&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var _e=b.reject;function qe(t,e,n,r){if(t.idbdb&&(t._state.openComplete||ce.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(a){return a.name===fe.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>qe(t,e,n,r))):_e(a)}return i._promise(e,(a,l)=>ie(()=>(ce.trans=i,r(a,l,i)))).then(a=>i._completion.then(()=>a))}if(t._state.openComplete)return _e(new v.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return _e(new v.DatabaseClosed);t.open().catch(Ce)}return t._state.dbReadyPromise.then(()=>qe(t,e,n,r))}const nt=String.fromCharCode(65535),Pe=-1/0,wt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ue="String expected.",Z=[],me=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ve=me,Se=me,De=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Ht="__dbnames",At="readonly",Qt="readwrite";function Mt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const ct={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function nn(t){return"string"!=typeof t||/\./.test(t)?e=>e:e=>(void 0===e[t]&&t in e&&delete(e=vn(e))[t],e)}class _t{_trans(e,n,r){const i=this._tx||ce.trans,a=this.name;function l(y,O,_){if(!_.schema[a])throw new v.NotFound("Table "+a+" not part of transaction");return n(_.idbtrans,_)}const g=Vt();try{return i&&i.db===this.db?i===ce.trans?i._promise(e,l,r):ie(()=>i._promise(e,l,r),{trans:i,transless:ce.transless||ce}):qe(this.db,e,[this.name],l)}finally{g&&tn()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(V(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=te(e);if(1===n.length)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(O=>O.compound&&n.every(_=>O.keyPath.indexOf(_)>=0)&&O.keyPath.every(_=>n.indexOf(_)>=0))[0];if(r&&this.db._maxKey!==nt)return this.where(r.name).equals(r.keyPath.map(O=>e[O]));!r&&He&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,a=this.db._deps.indexedDB;function l(O,_){try{return 0===a.cmp(O,_)}catch{return!1}}const[g,y]=n.reduce(([O,_],x)=>{const E=i[x],C=e[x];return[O||E,O||!E?Mt(_,E&&E.multi?U=>{const k=Lt(U,x);return V(k)&&k.some($=>l(C,$))}:U=>l(C,Lt(U,x))):_]},[null,null]);return g?this.where(g.name).equals(e[g.keyPath]).filter(y):r?this.filter(y):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,V(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var a in r)if(Le(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){Ae(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let a=e;return i&&r&&(a=nn(i)(e)),this._trans("readwrite",l=>this.core.mutate({trans:l,type:"add",keys:null!=n?[n]:null,values:[a]})).then(l=>l.numFailures?b.reject(l.failures[0]):l.lastResult).then(l=>{if(i)try{Re(e,i,l)}catch{}return l})}update(e,n){if("object"!=typeof e||V(e))return this.where(":id").equals(e).modify(n);{const r=Lt(e,this.schema.primKey.keyPath);if(void 0===r)return _e(new v.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof n?te(n).forEach(i=>{Re(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let a=e;return i&&r&&(a=nn(i)(e)),this._trans("readwrite",l=>this.core.mutate({trans:l,type:"put",values:[a],keys:null!=n?[n]:null})).then(l=>l.numFailures?b.reject(l.failures[0]):l.lastResult).then(l=>{if(i)try{Re(e,i,l)}catch{}return l})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?b.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:ct})).then(e=>e.numFailures?b.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,a=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",l=>{const{auto:g,keyPath:y}=this.schema.primKey;if(y&&i)throw new v.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new v.InvalidArgument("Arguments objects and keys must have the same length");const O=e.length;let _=y&&g?e.map(nn(y)):e;return this.core.mutate({trans:l,type:"add",keys:i,values:_,wantResults:a}).then(({numFailures:x,results:E,lastResult:C,failures:U})=>{if(0===x)return a?E:C;throw new S(`${this.name}.bulkAdd(): ${x} of ${O} operations failed`,U)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,a=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",l=>{const{auto:g,keyPath:y}=this.schema.primKey;if(y&&i)throw new v.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new v.InvalidArgument("Arguments objects and keys must have the same length");const O=e.length;let _=y&&g?e.map(nn(y)):e;return this.core.mutate({trans:l,type:"put",keys:i,values:_,wantResults:a}).then(({numFailures:x,results:E,lastResult:C,failures:U})=>{if(0===x)return a?E:C;throw new S(`${this.name}.bulkPut(): ${x} of ${O} operations failed`,U)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:a})=>{if(0===r)return i;throw new S(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,a)})}}function Gt(t){var e={},n=function(l,g){if(g){for(var y=arguments.length,O=new Array(y-1);--y;)O[y-1]=arguments[y];return e[l].subscribe.apply(null,O),t}if("string"==typeof l)return e[l]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(l,g,y){if("object"!=typeof l){var O;g||(g=H),y||(y=Ce);var _={subscribers:[],fire:y,subscribe:function(x){-1===_.subscribers.indexOf(x)&&(_.subscribers.push(x),_.fire=g(_.fire,x))},unsubscribe:function(x){_.subscribers=_.subscribers.filter(function(E){return E!==x}),_.fire=_.subscribers.reduce(g,y)}};return e[l]=n[l]=_,_}te(O=l).forEach(function(x){var E=O[x];if(V(E))a(x,O[x][0],O[x][1]);else{if("asap"!==E)throw new v.InvalidArgument("Invalid event config");var C=a(x,vt,function(){for(var U=arguments.length,k=new Array(U);U--;)k[U]=arguments[U];C.subscribers.forEach(function($){Tt(function(){$.apply(null,k)})})})}})}}function Rt(t,e){return st(e).from({prototype:t}),e}function Xt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function cn(t,e){t.filter=Mt(t.filter,e)}function kn(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Mt(r(),e()):e,t.justLimit=n&&!r}function An(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new v.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Sn(t,e,n){const r=An(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:r,range:t.range}})}function Pn(t,e,n,r){const i=t.replayFilter?Mt(t.filter,t.replayFilter()):t.filter;if(t.or){const a={},l=(g,y,O)=>{if(!i||i(y,O,E=>y.stop(E),E=>y.fail(E))){var _=y.primaryKey,x=""+_;"[object ArrayBuffer]"===x&&(x=""+new Uint8Array(_)),Le(a,x)||(a[x]=!0,e(g,y,O))}};return Promise.all([t.or._iterate(l,n),bn(Sn(t,r,n),t.algorithm,l,!t.keysOnly&&t.valueMapper)])}return bn(Sn(t,r,n),Mt(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function bn(t,e,n,r){var i=Me(r?(a,l,g)=>n(r(a),l,g):n);return t.then(a=>{if(a)return a.start(()=>{var l=()=>a.continue();e&&!e(a,g=>l=g,g=>{a.stop(g),l=Ce},g=>{a.fail(g),l=Ce})||i(a.value,a,g=>l=g),l()})})}function lt(t,e){try{const n=gn(t),r=gn(e);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,a){const l=i.length,g=a.length,y=l<g?l:g;for(let O=0;O<y;++O)if(i[O]!==a[O])return i[O]<a[O]?-1:1;return l===g?0:l<g?-1:1}(wn(t),wn(e));case"Array":return function(i,a){const l=i.length,g=a.length,y=l<g?l:g;for(let O=0;O<y;++O){const _=lt(i[O],a[O]);if(0!==_)return _}return l===g?0:l<g?-1:1}(t,e)}}catch{}return NaN}function gn(t){const e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";const n=z(t);return"ArrayBuffer"===n?"binary":n}function wn(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Rn{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,_e.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,_e.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Mt(n.algorithm,e)}_iterate(e,n){return Pn(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Ae(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Pn(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(Xt(r,!0))return i.count({trans:n,query:{index:An(r,i.schema),range:r.range}}).then(l=>Math.min(l,r.limit));var a=0;return Pn(r,()=>(++a,!1),n,i).then(()=>a)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],a=r.length-1;function l(O,_){return _?l(O[r[_]],_-1):O[i]}var g="next"===this._ctx.dir?1:-1;function y(O,_){var x=l(O,a),E=l(_,a);return x<E?-g:x>E?g:0}return this.toArray(function(O){return O.sort(y)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if("next"===r.dir&&Xt(r,!0)&&r.limit>0){const{valueMapper:i}=r,a=An(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(({result:l})=>i?l.map(i):l)}{const i=[];return Pn(r,a=>i.push(a),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Xt(n)?kn(n,()=>{var r=e;return(i,a)=>0===r||(1===r?(--r,!1):(a(()=>{i.advance(r),r=0}),!1))}):kn(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),kn(this._ctx,()=>{var n=e;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this}until(e,n){return cn(this._ctx,function(r,i,a){return!e(r.value)||(i(a),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n;return cn(this._ctx,function(i){return e(i.value)}),(n=this._ctx).isMatch=Mt(n.isMatch,e),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if("next"===n.dir&&Xt(n,!0)&&n.limit>0)return this._read(i=>{var a=An(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return cn(this._ctx,function(i){var a=i.primaryKey.toString(),l=Le(r,a);return r[a]=!0,!l}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if("function"==typeof e)i=e;else{var a=te(e),l=a.length;i=function(k){for(var $=!1,B=0;B<l;++B){var I=a[B],W=e[I];Lt(k,I)!==W&&(Re(k,I,W),$=!0)}return $}}const g=n.table.core,{outbound:y,extractKey:O}=g.schema.primaryKey,_=this.db._options.modifyChunkSize||200,x=[];let E=0;const C=[],U=(k,$)=>{const{failures:B,numFailures:I}=$;E+=k-I;for(let W of te(B))x.push(B[W])};return this.clone().primaryKeys().then(k=>{const $=B=>{const I=Math.min(_,k.length-B);return g.getMany({trans:r,keys:k.slice(B,B+I),cache:"immutable"}).then(W=>{const le=[],oe=[],ne=y?[]:null,Y=[];for(let X=0;X<I;++X){const Ct=W[X],pt={value:vn(Ct),primKey:k[B+X]};!1!==i.call(pt,pt.value,pt)&&(null==pt.value?Y.push(k[B+X]):y||0===lt(O(Ct),O(pt.value))?(oe.push(pt.value),y&&ne.push(k[B+X])):(Y.push(k[B+X]),le.push(pt.value)))}const Je=Xt(n)&&n.limit===1/0&&("function"!=typeof e||e===Hn)&&{index:n.index,range:n.range};return Promise.resolve(le.length>0&&g.mutate({trans:r,type:"add",values:le}).then(X=>{for(let Ct in X.failures)Y.splice(parseInt(Ct),1);U(le.length,X)})).then(()=>(oe.length>0||Je&&"object"==typeof e)&&g.mutate({trans:r,type:"put",keys:ne,values:oe,criteria:Je,changeSpec:"function"!=typeof e&&e}).then(X=>U(oe.length,X))).then(()=>(Y.length>0||Je&&e===Hn)&&g.mutate({trans:r,type:"delete",keys:Y,criteria:Je}).then(X=>U(Y.length,X))).then(()=>k.length>B+I&&$(B+_))})};return $(0).then(()=>{if(x.length>0)throw new A("Error modifying one or more objects",x,E,C);return k.length})})})}delete(){var e=this._ctx,n=e.range;return Xt(e)&&(e.isPrimKey&&!Se||3===n.type)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,a=n;return e.table.core.count({trans:r,query:{index:i,range:a}}).then(l=>e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(({failures:g,numFailures:_})=>{if(_)throw new A("Could not delete some values",Object.keys(g).map(x=>g[x]),l-_);return l-_}))}):this.modify(Hn)}}const Hn=(t,e)=>e.value=null;function Or(t,e){return t<e?-1:t===e?0:1}function Pr(t,e){return t>e?-1:t===e?0:1}function yn(t,e,n){var r=t instanceof mr?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Fn(t){return new t.Collection(t,()=>yr("")).limit(0)}function Nr(t,e,n,r,i,a){for(var l=Math.min(t.length,r.length),g=-1,y=0;y<l;++y){var O=e[y];if(O!==r[y])return i(t[y],n[y])<0?t.substr(0,y)+n[y]+n.substr(y+1):i(t[y],r[y])<0?t.substr(0,y)+r[y]+n.substr(y+1):g>=0?t.substr(0,g)+e[g]+n.substr(g+1):null;i(t[y],O)<0&&(g=y)}return l<r.length&&"next"===a?t+n.substr(t.length):l<t.length&&"prev"===a?t.substr(0,n.length):g<0?null:t.substr(0,g)+r[g]+n.substr(g+1)}function Gn(t,e,n,r){var i,a,l,g,y,O,_,x=n.length;if(!n.every(k=>"string"==typeof k))return yn(t,ue);function E(k){i="next"===k?I=>I.toUpperCase():I=>I.toLowerCase(),a="next"===k?I=>I.toLowerCase():I=>I.toUpperCase(),l="next"===k?Or:Pr;var $=n.map(function(B){return{lower:a(B),upper:i(B)}}).sort(function(B,I){return l(B.lower,I.lower)});g=$.map(function(B){return B.upper}),y=$.map(function(B){return B.lower}),O=k,_="next"===k?"":r}E("next");var C=new t.Collection(t,()=>Nn(g[0],y[x-1]+r));C._ondirectionchange=function(k){E(k)};var U=0;return C._addAlgorithm(function(k,$,B){var I=k.key;if("string"!=typeof I)return!1;var W=a(I);if(e(W,y,U))return!0;for(var le=null,oe=U;oe<x;++oe){var ne=Nr(I,W,g[oe],y[oe],l,O);null===ne&&null===le?U=oe+1:(null===le||l(le,ne)>0)&&(le=ne)}return $(null!==le?function(){k.continue(le+_)}:B),!1}),C}function Nn(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function yr(t){return{type:1,lower:t,upper:t}}class mr{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=!1!==r,i=!0===i;try{return this._cmp(e,n)>0||0===this._cmp(e,n)&&(r||i)&&(!r||!i)?Fn(this):new this.Collection(this,()=>Nn(e,n,!r,!i))}catch{return yn(this,wt)}}equals(e){return null==e?yn(this,wt):new this.Collection(this,()=>yr(e))}above(e){return null==e?yn(this,wt):new this.Collection(this,()=>Nn(e,void 0,!0))}aboveOrEqual(e){return null==e?yn(this,wt):new this.Collection(this,()=>Nn(e,void 0,!1))}below(e){return null==e?yn(this,wt):new this.Collection(this,()=>Nn(void 0,e,!1,!0))}belowOrEqual(e){return null==e?yn(this,wt):new this.Collection(this,()=>Nn(void 0,e))}startsWith(e){return"string"!=typeof e?yn(this,ue):this.between(e,e+nt,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):Gn(this,(n,r)=>0===n.indexOf(r[0]),[e],nt)}equalsIgnoreCase(e){return Gn(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=we.apply(de,arguments);return 0===e.length?Fn(this):Gn(this,(n,r)=>-1!==r.indexOf(n),e,"")}startsWithAnyOfIgnoreCase(){var e=we.apply(de,arguments);return 0===e.length?Fn(this):Gn(this,(n,r)=>r.some(i=>0===n.indexOf(i)),e,nt)}anyOf(){const e=we.apply(de,arguments);let n=this._cmp;try{e.sort(n)}catch{return yn(this,wt)}if(0===e.length)return Fn(this);const r=new this.Collection(this,()=>Nn(e[0],e[e.length-1]));r._ondirectionchange=a=>{n="next"===a?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((a,l,g)=>{const y=a.key;for(;n(y,e[i])>0;)if(++i,i===e.length)return l(g),!1;return 0===n(y,e[i])||(l(()=>{a.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[Pe,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=we.apply(de,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch{return yn(this,wt)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Pe,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,a=this._descending,l=this._min,g=this._max;if(0===e.length)return Fn(this);if(!e.every(I=>void 0!==I[0]&&void 0!==I[1]&&i(I[0],I[1])<=0))return yn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",v.InvalidArgument);const y=!n||!1!==n.includeLowers,O=n&&!0===n.includeUppers;let _,x=i;function E(I,W){return x(I[0],W[0])}try{_=e.reduce(function(I,W){let le=0,oe=I.length;for(;le<oe;++le){const ne=I[le];if(r(W[0],ne[1])<0&&r(W[1],ne[0])>0){ne[0]=l(ne[0],W[0]),ne[1]=g(ne[1],W[1]);break}}return le===oe&&I.push(W),I},[]),_.sort(E)}catch{return yn(this,wt)}let C=0;const U=O?I=>i(I,_[C][1])>0:I=>i(I,_[C][1])>=0,k=y?I=>a(I,_[C][0])>0:I=>a(I,_[C][0])>=0;let $=U;const B=new this.Collection(this,()=>Nn(_[0][0],_[_.length-1][1],!y,!O));return B._ondirectionchange=I=>{"next"===I?($=U,x=i):($=k,x=a),_.sort(E)},B._addAlgorithm((I,W,le)=>{for(var oe=I.key;$(oe);)if(++C,C===_.length)return W(le),!1;return!((U(ne=oe)||k(ne))&&(0===this._cmp(oe,_[C][1])||0===this._cmp(oe,_[C][0])||W(()=>{I.continue(x===i?_[C][0]:_[C][1])}),1));var ne}),B}startsWithAnyOf(){const e=we.apply(de,arguments);return e.every(n=>"string"==typeof n)?0===e.length?Fn(this):this.inAnyRange(e.map(n=>[n,n+nt])):yn(this,"startsWithAnyOf() only works with strings")}}function _n(t){return Me(function(e){return Un(e),t(e.target.error),!1})}function Un(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Mn="storagemutated",Tn="x-storagemutated-1",In=Gt(null,Mn);class Tr{_lock(){return ze(!ce.global),++this._reculock,1!==this._reculock||ce.global||(ce.lockOwnerFor=this),this}_unlock(){if(ze(!ce.global),0==--this._reculock)for(ce.global||(ce.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ae(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&ce.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(ze(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new v.DatabaseClosed(r);case"MissingAPIError":throw new v.MissingAPI(r.message,r);default:throw new v.OpenFailed(r)}if(!this.active)throw new v.TransactionInactive;return ze(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Me(i=>{Un(i),this._reject(e.error)}),e.onabort=Me(i=>{Un(i),this.active&&this._reject(new v.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=Me(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&In.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if("readwrite"===e&&"readwrite"!==this.mode)return _e(new v.ReadOnly("Transaction is readonly"));if(!this.active)return _e(new v.TransactionInactive);if(this._locked())return new b((a,l)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(a,l)},ce])});if(r)return ie(()=>{var a=new b((l,g)=>{this._lock();const y=n(l,g,this);y&&y.then&&y.then(l,g)});return a.finally(()=>this._unlock()),a._lib=!0,a});var i=new b((a,l)=>{var g=n(a,l,this);g&&g.then&&g.then(a,l)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=b.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);!function l(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=l)}()}var a=n._waitingFor;return new b((l,g)=>{r.then(y=>n._waitingQueue.push(Me(l.bind(null,y))),y=>n._waitingQueue.push(Me(g.bind(null,y)))).finally(()=>{n._waitingFor===a&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new v.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Le(n,e))return n[e];const r=this.schema[e];if(!r)throw new v.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function Qn(t,e,n,r,i,a,l){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:a,src:(n&&!l?"&":"")+(r?"*":"")+(i?"++":"")+gr(e)}}function gr(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function vr(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Yt(n,r=>[r.name,r])}}let $n=t=>{try{return t.only([[]]),$n=()=>[[]],[[]]}catch{return $n=()=>nt,nt}};function Xn(t){return null==t?()=>{}:"string"==typeof t?1===(e=t).split(".").length?r=>r[e]:r=>Lt(r,e):e=>Lt(e,t);var e}function br(t){return[].slice.call(t)}let Ir=0;function Zn(t){return null==t?":id":"string"==typeof t?t:`[${t.join("+")}]`}function kr(t,e,n){function r(y){if(3===y.type)return null;if(4===y.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:O,upper:_,lowerOpen:x,upperOpen:E}=y;return void 0===O?void 0===_?null:e.upperBound(_,!!E):void 0===_?e.lowerBound(O,!!x):e.bound(O,_,!!x,!!E)}const{schema:i,hasGetAll:a}=function(y,O){const _=br(y.objectStoreNames);return{schema:{name:y.name,tables:_.map(x=>O.objectStore(x)).map(x=>{const{keyPath:E,autoIncrement:C}=x,U=V(E),$={},B={name:x.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==E,compound:U,keyPath:E,autoIncrement:C,unique:!0,extractKey:Xn(E)},indexes:br(x.indexNames).map(I=>x.index(I)).map(I=>{const{name:W,unique:le,multiEntry:oe,keyPath:ne}=I,Y={name:W,compound:V(ne),keyPath:ne,unique:le,multiEntry:oe,extractKey:Xn(ne)};return $[Zn(ne)]=Y,Y}),getIndexByKeyPath:I=>$[Zn(I)]};return $[":id"]=B.primaryKey,null!=E&&($[Zn(E)]=B.primaryKey),B})},hasGetAll:_.length>0&&"getAll"in O.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),l=i.tables.map(y=>function(O){const _=O.name;return{name:_,schema:O,mutate:function({trans:x,type:E,keys:C,values:U,range:k}){return new Promise(($,B)=>{$=Me($);const I=x.objectStore(_),W=null==I.keyPath,le="put"===E||"add"===E;if(!le&&"delete"!==E&&"deleteRange"!==E)throw new Error("Invalid operation type: "+E);const{length:oe}=C||U||{length:1};if(C&&U&&C.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(0===oe)return $({numFailures:0,failures:{},results:[],lastResult:void 0});let ne;const Y=[],Je=[];let X=0;const Ct=ln=>{++X,Un(ln)};if("deleteRange"===E){if(4===k.type)return $({numFailures:X,failures:Je,results:[],lastResult:void 0});Y.push(ne=3===k.type?I.clear():I.delete(r(k)))}else{const[ln,on]=le?W?[U,C]:[U,null]:[C,null];if(le)for(let Bt=0;Bt<oe;++Bt)Y.push(ne=on&&void 0!==on[Bt]?I[E](ln[Bt],on[Bt]):I[E](ln[Bt])),ne.onerror=Ct;else for(let Bt=0;Bt<oe;++Bt)Y.push(ne=I[E](ln[Bt])),ne.onerror=Ct}const pt=ln=>{const on=ln.target.result;Y.forEach((Bt,Dn)=>null!=Bt.error&&(Je[Dn]=Bt.error)),$({numFailures:X,failures:Je,results:"delete"===E?C:Y.map(Bt=>Bt.result),lastResult:on})};ne.onerror=ln=>{Ct(ln),pt(ln)},ne.onsuccess=pt})},getMany:({trans:x,keys:E})=>new Promise((C,U)=>{C=Me(C);const k=x.objectStore(_),$=E.length,B=new Array($);let I,W=0,le=0;const oe=Y=>{const Je=Y.target;B[Je._pos]=Je.result,++le===W&&C(B)},ne=_n(U);for(let Y=0;Y<$;++Y)null!=E[Y]&&(I=k.get(E[Y]),I._pos=Y,I.onsuccess=oe,I.onerror=ne,++W);0===W&&C(B)}),get:({trans:x,key:E})=>new Promise((C,U)=>{C=Me(C);const k=x.objectStore(_).get(E);k.onsuccess=$=>C($.target.result),k.onerror=_n(U)}),query:(x=a,E=>new Promise((C,U)=>{C=Me(C);const{trans:k,values:$,limit:B,query:I}=E,W=B===1/0?void 0:B,{index:le,range:oe}=I,ne=k.objectStore(_),Y=le.isPrimaryKey?ne:ne.index(le.name),Je=r(oe);if(0===B)return C({result:[]});if(x){const X=$?Y.getAll(Je,W):Y.getAllKeys(Je,W);X.onsuccess=Ct=>C({result:Ct.target.result}),X.onerror=_n(U)}else{let X=0;const Ct=$||!("openKeyCursor"in Y)?Y.openCursor(Je):Y.openKeyCursor(Je),pt=[];Ct.onsuccess=ln=>{const on=Ct.result;return on?(pt.push($?on.value:on.primaryKey),++X===B?C({result:pt}):void on.continue()):C({result:pt})},Ct.onerror=_n(U)}})),openCursor:function({trans:x,values:E,query:C,reverse:U,unique:k}){return new Promise(($,B)=>{$=Me($);const{index:I,range:W}=C,le=x.objectStore(_),oe=I.isPrimaryKey?le:le.index(I.name),ne=U?k?"prevunique":"prev":k?"nextunique":"next",Y=E||!("openKeyCursor"in oe)?oe.openCursor(r(W),ne):oe.openKeyCursor(r(W),ne);Y.onerror=_n(B),Y.onsuccess=Me(Je=>{const X=Y.result;if(!X)return void $(null);X.___id=++Ir,X.done=!1;const Ct=X.continue.bind(X);let pt=X.continuePrimaryKey;pt&&(pt=pt.bind(X));const ln=X.advance.bind(X),on=()=>{throw new Error("Cursor not stopped")};X.trans=x,X.stop=X.continue=X.continuePrimaryKey=X.advance=()=>{throw new Error("Cursor not started")},X.fail=Me(B),X.next=function(){let Bt=1;return this.start(()=>Bt--?this.continue():this.stop()).then(()=>this)},X.start=Bt=>{const Dn=new Promise((dn,jn)=>{dn=Me(dn),Y.onerror=_n(jn),X.fail=jn,X.stop=Vn=>{X.stop=X.continue=X.continuePrimaryKey=X.advance=on,dn(Vn)}}),Ln=()=>{if(Y.result)try{Bt()}catch(dn){X.fail(dn)}else X.done=!0,X.start=()=>{throw new Error("Cursor behind last entry")},X.stop()};return Y.onsuccess=Me(dn=>{Y.onsuccess=Ln,Ln()}),X.continue=Ct,X.continuePrimaryKey=pt,X.advance=ln,Ln(),Dn},$(X)},B)})},count({query:x,trans:E}){const{index:C,range:U}=x;return new Promise((k,$)=>{const B=E.objectStore(_),I=C.isPrimaryKey?B:B.index(C.name),W=r(U),le=W?I.count(W):I.count();le.onsuccess=Me(oe=>k(oe.target.result)),le.onerror=_n($)})}};var x}(y)),g={};return l.forEach(y=>g[y.name]=y),{stack:"dbcore",transaction:t.transaction.bind(t),table(y){if(!g[y])throw new Error(`Table '${y}' not found`);return g[y]},MIN_KEY:-1/0,MAX_KEY:$n(e),schema:i}}function er({_novip:t},e){const r=function(i,a,{IDBKeyRange:l},y){return{dbcore:(_=kr(a,l,y),x=i.dbcore,x.reduce((E,{create:C})=>({...E,...C(E)}),_))};var _,x}(t._middlewares,e.db,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const a=i.name;t.core.schema.tables.some(l=>l.name===a)&&(i.core=t.core.table(a),t[a]instanceof t.Table&&(t[a].core=i.core))})}function Yn({_novip:t},e,n,r){n.forEach(i=>{const a=r[i];e.forEach(l=>{const g=Dt(l,i);(!g||"value"in g&&void 0===g.value)&&(l===t.Transaction.prototype||l instanceof t.Transaction?Et(l,i,{get(){return this.table(i)},set(y){Ft(this,i,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):l[i]=new t.Table(i,a))})})}function tr({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Cr(t,e){return t._cfg.version-e._cfg.version}function wr(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],a=e[r];if(i){const l={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!me)l.recreate=!0,n.change.push(l);else{const g=i.idxByName,y=a.idxByName;let O;for(O in g)y[O]||l.del.push(O);for(O in y){const _=g[O],x=y[O];_?_.src!==x.src&&l.change.push(x):l.add.push(x)}(l.del.length>0||l.add.length>0||l.change.length>0)&&n.change.push(l)}}else n.add.push([r,a])}return n}function nr(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(a=>rr(i,a)),i}function rr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function ir(t,e,n){const r={};return We(e.objectStoreNames,0).forEach(i=>{const a=n.objectStore(i);let l=a.keyPath;const g=Qn(gr(l),l||"",!1,!1,!!a.autoIncrement,l&&"string"!=typeof l,!0),y=[];for(let _=0;_<a.indexNames.length;++_){const x=a.index(a.indexNames[_]);l=x.keyPath;var O=Qn(x.name,l,!!x.unique,!!x.multiEntry,!1,l&&"string"!=typeof l,!1);y.push(O)}r[i]=vr(i,g,y)}),r}function or({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const a=r[i],l=n.objectStore(a);t._hasGetAll="getAll"in l;for(let g=0;g<l.indexNames.length;++g){const y=l.indexNames[g],O=l.index(y).keyPath,_="string"==typeof O?O:"["+We(O).join("+")+"]";if(e[a]){const x=e[a].idxByName[_];x&&(x.name=y,delete e[a].idxByName[_],e[a].idxByName[y]=x)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&N.WorkerGlobalScope&&N instanceof N.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class jr{_parseStoresSpec(e,n){te(e).forEach(r=>{if(null!==e[r]){var i=e[r].split(",").map((l,g)=>{const y=(l=l.trim()).replace(/([&*]|\+\+)/g,""),O=/^\[/.test(y)?y.match(/^\[(.*)\]$/)[1].split("+"):y;return Qn(y,O||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),V(O),0===g)}),a=i.shift();if(a.multi)throw new v.Schema("Primary key cannot be multi-valued");i.forEach(l=>{if(l.auto)throw new v.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new v.Schema("Index must have a name and cannot be an empty string")}),n[r]=vr(r,a,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Ae(this._cfg.storesSource,e):e;const i={};let a={};return n._versions.forEach(l=>{Ae(i,l._cfg.storesSource),a=l._cfg.dbschema={},l._parseStoresSpec(i,a)}),n._dbSchema=a,tr(n,[n._allTables,n,n.Transaction.prototype]),Yn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],te(a),a),n._storeNames=te(a),this}upgrade(e){return this._cfg.contentUpgrade=ft(this._cfg.contentUpgrade||Ce,e),this}}function sr(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Cn(Ht,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function ar(t){return t&&"function"==typeof t.databases}function ur(t){return ie(function(){return ce.letThrough=!0,t()})}function Kr(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function cr(t){var e=a=>t.next(a),n=i(e),r=i(a=>t.throw(a));function i(a){return l=>{var g=a(l),y=g.value;return g.done?y:y&&"function"==typeof y.then?y.then(n,r):V(y)?Promise.all(y).then(n,r):n(y)}}return i(e)()}function Fr(t,e,n){var r=arguments.length;if(r<2)throw new v.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,rn(i),n]}function _r(t,e,n,r,i){return b.resolve().then(()=>{const a=ce.transless||ce,l=t._createTransaction(e,n,t._dbSchema,r),g={trans:l,transless:a};if(r)l.idbtrans=r.idbtrans;else try{l.create(),t._state.PR1398_maxLoop=3}catch(x){return x.name===fe.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>_r(t,e,n,null,i))):_e(x)}const y=Ee(i);let O;y&&u();const _=b.follow(()=>{if(O=i.call(l,l),O)if(y){var x=o.bind(null,null);O.then(x,x)}else"function"==typeof O.next&&"function"==typeof O.throw&&(O=cr(O))},g);return(O&&"function"==typeof O.then?b.resolve(O).then(x=>l.active?x:_e(new v.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):_.then(()=>O)).then(x=>(r&&l._resolve(),l._completion.then(()=>x))).catch(x=>(l._reject(x),_e(x)))})}function Jn(t,e,n){const r=V(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const Dr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},a=[];function l(_,x,E){const C=Zn(_),U=i[C]=i[C]||[],k=null==_?0:"string"==typeof _?1:_.length,$=x>0,B={...E,isVirtual:$,keyTail:x,keyLength:k,extractKey:Xn(_),unique:!$&&E.unique};return U.push(B),B.isPrimaryKey||a.push(B),k>1&&l(2===k?_[0]:_.slice(0,k-1),x+1,E),U.sort((I,W)=>I.keyTail-W.keyTail),B}const g=l(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[g];for(const _ of r.indexes)l(_.keyPath,0,_);function y(_){const x=_.query.index;return x.isVirtual?{..._,query:{index:x,range:(E=_.query.range,C=x.keyTail,{type:1===E.type?2:E.type,lower:Jn(E.lower,E.lowerOpen?t.MAX_KEY:t.MIN_KEY,C),lowerOpen:!0,upper:Jn(E.upper,E.upperOpen?t.MIN_KEY:t.MAX_KEY,C),upperOpen:!0})}}:_;var E,C}return{...n,schema:{...r,primaryKey:g,indexes:a,getIndexByKeyPath:function(_){const x=i[Zn(_)];return x&&x[0]}},count:_=>n.count(y(_)),query:_=>n.query(y(_)),openCursor(_){const{keyTail:x,isVirtual:E,keyLength:C}=_.query.index;return E?n.openCursor(y(_)).then(U=>{return U&&(k=U,Object.create(k,{continue:{value:function(B){null!=B?k.continue(Jn(B,_.reverse?t.MAX_KEY:t.MIN_KEY,x)):_.unique?k.continue(k.key.slice(0,C).concat(_.reverse?t.MIN_KEY:t.MAX_KEY,x)):k.continue()}},continuePrimaryKey:{value(B,I){k.continuePrimaryKey(Jn(B,t.MAX_KEY,x),I)}},primaryKey:{get:()=>k.primaryKey},key:{get(){const B=k.key;return 1===C?B[0]:B.slice(0,C)}},value:{get:()=>k.value}}));var k}):n.openCursor(_)}}}}}};function lr(t,e,n,r){return n=n||{},r=r||"",te(t).forEach(i=>{if(Le(e,i)){var a=t[i],l=e[i];if("object"==typeof a&&"object"==typeof l&&a&&l){const g=z(a);g!==z(l)?n[r+i]=e[i]:"Object"===g?lr(a,l,n,r+i+"."):a!==l&&(n[r+i]=e[i])}else a!==l&&(n[r+i]=e[i])}else n[r+i]=void 0}),te(e).forEach(i=>{Le(t,i)||(n[r+i]=e[i])}),n}const Lr={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(a){const l=ce.trans,{deleting:g,creating:y,updating:O}=l.table(e).hook;switch(a.type){case"add":if(y.fire===Ce)break;return l._promise("readwrite",()=>_(a),!0);case"put":if(y.fire===Ce&&O.fire===Ce)break;return l._promise("readwrite",()=>_(a),!0);case"delete":if(g.fire===Ce)break;return l._promise("readwrite",()=>_(a),!0);case"deleteRange":if(g.fire===Ce)break;return l._promise("readwrite",()=>{return x((E=a).trans,E.range,1e4);var E},!0)}return n.mutate(a);function _(E){const C=ce.trans,U=E.keys||("delete"===($=E).type?$.keys:$.keys||$.values.map(r.extractKey));var $;if(!U)throw new Error("Keys missing");return"delete"!==(E="add"===E.type||"put"===E.type?{...E,keys:U}:{...E}).type&&(E.values=[...E.values]),E.keys&&(E.keys=[...E.keys]),function(k,$,B){return"add"===$.type?Promise.resolve([]):k.getMany({trans:$.trans,keys:B,cache:"immutable"})}(n,E,U).then(k=>{const $=U.map((B,I)=>{const W=k[I],le={onerror:null,onsuccess:null};if("delete"===E.type)g.fire.call(le,B,W,C);else if("add"===E.type||void 0===W){const oe=y.fire.call(le,B,E.values[I],C);null==B&&null!=oe&&(E.keys[I]=B=oe,r.outbound||Re(E.values[I],r.keyPath,B))}else{const oe=lr(W,E.values[I]),ne=O.fire.call(le,oe,B,W,C);if(ne){const Y=E.values[I];Object.keys(ne).forEach(Je=>{Le(Y,Je)?Y[Je]=ne[Je]:Re(Y,Je,ne[Je])})}}return le});return n.mutate(E).then(({failures:B,results:I,numFailures:W,lastResult:le})=>{for(let oe=0;oe<U.length;++oe){const ne=I?I[oe]:U[oe],Y=$[oe];null==ne?Y.onerror&&Y.onerror(B[oe]):Y.onsuccess&&Y.onsuccess("put"===E.type&&k[oe]?E.values[oe]:ne)}return{failures:B,results:I,numFailures:W,lastResult:le}}).catch(B=>($.forEach(I=>I.onerror&&I.onerror(B)),Promise.reject(B)))})}function x(E,C,U){return n.query({trans:E,values:!1,query:{index:r,range:C},limit:U}).then(({result:k})=>_({type:"delete",keys:k,trans:E}).then($=>$.numFailures>0?Promise.reject($.failures[0]):k.length<U?{failures:[],numFailures:0,lastResult:void 0}:x(E,{...C,lower:k[k.length-1],lowerOpen:!0},U)))}}}}})};function Er(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,a=0;i<e.keys.length&&a<t.length;++i)0===lt(e.keys[i],t[a])&&(r.push(n?vn(e.values[i]):e.values[i]),++a);return r.length===t.length?r:null}catch{return null}}const Ur={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=Er(r.keys,r.trans._cache,"clone"===r.cache);return i?b.resolve(i):n.getMany(r).then(a=>(r.trans._cache={keys:r.keys,values:"clone"===r.cache?vn(a):a},a))},mutate:r=>("add"!==r.type&&(r.trans._cache=null),n.mutate(r))}}})};function fr(t){return!("from"in t)}const xn=function(t,e){if(!this){const n=new xn;return t&&"d"in t&&Ae(n,t),n}Ae(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function qn(t,e,n){const r=lt(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(fr(t))return Ae(t,{from:e,to:n,d:1});const i=t.l,a=t.r;if(lt(n,t.from)<0)return i?qn(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Ar(t);if(lt(e,t.to)>0)return a?qn(a,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Ar(t);lt(e,t.from)<0&&(t.from=e,t.l=null,t.d=a?a.d+1:1),lt(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const l=!t.r;i&&!t.l&&Wn(t,i),a&&l&&Wn(t,a)}function Wn(t,e){fr(e)||function n(r,{from:i,to:a,l,r:g}){qn(r,i,a),l&&n(r,l),g&&n(r,g)}(t,e)}function hr(t){let e=fr(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&lt(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||lt(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Ar(t){var e,n;const r=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(n=t.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const a="r"===i?"l":"r",l={...t},g=t[i];t.from=g.from,t.to=g.to,t[i]=g[i],l[i]=g[a],t[a]=l,l.d=Sr(l)}t.d=Sr(t)}function Sr({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}gt(xn.prototype,{add(t){return Wn(this,t),this},addKey(t){return qn(this,t,t),this},addKeys(t){return t.forEach(e=>qn(this,e,e)),this},[R](){return hr(this)}});const $r={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new xn(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:a}=i,{primaryKey:l}=a,{extractKey:g,outbound:y}=l,O={...i,mutate:E=>{const C=E.trans,U=C.mutatedParts||(C.mutatedParts={}),k=ne=>{const Y=`idb://${e}/${r}/${ne}`;return U[Y]||(U[Y]=new xn)},$=k(""),B=k(":dels"),{type:I}=E;let[W,le]="deleteRange"===E.type?[E.range]:"delete"===E.type?[E.keys]:E.values.length<50?[[],E.values]:[];const oe=E.trans._cache;return i.mutate(E).then(ne=>{if(V(W)){"delete"!==I&&(W=ne.results),$.addKeys(W);const Y=Er(W,oe);Y||"add"===I||B.addKeys(W),(Y||le)&&(Je=k,Ct=Y,pt=le,a.indexes.forEach(function ln(on){const Bt=Je(on.name||"");function Dn(dn){return null!=dn?on.extractKey(dn):null}const Ln=dn=>on.multiEntry&&V(dn)?dn.forEach(jn=>Bt.addKey(jn)):Bt.addKey(dn);(Ct||pt).forEach((dn,jn)=>{const Vn=Ct&&Dn(Ct[jn]),pr=pt&&Dn(pt[jn]);0!==lt(Vn,pr)&&(null!=Vn&&Ln(Vn),null!=pr&&Ln(pr))})}))}else if(W){const Y={from:W.lower,to:W.upper};B.add(Y),$.add(Y)}else $.add(n),B.add(n),a.indexes.forEach(Y=>k(Y.name).add(n));var Je,Ct,pt;return ne})}},_=({query:{index:E,range:C}})=>{var U,k;return[E,new xn(null!==(U=C.lower)&&void 0!==U?U:t.MIN_KEY,null!==(k=C.upper)&&void 0!==k?k:t.MAX_KEY)]},x={get:E=>[l,new xn(E.key)],getMany:E=>[l,(new xn).addKeys(E.keys)],count:_,query:_,openCursor:_};return te(x).forEach(E=>{O[E]=function(C){const{subscr:U}=ce;if(U){const k=le=>{const oe=`idb://${e}/${r}/${le}`;return U[oe]||(U[oe]=new xn)},$=k(""),B=k(":dels"),[I,W]=x[E](C);if(k(I.name||"").add(W),!I.isPrimaryKey){if("count"!==E){const le="query"===E&&y&&C.values&&i.query({...C,values:!1});return i[E].apply(this,arguments).then(oe=>{if("query"===E){if(y&&C.values)return le.then(({result:Y})=>($.addKeys(Y),oe));const ne=C.values?oe.result.map(g):oe.result;C.values?$.addKeys(ne):B.addKeys(ne)}else if("openCursor"===E){const ne=oe,Y=C.values;return ne&&Object.create(ne,{key:{get:()=>(B.addKey(ne.primaryKey),ne.key)},primaryKey:{get(){const Je=ne.primaryKey;return B.addKey(Je),Je}},value:{get:()=>(Y&&$.addKey(ne.primaryKey),ne.value)}})}return oe})}B.add(n)}}return i[E].apply(this,arguments)}}),O}}}};class Cn{constructor(e,n){this._middlewares={},this.verno=0;const r=Cn.dependencies;this._options=n={addons:Cn.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ce,dbReadyPromise:null,cancelOpen:Ce,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var l,g;a.dbReadyPromise=new b(g=>{a.dbReadyResolve=g}),a.openCanceller=new b((g,y)=>{a.cancelOpen=y}),this._state=a,this.name=e,this.on=Gt(this,"populate","blocked","versionchange","close",{ready:[ft,Ce]}),this.on.ready.subscribe=Nt(this.on.ready.subscribe,g=>(y,O)=>{Cn.vip(()=>{const _=this._state;if(_.openComplete)_.dbOpenError||b.resolve().then(y),O&&g(y);else if(_.onReadyBeingFired)_.onReadyBeingFired.push(y),O&&g(y);else{g(y);const x=this;O||g(function E(){x.on.ready.unsubscribe(y),x.on.ready.unsubscribe(E)})}})}),this.Collection=(l=this,Rt(Rn.prototype,function(g,y){this.db=l;let O=ct,_=null;if(y)try{O=y()}catch(U){_=U}const x=g._ctx,E=x.table,C=E.hook.reading.fire;this._ctx={table:E,index:x.index,isPrimKey:!x.index||E.schema.primKey.keyPath&&x.index===E.schema.primKey.name,range:O,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:x.or,valueMapper:C!==vt?C:null}})),this.Table=(g=this,Rt(_t.prototype,function(y,O,_){this.db=g,this._tx=_,this.name=y,this.schema=O,this.hook=g._allTables[y]?g._allTables[y].hook:Gt(null,{creating:[ht,Ce],reading:[Oe,vt],updating:[St,Ce],deleting:[an,Ce]})})),this.Transaction=function(g){return Rt(Tr.prototype,function(y,O,_,x,E){this.db=g,this.mode=y,this.storeNames=O,this.schema=_,this.chromeTransactionDurability=x,this.idbtrans=null,this.on=Gt(this,"complete","error","abort"),this.parent=E||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new b((C,U)=>{this._resolve=C,this._reject=U}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},C=>{var U=this.active;return this.active=!1,this.on.error.fire(C),this.parent?this.parent._reject(C):U&&this.idbtrans&&this.idbtrans.abort(),_e(C)})})}(this),this.Version=function(g){return Rt(jr.prototype,function(y){this.db=g,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(g){return Rt(mr.prototype,function(y,O,_){this.db=g,this._ctx={table:y,index:":id"===O?null:O,or:_};const x=g._deps.indexedDB;if(!x)throw new v.MissingAPI;this._cmp=this._ascending=x.cmp.bind(x),this._descending=(E,C)=>x.cmp(C,E),this._max=(E,C)=>x.cmp(E,C)>0?E:C,this._min=(E,C)=>x.cmp(E,C)<0?E:C,this._IDBKeyRange=g._deps.IDBKeyRange})}(this),this.on("versionchange",g=>{g.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",g=>{!g.newVersion||g.newVersion<g.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${g.oldVersion/10}`)}),this._maxKey=$n(n.IDBKeyRange),this._createTransaction=(g,y,O,_)=>new this.Transaction(g,y,O,this._options.chromeTransactionDurability,_),this._fireOnBlocked=g=>{this.on("blocked").fire(g),Z.filter(y=>y.name===this.name&&y!==this&&!y._state.vcFired).map(y=>y.on("versionchange").fire(g))},this.use(Dr),this.use(Lr),this.use($r),this.use(Ur),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(g=>g(this))}version(e){if(isNaN(e)||e<.1)throw new v.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new v.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Cr),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||ce.letThrough||this._vip)?e():new b((n,r)=>{if(this._state.openComplete)return r(new v.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new v.DatabaseClosed);this.open().catch(Ce)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const a=this._middlewares[e]||(this._middlewares[e]=[]);return a.push({stack:e,create:n,level:r??10,name:i}),a.sort((l,g)=>l.level-g.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return function Rr(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?_e(e.dbOpenError):t);He&&(e.openCanceller._stackHolder=$t()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new v.DatabaseClosed("db.open() was cancelled")}let a=e.dbReadyResolve,l=null,g=!1;return b.race([r,(typeof navigator>"u"?b.resolve():Kr()).then(()=>new b((y,O)=>{if(i(),!n)throw new v.MissingAPI;const _=t.name,x=e.autoSchema?n.open(_):n.open(_,Math.round(10*t.verno));if(!x)throw new v.MissingAPI;x.onerror=_n(O),x.onblocked=Me(t._fireOnBlocked),x.onupgradeneeded=Me(E=>{if(l=x.transaction,e.autoSchema&&!t._options.allowEmptyDB){x.onerror=Un,l.abort(),x.result.close();const U=n.deleteDatabase(_);U.onsuccess=U.onerror=Me(()=>{O(new v.NoSuchDatabase(`Database ${_} doesnt exist`))})}else{l.onerror=_n(O);var C=E.oldVersion>Math.pow(2,62)?0:E.oldVersion;g=C<1,t._novip.idbdb=x.result,function Br(t,e,n,r){const i=t._dbSchema,a=t._createTransaction("readwrite",t._storeNames,i);a.create(n),a._completion.catch(r);const l=a._reject.bind(a),g=ce.transless||ce;ie(()=>{ce.trans=a,ce.transless=g,0===e?(te(i).forEach(y=>{nr(n,y,i[y].primKey,i[y].indexes)}),er(t,n),b.follow(()=>t.on.populate.fire(a)).catch(l)):function({_novip:y},O,_,x){const E=[],C=y._versions;let U=y._dbSchema=ir(0,y.idbdb,x),k=!1;return C.filter(I=>I._cfg.version>=O).forEach(I=>{E.push(()=>{const W=U,le=I._cfg.dbschema;or(y,W,x),or(y,le,x),U=y._dbSchema=le;const oe=wr(W,le);oe.add.forEach(Y=>{nr(x,Y[0],Y[1].primKey,Y[1].indexes)}),oe.change.forEach(Y=>{if(Y.recreate)throw new v.Upgrade("Not yet support for changing primary key");{const Je=x.objectStore(Y.name);Y.add.forEach(X=>rr(Je,X)),Y.change.forEach(X=>{Je.deleteIndex(X.name),rr(Je,X)}),Y.del.forEach(X=>Je.deleteIndex(X))}});const ne=I._cfg.contentUpgrade;if(ne&&I._cfg.version>O){er(y,x),_._memoizedTables={},k=!0;let Y=be(le);oe.del.forEach(pt=>{Y[pt]=W[pt]}),tr(y,[y.Transaction.prototype]),Yn(y,[y.Transaction.prototype],te(Y),Y),_.schema=Y;const Je=Ee(ne);let X;Je&&u();const Ct=b.follow(()=>{if(X=ne(_),X&&Je){var pt=o.bind(null,null);X.then(pt,pt)}});return X&&"function"==typeof X.then?b.resolve(X):Ct.then(()=>X)}}),E.push(W=>{var le,oe;(!k||!ve)&&(le=I._cfg.dbschema,[].slice.call((oe=W).db.objectStoreNames).forEach(ne=>null==le[ne]&&oe.db.deleteObjectStore(ne))),tr(y,[y.Transaction.prototype]),Yn(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),_.schema=y._dbSchema})}),function B(){return E.length?b.resolve(E.shift()(_.idbtrans)).then(B):b.resolve()}().then(()=>{var I,W;W=x,te(I=U).forEach(le=>{W.db.objectStoreNames.contains(le)||nr(W,le,I[le].primKey,I[le].indexes)})})}(t,e,a,n).catch(l)})}(t,C/10,l,O)}},O),x.onsuccess=Me(()=>{l=null;const E=t._novip.idbdb=x.result,C=We(E.objectStoreNames);if(C.length>0)try{const k=E.transaction(1===(U=C).length?U[0]:U,"readonly");e.autoSchema?function({_novip:$},B,I){$.verno=B.version/10;const W=$._dbSchema=ir(0,B,I);$._storeNames=We(B.objectStoreNames,0),Yn($,[$._allTables],te(W),W)}(t,E,k):(or(t,t._dbSchema,k),function($,B){const I=wr(ir(0,$.idbdb,B),$._dbSchema);return!(I.add.length||I.change.some(W=>W.add.length||W.change.length))}(t,k)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),er(t,k)}catch{}var U;Z.push(t),E.onversionchange=Me(k=>{e.vcFired=!0,t.on("versionchange").fire(k)}),E.onclose=Me(k=>{t.on("close").fire(k)}),g&&function({indexedDB:k,IDBKeyRange:$},B){!ar(k)&&B!==Ht&&sr(k,$).put({name:B}).catch(Ce)}(t._deps,_),y()},O)}))]).then(()=>(i(),e.onReadyBeingFired=[],b.resolve(ur(()=>t.on.ready.fire(t.vip))).then(function y(){if(e.onReadyBeingFired.length>0){let O=e.onReadyBeingFired.reduce(ft,Ce);return e.onReadyBeingFired=[],b.resolve(ur(()=>O(t.vip))).then(y)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(y=>{e.dbOpenError=y;try{l&&l.abort()}catch{}return r===e.openCanceller&&t._close(),_e(y)}).finally(()=>{e.openComplete=!0,a()})}(this)}_close(){const e=this._state,n=Z.indexOf(this);if(n>=0&&Z.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new b(r=>{e.dbReadyResolve=r}),e.openCanceller=new b((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new v.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new b((r,i)=>{const a=()=>{this.close();var l=this._deps.indexedDB.deleteDatabase(this.name);l.onsuccess=Me(()=>{(function({indexedDB:g,IDBKeyRange:y},O){!ar(g)&&O!==Ht&&sr(g,y).delete(O).catch(Ce)})(this._deps,this.name),r()}),l.onerror=_n(i),l.onblocked=this._fireOnBlocked};if(e)throw new v.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(a):a()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return te(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Fr.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=ce.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);const a=-1!==e.indexOf("?");let l,g;e=e.replace("!","").replace("?","");try{if(g=n.map(O=>{var _=O instanceof this.Table?O.name:O;if("string"!=typeof _)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return _}),"r"==e||e===At)l=At;else{if("rw"!=e&&e!=Qt)throw new v.InvalidArgument("Invalid transaction mode: "+e);l=Qt}if(i){if(i.mode===At&&l===Qt){if(!a)throw new v.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&g.forEach(O=>{if(i&&-1===i.storeNames.indexOf(O)){if(!a)throw new v.SubTransaction("Table "+O+" not included in parent transaction.");i=null}}),a&&i&&!i.active&&(i=null)}}catch(O){return i?i._promise(null,(_,x)=>{x(O)}):_e(O)}const y=_r.bind(null,this,l,g,i,r);return i?i._promise(l,y,"lock"):ce.trans?ae(ce.transless,()=>this._whenReady(y)):this._whenReady(y)}table(e){if(!Le(this._allTables,e))throw new v.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Zr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class qr{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:n,complete:r})}[Zr](){return this}}function xr(t,e){return te(e).forEach(n=>{Wn(t[n]||(t[n]=new xn),e[n])}),t}let dr;try{dr={indexedDB:N.indexedDB||N.mozIndexedDB||N.webkitIndexedDB||N.msIndexedDB,IDBKeyRange:N.IDBKeyRange||N.webkitIDBKeyRange}}catch{dr={indexedDB:null,IDBKeyRange:null}}const Bn=Cn;function zn(t){let e=On;try{On=!0,In.storagemutated.fire(t)}finally{On=e}}gt(Bn,{...Te,delete:t=>new Bn(t,{addons:[]}).delete(),exists:t=>new Bn(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return ar(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==Ht)):sr(e,n).toCollection().primaryKeys()}(Bn.dependencies).then(t)}catch{return _e(new v.MissingAPI)}},defineClass:()=>function(t){Ae(this,t)},ignoreTransaction:t=>ce.trans?ae(ce.transless,t):t(),vip:ur,async:function(t){return function(){try{var e=cr(t.apply(this,arguments));return e&&"function"==typeof e.then?e:b.resolve(e)}catch(n){return _e(n)}}},spawn:function(t,e,n){try{var r=cr(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:b.resolve(r)}catch(i){return _e(i)}},currentTransaction:{get:()=>ce.trans||null},waitFor:function(t,e){const n=b.resolve("function"==typeof t?Bn.ignoreTransaction(t):t).timeout(e||6e4);return ce.trans?ce.trans.waitFor(n):n},Promise:b,debug:{get:()=>He,set:t=>{jt(t,"dexie"===t?()=>!0:De)}},derive:st,extend:Ae,props:gt,override:Nt,Events:Gt,on:In,liveQuery:function Vr(t){let e,n=!1;const r=new qr(i=>{const a=Ee(t);let l=!1,g={},y={};const O={get closed(){return l},unsubscribe:()=>{l=!0,In.storagemutated.unsubscribe(C)}};i.start&&i.start(O);let _=!1,x=!1;function E(){return te(y).some(k=>g[k]&&function Mr(t,e){const n=hr(e);let r=n.next();if(r.done)return!1;let i=r.value;const a=hr(t);let l=a.next(i.from),g=l.value;for(;!r.done&&!l.done;){if(lt(g.from,i.to)<=0&&lt(g.to,i.from)>=0)return!0;lt(i.from,g.from)<0?i=(r=n.next(g.from)).value:g=(l=a.next(i.from)).value}return!1}(g[k],y[k]))}const C=k=>{xr(g,k),E()&&U()},U=()=>{if(_||l)return;g={};const k={},$=function(B){a&&u();const I=()=>ie(t,{subscr:B,trans:null}),W=ce.trans?ae(ce.transless,I):I();return a&&W.then(o,o),W}(k);x||(In(Mn,C),x=!0),_=!0,Promise.resolve($).then(B=>{n=!0,e=B,_=!1,l||(E()?U():(g={},y=k,i.next&&i.next(B)))},B=>{_=!1,n=!1,i.error&&i.error(B),O.unsubscribe()})};return U(),O});return r.hasValue=()=>n,r.getValue=()=>e,r},extendObservabilitySet:xr,getByKeyPath:Lt,setByKeyPath:Re,delByKeyPath:function(t,e){"string"==typeof e?Re(t,e,void 0):"length"in e&&[].map.call(e,function(n){Re(t,n,void 0)})},shallowClone:be,deepClone:vn,getObjectDiff:lr,cmp:lt,asap:Tt,minKey:Pe,addons:[],connections:Z,errnames:fe,dependencies:dr,semVer:"3.2.4",version:"3.2.4".split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Bn.maxKey=$n(Bn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(In(Mn,t=>{if(!On){let e;me?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Tn,!0,!0,t)):e=new CustomEvent(Tn,{detail:t}),On=!0,dispatchEvent(e),On=!1}}),addEventListener(Tn,({detail:t})=>{On||zn(t)}));let On=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Tn);"function"==typeof t.unref&&t.unref(),In(Mn,e=>{On||t.postMessage(e)}),t.onmessage=e=>{e.data&&zn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){In(Mn,e=>{try{On||(typeof localStorage<"u"&&localStorage.setItem(Tn,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Tn,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Tn){const n=JSON.parse(e.newValue);n&&zn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Tn&&zn(e.changedParts)})}b.rejectionMapper=function(t,e){if(!t||t instanceof h||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ee[t.name])return t;var n=new ee[t.name](e||t.message,t);return"stack"in t&&Et(n,"stack",{get:function(){return this.inner.stack}}),n},jt(He,De)},5861:($e,Ie,se)=>{"use strict";function N(V,Ae,re,xe,Le,gt,Ft){try{var Et=V[gt](Ft),st=Et.value}catch(rt){return void re(rt)}Et.done?Ae(st):Promise.resolve(st).then(xe,Le)}function te(V){return function(){var Ae=this,re=arguments;return new Promise(function(xe,Le){var gt=V.apply(Ae,re);function Ft(st){N(gt,xe,Le,Ft,Et,"next",st)}function Et(st){N(gt,xe,Le,Ft,Et,"throw",st)}Ft(void 0)})}}se.d(Ie,{Z:()=>te})},6656:($e,Ie,se)=>{"use strict";se.d(Ie,{Z:()=>Ae});var N=se(1002);function Ae(re,xe,Le){return(xe=function V(re){var xe=function te(re,xe){if("object"!==(0,N.Z)(re)||null===re)return re;var Le=re[Symbol.toPrimitive];if(void 0!==Le){var gt=Le.call(re,xe||"default");if("object"!==(0,N.Z)(gt))return gt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===xe?String:Number)(re)}(re,"string");return"symbol"===(0,N.Z)(xe)?xe:String(xe)}(xe))in re?Object.defineProperty(re,xe,{value:Le,enumerable:!0,configurable:!0,writable:!0}):re[xe]=Le,re}},1002:($e,Ie,se)=>{"use strict";function N(te){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(te)}se.d(Ie,{Z:()=>N})}}]);