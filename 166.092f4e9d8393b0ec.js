(self.webpackChunkgrade_scope_istic=self.webpackChunkgrade_scope_istic||[]).push([[166],{2384:(De,Pe,V)=>{"use strict";V.d(Pe,{z:()=>Zt});var O=V(5861),W=V(4942),K=V(9505),ue=V(4687);function ne(L,o,f,h){return new(f||(f=Promise))(function(A,S){function ge(oe){try{v(h.next(oe))}catch(Fe){S(Fe)}}function ve(oe){try{v(h.throw(oe))}catch(Fe){S(Fe)}}function v(oe){oe.done?A(oe.value):function p(A){return A instanceof f?A:new f(function(S){S(A)})}(oe.value).then(ge,ve)}v((h=h.apply(L,o||[])).next())})}function de(L,o){var h,p,A,S,f={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return S={next:ge(0),throw:ge(1),return:ge(2)},"function"==typeof Symbol&&(S[Symbol.iterator]=function(){return this}),S;function ge(v){return function(oe){return function ve(v){if(h)throw new TypeError("Generator is already executing.");for(;f;)try{if(h=1,p&&(A=2&v[0]?p.return:v[0]?p.throw||((A=p.return)&&A.call(p),0):p.next)&&!(A=A.call(p,v[1])).done)return A;switch(p=0,A&&(v=[2&v[0],A.value]),v[0]){case 0:case 1:A=v;break;case 4:return f.label++,{value:v[1],done:!1};case 5:f.label++,p=v[1],v=[0];continue;case 7:v=f.ops.pop(),f.trys.pop();continue;default:if(!(A=(A=f.trys).length>0&&A[A.length-1])&&(6===v[0]||2===v[0])){f=0;continue}if(3===v[0]&&(!A||v[1]>A[0]&&v[1]<A[3])){f.label=v[1];break}if(6===v[0]&&f.label<A[1]){f.label=A[1],A=v;break}if(A&&f.label<A[2]){f.label=A[2],f.ops.push(v);break}A[2]&&f.ops.pop(),f.trys.pop();continue}v=o.call(L,f)}catch(oe){v=[6,oe],p=0}finally{h=A=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,oe])}}}function Le(L){return[L.schema.primKey].concat(L.schema.indexes).map(function(f){return f.src}).join(",")}function Be(L,o){return new Promise(function(f,h){var p=new FileReader;p.onabort=function(A){return h(new Error("file read aborted"))},p.onerror=function(A){return h(A.target.error)},p.onload=function(A){return f(A.target.result)},"binary"===o?p.readAsArrayBuffer(L):p.readAsText(L)})}function z(L,o){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var f=new FileReaderSync;return"binary"===o?f.readAsArrayBuffer(L):f.readAsText(L)}var B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $(L,o){return L(o={exports:{}},o.exports),o.exports}for(var Ie=$(function(L,o){L.exports=function(){function f(b){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(b)}function h(b,R,D,M,X,Qe,it){try{var Xe=b[Qe](it),_e=Xe.value}catch(Ut){return void D(Ut)}Xe.done?R(_e):Promise.resolve(_e).then(M,X)}function p(b){return function(){var R=this,D=arguments;return new Promise(function(M,X){var Qe=b.apply(R,D);function it(_e){h(Qe,M,X,it,Xe,"next",_e)}function Xe(_e){h(Qe,M,X,it,Xe,"throw",_e)}it(void 0)})}}function A(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")}function S(b,R){for(var D=0;D<R.length;D++){var M=R[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(b,M.key,M)}}function ve(b,R,D){return R in b?Object.defineProperty(b,R,{value:D,enumerable:!0,configurable:!0,writable:!0}):b[R]=D,b}function v(b,R){var D=Object.keys(b);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(b);R&&(M=M.filter(function(X){return Object.getOwnPropertyDescriptor(b,X).enumerable})),D.push.apply(D,M)}return D}function oe(b){for(var R=1;R<arguments.length;R++){var D=null!=arguments[R]?arguments[R]:{};R%2?v(Object(D),!0).forEach(function(M){ve(b,M,D[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(D)):v(Object(D)).forEach(function(M){Object.defineProperty(b,M,Object.getOwnPropertyDescriptor(D,M))})}return b}function Fe(b,R){return function Ce(b){if(Array.isArray(b))return b}(b)||function mt(b,R){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b)){var D=[],M=!0,X=!1,Qe=void 0;try{for(var Xe,it=b[Symbol.iterator]();!(M=(Xe=it.next()).done)&&(D.push(Xe.value),!R||D.length!==R);M=!0);}catch(_e){X=!0,Qe=_e}finally{try{!M&&null!=it.return&&it.return()}finally{if(X)throw Qe}}return D}}(b,R)||function Pt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Me(b){return function Et(b){if(Array.isArray(b)){for(var R=0,D=new Array(b.length);R<b.length;R++)D[R]=b[R];return D}}(b)||function Ze(b){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b))return Array.from(b)}(b)||function an(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var re=function b(R){A(this,b),this.p=new Promise(R)};re.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(re.prototype[Symbol.toStringTag]="TypesonPromise"),re.prototype.then=function(b,R){var D=this;return new re(function(M,X){D.p.then(function(Qe){M(b?b(Qe):Qe)}).catch(function(Qe){return R?R(Qe):Promise.reject(Qe)}).then(M,X)})},re.prototype.catch=function(b){return this.then(null,b)},re.resolve=function(b){return new re(function(R){R(b)})},re.reject=function(b){return new re(function(R,D){D(b)})},["all","race"].forEach(function(b){re[b]=function(R){return new re(function(D,M){Promise[b](R.map(function(X){return X&&X.constructor&&"TypesonPromise"===X.constructor.__typeson__type__?X.p:X})).then(D,M)})}});var Ke={}.toString,Ct={}.hasOwnProperty,It=Object.getPrototypeOf,Dt=Ct.toString;function I(b,R){return rt(b)&&"function"==typeof b.then&&(!R||"function"==typeof b.catch)}function d(b){return Ke.call(b).slice(8,-1)}function U(b,R){if(!b||"object"!==f(b))return!1;var D=It(b);if(!D)return null===R;var M=Ct.call(D,"constructor")&&D.constructor;return"function"!=typeof M?null===R:R===M||null!==R&&Dt.call(M)===Dt.call(R)||"function"==typeof R&&"string"==typeof M.__typeson__type__&&M.__typeson__type__===R.__typeson__type__}function T(b){return!(!b||"Object"!==d(b))&&(!It(b)||U(b,Object))}function rt(b){return b&&"object"===f(b)}function ht(b){return b.replace(/~/g,"~0").replace(/\./g,"~1")}function bt(b){return b.replace(/~1/g,".").replace(/~0/g,"~")}function At(b,R){if(""===R)return b;var D=R.indexOf(".");if(D>-1){var M=b[bt(R.slice(0,D))];return void 0===M?void 0:At(M,R.slice(D+1))}return b[bt(R)]}function ze(b,R,D){if(""===R)return D;var M=R.indexOf(".");return M>-1?ze(b[bt(R.slice(0,M))],R.slice(M+1),D):(b[bt(R)]=D,b)}var en=Object.keys,Jt=Array.isArray,$t={}.hasOwnProperty,pe=["type","replaced","iterateIn","iterateUnsetNumeric"];function we(b,R){if(""===b.keypath)return-1;var D=b.keypath.match(/\./g)||0,M=R.keypath.match(/\./g)||0;return D&&(D=D.length),M&&(M=M.length),D>M?-1:D<M?1:b.keypath<R.keypath?-1:b.keypath>R.keypath}var He=function(){function b(R){A(this,b),this.options=R,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function ge(b,R,D){return R&&S(b.prototype,R),D&&S(b,D),b}(b,[{key:"stringify",value:function(D,M,X,Qe){Qe=oe({},this.options,{},Qe,{stringification:!0});var it=this.encapsulate(D,null,Qe);return Jt(it)?JSON.stringify(it[0],M,X):it.then(function(Xe){return JSON.stringify(Xe,M,X)})}},{key:"stringifySync",value:function(D,M,X,Qe){return this.stringify(D,M,X,oe({throwOnBadSyncType:!0},Qe,{sync:!0}))}},{key:"stringifyAsync",value:function(D,M,X,Qe){return this.stringify(D,M,X,oe({throwOnBadSyncType:!0},Qe,{sync:!1}))}},{key:"parse",value:function(D,M,X){return X=oe({},this.options,{},X,{parse:!0}),this.revive(JSON.parse(D,M),X)}},{key:"parseSync",value:function(D,M,X){return this.parse(D,M,oe({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"parseAsync",value:function(D,M,X){return this.parse(D,M,oe({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"specialTypeNames",value:function(D,M){var X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X.returnTypeNames=!0,this.encapsulate(D,M,X)}},{key:"rootTypeName",value:function(D,M){var X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X.iterateNone=!0,this.encapsulate(D,M,X)}},{key:"encapsulate",value:function(D,M,X){var it=(X=oe({sync:!0},this.options,{},X)).sync,Xe=this,_e={},Ut=[],Vt=[],Gt=[],tn=!("cyclic"in X)||X.cyclic,hn=X.encapsulateObserver,We=lt("",D,tn,M||{},Gt);function wt(ce){var u=Object.values(_e);if(X.iterateNone)return u.length?u[0]:b.getJSONType(ce);if(u.length){if(X.returnTypeNames)return Me(new Set(u));ce&&T(ce)&&!$t.call(ce,"$types")?ce.$types=_e:ce={$:ce,$types:{$:_e}}}else rt(ce)&&$t.call(ce,"$types")&&(ce={$:ce,$types:!0});return!X.returnTypeNames&&ce}function Tt(ce,u){return ct.apply(this,arguments)}function ct(){return ct=p(ue.mark(function ce(u,s){var c;return ue.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,Promise.all(s.map(function(G){return G[1].p}));case 2:return c=w.sent,w.next=5,Promise.all(c.map(function(){var G=p(ue.mark(function H(fe){var ie,Ae,$e,ft,Te,ut,Re,he,Y;return ue.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(ie=[],Ae=s.splice(0,1),$e=Fe(Ae,1),ft=Fe($e[0],7),ut=ft[4],Re=ft[5],he=lt(Te=ft[0],fe,ft[2],ft[3],ie,!0,ft[6]),Y=U(he,re),!Te||!Y){ke.next=11;break}return ke.next=8,he.p;case 8:return ut[Re]=ke.sent,ke.abrupt("return",Tt(u,ie));case 11:return Te?ut[Re]=he:u=Y?he.p:he,ke.abrupt("return",Tt(u,ie));case 13:case"end":return ke.stop()}},H)}));return function(H){return G.apply(this,arguments)}}()));case 5:return w.abrupt("return",u);case 6:case"end":return w.stop()}},ce)})),ct.apply(this,arguments)}function at(ce,u,s){Object.assign(ce,u);var c=pe.map(function(m){var w=ce[m];return delete ce[m],w});s(),pe.forEach(function(m,w){ce[m]=c[w]})}function lt(ce,u,s,c,m,w,G){var H,fe={},ie=f(u),Ae=hn?function(Y){var Ee=G||c.type||b.getJSONType(u);hn(Object.assign(Y||fe,{keypath:ce,value:u,cyclic:s,stateObj:c,promisesData:m,resolvingTypesonPromise:w,awaitingTypesonPromise:U(u,re)},{type:Ee}))}:null;if(["string","boolean","number","undefined"].includes(ie))return void 0===u||"number"===ie&&(isNaN(u)||u===-1/0||u===1/0)?(H=c.replaced?u:Nt(ce,u,c,m,!1,w,Ae))!==u&&(fe={replaced:H}):H=u,Ae&&Ae(),H;if(null===u)return Ae&&Ae(),u;if(s&&!c.iterateIn&&!c.iterateUnsetNumeric&&u&&"object"===f(u)){var $e=Ut.indexOf(u);if(!($e<0))return _e[ce]="#",Ae&&Ae({cyclicKeypath:Vt[$e]}),"#"+Vt[$e];!0===s&&(Ut.push(u),Vt.push(ce))}var Je,Ge=T(u),ft=Jt(u),Te=(Ge||ft)&&(!Xe.plainObjectReplacers.length||c.replaced)||c.iterateIn?u:Nt(ce,u,c,m,Ge||ft,null,Ae);if(Te!==u?(H=Te,fe={replaced:Te}):""===ce&&U(u,re)?(m.push([ce,u,s,c,void 0,void 0,c.type]),H=u):ft&&"object"!==c.iterateIn||"array"===c.iterateIn?(Je=new Array(u.length),fe={clone:Je}):(["function","symbol"].includes(f(u))||"toJSON"in u||U(u,re)||U(u,Promise)||U(u,ArrayBuffer))&&!Ge&&"object"!==c.iterateIn?H=u:(Je={},c.addLength&&(Je.length=u.length),fe={clone:Je}),Ae&&Ae(),X.iterateNone)return Je||H;if(!Je)return H;if(c.iterateIn){var gt=function(Ee){var Se={ownKeys:$t.call(u,Ee)};at(c,Se,function(){var ke=ce+(ce?".":"")+ht(Ee),qe=lt(ke,u[Ee],!!s,c,m,w);U(qe,re)?m.push([ke,qe,!!s,c,Je,Ee,c.type]):void 0!==qe&&(Je[Ee]=qe)})};for(var ut in u)gt(ut);Ae&&Ae({endIterateIn:!0,end:!0})}else en(u).forEach(function(Y){var Ee=ce+(ce?".":"")+ht(Y);at(c,{ownKeys:!0},function(){var ke=lt(Ee,u[Y],!!s,c,m,w);U(ke,re)?m.push([Ee,ke,!!s,c,Je,Y,c.type]):void 0!==ke&&(Je[Y]=ke)})}),Ae&&Ae({endIterateOwn:!0,end:!0});if(c.iterateUnsetNumeric){for(var Re=u.length,St=function(Ee){if(!(Ee in u)){var Se=ce+(ce?".":"")+Ee;at(c,{ownKeys:!1},function(){var qe=lt(Se,void 0,!!s,c,m,w);U(qe,re)?m.push([Se,qe,!!s,c,Je,Ee,c.type]):void 0!==qe&&(Je[Ee]=qe)})}},he=0;he<Re;he++)St(he);Ae&&Ae({endIterateUnsetNumeric:!0,end:!0})}return Je}function Nt(ce,u,s,c,m,w,G){for(var H=m?Xe.plainObjectReplacers:Xe.nonplainObjectReplacers,fe=H.length;fe--;){var ie=H[fe];if(ie.test(u,s)){var Ae=ie.type;if(Xe.revivers[Ae]){var $e=_e[ce];_e[ce]=$e?[Ae].concat($e):Ae}return Object.assign(s,{type:Ae,replaced:!0}),!it&&ie.replaceAsync||ie.replace?(G&&G({replacing:!0}),lt(ce,ie[it||!ie.replaceAsync?"replace":"replaceAsync"](u,s),tn&&"readonly",s,c,w,Ae)):(G&&G({typeDetected:!0}),lt(ce,u,tn&&"readonly",s,c,w,Ae))}}return u}return Gt.length?it&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Tt(We,Gt)).then(wt):!it&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():X.stringification&&it?[wt(We)]:it?wt(We):Promise.resolve(wt(We))}},{key:"encapsulateSync",value:function(D,M,X){return this.encapsulate(D,M,oe({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"encapsulateAsync",value:function(D,M,X){return this.encapsulate(D,M,oe({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"revive",value:function(D,M){var X=D&&D.$types;if(!X)return D;if(!0===X)return D.$;var it=(M=oe({sync:!0},this.options,{},M)).sync,Xe=[],_e={},Ut=!0;X.$&&T(X.$)&&(D=D.$,X=X.$,Ut=!1);var Vt=this;function Gt(ct,at){var ce=Fe(Vt.revivers[ct]||[],1)[0];if(!ce)throw new Error("Unregistered type: "+ct);return it&&!("revive"in ce)?at:ce[it&&ce.revive?"revive":!it&&ce.reviveAsync?"reviveAsync":"revive"](at,_e)}var un=[];function We(ct){return U(ct,Bt)?void 0:ct}var Tt,wt=function tn(){var ct=[];if(Object.entries(X).forEach(function(at){var lt=Fe(at,2),Nt=lt[0],ce=lt[1];"#"!==ce&&[].concat(ce).forEach(function(u){Fe(Vt.revivers[u]||[null,{}],2)[1].plain&&(ct.push({keypath:Nt,type:u}),delete X[Nt])})}),ct.length)return ct.sort(we).reduce(function at(lt,Nt){var ce=Nt.keypath,u=Nt.type;if(I(lt))return lt.then(function(m){return at(m,{keypath:ce,type:u})});var s=At(D,ce);if(U(s=Gt(u,s),re))return s.then(function(m){var w=ze(D,ce,m);w===m&&(D=w)});var c=ze(D,ce,s);c===s&&(D=c)},void 0)}();return U(wt,re)?Tt=wt.then(function(){return D}):(Tt=function hn(ct,at,lt,Nt,ce){if(!Ut||"$types"!==ct){var u=X[ct],s=Jt(at);if(s||T(at)){var c=s?new Array(at.length):{};for(en(at).forEach(function($e){var Ge=hn(ct+(ct?".":"")+ht($e),at[$e],lt||c,c,$e),ft=function(Je){return U(Je,Bt)?c[$e]=void 0:void 0!==Je&&(c[$e]=Je),Je};U(Ge,re)?un.push(Ge.then(function(Te){return ft(Te)})):ft(Ge)}),at=c;Xe.length;){var m=Fe(Xe[0],4),H=m[2],fe=m[3],ie=At(m[0],m[1]);if(void 0===ie)break;H[fe]=ie,Xe.splice(0,1)}}if(!u)return at;if("#"===u){var Ae=At(lt,at.slice(1));return void 0===Ae&&Xe.push([lt,at.slice(1),Nt,ce]),Ae}return[].concat(u).reduce(function $e(Ge,ft){return U(Ge,re)?Ge.then(function(Te){return $e(Te,ft)}):Gt(ft,Ge)},at)}}("",D,null),un.length&&(Tt=re.resolve(Tt).then(function(ct){return re.all([ct].concat(un))}).then(function(ct){return Fe(ct,1)[0]}))),I(Tt)?it&&M.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():U(Tt,re)?Tt.p.then(We):Tt:!it&&M.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():it?We(Tt):Promise.resolve(We(Tt))}},{key:"reviveSync",value:function(D,M){return this.revive(D,oe({throwOnBadSyncType:!0},M,{sync:!0}))}},{key:"reviveAsync",value:function(D,M){return this.revive(D,oe({throwOnBadSyncType:!0},M,{sync:!1}))}},{key:"register",value:function(D,M){return M=M||{},[].concat(D).forEach(function X(Qe){var it=this;if(Jt(Qe))return Qe.map(function(Xe){return X.call(it,Xe)});Qe&&en(Qe).forEach(function(Xe){if("#"===Xe)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(b.JSON_TYPES.includes(Xe))throw new TypeError("Plain JSON object types are reserved as type names");var _e=Qe[Xe],Ut=_e&&_e.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Vt=Ut.filter(function(lt){return lt.type===Xe});if(Vt.length&&(Ut.splice(Ut.indexOf(Vt[0]),1),delete this.revivers[Xe],delete this.types[Xe]),"function"==typeof _e){var Gt=_e;_e={test:function(Nt){return Nt&&Nt.constructor===Gt},replace:function(Nt){return oe({},Nt)},revive:function(Nt){return Object.assign(Object.create(Gt.prototype),Nt)}}}else if(Jt(_e)){var un=Fe(_e,3);_e={test:un[0],replace:un[1],revive:un[2]}}if(_e&&_e.test){var Tt={type:Xe,test:_e.test.bind(_e)};_e.replace&&(Tt.replace=_e.replace.bind(_e)),_e.replaceAsync&&(Tt.replaceAsync=_e.replaceAsync.bind(_e));var ct="number"==typeof M.fallback?M.fallback:M.fallback?0:1/0;if(_e.testPlainObjects?this.plainObjectReplacers.splice(ct,0,Tt):this.nonplainObjectReplacers.splice(ct,0,Tt),_e.revive||_e.reviveAsync){var at={};_e.revive&&(at.revive=_e.revive.bind(_e)),_e.reviveAsync&&(at.reviveAsync=_e.reviveAsync.bind(_e)),this.revivers[Xe]=[at,{plain:_e.testPlainObjects}]}this.types[Xe]=_e}},this)},this),this}}]),b}(),Bt=function b(){A(this,b)};return Bt.__typeson__type__="TypesonUndefined",He.Undefined=Bt,He.Promise=re,He.isThenable=I,He.toStringTag=d,He.hasConstructorOf=U,He.isObject=rt,He.isPlainObject=T,He.isUserObject=function ot(b){if(!b||"Object"!==d(b))return!1;var R=It(b);return!R||U(b,Object)||ot(R)},He.escapeKeyPathComponent=ht,He.unescapeKeyPathComponent=bt,He.getByKeyPath=At,He.getJSONType=function zt(b){return null===b?"null":Array.isArray(b)?"array":f(b)},He.JSON_TYPES=["null","boolean","number","string","array","object"],He}()}),me=$(function(L,o){L.exports=function(){function f(u){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(u)}function p(u,s){for(var c=0;c<s.length;c++){var m=s[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}function A(u,s,c){return s in u?Object.defineProperty(u,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[s]=c,u}function S(u,s){var c=Object.keys(u);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(u);s&&(m=m.filter(function(w){return Object.getOwnPropertyDescriptor(u,w).enumerable})),c.push.apply(c,m)}return c}function ge(u){return function(c){if(Array.isArray(c))return ve(c)}(u)||function(c){if(typeof Symbol<"u"&&Symbol.iterator in Object(c))return Array.from(c)}(u)||function(c,m){if(c){if("string"==typeof c)return ve(c,m);var w=Object.prototype.toString.call(c).slice(8,-1);if("Object"===w&&c.constructor&&(w=c.constructor.name),"Map"===w||"Set"===w)return Array.from(c);if("Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return ve(c,m)}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(u,s){(null==s||s>u.length)&&(s=u.length);for(var c=0,m=new Array(s);c<s;c++)m[c]=u[c];return m}function v(u){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}function oe(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")}function Fe(u,s){for(var c=0;c<s.length;c++){var m=s[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}function Me(u,s,c){return s in u?Object.defineProperty(u,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[s]=c,u}function Et(u,s){var c=Object.keys(u);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(u);s&&(m=m.filter(function(w){return Object.getOwnPropertyDescriptor(u,w).enumerable})),c.push.apply(c,m)}return c}function Ce(u){for(var s=1;s<arguments.length;s++){var c=null!=arguments[s]?arguments[s]:{};s%2?Et(Object(c),!0).forEach(function(m){Me(u,m,c[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(c)):Et(Object(c)).forEach(function(m){Object.defineProperty(u,m,Object.getOwnPropertyDescriptor(c,m))})}return u}function Ze(u,s){return function(m){if(Array.isArray(m))return m}(u)||function(m,w){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(m)){var G=[],H=!0,fe=!1,ie=void 0;try{for(var Ae,$e=m[Symbol.iterator]();!(H=(Ae=$e.next()).done)&&(G.push(Ae.value),!w||G.length!==w);H=!0);}catch(Ge){fe=!0,ie=Ge}finally{try{H||null==$e.return||$e.return()}finally{if(fe)throw ie}}return G}}(u,s)||an(u,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(u,s){if(u){if("string"==typeof u)return Pt(u,s);var c=Object.prototype.toString.call(u).slice(8,-1);return"Object"===c&&u.constructor&&(c=u.constructor.name),"Map"===c||"Set"===c?Array.from(u):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Pt(u,s):void 0}}function Pt(u,s){(null==s||s>u.length)&&(s=u.length);for(var c=0,m=new Array(s);c<s;c++)m[c]=u[c];return m}var re=function u(s){oe(this,u),this.p=new Promise(s)};re.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(re.prototype[Symbol.toStringTag]="TypesonPromise"),re.prototype.then=function(u,s){var c=this;return new re(function(m,w){c.p.then(function(G){m(u?u(G):G)}).catch(function(G){return s?s(G):Promise.reject(G)}).then(m,w)})},re.prototype.catch=function(u){return this.then(null,u)},re.resolve=function(u){return new re(function(s){s(u)})},re.reject=function(u){return new re(function(s,c){c(u)})},["all","race"].forEach(function(u){re[u]=function(s){return new re(function(c,m){Promise[u](s.map(function(w){return w&&w.constructor&&"TypesonPromise"===w.constructor.__typeson__type__?w.p:w})).then(c,m)})}});var yt={}.toString,Ke={}.hasOwnProperty,Ct=Object.getPrototypeOf,It=Ke.toString;function Dt(u,s){return T(u)&&"function"==typeof u.then&&(!s||"function"==typeof u.catch)}function I(u){return yt.call(u).slice(8,-1)}function d(u,s){if(!u||"object"!==v(u))return!1;var c=Ct(u);if(!c)return null===s;var m=Ke.call(c,"constructor")&&c.constructor;return"function"!=typeof m?null===s:s===m||null!==s&&It.call(m)===It.call(s)||"function"==typeof s&&"string"==typeof m.__typeson__type__&&m.__typeson__type__===s.__typeson__type__}function U(u){return!(!u||"Object"!==I(u))&&(!Ct(u)||d(u,Object))}function T(u){return u&&"object"===v(u)}function ot(u){return u.replace(/~/g,"~0").replace(/\./g,"~1")}function rt(u){return u.replace(/~1/g,".").replace(/~0/g,"~")}function ht(u,s){if(""===s)return u;var c=s.indexOf(".");if(c>-1){var m=u[rt(s.slice(0,c))];return void 0===m?void 0:ht(m,s.slice(c+1))}return u[rt(s)]}function bt(u,s,c){if(""===s)return c;var m=s.indexOf(".");return m>-1?bt(u[rt(s.slice(0,m))],s.slice(m+1),c):(u[rt(s)]=c,u)}function At(u,s,c){return c?s?s(u):u:(u&&u.then||(u=Promise.resolve(u)),s?u.then(s):u)}var ze=Object.keys,zt=Array.isArray,en={}.hasOwnProperty,Jt=["type","replaced","iterateIn","iterateUnsetNumeric"];function $t(u){return function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];try{return Promise.resolve(u.apply(this,s))}catch(m){return Promise.reject(m)}}}function pe(u,s){if(""===u.keypath)return-1;var c=u.keypath.match(/\./g)||0,m=s.keypath.match(/\./g)||0;return c&&(c=c.length),m&&(m=m.length),c>m?-1:c<m?1:u.keypath<s.keypath?-1:u.keypath>s.keypath}var we=function(){function u(s){oe(this,u),this.options=s,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return c=u,m=[{key:"stringify",value:function(c,m,w,G){G=Ce(Ce(Ce({},this.options),G),{},{stringification:!0});var H=this.encapsulate(c,null,G);return zt(H)?JSON.stringify(H[0],m,w):H.then(function(fe){return JSON.stringify(fe,m,w)})}},{key:"stringifySync",value:function(c,m,w,G){return this.stringify(c,m,w,Ce(Ce({throwOnBadSyncType:!0},G),{},{sync:!0}))}},{key:"stringifyAsync",value:function(c,m,w,G){return this.stringify(c,m,w,Ce(Ce({throwOnBadSyncType:!0},G),{},{sync:!1}))}},{key:"parse",value:function(c,m,w){return w=Ce(Ce(Ce({},this.options),w),{},{parse:!0}),this.revive(JSON.parse(c,m),w)}},{key:"parseSync",value:function(c,m,w){return this.parse(c,m,Ce(Ce({throwOnBadSyncType:!0},w),{},{sync:!0}))}},{key:"parseAsync",value:function(c,m,w){return this.parse(c,m,Ce(Ce({throwOnBadSyncType:!0},w),{},{sync:!1}))}},{key:"specialTypeNames",value:function(c,m){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return w.returnTypeNames=!0,this.encapsulate(c,m,w)}},{key:"rootTypeName",value:function(c,m){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return w.iterateNone=!0,this.encapsulate(c,m,w)}},{key:"encapsulate",value:function(c,m,w){var G=$t(function(he,Y){return At(Promise.all(Y.map(function(Ee){return Ee[1].p})),function(Ee){return At(Promise.all(Ee.map($t(function(Se){var An,Sn,ke=!1,qe=[],Ht=Ze(Y.splice(0,1),1),Ot=Ze(Ht[0],7),Qt=Ot[0],nn=Ot[4],xt=Ot[5],Ft=Re(Qt,Se,Ot[2],Ot[3],qe,!0,Ot[6]),Xt=d(Ft,re);return An=function(cn){return ke?cn:(Qt?nn[xt]=Ft:he=Xt?Ft.p:Ft,G(he,qe))},(Sn=function(){if(Qt&&Xt)return At(Ft.p,function(cn){return nn[xt]=cn,ke=!0,G(he,qe)})}())&&Sn.then?Sn.then(An):An(Sn)}))),function(){return he})})}),H=(w=Ce(Ce({sync:!0},this.options),w)).sync,fe=this,ie={},Ae=[],$e=[],Ge=[],ft=!("cyclic"in w)||w.cyclic,Te=w.encapsulateObserver,Je=Re("",c,ft,m||{},Ge);function gt(he){var Y=Object.values(ie);if(w.iterateNone)return Y.length?Y[0]:u.getJSONType(he);if(Y.length){if(w.returnTypeNames)return function mt(u){return function(c){if(Array.isArray(c))return Pt(c)}(u)||function(c){if(typeof Symbol<"u"&&Symbol.iterator in Object(c))return Array.from(c)}(u)||an(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(Y));he&&U(he)&&!en.call(he,"$types")?he.$types=ie:he={$:he,$types:{$:ie}}}else T(he)&&en.call(he,"$types")&&(he={$:he,$types:!0});return!w.returnTypeNames&&he}function ut(he,Y,Ee){Object.assign(he,Y);var Se=Jt.map(function(ke){var qe=he[ke];return delete he[ke],qe});Ee(),Jt.forEach(function(ke,qe){he[ke]=Se[qe]})}function Re(he,Y,Ee,Se,ke,qe,Ht){var Ot,Qt={},Mt=v(Y),dt=Te?function(bn){var pt=Ht||Se.type||u.getJSONType(Y);Te(Object.assign(bn||Qt,{keypath:he,value:Y,cyclic:Ee,stateObj:Se,promisesData:ke,resolvingTypesonPromise:qe,awaitingTypesonPromise:d(Y,re)},{type:pt}))}:null;if(["string","boolean","number","undefined"].includes(Mt))return void 0===Y||Number.isNaN(Y)||Y===Number.NEGATIVE_INFINITY||Y===Number.POSITIVE_INFINITY?(Ot=Se.replaced?Y:St(he,Y,Se,ke,!1,qe,dt))!==Y&&(Qt={replaced:Ot}):Ot=Y,dt&&dt(),Ot;if(null===Y)return dt&&dt(),Y;if(Ee&&!Se.iterateIn&&!Se.iterateUnsetNumeric&&Y&&"object"===v(Y)){var nn=Ae.indexOf(Y);if(!(nn<0))return ie[he]="#",dt&&dt({cyclicKeypath:$e[nn]}),"#"+$e[nn];!0===Ee&&(Ae.push(Y),$e.push(he))}var xt,qt=U(Y),Ft=zt(Y),Xt=(qt||Ft)&&(!fe.plainObjectReplacers.length||Se.replaced)||Se.iterateIn?Y:St(he,Y,Se,ke,qt||Ft,null,dt);if(Xt!==Y?(Ot=Xt,Qt={replaced:Xt}):""===he&&d(Y,re)?(ke.push([he,Y,Ee,Se,void 0,void 0,Se.type]),Ot=Y):Ft&&"object"!==Se.iterateIn||"array"===Se.iterateIn?(xt=new Array(Y.length),Qt={clone:xt}):(["function","symbol"].includes(v(Y))||"toJSON"in Y||d(Y,re)||d(Y,Promise)||d(Y,ArrayBuffer))&&!qt&&"object"!==Se.iterateIn?Ot=Y:(xt={},Se.addLength&&(xt.length=Y.length),Qt={clone:xt}),dt&&dt(),w.iterateNone)return xt||Ot;if(!xt)return Ot;if(Se.iterateIn){var cn=function(pt){var gn={ownKeys:en.call(Y,pt)};ut(Se,gn,function(){var wn=he+(he?".":"")+ot(pt),Kn=Re(wn,Y[pt],!!Ee,Se,ke,qe);d(Kn,re)?ke.push([wn,Kn,!!Ee,Se,xt,pt,Se.type]):void 0!==Kn&&(xt[pt]=Kn)})};for(var kn in Y)cn(kn);dt&&dt({endIterateIn:!0,end:!0})}else ze(Y).forEach(function(bn){var pt=he+(he?".":"")+ot(bn);ut(Se,{ownKeys:!0},function(){var gn=Re(pt,Y[bn],!!Ee,Se,ke,qe);d(gn,re)?ke.push([pt,gn,!!Ee,Se,xt,bn,Se.type]):void 0!==gn&&(xt[bn]=gn)})}),dt&&dt({endIterateOwn:!0,end:!0});if(Se.iterateUnsetNumeric){for(var An=Y.length,Sn=function(pt){if(!(pt in Y)){var gn=he+(he?".":"")+pt;ut(Se,{ownKeys:!1},function(){var wn=Re(gn,void 0,!!Ee,Se,ke,qe);d(wn,re)?ke.push([gn,wn,!!Ee,Se,xt,pt,Se.type]):void 0!==wn&&(xt[pt]=wn)})}},Pn=0;Pn<An;Pn++)Sn(Pn);dt&&dt({endIterateUnsetNumeric:!0,end:!0})}return xt}function St(he,Y,Ee,Se,ke,qe,Ht){for(var Ot=ke?fe.plainObjectReplacers:fe.nonplainObjectReplacers,Qt=Ot.length;Qt--;){var Mt=Ot[Qt];if(Mt.test(Y,Ee)){var dt=Mt.type;if(fe.revivers[dt]){var nn=ie[he];ie[he]=nn?[dt].concat(nn):dt}return Object.assign(Ee,{type:dt,replaced:!0}),!H&&Mt.replaceAsync||Mt.replace?(Ht&&Ht({replacing:!0}),Re(he,Mt[H||!Mt.replaceAsync?"replace":"replaceAsync"](Y,Ee),ft&&"readonly",Ee,Se,qe,dt)):(Ht&&Ht({typeDetected:!0}),Re(he,Y,ft&&"readonly",Ee,Se,qe,dt))}}return Y}return Ge.length?H&&w.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(G(Je,Ge)).then(gt):!H&&w.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():w.stringification&&H?[gt(Je)]:H?gt(Je):Promise.resolve(gt(Je))}},{key:"encapsulateSync",value:function(c,m,w){return this.encapsulate(c,m,Ce(Ce({throwOnBadSyncType:!0},w),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(c,m,w){return this.encapsulate(c,m,Ce(Ce({throwOnBadSyncType:!0},w),{},{sync:!1}))}},{key:"revive",value:function(c,m){var w=c&&c.$types;if(!w)return c;if(!0===w)return c.$;var G=(m=Ce(Ce({sync:!0},this.options),m)).sync,H=[],fe={},ie=!0;w.$&&U(w.$)&&(c=c.$,w=w.$,ie=!1);var Ae=this;function $e(gt,ut){var Re=Ze(Ae.revivers[gt]||[],1)[0];if(!Re)throw new Error("Unregistered type: "+gt);return G&&!("revive"in Re)?ut:Re[G&&Re.revive?"revive":!G&&Re.reviveAsync?"reviveAsync":"revive"](ut,fe)}var Ge=[];function ft(gt){return d(gt,He)?void 0:gt}var Te,Je=function(){var ut=[];if(Object.entries(w).forEach(function(Re){var St=Ze(Re,2),he=St[0],Y=St[1];"#"!==Y&&[].concat(Y).forEach(function(Ee){Ze(Ae.revivers[Ee]||[null,{}],2)[1].plain&&(ut.push({keypath:he,type:Ee}),delete w[he])})}),ut.length)return ut.sort(pe).reduce(function Re(St,he){var Y=he.keypath,Ee=he.type;if(Dt(St))return St.then(function(qe){return Re(qe,{keypath:Y,type:Ee})});var Se=ht(c,Y);if(d(Se=$e(Ee,Se),re))return Se.then(function(qe){var Ht=bt(c,Y,qe);Ht===qe&&(c=Ht)});var ke=bt(c,Y,Se);ke===Se&&(c=ke)},void 0)}();return d(Je,re)?Te=Je.then(function(){return c}):(Te=function gt(ut,Re,St,he,Y){if(!ie||"$types"!==ut){var Ee=w[ut],Se=zt(Re);if(Se||U(Re)){var ke=Se?new Array(Re.length):{};for(ze(Re).forEach(function(xt){var qt=gt(ut+(ut?".":"")+ot(xt),Re[xt],St||ke,ke,xt),Ft=function(cn){return d(cn,He)?ke[xt]=void 0:void 0!==cn&&(ke[xt]=cn),cn};d(qt,re)?Ge.push(qt.then(function(Xt){return Ft(Xt)})):Ft(qt)}),Re=ke;H.length;){var qe=Ze(H[0],4),Qt=qe[2],Mt=qe[3],dt=ht(qe[0],qe[1]);if(void 0===dt)break;Qt[Mt]=dt,H.splice(0,1)}}if(!Ee)return Re;if("#"===Ee){var nn=ht(St,Re.slice(1));return void 0===nn&&H.push([St,Re.slice(1),he,Y]),nn}return[].concat(Ee).reduce(function xt(qt,Ft){return d(qt,re)?qt.then(function(Xt){return xt(Xt,Ft)}):$e(Ft,qt)},Re)}}("",c,null),Ge.length&&(Te=re.resolve(Te).then(function(gt){return re.all([gt].concat(Ge))}).then(function(gt){return Ze(gt,1)[0]}))),Dt(Te)?G&&m.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():d(Te,re)?Te.p.then(ft):Te:!G&&m.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():G?ft(Te):Promise.resolve(ft(Te))}},{key:"reviveSync",value:function(c,m){return this.revive(c,Ce(Ce({throwOnBadSyncType:!0},m),{},{sync:!0}))}},{key:"reviveAsync",value:function(c,m){return this.revive(c,Ce(Ce({throwOnBadSyncType:!0},m),{},{sync:!1}))}},{key:"register",value:function(c,m){return m=m||{},[].concat(c).forEach(function w(G){var H=this;if(zt(G))return G.map(function(fe){return w.call(H,fe)});G&&ze(G).forEach(function(fe){if("#"===fe)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(u.JSON_TYPES.includes(fe))throw new TypeError("Plain JSON object types are reserved as type names");var ie=G[fe],Ae=ie&&ie.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,$e=Ae.filter(function(ut){return ut.type===fe});if($e.length&&(Ae.splice(Ae.indexOf($e[0]),1),delete this.revivers[fe],delete this.types[fe]),"function"==typeof ie){var Ge=ie;ie={test:function(Re){return Re&&Re.constructor===Ge},replace:function(Re){return Ce({},Re)},revive:function(Re){return Object.assign(Object.create(Ge.prototype),Re)}}}else if(zt(ie)){var ft=Ze(ie,3);ie={test:ft[0],replace:ft[1],revive:ft[2]}}if(ie&&ie.test){var Te={type:fe,test:ie.test.bind(ie)};ie.replace&&(Te.replace=ie.replace.bind(ie)),ie.replaceAsync&&(Te.replaceAsync=ie.replaceAsync.bind(ie));var Je="number"==typeof m.fallback?m.fallback:m.fallback?0:Number.POSITIVE_INFINITY;if(ie.testPlainObjects?this.plainObjectReplacers.splice(Je,0,Te):this.nonplainObjectReplacers.splice(Je,0,Te),ie.revive||ie.reviveAsync){var gt={};ie.revive&&(gt.revive=ie.revive.bind(ie)),ie.reviveAsync&&(gt.reviveAsync=ie.reviveAsync.bind(ie)),this.revivers[fe]=[gt,{plain:ie.testPlainObjects}]}this.types[fe]=ie}},this)},this),this}}],m&&Fe(c.prototype,m),u;var c,m}(),He=function u(){oe(this,u)};He.__typeson__type__="TypesonUndefined",we.Undefined=He,we.Promise=re,we.isThenable=Dt,we.toStringTag=I,we.hasConstructorOf=d,we.isObject=T,we.isPlainObject=U,we.isUserObject=function u(s){if(!s||"Object"!==I(s))return!1;var c=Ct(s);return!c||d(s,Object)||u(c)},we.escapeKeyPathComponent=ot,we.unescapeKeyPathComponent=rt,we.getByKeyPath=ht,we.getJSONType=function(s){return null===s?"null":Array.isArray(s)?"array":v(s)},we.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Bt={userObject:{test:function(s,c){return we.isUserObject(s)},replace:function(s){return function(m){for(var w=1;w<arguments.length;w++){var G=null!=arguments[w]?arguments[w]:{};w%2?S(Object(G),!0).forEach(function(H){A(m,H,G[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(G)):S(Object(G)).forEach(function(H){Object.defineProperty(m,H,Object.getOwnPropertyDescriptor(G,H))})}return m}({},s)},revive:function(s){return s}}},b=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(s,c){return!!Array.isArray(s)&&(Object.keys(s).some(function(m){return String(Number.parseInt(m))!==m})&&(c.iterateIn="object",c.addLength=!0),!0)},replace:function(s,c){return c.iterateUnsetNumeric=!0,s},revive:function(s){if(Array.isArray(s))return s;var c=[];return Object.keys(s).forEach(function(m){c[m]=s[m]}),c}}},{sparseUndefined:{test:function(s,c){return void 0===s&&!1===c.ownKeys},replace:function(s){return 0},revive:function(s){}}}],R={undef:{test:function(s,c){return void 0===s&&(c.ownKeys||!("ownKeys"in c))},replace:function(s){return 0},revive:function(s){return new we.Undefined}}},D={StringObject:{test:function(s){return"String"===we.toStringTag(s)&&"object"===f(s)},replace:function(s){return String(s)},revive:function(s){return new String(s)}},BooleanObject:{test:function(s){return"Boolean"===we.toStringTag(s)&&"object"===f(s)},replace:function(s){return!!s},revive:function(s){return new Boolean(s)}},NumberObject:{test:function(s){return"Number"===we.toStringTag(s)&&"object"===f(s)},replace:function(s){return Number(s)},revive:function(s){return new Number(s)}}},M=[{nan:{test:function(s){return Number.isNaN(s)},replace:function(s){return"NaN"},revive:function(s){return Number.NaN}}},{infinity:{test:function(s){return s===Number.POSITIVE_INFINITY},replace:function(s){return"Infinity"},revive:function(s){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(s){return s===Number.NEGATIVE_INFINITY},replace:function(s){return"-Infinity"},revive:function(s){return Number.NEGATIVE_INFINITY}}}],X={date:{test:function(s){return"Date"===we.toStringTag(s)},replace:function(s){var c=s.getTime();return Number.isNaN(c)?"NaN":c},revive:function(s){return"NaN"===s?new Date(Number.NaN):new Date(s)}}},Qe={regexp:{test:function(s){return"RegExp"===we.toStringTag(s)},replace:function(s){return{source:s.source,flags:(s.global?"g":"")+(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.sticky?"y":"")+(s.unicode?"u":"")}},revive:function(s){return new RegExp(s.source,s.flags)}}},it={map:{test:function(s){return"Map"===we.toStringTag(s)},replace:function(s){return ge(s.entries())},revive:function(s){return new Map(s)}}},Xe={set:{test:function(s){return"Set"===we.toStringTag(s)},replace:function(s){return ge(s.values())},revive:function(s){return new Set(s)}}},_e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ut=new Uint8Array(256),Vt=0;Vt<64;Vt++)Ut[_e.charCodeAt(Vt)]=Vt;var Gt=function(s,c,m){null==m&&(m=s.byteLength);for(var w=new Uint8Array(s,c||0,m),G=w.length,H="",fe=0;fe<G;fe+=3)H+=_e[w[fe]>>2],H+=_e[(3&w[fe])<<4|w[fe+1]>>4],H+=_e[(15&w[fe+1])<<2|w[fe+2]>>6],H+=_e[63&w[fe+2]];return G%3==2?H=H.slice(0,-1)+"=":G%3==1&&(H=H.slice(0,-2)+"=="),H},tn=function(s){var c,m,w,G,H=s.length,fe=.75*s.length,ie=0;"="===s[s.length-1]&&(fe--,"="===s[s.length-2]&&fe--);for(var Ae=new ArrayBuffer(fe),$e=new Uint8Array(Ae),Ge=0;Ge<H;Ge+=4)c=Ut[s.charCodeAt(Ge)],m=Ut[s.charCodeAt(Ge+1)],w=Ut[s.charCodeAt(Ge+2)],G=Ut[s.charCodeAt(Ge+3)],$e[ie++]=c<<2|m>>4,$e[ie++]=(15&m)<<4|w>>2,$e[ie++]=(3&w)<<6|63&G;return Ae},un={arraybuffer:{test:function(s){return"ArrayBuffer"===we.toStringTag(s)},replace:function(s,c){c.buffers||(c.buffers=[]);var m=c.buffers.indexOf(s);return m>-1?{index:m}:(c.buffers.push(s),Gt(s))},revive:function(s,c){if(c.buffers||(c.buffers=[]),"object"===f(s))return c.buffers[s.index];var m=tn(s);return c.buffers.push(m),m}}},hn=typeof self>"u"?B:self,We={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(u){var s=u,c=hn[s];c&&(We[u.toLowerCase()]={test:function(w){return we.toStringTag(w)===s},replace:function(w,G){var H=w.buffer,fe=w.byteOffset,ie=w.length;G.buffers||(G.buffers=[]);var Ae=G.buffers.indexOf(H);return Ae>-1?{index:Ae,byteOffset:fe,length:ie}:(G.buffers.push(H),{encoded:Gt(H),byteOffset:fe,length:ie})},revive:function(w,G){G.buffers||(G.buffers=[]);var H,fe=w.byteOffset,ie=w.length;return"index"in w?H=G.buffers[w.index]:(H=tn(w.encoded),G.buffers.push(H)),new c(H,fe,ie)}})});var wt={dataview:{test:function(s){return"DataView"===we.toStringTag(s)},replace:function(s,c){var m=s.buffer,w=s.byteOffset,G=s.byteLength;c.buffers||(c.buffers=[]);var H=c.buffers.indexOf(m);return H>-1?{index:H,byteOffset:w,byteLength:G}:(c.buffers.push(m),{encoded:Gt(m),byteOffset:w,byteLength:G})},revive:function(s,c){c.buffers||(c.buffers=[]);var m,w=s.byteOffset,G=s.byteLength;return"index"in s?m=c.buffers[s.index]:(m=tn(s.encoded),c.buffers.push(m)),new DataView(m,w,G)}}},Tt={IntlCollator:{test:function(s){return we.hasConstructorOf(s,Intl.Collator)},replace:function(s){return s.resolvedOptions()},revive:function(s){return new Intl.Collator(s.locale,s)}},IntlDateTimeFormat:{test:function(s){return we.hasConstructorOf(s,Intl.DateTimeFormat)},replace:function(s){return s.resolvedOptions()},revive:function(s){return new Intl.DateTimeFormat(s.locale,s)}},IntlNumberFormat:{test:function(s){return we.hasConstructorOf(s,Intl.NumberFormat)},replace:function(s){return s.resolvedOptions()},revive:function(s){return new Intl.NumberFormat(s.locale,s)}}};function ct(u){for(var s=new Uint8Array(u.length),c=0;c<u.length;c++)s[c]=u.charCodeAt(c);return s.buffer}var at={file:{test:function(s){return"File"===we.toStringTag(s)},replace:function(s){var c=new XMLHttpRequest;if(c.overrideMimeType("text/plain; charset=x-user-defined"),c.open("GET",URL.createObjectURL(s),!1),c.send(),200!==c.status&&0!==c.status)throw new Error("Bad File access: "+c.status);return{type:s.type,stringContents:c.responseText,name:s.name,lastModified:s.lastModified}},revive:function(s){var c=s.name,m=s.type,G=s.lastModified;return new File([ct(s.stringContents)],c,{type:m,lastModified:G})},replaceAsync:function(s){return new we.Promise(function(c,m){var w=new FileReader;w.addEventListener("load",function(){c({type:s.type,stringContents:w.result,name:s.name,lastModified:s.lastModified})}),w.addEventListener("error",function(){m(w.error)}),w.readAsBinaryString(s)})}}},lt={bigint:{test:function(s){return"bigint"==typeof s},replace:function(s){return String(s)},revive:function(s){return BigInt(s)}}},Nt={bigintObject:{test:function(s){return"object"===f(s)&&we.hasConstructorOf(s,BigInt)},replace:function(s){return String(s)},revive:function(s){return new Object(BigInt(s))}}},ce={cryptokey:{test:function(s){return"CryptoKey"===we.toStringTag(s)&&s.extractable},replaceAsync:function(s){return new we.Promise(function(c,m){crypto.subtle.exportKey("jwk",s).catch(function(w){m(w)}).then(function(w){c({jwk:w,algorithm:s.algorithm,usages:s.usages})})})},revive:function(s){return crypto.subtle.importKey("jwk",s.jwk,s.algorithm,!0,s.usages)}}};return[Bt,R,b,D,M,X,Qe,{imagedata:{test:function(s){return"ImageData"===we.toStringTag(s)},replace:function(s){return{array:ge(s.data),width:s.width,height:s.height}},revive:function(s){return new ImageData(new Uint8ClampedArray(s.array),s.width,s.height)}}},{imagebitmap:{test:function(s){return"ImageBitmap"===we.toStringTag(s)||s&&s.dataset&&"ImageBitmap"===s.dataset.toStringTag},replace:function(s){var c=document.createElement("canvas");return c.getContext("2d").drawImage(s,0,0),c.toDataURL()},revive:function(s){var c=document.createElement("canvas"),m=c.getContext("2d"),w=document.createElement("img");return w.addEventListener("load",function(){m.drawImage(w,0,0)}),w.src=s,c},reviveAsync:function(s){var c=document.createElement("canvas"),m=c.getContext("2d"),w=document.createElement("img");return w.addEventListener("load",function(){m.drawImage(w,0,0)}),w.src=s,createImageBitmap(c)}}},at,{file:at.file,filelist:{test:function(s){return"FileList"===we.toStringTag(s)},replace:function(s){for(var c=[],m=0;m<s.length;m++)c[m]=s.item(m);return c},revive:function(s){return new(function(){function c(){(function h(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")})(this,c),this._files=arguments[0],this.length=this._files.length}return w=c,G=[{key:"item",value:function(w){return this._files[w]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}],G&&p(w.prototype,G),c;var w,G}())(s)}}},{blob:{test:function(s){return"Blob"===we.toStringTag(s)},replace:function(s){var c=new XMLHttpRequest;if(c.overrideMimeType("text/plain; charset=x-user-defined"),c.open("GET",URL.createObjectURL(s),!1),c.send(),200!==c.status&&0!==c.status)throw new Error("Bad Blob access: "+c.status);return{type:s.type,stringContents:c.responseText}},revive:function(s){var c=s.type;return new Blob([ct(s.stringContents)],{type:c})},replaceAsync:function(s){return new we.Promise(function(c,m){var w=new FileReader;w.addEventListener("load",function(){c({type:s.type,stringContents:w.result})}),w.addEventListener("error",function(){m(w.error)}),w.readAsBinaryString(s)})}}}].concat("function"==typeof Map?it:[],"function"==typeof Set?Xe:[],"function"==typeof ArrayBuffer?un:[],"function"==typeof Uint8Array?We:[],"function"==typeof DataView?wt:[],typeof Intl<"u"?Tt:[],typeof crypto<"u"?ce:[],typeof BigInt<"u"?[lt,Nt]:[])}()}),je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_t=new Uint8Array(256),tt=0;tt<64;tt++)_t[je.codePointAt(tt)]=tt;var kt=function(o,f,h){null==h&&(h=o.byteLength);for(var p=new Uint8Array(o,f||0,h),A=p.length,S="",ge=0;ge<A;ge+=3)S+=je[p[ge]>>2],S+=je[(3&p[ge])<<4|p[ge+1]>>4],S+=je[(15&p[ge+1])<<2|p[ge+2]>>6],S+=je[63&p[ge+2]];return A%3==2?S=S.slice(0,-1)+"=":A%3==1&&(S=S.slice(0,-2)+"=="),S},Yt=function(o){var A,S,ge,ve,f=o.length,h=.75*o.length,p=0;"="===o[o.length-1]&&(h--,"="===o[o.length-2]&&h--);for(var v=new ArrayBuffer(h),oe=new Uint8Array(v),Fe=0;Fe<f;Fe+=4)A=_t[o.codePointAt(Fe)],S=_t[o.codePointAt(Fe+1)],ge=_t[o.codePointAt(Fe+2)],ve=_t[o.codePointAt(Fe+3)],oe[p++]=A<<2|S>>4,oe[p++]=(15&S)<<4|ge>>2,oe[p++]=(3&ge)<<6|63&ve;return v},Lt=typeof self>"u"?global:self,Ve={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(L){var o=L,f=Lt[o];f&&(Ve[L.toLowerCase()+"2"]={test:function(h){return Ie.toStringTag(h)===o},replace:function(h){return{buffer:h.buffer,byteOffset:h.byteOffset,length:h.length}},revive:function(h){return new f(h.buffer,h.byteOffset,h.length)}})});var xe={arraybuffer:{test:function(L){return"ArrayBuffer"===Ie.toStringTag(L)},replace:function(L){return kt(L,0,L.byteLength)},revive:function(L){return Yt(L)}}},Ye=(new Ie).register(me),rn="FileReaderSync"in self,on=[],pn=0;Ye.register([xe,Ve,{blob2:{test:function(L){return"Blob"===Ie.toStringTag(L)},replace:function(L){if(L.isClosed)throw new Error("The Blob is closed");if(rn){var o=z(L,"binary"),f=kt(o,0,o.byteLength);return{type:L.type,data:f}}on.push(L);var h={type:L.type,data:{start:pn,end:pn+L.size}};return pn+=L.size,h},finalize:function(L,o){L.data=kt(o,0,o.byteLength)},revive:function(L){var o=L.type;return new Blob([Yt(L.data)],{type:o})}}}]),Ye.mustFinalize=function(){return on.length>0},Ye.finalize=function(L){return ne(void 0,void 0,void 0,function(){var o,f,h,p,A,S,ge,v,oe;return de(this,function(Fe){switch(Fe.label){case 0:return[4,Be(new Blob(on),"binary")];case 1:if(o=Fe.sent(),L)for(f=0,h=L;f<h.length;f++)if((p=h[f]).$types)for(ge in(S=(A=p.$types).$)&&(A=A.$),A)(v=Ye.types[A[ge]])&&v.finalize&&(oe=K.ZP.getByKeyPath(p,S?"$."+ge:ge),v.finalize(oe,o.slice(oe.start,oe.end)));return on=[],[2]}})})};var En=1,Rn_Stream=function(){},te=$(function(L,o){!function(f){var h="object"==typeof process&&process.env?process.env:self;f.parser=function(I){return new Et(I)},f.CParser=Et,f.CStream=Ze,f.createStream=function Ce(I){return new Ze(I)},f.MAX_BUFFER_LENGTH=10485760,f.DEBUG="debug"===h.CDEBUG,f.INFO="debug"===h.CDEBUG||"info"===h.CDEBUG,f.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var ge,p={textNode:void 0,numberNode:""},A=f.EVENTS.filter(function(I){return"error"!==I&&"end"!==I}),S=0;for(var ve in f.STATE={BEGIN:S++,VALUE:S++,OPEN_OBJECT:S++,CLOSE_OBJECT:S++,OPEN_ARRAY:S++,CLOSE_ARRAY:S++,TEXT_ESCAPE:S++,STRING:S++,BACKSLASH:S++,END:S++,OPEN_KEY:S++,CLOSE_KEY:S++,TRUE:S++,TRUE2:S++,TRUE3:S++,FALSE:S++,FALSE2:S++,FALSE3:S++,FALSE4:S++,NULL:S++,NULL2:S++,NULL3:S++,NUMBER_DECIMAL_POINT:S++,NUMBER_DIGIT:S++},f.STATE)f.STATE[f.STATE[ve]]=ve;S=f.STATE;const v_tab=9,v_lineFeed=10,v_carriageReturn=13,v_space=32,v_doubleQuote=34,v_plus=43,v_comma=44,v_minus=45,v_period=46,v__0=48,v__9=57,v_colon=58,v_E=69,v_openBracket=91,v_backslash=92,v_closeBracket=93,v_a=97,v_b=98,v_e=101,v_f=102,v_l=108,v_n=110,v_r=114,v_s=115,v_t=116,v_u=117,v_openBrace=123,v_closeBrace=125;function Fe(I){for(var d in p)I[d]=p[d]}Object.create||(Object.create=function(I){function d(){this.__proto__=I}return d.prototype=I,new d}),Object.getPrototypeOf||(Object.getPrototypeOf=function(I){return I.__proto__}),Object.keys||(Object.keys=function(I){var d=[];for(var U in I)I.hasOwnProperty(U)&&d.push(U);return d});var Me=/[\\"\n]/g;function Et(I){if(!(this instanceof Et))return new Et(I);var d=this;Fe(d),d.bufferCheckPosition=f.MAX_BUFFER_LENGTH,d.q=d.c=d.p="",d.opt=I||{},d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.state=S.BEGIN,d.stack=new Array,d.position=d.column=0,d.line=1,d.slashed=!1,d.unicodeI=0,d.unicodeS=null,d.depth=0,mt(d,"onready")}Et.prototype={end:function(){Ct(this)},write:function Dt(I){var d=this;if(this.error)throw this.error;if(d.closed)return Ke(d,"Cannot write after close. Assign an onready handler.");if(null===I)return Ct(d);var U=0,T=I.charCodeAt(0),ot=d.p;for(f.DEBUG&&console.log("write -> ["+I+"]");T&&(ot=T,d.c=T=I.charCodeAt(U++),ot!==T?d.p=ot:ot=d.p,T);)switch(f.DEBUG&&console.log(U,T,f.STATE[d.state]),d.position++,T===v_lineFeed?(d.line++,d.column=0):d.column++,d.state){case S.BEGIN:T===v_openBrace?d.state=S.OPEN_OBJECT:T===v_openBracket?d.state=S.OPEN_ARRAY:It(T)||Ke(d,"Non-whitespace before {[.");continue;case S.OPEN_KEY:case S.OPEN_OBJECT:if(It(T))continue;if(d.state===S.OPEN_KEY)d.stack.push(S.CLOSE_KEY);else{if(T===v_closeBrace){mt(d,"onopenobject"),this.depth++,mt(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||S.VALUE;continue}d.stack.push(S.CLOSE_OBJECT)}T===v_doubleQuote?d.state=S.STRING:Ke(d,'Malformed object key should start with "');continue;case S.CLOSE_KEY:case S.CLOSE_OBJECT:if(It(T))continue;T===v_colon?(d.state===S.CLOSE_OBJECT?(d.stack.push(S.CLOSE_OBJECT),Pt(d,"onopenobject"),this.depth++):Pt(d,"onkey"),d.state=S.VALUE):T===v_closeBrace?(an(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||S.VALUE):T===v_comma?(d.state===S.CLOSE_OBJECT&&d.stack.push(S.CLOSE_OBJECT),Pt(d),d.state=S.OPEN_KEY):Ke(d,"Bad object");continue;case S.OPEN_ARRAY:case S.VALUE:if(It(T))continue;if(d.state===S.OPEN_ARRAY){if(mt(d,"onopenarray"),this.depth++,d.state=S.VALUE,T===v_closeBracket){mt(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||S.VALUE;continue}d.stack.push(S.CLOSE_ARRAY)}T===v_doubleQuote?d.state=S.STRING:T===v_openBrace?d.state=S.OPEN_OBJECT:T===v_openBracket?d.state=S.OPEN_ARRAY:T===v_t?d.state=S.TRUE:T===v_f?d.state=S.FALSE:T===v_n?d.state=S.NULL:T===v_minus?d.numberNode+="-":v__0<=T&&T<=v__9?(d.numberNode+=String.fromCharCode(T),d.state=S.NUMBER_DIGIT):Ke(d,"Bad value");continue;case S.CLOSE_ARRAY:if(T===v_comma)d.stack.push(S.CLOSE_ARRAY),Pt(d,"onvalue"),d.state=S.VALUE;else if(T===v_closeBracket)an(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||S.VALUE;else{if(It(T))continue;Ke(d,"Bad array")}continue;case S.STRING:void 0===d.textNode&&(d.textNode="");var rt=U-1,ht=d.slashed,bt=d.unicodeI;e:for(;;){for(f.DEBUG&&console.log(U,T,f.STATE[d.state],ht);bt>0;)if(d.unicodeS+=String.fromCharCode(T),T=I.charCodeAt(U++),d.position++,4===bt?(d.textNode+=String.fromCharCode(parseInt(d.unicodeS,16)),bt=0,rt=U-1):bt++,!T)break e;if(T===v_doubleQuote&&!ht){d.state=d.stack.pop()||S.VALUE,d.textNode+=I.substring(rt,U-1),d.position+=U-1-rt;break}if(T===v_backslash&&!ht&&(ht=!0,d.textNode+=I.substring(rt,U-1),d.position+=U-1-rt,T=I.charCodeAt(U++),d.position++,!T))break;if(ht){if(ht=!1,T===v_n?d.textNode+="\n":T===v_r?d.textNode+="\r":T===v_t?d.textNode+="\t":T===v_f?d.textNode+="\f":T===v_b?d.textNode+="\b":T===v_u?(bt=1,d.unicodeS=""):d.textNode+=String.fromCharCode(T),T=I.charCodeAt(U++),d.position++,rt=U-1,T)continue;break}Me.lastIndex=U;var At=Me.exec(I);if(null===At){d.textNode+=I.substring(rt,(U=I.length+1)-1),d.position+=U-1-rt;break}if(U=At.index+1,!(T=I.charCodeAt(At.index))){d.textNode+=I.substring(rt,U-1),d.position+=U-1-rt;break}}d.slashed=ht,d.unicodeI=bt;continue;case S.TRUE:T===v_r?d.state=S.TRUE2:Ke(d,"Invalid true started with t"+T);continue;case S.TRUE2:T===v_u?d.state=S.TRUE3:Ke(d,"Invalid true started with tr"+T);continue;case S.TRUE3:T===v_e?(mt(d,"onvalue",!0),d.state=d.stack.pop()||S.VALUE):Ke(d,"Invalid true started with tru"+T);continue;case S.FALSE:T===v_a?d.state=S.FALSE2:Ke(d,"Invalid false started with f"+T);continue;case S.FALSE2:T===v_l?d.state=S.FALSE3:Ke(d,"Invalid false started with fa"+T);continue;case S.FALSE3:T===v_s?d.state=S.FALSE4:Ke(d,"Invalid false started with fal"+T);continue;case S.FALSE4:T===v_e?(mt(d,"onvalue",!1),d.state=d.stack.pop()||S.VALUE):Ke(d,"Invalid false started with fals"+T);continue;case S.NULL:T===v_u?d.state=S.NULL2:Ke(d,"Invalid null started with n"+T);continue;case S.NULL2:T===v_l?d.state=S.NULL3:Ke(d,"Invalid null started with nu"+T);continue;case S.NULL3:T===v_l?(mt(d,"onvalue",null),d.state=d.stack.pop()||S.VALUE):Ke(d,"Invalid null started with nul"+T);continue;case S.NUMBER_DECIMAL_POINT:T===v_period?(d.numberNode+=".",d.state=S.NUMBER_DIGIT):Ke(d,"Leading zero not followed by .");continue;case S.NUMBER_DIGIT:v__0<=T&&T<=v__9?d.numberNode+=String.fromCharCode(T):T===v_period?(-1!==d.numberNode.indexOf(".")&&Ke(d,"Invalid number has two dots"),d.numberNode+="."):T===v_e||T===v_E?((-1!==d.numberNode.indexOf("e")||-1!==d.numberNode.indexOf("E"))&&Ke(d,"Invalid number has two exponential"),d.numberNode+="e"):T===v_plus||T===v_minus?(ot===v_e||ot===v_E||Ke(d,"Invalid symbol in number"),d.numberNode+=String.fromCharCode(T)):(re(d),U--,d.state=d.stack.pop()||S.VALUE);continue;default:Ke(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&function oe(I){var d=Math.max(f.MAX_BUFFER_LENGTH,10),U=0;for(var T in p){var ot=void 0===I[T]?0:I[T].length;ot>d&&("text"===T?closeText(I):Ke(I,"Max buffer length exceeded: "+T)),U=Math.max(U,ot)}I.bufferCheckPosition=f.MAX_BUFFER_LENGTH-U+I.position}(d),d},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{ge=Rn_Stream}catch{ge=function(){}}function Ze(I){if(!(this instanceof Ze))return new Ze(I);this._parser=new Et(I),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var d=this;ge.apply(d),this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(U){d.emit("error",U),d._parser.error=null},A.forEach(function(U){Object.defineProperty(d,"on"+U,{get:function(){return d._parser["on"+U]},set:function(T){if(!T)return d.removeAllListeners(U),d._parser["on"+U]=T,T;d.on(U,T)},enumerable:!0,configurable:!1})})}function mt(I,d,U){f.INFO&&console.log("-- emit",d,U),I[d]&&I[d](U)}function an(I,d,U){Pt(I),mt(I,d,U)}function Pt(I,d){I.textNode=function yt(I,d){return void 0===d||(I.trim&&(d=d.trim()),I.normalize&&(d=d.replace(/\s+/g," "))),d}(I.opt,I.textNode),void 0!==I.textNode&&mt(I,d||"onvalue",I.textNode),I.textNode=void 0}function re(I){I.numberNode&&mt(I,"onvalue",parseFloat(I.numberNode)),I.numberNode=""}function Ke(I,d){return Pt(I),d+="\nLine: "+I.line+"\nColumn: "+I.column+"\nChar: "+I.c,d=new Error(d),I.error=d,mt(I,"onerror",d),I}function Ct(I){return(I.state!==S.VALUE||0!==I.depth)&&Ke(I,"Unexpected end"),Pt(I),I.c="",I.closed=!0,mt(I,"onend"),Et.call(I,I.opt),I}function It(I){return I===v_carriageReturn||I===v_lineFeed||I===v_space||I===v_tab}(Ze.prototype=Object.create(ge.prototype,{constructor:{value:Ze}})).write=function(I){I=new Buffer(I);for(var d=0;d<I.length;d++){var U=I[d];if(this.bytes_remaining>0){for(var T=0;T<this.bytes_remaining;T++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+T]=I[T];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,d=d+T-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&U>=128){if(U>=194&&U<=223&&(this.bytes_in_sequence=2),U>=224&&U<=239&&(this.bytes_in_sequence=3),U>=240&&U<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+d>I.length){for(var ot=0;ot<=I.length-1-d;ot++)this.temp_buffs[this.bytes_in_sequence][ot]=I[d+ot];return this.bytes_remaining=d+this.bytes_in_sequence-I.length,!0}this.string=I.slice(d,d+this.bytes_in_sequence).toString(),d=d+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var rt=d;rt<I.length&&!(I[rt]>=128);rt++);this.string=I.slice(d,rt).toString(),this._parser.write(this.string),this.emit("data",this.string),d=rt-1}}},Ze.prototype.end=function(I){return I&&I.length&&this._parser.write(I.toString()),this._parser.end(),!0},Ze.prototype.on=function(I,d){var U=this;return!U._parser["on"+I]&&-1!==A.indexOf(I)&&(U._parser["on"+I]=function(){var T=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);T.splice(0,0,I),U.emit.apply(U,T)}),ge.prototype.on.call(U,I,d)},Ze.prototype.destroy=function(){Fe(this._parser),this.emit("close")}}(o)});function nt(L,o,f){return ne(this,void 0,void 0,function(){function h(){return ne(this,void 0,void 0,function(){var Ce,Ze,mt;return de(this,function(re){switch(re.label){case 0:Ce=function(yt){var Ke,Ct,It,Dt,I,d,U,T,ot,rt,ht,bt;return de(this,function(At){switch(At.label){case 0:if(!yt.rows)return[2,"break"];if(!yt.rows.incomplete&&0===yt.rows.length)return[2,"continue"];if(v&&K.ZP.ignoreTransaction(function(){return v(oe)}),Ct=L.table(Ke=yt.tableName),It=ve.tables.filter(function(ze){return ze.name===Ke})[0].schema,!Ct){if(f.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(yt.tableName," is missing in installed database"))}if(!f.acceptChangedPrimaryKey&&It.split(",")[0]!=Ct.schema.primKey.src)throw new Error("Primary key differs for table ".concat(yt.tableName,". "));for(Dt=yt.rows,I=[],d=0;d<Dt.length&&!(U=Dt[d]).incomplete;d++)I.push(Ye.revive(U));return ot=(T=f.filter)?I.filter(yt.inbound?function(ze){return T(Ke,ze)}:function(ze){return T(Ke,ze[1],ze[0])}):I,rt=yt.inbound?[void 0,ot]:[ot.map(function(ze){return ze[0]}),I.map(function(ze){return ze[1]})],ht=rt[0],bt=rt[1],f.overwriteValues?[4,Ct.bulkPut(bt,ht)]:[3,2];case 1:return At.sent(),[3,4];case 2:return[4,Ct.bulkAdd(bt,ht)];case 3:At.sent(),At.label=4;case 4:return oe.completedRows+=I.length,I.incomplete||(oe.completedTables+=1),Dt.splice(0,I.length),[2]}})},Ze=0,mt=ve.data,re.label=1;case 1:return Ze<mt.length?[5,Ce(mt[Ze])]:[3,4];case 2:if("break"===re.sent())return[3,4];re.label=3;case 3:return Ze++,[3,1];case 4:for(;ve.data.length>0&&ve.data[0].rows&&!ve.data[0].rows.incomplete;)ve.data.splice(0,1);return A.done()||A.eof()?[3,8]:ge?(A.pullSync(p),[3,7]):[3,5];case 5:return[4,K.ZP.waitFor(A.pullAsync(p))];case 6:re.sent(),re.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var p,A,ge,ve,v,oe,Fe,Me;return de(this,function(Ce){switch(Ce.label){case 0:return[4,Kt(o,p=(f=f||{}).chunkSizeBytes||1048576)];case 1:if(A=Ce.sent(),ge="FileReaderSync"in self,ve=A.result.data,!f.acceptNameDiff&&L.name!==ve.databaseName)throw new Error("Name differs. Current database name is ".concat(L.name," but export is ").concat(ve.databaseName));if(!f.acceptVersionDiff&&L.verno!==ve.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(L.verno," but export is ").concat(ve.databaseVersion));if(v=f.progressCallback,oe={done:!1,completedRows:0,completedTables:0,totalRows:ve.tables.reduce(function(Ze,mt){return Ze+mt.rowCount},0),totalTables:ve.tables.length},v&&K.ZP.ignoreTransaction(function(){return v(oe)}),!f.clearTablesBeforeImport)return[3,5];Fe=0,Me=L.tables,Ce.label=2;case 2:return Fe<Me.length?[4,Me[Fe].clear()]:[3,5];case 3:Ce.sent(),Ce.label=4;case 4:return Fe++,[3,2];case 5:return f.noTransaction?[4,h()]:[3,7];case 6:return Ce.sent(),[3,9];case 7:return[4,L.transaction("rw",L.tables,h)];case 8:Ce.sent(),Ce.label=9;case 9:return oe.done=!0,v&&K.ZP.ignoreTransaction(function(){return v(oe)}),[2]}})})}function Kt(L,o){return ne(this,void 0,void 0,function(){var f,h;return de(this,function(p){switch(p.label){case 0:f="slice"in L?function F(L){var o=0,f=function J(L){var h,A,S,o=te.parser(),f=0,p=[],ge=!1,ve=!1;return o.onopenobject=function(v){var oe={incomplete:!0};h||(h=oe),A&&(p.push([S,A,ve]),L&&(ve?A.push(oe):A[S]=oe)),A=oe,S=v,ve=!1,++f},o.onkey=function(v){return S=v},o.onvalue=function(v){return ve?A.push(v):A[S]=v},o.oncloseobject=function(){var v;if(delete A.incomplete,S=null,0==--f)ge=!0;else{var oe=A;v=p.pop(),S=v[0],A=v[1],ve=v[2],L||(ve?A.push(oe):A[S]=oe)}},o.onopenarray=function(){var v=[];v.incomplete=!0,h||(h=v),A&&(p.push([S,A,ve]),L&&(ve?A.push(v):A[S]=v)),A=v,ve=!0,S=null,++f},o.onclosearray=function(){var v;if(delete A.incomplete,S=null,0==--f)ge=!0;else{var oe=A;v=p.pop(),S=v[0],A=v[1],ve=v[2],L||(ve?A.push(oe):A[S]=oe)}},{write:function(v){return o.write(v),h},done:function(){return ge}}}(!0),h={pullAsync:function(p){return ne(this,void 0,void 0,function(){var A,S,ge;return de(this,function(ve){switch(ve.label){case 0:return A=L.slice(o,o+p),o+=p,[4,Be(A,"text")];case 1:return S=ve.sent(),ge=f.write(S),h.result=ge||{},[2,ge]}})})},pullSync:function(p){var A=L.slice(o,o+p);o+=p;var S=z(A,"text"),ge=f.write(S);return h.result=ge||{},ge},done:function(){return f.done()},eof:function(){return o>=L.size},result:{}};return h}(L):L,p.label=1;case 1:return f.eof()?[3,3]:[4,f.pullAsync(o)];case 2:return p.sent(),f.result.data&&f.result.data.data?[3,3]:[3,1];case 3:if(!(h=f.result)||"dexie"!=h.formatName)throw new Error("Given file is not a dexie export");if(h.formatVersion>En)throw new Error("Format version ".concat(h.formatVersion," not supported"));if(!h.data)throw new Error("No data in export file");if(!h.data.databaseName)throw new Error("Missing databaseName in export file");if(!h.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!h.data.tables)throw new Error("Missing tables in export file");return[2,f]}})})}K.ZP.prototype.export=function(L){return function vn(L,o){return ne(this,void 0,void 0,function(){function f(){return ne(this,void 0,void 0,function(){var v,oe,Fe,Me,Et,Ce,Ze,mt;return de(this,function(Pt){switch(Pt.label){case 0:return[4,Promise.all(L.tables.map(function(re){return re.count()}))];case 1:(v=Pt.sent()).forEach(function(re,yt){return p[yt].rowCount=re}),ve.totalRows=v.reduce(function(re,yt){return re+yt}),oe=JSON.stringify(S,void 0,A?2:void 0),Fe=oe.lastIndexOf("]"),Me=oe.substring(0,Fe),h.push(Me),Et=o.filter,Ce=function(re){var yt,Ke,Ct,It,I,d,U,T,ot,rt;return de(this,function(bt){switch(bt.label){case 0:yt=L.table(re),Ct=!!(Ke=yt.schema.primKey).keyPath,It=o.numRowsPerChunk||2e3,I=JSON.stringify(Ct?{tableName:yt.name,inbound:!0,rows:[]}:{tableName:yt.name,inbound:!1,rows:[]},void 0,A?2:void 0),A&&(I=I.split("\n").join("\n    ")),d=I.lastIndexOf("]"),h.push(I.substring(0,d)),U=null,T=0,ot=!0,rt=function(){var At,ze,zt,en,Jt,$t,pe,we;return de(this,function(He){switch(He.label){case 0:return ge&&K.ZP.ignoreTransaction(function(){return ge(ve)}),[4,(At=null==U?yt.limit(It):yt.where(":id").above(U).limit(It)).toArray()];case 1:return 0===(ze=He.sent()).length?[2,"break"]:(null!=U&&T>0&&(h.push(","),A&&h.push("\n      ")),ot=ze.length===It,Ct?(zt=Et?ze.filter(function(Bt){return Et(re,Bt)}):ze,en=zt.map(function(Bt){return Ye.encapsulate(Bt)}),Ye.mustFinalize()?[4,K.ZP.waitFor(Ye.finalize(en))]:[3,3]):[3,4]);case 2:He.sent(),He.label=3;case 3:return we=JSON.stringify(en,void 0,A?2:void 0),A&&(we=we.split("\n").join("\n      ")),h.push(new Blob([we.substring(1,we.length-1)])),T=zt.length,U=ze.length>0?K.ZP.getByKeyPath(ze[ze.length-1],Ke.keyPath):null,[3,8];case 4:return[4,At.primaryKeys()];case 5:return Jt=He.sent(),$t=Jt.map(function(Bt,b){return[Bt,ze[b]]}),Et&&($t=$t.filter(function(Bt){return Et(re,Bt[1],Bt[0])})),pe=$t.map(function(Bt){return Ye.encapsulate(Bt)}),Ye.mustFinalize()?[4,K.ZP.waitFor(Ye.finalize(pe))]:[3,7];case 6:He.sent(),He.label=7;case 7:we=JSON.stringify(pe,void 0,A?2:void 0),A&&(we=we.split("\n").join("\n      ")),h.push(new Blob([we.substring(1,we.length-1)])),T=$t.length,U=Jt.length>0?Jt[Jt.length-1]:null,He.label=8;case 8:return ve.completedRows+=ze.length,[2]}})},bt.label=1;case 1:return ot?[5,rt()]:[3,3];case 2:return"break"===bt.sent()?[3,3]:[3,1];case 3:return h.push(I.substr(d)),ve.completedTables+=1,ve.completedTables<ve.totalTables&&h.push(","),[2]}})},Ze=0,mt=p,Pt.label=2;case 2:return Ze<mt.length?[5,Ce(mt[Ze].name)]:[3,5];case 3:Pt.sent(),Pt.label=4;case 4:return Ze++,[3,2];case 5:return h.push(oe.substr(Fe)),ve.done=!0,ge&&K.ZP.ignoreTransaction(function(){return ge(ve)}),[2]}})})}var h,p,A,S,ge,ve;return de(this,function(v){switch(v.label){case 0:o=o||{},h=[],p=L.tables.map(function(oe){return{name:oe.name,schema:Le(oe),rowCount:0}}),A=o.prettyJson,S={formatName:"dexie",formatVersion:1,data:{databaseName:L.name,databaseVersion:L.verno,tables:p,data:[]}},ge=o.progressCallback,ve={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:L.tables.length},v.label=1;case 1:return v.trys.push([1,,6,7]),o.noTransaction?[4,f()]:[3,3];case 2:return v.sent(),[3,5];case 3:return[4,L.transaction("r",L.tables,f)];case 4:v.sent(),v.label=5;case 5:return[3,7];case 6:return Ye.finalize(),[7];case 7:return[2,new Blob(h,{type:"text/json"})]}})})}(this,L)},K.ZP.prototype.import=function(L,o){return nt(this,L,o)},K.ZP.import=function(L,o){return function Oe(L,o){return ne(this,void 0,void 0,function(){var h,p,A;return de(this,function(S){switch(S.label){case 0:return[4,Kt(L,(o=o||{}).chunkSizeBytes||1048576)];case 1:return h=S.sent(),(A=new K.ZP((p=h.result.data).databaseName)).version(p.databaseVersion).stores(function st(L){for(var o={},f=0,h=L.tables;f<h.length;f++){var p=h[f];o[p.name]=p.schema}return o}(p)),[4,nt(A,h,o)];case 2:return S.sent(),[2,A]}})})}(L,o)};class Ue extends K.ZP{constructor(o){super("correctExam"+o),(0,W.Z)(this,"examId",void 0),(0,W.Z)(this,"exams",void 0),(0,W.Z)(this,"templates",void 0),(0,W.Z)(this,"alignImages",void 0),(0,W.Z)(this,"nonAlignImages",void 0),this.examId=o,this.version(3).stores({exams:"++id",templates:"++id, examId, [examId+pageNumber]",alignImages:"++id, examId,[examId+pageNumber]",nonAlignImages:"++id, examId,[examId+pageNumber]"})}resetDatabase(){var o=this;return(0,O.Z)(function*(){yield o.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{o.exams.clear(),o.templates.clear(),o.alignImages.clear(),o.nonAlignImages.clear()})})()}removeElementForExam(){var o=this;return(0,O.Z)(function*(){yield o.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{o.exams.delete(o.examId),o.templates.where("examId").equals(o.examId).toArray().then(f=>o.templates.bulkDelete(f.map(h=>h.id))),o.alignImages.where("examId").equals(o.examId).toArray().then(f=>o.alignImages.bulkDelete(f.map(h=>h.id))),o.nonAlignImages.where("examId").equals(o.examId).toArray().then(f=>o.nonAlignImages.bulkDelete(f.map(h=>h.id)))})})()}removePageAlignForExam(){var o=this;return(0,O.Z)(function*(){yield o.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{o.exams.delete(o.examId),o.alignImages.where("examId").equals(o.examId).toArray().then(f=>o.alignImages.bulkDelete(f.map(h=>h.id)))})})()}removeElementForExamForPages(o,f){var h=this;return(0,O.Z)(function*(){yield h.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=o&&p.pageNumber<=f).toArray().then(p=>h.alignImages.bulkDelete(p.map(A=>A.id))),h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=o&&p.pageNumber<=f).toArray().then(p=>h.nonAlignImages.bulkDelete(p.map(A=>A.id)))})})()}removePageAlignForExamForPage(o){var f=this;return(0,O.Z)(function*(){yield f.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{f.alignImages.where({examId:f.examId,pageNumber:o}).delete()})})()}removePageNonAlignForExamForPage(o){var f=this;return(0,O.Z)(function*(){yield f.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{f.nonAlignImages.where({examId:f.examId,pageNumber:o}).delete()})})()}removePageAlignForExamForPages(o,f){var h=this;return(0,O.Z)(function*(){yield h.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=o&&p.pageNumber<=f).toArray().then(p=>h.alignImages.bulkDelete(p.map(A=>A.id)))})})()}removePageNonAlignForExamForPages(o,f){var h=this;return(0,O.Z)(function*(){yield h.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=o&&p.pageNumber<=f).toArray().then(p=>h.nonAlignImages.bulkDelete(p.map(A=>A.id)))})})()}removeExam(){var o=this;return(0,O.Z)(function*(){yield o.transaction("rw","exams",()=>{o.exams.delete(o.examId)})})()}addAligneImage(o){var f=this;return(0,O.Z)(function*(){yield f.alignImages.put(o)})()}addNonAligneImage(o){var f=this;return(0,O.Z)(function*(){yield f.nonAlignImages.put(o)})()}export(o){return super.export(o)}import(o,f){return super.import(o,f)}countPageTemplate(){var o=this;return(0,O.Z)(function*(){return yield o.templates.where("examId").equals(o.examId).count()})()}countAlignImage(){var o=this;return(0,O.Z)(function*(){return yield o.alignImages.where("examId").equals(o.examId).count()})()}countNonAlignImage(){var o=this;return(0,O.Z)(function*(){return yield o.nonAlignImages.where("examId").equals(o.examId).count()})()}getFirstNonAlignImage(o){var f=this;return(0,O.Z)(function*(){return yield f.nonAlignImages.where({examId:f.examId,pageNumber:o}).first()})()}getFirstAlignImage(o){var f=this;return(0,O.Z)(function*(){return yield f.alignImages.where({examId:f.examId,pageNumber:o}).first()})()}getFirstTemplate(o){var f=this;return(0,O.Z)(function*(){return yield f.templates.where({examId:f.examId,pageNumber:o}).first()})()}getNonAlignImageBetweenAndSortByPageNumber(o,f){var h=this;return(0,O.Z)(function*(){return yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=o&&p.pageNumber<=f).sortBy("pageNumber")})()}getAlignImageBetweenAndSortByPageNumber(o,f){var h=this;return(0,O.Z)(function*(){return yield h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=o&&p.pageNumber<=f).sortBy("pageNumber")})()}getNonAlignImagesForPageNumbers(o){var f=this;return(0,O.Z)(function*(){return yield f.nonAlignImages.where({examId:f.examId}).filter(h=>o.includes(h.pageNumber)).sortBy("pageNumber")})()}getAlignImagesForPageNumbers(o){var f=this;return(0,O.Z)(function*(){return yield f.alignImages.where({examId:f.examId}).filter(h=>o.includes(h.pageNumber)).sortBy("pageNumber")})()}getNonAlignSortByPageNumber(){var o=this;return(0,O.Z)(function*(){return yield o.nonAlignImages.where({examId:o.examId}).sortBy("pageNumber")})()}moveNonAlignPages(o,f){var h=this;return(0,O.Z)(function*(){o!==f&&(yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber===o).modify(p=>{p.pageNumber=-1e3}),o<f?yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>o&&p.pageNumber<=f).modify(p=>{p.pageNumber=p.pageNumber-1}):yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber<o&&p.pageNumber>=f).modify(p=>{p.pageNumber=p.pageNumber+1}),yield h.nonAlignImages.where({examId:h.examId}).filter(p=>-1e3===p.pageNumber).modify(p=>{p.pageNumber=f}))})()}moveAlignPages(o,f){var h=this;return(0,O.Z)(function*(){console.error("move",o,f),o!==f&&(yield h.alignImages.where({examId:h.examId,pageNumber:o}).modify(p=>{p.pageNumber=-1e3}),o<f?yield h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>o&&p.pageNumber<=f).modify(p=>{p.pageNumber=p.pageNumber-1}):yield h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber<o&&p.pageNumber>=f).modify(p=>{p.pageNumber=p.pageNumber+1}),yield h.alignImages.where({examId:h.examId,pageNumber:-1e3}).modify(p=>{p.pageNumber=f}))})()}getAlignSortByPageNumber(){var o=this;return(0,O.Z)(function*(){return yield o.alignImages.where({examId:o.examId}).sortBy("pageNumber")})()}addExam(){var o=this;return(0,O.Z)(function*(){return yield o.exams.add({id:o.examId})})()}addTemplate(o){var f=this;return(0,O.Z)(function*(){return yield f.templates.add({examId:f.examId,pageNumber:o.pageNumber,value:o.value})})()}countNonAlignWithPageNumber(o){var f=this;return(0,O.Z)(function*(){return yield f.nonAlignImages.where({examId:f.examId,pageNumber:o}).count()})()}countAlignWithPageNumber(o){var f=this;return(0,O.Z)(function*(){return yield f.alignImages.where({examId:f.examId,pageNumber:o}).count()})()}}class Zt{constructor(){(0,W.Z)(this,"dbs",new Map)}resetDatabase(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o);return void 0===h&&(h=new Ue(o),f.dbs.set(o,h)),h.resetDatabase()})()}removeExam(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o);return void 0===h&&(h=new Ue(o),f.dbs.set(o,h)),h.removeExam()})()}removeElementForExam(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o);return void 0===h&&(h=new Ue(o),f.dbs.set(o,h)),h.removeElementForExam()})()}removeElementForExamForPages(o,f,h){var p=this;return(0,O.Z)(function*(){let A=p.dbs.get(o);return void 0===A&&(A=new Ue(o),p.dbs.set(o,A)),A.removeElementForExamForPages(f,h)})()}removePageAlignForExam(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o);return void 0===h&&(h=new Ue(o),f.dbs.set(o,h)),h.removePageAlignForExam()})()}removePageAlignForExamForPage(o,f){var h=this;return(0,O.Z)(function*(){let p=h.dbs.get(o);return void 0===p&&(p=new Ue(o),h.dbs.set(o,p)),p.removePageAlignForExamForPage(f)})()}removePageNonAlignForExamForPage(o,f){var h=this;return(0,O.Z)(function*(){let p=h.dbs.get(o);return void 0===p&&(p=new Ue(o),h.dbs.set(o,p)),p.removePageNonAlignForExamForPage(f)})()}removePageAlignForExamForPages(o,f,h){var p=this;return(0,O.Z)(function*(){let A=p.dbs.get(o);return void 0===A&&(A=new Ue(o),p.dbs.set(o,A)),A.removePageAlignForExamForPages(f,h)})()}removePageNonAlignForExamForPages(o,f,h){var p=this;return(0,O.Z)(function*(){let A=p.dbs.get(o);return void 0===A&&(A=new Ue(o),p.dbs.set(o,A)),A.removePageNonAlignForExamForPages(f,h)})()}addAligneImage(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o.examId);return void 0===h&&(h=new Ue(o.examId),f.dbs.set(o.examId,h)),h.addAligneImage(o)})()}addNonAligneImage(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o.examId);return void 0===h&&(h=new Ue(o.examId),f.dbs.set(o.examId,h)),h.addNonAligneImage(o)})()}export(o,f){let h=this.dbs.get(o);return void 0===h&&(h=new Ue(o),this.dbs.set(o,h)),h.export(f)}import(o,f,h){let p=this.dbs.get(o);return void 0===p&&(p=new Ue(o),this.dbs.set(o,p)),p.import(f,h)}countPageTemplate(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o);return void 0===h&&(h=new Ue(o),f.dbs.set(o,h)),h.countPageTemplate()})()}countAlignImage(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o);return void 0===h&&(h=new Ue(o),f.dbs.set(o,h)),h.countAlignImage()})()}countNonAlignImage(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o);return void 0===h&&(h=new Ue(o),f.dbs.set(o,h)),h.countNonAlignImage()})()}getFirstNonAlignImage(o,f){var h=this;return(0,O.Z)(function*(){let p=h.dbs.get(o);return void 0===p&&(p=new Ue(o),h.dbs.set(o,p)),p.getFirstNonAlignImage(f)})()}getFirstAlignImage(o,f){var h=this;return(0,O.Z)(function*(){let p=h.dbs.get(o);return void 0===p&&(p=new Ue(o),h.dbs.set(o,p)),p.getFirstAlignImage(f)})()}getFirstTemplate(o,f){var h=this;return(0,O.Z)(function*(){let p=h.dbs.get(o);return void 0===p&&(p=new Ue(o),h.dbs.set(o,p)),p.getFirstTemplate(f)})()}getNonAlignImageBetweenAndSortByPageNumber(o,f,h){var p=this;return(0,O.Z)(function*(){let A=p.dbs.get(o);return void 0===A&&(A=new Ue(o),p.dbs.set(o,A)),A.getNonAlignImageBetweenAndSortByPageNumber(f,h)})()}getAlignImageBetweenAndSortByPageNumber(o,f,h){var p=this;return(0,O.Z)(function*(){let A=p.dbs.get(o);return void 0===A&&(A=new Ue(o),p.dbs.set(o,A)),A.getAlignImageBetweenAndSortByPageNumber(f,h)})()}getNonAlignImagesForPageNumbers(o,f){var h=this;return(0,O.Z)(function*(){let p=h.dbs.get(o);return void 0===p&&(p=new Ue(o),h.dbs.set(o,p)),p.getNonAlignImagesForPageNumbers(f)})()}getAlignImagesForPageNumbers(o,f){var h=this;return(0,O.Z)(function*(){let p=h.dbs.get(o);return void 0===p&&(p=new Ue(o),h.dbs.set(o,p)),p.getAlignImagesForPageNumbers(f)})()}getNonAlignSortByPageNumber(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o);return void 0===h&&(h=new Ue(o),f.dbs.set(o,h)),h.getNonAlignSortByPageNumber()})()}getAlignSortByPageNumber(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o);return void 0===h&&(h=new Ue(o),f.dbs.set(o,h)),h.getAlignSortByPageNumber()})()}addExam(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o);return void 0===h&&(h=new Ue(o),f.dbs.set(o,h)),h.addExam()})()}addTemplate(o){var f=this;return(0,O.Z)(function*(){let h=f.dbs.get(o.examId);return void 0===h&&(h=new Ue(o.examId),f.dbs.set(o.examId,h)),h.addTemplate(o)})()}countNonAlignWithPageNumber(o,f){var h=this;return(0,O.Z)(function*(){let p=h.dbs.get(o);return void 0===p&&(p=new Ue(o),h.dbs.set(o,p)),p.countNonAlignWithPageNumber(f)})()}countAlignWithPageNumber(o,f){var h=this;return(0,O.Z)(function*(){let p=h.dbs.get(o);return void 0===p&&(p=new Ue(o),h.dbs.set(o,p)),p.countAlignWithPageNumber(f)})()}moveNonAlignPages(o,f,h){var p=this;return(0,O.Z)(function*(){let A=p.dbs.get(o);return void 0===A&&(A=new Ue(o),p.dbs.set(o,A)),A.moveNonAlignPages(f,h)})()}moveAlignPages(o,f,h){var p=this;return(0,O.Z)(function*(){let A=p.dbs.get(o);return void 0===A&&(A=new Ue(o),p.dbs.set(o,A)),A.moveAlignPages(f,h)})()}}new Zt},5592:(De,Pe,V)=>{"use strict";V.d(Pe,{y:()=>st});var O=V(305),W=V(7394),K=V(4850),ue=V(8407),ne=V(2653),de=V(4674),Le=V(1441);let st=(()=>{class ${constructor(me){me&&(this._subscribe=me)}lift(me){const je=new $;return je.source=this,je.operator=me,je}subscribe(me,je,_t){const tt=function B($){return $&&$ instanceof O.Lv||function z($){return $&&(0,de.m)($.next)&&(0,de.m)($.error)&&(0,de.m)($.complete)}($)&&(0,W.Nn)($)}(me)?me:new O.Hp(me,je,_t);return(0,Le.x)(()=>{const{operator:kt,source:Yt}=this;tt.add(kt?kt.call(tt,Yt):Yt?this._subscribe(tt):this._trySubscribe(tt))}),tt}_trySubscribe(me){try{return this._subscribe(me)}catch(je){me.error(je)}}forEach(me,je){return new(je=Be(je))((_t,tt)=>{const kt=new O.Hp({next:Yt=>{try{me(Yt)}catch(Lt){tt(Lt),kt.unsubscribe()}},error:tt,complete:_t});this.subscribe(kt)})}_subscribe(me){var je;return null===(je=this.source)||void 0===je?void 0:je.subscribe(me)}[K.L](){return this}pipe(...me){return(0,ue.U)(me)(this)}toPromise(me){return new(me=Be(me))((je,_t)=>{let tt;this.subscribe(kt=>tt=kt,kt=>_t(kt),()=>je(tt))})}}return $.create=Ie=>new $(Ie),$})();function Be($){var Ie;return null!==(Ie=$??ne.config.Promise)&&void 0!==Ie?Ie:Promise}},8645:(De,Pe,V)=>{"use strict";V.d(Pe,{x:()=>Le});var O=V(5592),W=V(7394);const ue=(0,V(2306).d)(Be=>function(){Be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=V(9039),de=V(1441);let Le=(()=>{class Be extends O.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const $=new st(this,this);return $.operator=B,$}_throwIfClosed(){if(this.closed)throw new ue}next(B){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const $ of this.currentObservers)$.next(B)}})}error(B){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:$}=this;for(;$.length;)$.shift().error(B)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:$,isStopped:Ie,observers:me}=this;return $||Ie?W.Lc:(this.currentObservers=null,me.push(B),new W.w0(()=>{this.currentObservers=null,(0,ne.P)(me,B)}))}_checkFinalizedStatuses(B){const{hasError:$,thrownError:Ie,isStopped:me}=this;$?B.error(Ie):me&&B.complete()}asObservable(){const B=new O.y;return B.source=this,B}}return Be.create=(z,B)=>new st(z,B),Be})();class st extends Le{constructor(z,B){super(),this.destination=z,this.source=B}next(z){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===$||$.call(B,z)}error(z){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===$||$.call(B,z)}complete(){var z,B;null===(B=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===B||B.call(z)}_subscribe(z){var B,$;return null!==($=null===(B=this.source)||void 0===B?void 0:B.subscribe(z))&&void 0!==$?$:W.Lc}}},305:(De,Pe,V)=>{"use strict";V.d(Pe,{Hp:()=>_t,Lv:()=>$});var O=V(4674),W=V(7394),K=V(2653),ue=V(3894),ne=V(2420);const de=Be("C",void 0,void 0);function Be(Ve,xe,Ye){return{kind:Ve,value:xe,error:Ye}}var z=V(7599),B=V(1441);class $ extends W.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,W.Nn)(xe)&&xe.add(this)):this.destination=Lt}static create(xe,Ye,rn){return new _t(xe,Ye,rn)}next(xe){this.isStopped?Yt(function st(Ve){return Be("N",Ve,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?Yt(function Le(Ve){return Be("E",void 0,Ve)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?Yt(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ie=Function.prototype.bind;function me(Ve,xe){return Ie.call(Ve,xe)}class je{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:Ye}=this;if(Ye.next)try{Ye.next(xe)}catch(rn){tt(rn)}}error(xe){const{partialObserver:Ye}=this;if(Ye.error)try{Ye.error(xe)}catch(rn){tt(rn)}else tt(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(Ye){tt(Ye)}}}class _t extends ${constructor(xe,Ye,rn){let on;if(super(),(0,O.m)(xe)||!xe)on={next:xe??void 0,error:Ye??void 0,complete:rn??void 0};else{let pn;this&&K.config.useDeprecatedNextContext?(pn=Object.create(xe),pn.unsubscribe=()=>this.unsubscribe(),on={next:xe.next&&me(xe.next,pn),error:xe.error&&me(xe.error,pn),complete:xe.complete&&me(xe.complete,pn)}):on=xe}this.destination=new je(on)}}function tt(Ve){K.config.useDeprecatedSynchronousErrorHandling?(0,B.O)(Ve):(0,ue.h)(Ve)}function Yt(Ve,xe){const{onStoppedNotification:Ye}=K.config;Ye&&z.z.setTimeout(()=>Ye(Ve,xe))}const Lt={closed:!0,next:ne.Z,error:function kt(Ve){throw Ve},complete:ne.Z}},7394:(De,Pe,V)=>{"use strict";V.d(Pe,{Lc:()=>de,w0:()=>ne,Nn:()=>Le});var O=V(4674);const K=(0,V(2306).d)(Be=>function(B){Be(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map(($,Ie)=>`${Ie+1}) ${$.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ue=V(9039);class ne{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const me of B)me.remove(this);else B.remove(this);const{initialTeardown:$}=this;if((0,O.m)($))try{$()}catch(me){z=me instanceof K?me.errors:[me]}const{_finalizers:Ie}=this;if(Ie){this._finalizers=null;for(const me of Ie)try{st(me)}catch(je){z=z??[],je instanceof K?z=[...z,...je.errors]:z.push(je)}}if(z)throw new K(z)}}add(z){var B;if(z&&z!==this)if(this.closed)st(z);else{if(z instanceof ne){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(z)}}_hasParent(z){const{_parentage:B}=this;return B===z||Array.isArray(B)&&B.includes(z)}_addParent(z){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(z),B):B?[B,z]:z}_removeParent(z){const{_parentage:B}=this;B===z?this._parentage=null:Array.isArray(B)&&(0,ue.P)(B,z)}remove(z){const{_finalizers:B}=this;B&&(0,ue.P)(B,z),z instanceof ne&&z._removeParent(this)}}ne.EMPTY=(()=>{const Be=new ne;return Be.closed=!0,Be})();const de=ne.EMPTY;function Le(Be){return Be instanceof ne||Be&&"closed"in Be&&(0,O.m)(Be.remove)&&(0,O.m)(Be.add)&&(0,O.m)(Be.unsubscribe)}function st(Be){(0,O.m)(Be)?Be():Be.unsubscribe()}},2653:(De,Pe,V)=>{"use strict";V.d(Pe,{config:()=>O});const O={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4036:(De,Pe,V)=>{"use strict";V.d(Pe,{z:()=>K});var O=V(6973),W=V(305);function K(ue,ne){const de="object"==typeof ne;return new Promise((Le,st)=>{const Be=new W.Hp({next:z=>{Le(z),Be.unsubscribe()},error:st,complete:()=>{de?Le(ne.defaultValue):st(new O.K)}});ue.subscribe(Be)})}},7599:(De,Pe,V)=>{"use strict";V.d(Pe,{z:()=>O});const O={setTimeout(W,K,...ue){const{delegate:ne}=O;return ne?.setTimeout?ne.setTimeout(W,K,...ue):setTimeout(W,K,...ue)},clearTimeout(W){const{delegate:K}=O;return(K?.clearTimeout||clearTimeout)(W)},delegate:void 0}},4850:(De,Pe,V)=>{"use strict";V.d(Pe,{L:()=>O});const O="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(De,Pe,V)=>{"use strict";V.d(Pe,{K:()=>W});const W=(0,V(2306).d)(K=>function(){K(this),this.name="EmptyError",this.message="no elements in sequence"})},9039:(De,Pe,V)=>{"use strict";function O(W,K){if(W){const ue=W.indexOf(K);0<=ue&&W.splice(ue,1)}}V.d(Pe,{P:()=>O})},2306:(De,Pe,V)=>{"use strict";function O(W){const ue=W(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}V.d(Pe,{d:()=>O})},1441:(De,Pe,V)=>{"use strict";V.d(Pe,{O:()=>ue,x:()=>K});var O=V(2653);let W=null;function K(ne){if(O.config.useDeprecatedSynchronousErrorHandling){const de=!W;if(de&&(W={errorThrown:!1,error:null}),ne(),de){const{errorThrown:Le,error:st}=W;if(W=null,Le)throw st}}else ne()}function ue(ne){O.config.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=ne)}},2737:(De,Pe,V)=>{"use strict";function O(W){return W}V.d(Pe,{y:()=>O})},4674:(De,Pe,V)=>{"use strict";function O(W){return"function"==typeof W}V.d(Pe,{m:()=>O})},2420:(De,Pe,V)=>{"use strict";function O(){}V.d(Pe,{Z:()=>O})},3894:(De,Pe,V)=>{"use strict";V.d(Pe,{h:()=>K});var O=V(2653),W=V(7599);function K(ue){W.z.setTimeout(()=>{const{onUnhandledError:ne}=O.config;if(!ne)throw ue;ne(ue)})}},4004:(De,Pe,V)=>{"use strict";V.d(Pe,{Z:()=>B});const W={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let K;const ue=new Uint8Array(16);function ne(){if(!K&&(K=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!K))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return K(ue)}const de=[];for(let $=0;$<256;++$)de.push(($+256).toString(16).slice(1));const B=function z($,Ie,me){if(W.randomUUID&&!Ie&&!$)return W.randomUUID();const je=($=$||{}).random||($.rng||ne)();if(je[6]=15&je[6]|64,je[8]=63&je[8]|128,Ie){me=me||0;for(let _t=0;_t<16;++_t)Ie[me+_t]=je[_t];return Ie}return function Le($,Ie=0){return(de[$[Ie+0]]+de[$[Ie+1]]+de[$[Ie+2]]+de[$[Ie+3]]+"-"+de[$[Ie+4]]+de[$[Ie+5]]+"-"+de[$[Ie+6]]+de[$[Ie+7]]+"-"+de[$[Ie+8]]+de[$[Ie+9]]+"-"+de[$[Ie+10]]+de[$[Ie+11]]+de[$[Ie+12]]+de[$[Ie+13]]+de[$[Ie+14]]+de[$[Ie+15]]).toLowerCase()}(je)}},7061:(De,Pe,V)=>{var O=V(8698).default;function W(){"use strict";De.exports=W=function(){return K},De.exports.__esModule=!0,De.exports.default=De.exports;var K={},ue=Object.prototype,ne=ue.hasOwnProperty,de=Object.defineProperty||function(te,F,J){te[F]=J.value},Le="function"==typeof Symbol?Symbol:{},st=Le.iterator||"@@iterator",Be=Le.asyncIterator||"@@asyncIterator",z=Le.toStringTag||"@@toStringTag";function B(te,F,J){return Object.defineProperty(te,F,{value:J,enumerable:!0,configurable:!0,writable:!0}),te[F]}try{B({},"")}catch{B=function(J,be,Oe){return J[be]=Oe}}function $(te,F,J,be){var Ne=Object.create((F&&F.prototype instanceof je?F:je).prototype),nt=new vn(be||[]);return de(Ne,"_invoke",{value:rn(te,J,nt)}),Ne}function Ie(te,F,J){try{return{type:"normal",arg:te.call(F,J)}}catch(be){return{type:"throw",arg:be}}}K.wrap=$;var me={};function je(){}function _t(){}function tt(){}var kt={};B(kt,st,function(){return this});var Yt=Object.getPrototypeOf,Lt=Yt&&Yt(Yt(En([])));Lt&&Lt!==ue&&ne.call(Lt,st)&&(kt=Lt);var Ve=tt.prototype=je.prototype=Object.create(kt);function xe(te){["next","throw","return"].forEach(function(F){B(te,F,function(J){return this._invoke(F,J)})})}function Ye(te,F){function J(Oe,Ne,nt,Kt){var Wt=Ie(te[Oe],te,Ne);if("throw"!==Wt.type){var Ue=Wt.arg,Zt=Ue.value;return Zt&&"object"==O(Zt)&&ne.call(Zt,"__await")?F.resolve(Zt.__await).then(function(mn){J("next",mn,nt,Kt)},function(mn){J("throw",mn,nt,Kt)}):F.resolve(Zt).then(function(mn){Ue.value=mn,nt(Ue)},function(mn){return J("throw",mn,nt,Kt)})}Kt(Wt.arg)}var be;de(this,"_invoke",{value:function(Ne,nt){function Kt(){return new F(function(Wt,Ue){J(Ne,nt,Wt,Ue)})}return be=be?be.then(Kt,Kt):Kt()}})}function rn(te,F,J){var be="suspendedStart";return function(Oe,Ne){if("executing"===be)throw new Error("Generator is already running");if("completed"===be){if("throw"===Oe)throw Ne;return{value:void 0,done:!0}}for(J.method=Oe,J.arg=Ne;;){var nt=J.delegate;if(nt){var Kt=on(nt,J);if(Kt){if(Kt===me)continue;return Kt}}if("next"===J.method)J.sent=J._sent=J.arg;else if("throw"===J.method){if("suspendedStart"===be)throw be="completed",J.arg;J.dispatchException(J.arg)}else"return"===J.method&&J.abrupt("return",J.arg);be="executing";var Wt=Ie(te,F,J);if("normal"===Wt.type){if(be=J.done?"completed":"suspendedYield",Wt.arg===me)continue;return{value:Wt.arg,done:J.done}}"throw"===Wt.type&&(be="completed",J.method="throw",J.arg=Wt.arg)}}}function on(te,F){var J=F.method,be=te.iterator[J];if(void 0===be)return F.delegate=null,"throw"===J&&te.iterator.return&&(F.method="return",F.arg=void 0,on(te,F),"throw"===F.method)||"return"!==J&&(F.method="throw",F.arg=new TypeError("The iterator does not provide a '"+J+"' method")),me;var Oe=Ie(be,te.iterator,F.arg);if("throw"===Oe.type)return F.method="throw",F.arg=Oe.arg,F.delegate=null,me;var Ne=Oe.arg;return Ne?Ne.done?(F[te.resultName]=Ne.value,F.next=te.nextLoc,"return"!==F.method&&(F.method="next",F.arg=void 0),F.delegate=null,me):Ne:(F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,me)}function pn(te){var F={tryLoc:te[0]};1 in te&&(F.catchLoc=te[1]),2 in te&&(F.finallyLoc=te[2],F.afterLoc=te[3]),this.tryEntries.push(F)}function fn(te){var F=te.completion||{};F.type="normal",delete F.arg,te.completion=F}function vn(te){this.tryEntries=[{tryLoc:"root"}],te.forEach(pn,this),this.reset(!0)}function En(te){if(te){var F=te[st];if(F)return F.call(te);if("function"==typeof te.next)return te;if(!isNaN(te.length)){var J=-1,be=function Oe(){for(;++J<te.length;)if(ne.call(te,J))return Oe.value=te[J],Oe.done=!1,Oe;return Oe.value=void 0,Oe.done=!0,Oe};return be.next=be}}return{next:Rn}}function Rn(){return{value:void 0,done:!0}}return _t.prototype=tt,de(Ve,"constructor",{value:tt,configurable:!0}),de(tt,"constructor",{value:_t,configurable:!0}),_t.displayName=B(tt,z,"GeneratorFunction"),K.isGeneratorFunction=function(te){var F="function"==typeof te&&te.constructor;return!!F&&(F===_t||"GeneratorFunction"===(F.displayName||F.name))},K.mark=function(te){return Object.setPrototypeOf?Object.setPrototypeOf(te,tt):(te.__proto__=tt,B(te,z,"GeneratorFunction")),te.prototype=Object.create(Ve),te},K.awrap=function(te){return{__await:te}},xe(Ye.prototype),B(Ye.prototype,Be,function(){return this}),K.AsyncIterator=Ye,K.async=function(te,F,J,be,Oe){void 0===Oe&&(Oe=Promise);var Ne=new Ye($(te,F,J,be),Oe);return K.isGeneratorFunction(F)?Ne:Ne.next().then(function(nt){return nt.done?nt.value:Ne.next()})},xe(Ve),B(Ve,z,"Generator"),B(Ve,st,function(){return this}),B(Ve,"toString",function(){return"[object Generator]"}),K.keys=function(te){var F=Object(te),J=[];for(var be in F)J.push(be);return J.reverse(),function Oe(){for(;J.length;){var Ne=J.pop();if(Ne in F)return Oe.value=Ne,Oe.done=!1,Oe}return Oe.done=!0,Oe}},K.values=En,vn.prototype={constructor:vn,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(fn),!F)for(var J in this)"t"===J.charAt(0)&&ne.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=void 0)},stop:function(){this.done=!0;var F=this.tryEntries[0].completion;if("throw"===F.type)throw F.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var J=this;function be(Ue,Zt){return nt.type="throw",nt.arg=F,J.next=Ue,Zt&&(J.method="next",J.arg=void 0),!!Zt}for(var Oe=this.tryEntries.length-1;Oe>=0;--Oe){var Ne=this.tryEntries[Oe],nt=Ne.completion;if("root"===Ne.tryLoc)return be("end");if(Ne.tryLoc<=this.prev){var Kt=ne.call(Ne,"catchLoc"),Wt=ne.call(Ne,"finallyLoc");if(Kt&&Wt){if(this.prev<Ne.catchLoc)return be(Ne.catchLoc,!0);if(this.prev<Ne.finallyLoc)return be(Ne.finallyLoc)}else if(Kt){if(this.prev<Ne.catchLoc)return be(Ne.catchLoc,!0)}else{if(!Wt)throw new Error("try statement without catch or finally");if(this.prev<Ne.finallyLoc)return be(Ne.finallyLoc)}}}},abrupt:function(F,J){for(var be=this.tryEntries.length-1;be>=0;--be){var Oe=this.tryEntries[be];if(Oe.tryLoc<=this.prev&&ne.call(Oe,"finallyLoc")&&this.prev<Oe.finallyLoc){var Ne=Oe;break}}Ne&&("break"===F||"continue"===F)&&Ne.tryLoc<=J&&J<=Ne.finallyLoc&&(Ne=null);var nt=Ne?Ne.completion:{};return nt.type=F,nt.arg=J,Ne?(this.method="next",this.next=Ne.finallyLoc,me):this.complete(nt)},complete:function(F,J){if("throw"===F.type)throw F.arg;return"break"===F.type||"continue"===F.type?this.next=F.arg:"return"===F.type?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):"normal"===F.type&&J&&(this.next=J),me},finish:function(F){for(var J=this.tryEntries.length-1;J>=0;--J){var be=this.tryEntries[J];if(be.finallyLoc===F)return this.complete(be.completion,be.afterLoc),fn(be),me}},catch:function(F){for(var J=this.tryEntries.length-1;J>=0;--J){var be=this.tryEntries[J];if(be.tryLoc===F){var Oe=be.completion;if("throw"===Oe.type){var Ne=Oe.arg;fn(be)}return Ne}}throw new Error("illegal catch attempt")},delegateYield:function(F,J,be){return this.delegate={iterator:En(F),resultName:J,nextLoc:be},"next"===this.method&&(this.arg=void 0),me}},K}De.exports=W,De.exports.__esModule=!0,De.exports.default=De.exports},8698:De=>{function Pe(V){return De.exports=Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(O){return typeof O}:function(O){return O&&"function"==typeof Symbol&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},De.exports.__esModule=!0,De.exports.default=De.exports,Pe(V)}De.exports=Pe,De.exports.__esModule=!0,De.exports.default=De.exports},4687:(De,Pe,V)=>{var O=V(7061)();De.exports=O;try{regeneratorRuntime=O}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=O:Function("r","regeneratorRuntime = r")(O)}},9505:(De,Pe,V)=>{"use strict";V.d(Pe,{ZP:()=>Cn});const O=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,W=Object.keys,K=Array.isArray;function ue(t,e){return"object"!=typeof e||W(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||O.Promise||(O.Promise=Promise);const ne=Object.getPrototypeOf,de={}.hasOwnProperty;function Le(t,e){return de.call(t,e)}function st(t,e){"function"==typeof e&&(e=e(ne(t))),(typeof Reflect>"u"?W:Reflect.ownKeys)(e).forEach(n=>{z(t,n,e[n])})}const Be=Object.defineProperty;function z(t,e,n,r){Be(t,e,ue(n&&Le(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function B(t){return{from:function(e){return t.prototype=Object.create(e.prototype),z(t.prototype,"constructor",t),{extend:st.bind(null,t.prototype)}}}}const $=Object.getOwnPropertyDescriptor;function Ie(t,e){let n;return $(t,e)||(n=ne(t))&&Ie(n,e)}const me=[].slice;function je(t,e,n){return me.call(t,e,n)}function _t(t,e){return e(t)}function tt(t){if(!t)throw new Error("Assertion Failed")}function kt(t){O.setImmediate?setImmediate(t):setTimeout(t,0)}function Yt(t,e){return t.reduce((n,r,i)=>{var a=e(r,i);return a&&(n[a[0]]=a[1]),n},{})}function Lt(t,e){if(Le(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var a=Lt(t,e[r]);n.push(a)}return n}var l=e.indexOf(".");if(-1!==l){var g=t[e.substr(0,l)];return void 0===g?void 0:Lt(g,e.substr(l+1))}}function Ve(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){tt("string"!=typeof n&&"length"in n);for(var r=0,i=e.length;r<i;++r)Ve(t,e[r],n[r])}else{var a=e.indexOf(".");if(-1!==a){var l=e.substr(0,a),g=e.substr(a+1);if(""===g)void 0===n?K(t)&&!isNaN(parseInt(l))?t.splice(l,1):delete t[l]:t[l]=n;else{var y=t[l];y&&Le(t,l)||(y=t[l]={}),Ve(y,g,n)}}else void 0===n?K(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function xe(t){var e={};for(var n in t)Le(t,n)&&(e[n]=t[n]);return e}const Ye=[].concat;function rn(t){return Ye.apply([],t)}const on="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(rn([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>O[t]),pn=on.map(t=>O[t]);Yt(on,t=>[t,!0]);let fn=null;function vn(t){fn=typeof WeakMap<"u"&&new WeakMap;const e=En(t);return fn=null,e}function En(t){if(!t||"object"!=typeof t)return t;let e=fn&&fn.get(t);if(e)return e;if(K(t)){e=[],fn&&fn.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(En(t[n]))}else if(pn.indexOf(t.constructor)>=0)e=t;else{const a=ne(t);for(var i in e=a===Object.prototype?{}:Object.create(a),fn&&fn.set(t,e),t)Le(t,i)&&(e[i]=En(t[i]))}return e}const{toString:Rn}={};function te(t){return Rn.call(t).slice(8,-1)}const F=typeof Symbol<"u"?Symbol.iterator:"@@iterator",J="symbol"==typeof F?function(t){var e;return null!=t&&(e=t[F])&&e.apply(t)}:function(){return null},be={};function Oe(t){var e,n,r,i;if(1===arguments.length){if(K(t))return t.slice();if(this===be&&"string"==typeof t)return[t];if(i=J(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Ne=typeof Symbol<"u"?t=>"AsyncFunction"===t[Symbol.toStringTag]:()=>!1;var nt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Kt(t,e){nt=t,Wt=e}var Wt=()=>!0;const Ue=!new Error("").stack;function Zt(){if(Ue)try{throw new Error}catch(t){return t}return new Error}function mn(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(Wt).map(r=>"\n"+r).join("")):""}var L=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],o=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(L),f={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function h(t,e){this._e=Zt(),this.name=t,this.message=e}function p(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join("\n")}function A(t,e,n,r){this._e=Zt(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=p(t,e)}function S(t,e){this._e=Zt(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=p(t,e)}B(h).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+mn(this._e,2))}},toString:function(){return this.name+": "+this.message}}),B(A).from(h),B(S).from(h);var ge=o.reduce((t,e)=>(t[e]=e+"Error",t),{});const ve=h;var v=o.reduce((t,e)=>{var n=e+"Error";function r(i,a){this._e=Zt(),this.name=n,i?"string"==typeof i?(this.message=`${i}${a?"\n "+a:""}`,this.inner=a||null):"object"==typeof i&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=f[e]||n,this.inner=null)}return B(r).from(ve),t[e]=r,t},{});v.Syntax=SyntaxError,v.Type=TypeError,v.Range=RangeError;var oe=L.reduce((t,e)=>(t[e+"Error"]=v[e],t),{}),Fe=o.reduce((t,e)=>(-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=v[e]),t),{});function Me(){}function Et(t){return t}function Ce(t,e){return null==t||t===Et?e:function(n){return e(t(n))}}function Ze(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function mt(t,e){return t===Me?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ze(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ze(i,this.onerror):i),void 0!==a?a:n}}function an(t,e){return t===Me?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ze(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ze(r,this.onerror):r)}}function Pt(t,e){return t===Me?e:function(n){var r=t.apply(this,arguments);ue(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var l=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ze(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Ze(a,this.onerror):a),void 0===r?void 0===l?void 0:l:ue(r,l)}}function re(t,e){return t===Me?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function yt(t,e){return t===Me?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return e.apply(r,a)})}return e.apply(this,arguments)}}Fe.ModifyError=A,Fe.DexieError=h,Fe.BulkError=S;var Ke={};const Ct=100,[It,Dt,I]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,ne(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,ne(e),t]})(),d=Dt&&Dt.then,U=It&&It.constructor,T=!!I;var ot=!1,rt=I?()=>{I.then(Vt)}:O.setImmediate?setImmediate.bind(null,Vt):O.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Vt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Vt,0)},ht=function(t,e){we.push([t,e]),At&&(rt(),At=!1)},bt=!0,At=!0,ze=[],zt=[],en=null,Jt=Et,$t={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ft,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{ft(t[0],t[1])}catch{}})}},pe=$t,we=[],He=0,Bt=[];function b(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Me,this._lib=!1;var e=this._PSD=pe;if(nt&&(this._stackHolder=Zt(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==Ke)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&X(this,this._value))}this._state=null,this._value=null,++e.ref,M(this,t)}const R={get:function(){var t=pe,e=lt;function n(r,i){var a=!t.global&&(t!==pe||e!==lt);const l=a&&!s();var g=new b((y,P)=>{it(this,new D(Ae(r,t,a,l),Ae(i,t,a,l),y,P,t))});return nt&&Ut(g,this),g}return n.prototype=Ke,n},set:function(t){z(this,"then",t&&t.prototype===Ke?R:{get:function(){return t},set:R.set})}};function D(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function M(t,e){try{e(n=>{if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Gt();n&&"function"==typeof n.then?M(t,(i,a)=>{n instanceof b?n._then(i,a):n.then(i,a)}):(t._state=!0,t._value=n,Qe(t)),r&&tn()}},X.bind(null,t))}catch(n){X(t,n)}}function X(t,e){if(zt.push(e),null===t._state){var n=t._lib&&Gt();e=Jt(e),t._state=!1,t._value=e,nt&&null!==e&&"object"==typeof e&&!e._promise&&function(r,i,a){try{(()=>{var r=Ie(e,"stack");e._promise=t,z(e,"stack",{get:()=>ot?r&&(r.get?r.get.apply(e):r.value):t.stack})}).apply(null,void 0)}catch(l){}}(),r=t,ze.some(i=>i._value===r._value)||ze.push(r),Qe(t),n&&tn()}var r}function Qe(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)it(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===He&&(++He,ht(()=>{0==--He&&un()},[]))}function it(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++He,ht(Xe,[n,t,e])}else t._listeners.push(e)}function Xe(t,e,n){try{en=e;var r,i=e._value;e._state?r=t(i):(zt.length&&(zt=[]),r=t(i),-1===zt.indexOf(i)&&function(a){for(var l=ze.length;l;)if(ze[--l]._value===a._value)return void ze.splice(l,1)}(e)),n.resolve(r)}catch(a){n.reject(a)}finally{en=null,0==--He&&un(),--n.psd.ref||n.psd.finalize()}}function _e(t,e,n){if(e.length===n)return e;var r="";if(!1===t._state){var i,a,l=t._value;null!=l?(i=l.name||"Error",a=l.message||l,r=mn(l,0)):(i=l,a=""),e.push(i+(a?": "+a:"")+r)}return nt&&((r=mn(t._stackHolder,2))&&-1===e.indexOf(r)&&e.push(r),t._prev&&_e(t._prev,e,n)),e}function Ut(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Vt(){Gt()&&tn()}function Gt(){var t=bt;return bt=!1,At=!1,t}function tn(){var t,e,n;do{for(;we.length>0;)for(t=we,we=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(we.length>0);bt=!0,At=!0}function un(){var t=ze;ze=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=Bt.slice(0),n=e.length;n;)e[--n]()}function hn(t){return new b(Ke,!1,t)}function We(t,e){var n=pe;return function(){var r=Gt(),i=pe;try{return G(n,!0),t.apply(this,arguments)}catch(a){e&&e(a)}finally{G(i,!1),r&&tn()}}}st(b.prototype,{then:R,_then:function(t,e){it(this,new D(null,null,t,e,pe))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return this.then(null,"function"==typeof e?r=>r instanceof e?n(r):hn(r):r=>r&&r.name===e?n(r):hn(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),hn(e)))},stack:{get:function(){if(this._stack)return this._stack;try{ot=!0;var t=_e(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{ot=!1}}},timeout:function(t,e){return t<1/0?new b((n,r)=>{var i=setTimeout(()=>r(new v.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&z(b.prototype,Symbol.toStringTag,"Dexie.Promise"),$t.env=H(),st(b,{all:function(){var t=Oe.apply(null,arguments).map(c);return new b(function(e,n){0===t.length&&e([]);var r=t.length;t.forEach((i,a)=>b.resolve(i).then(l=>{t[a]=l,--r||e(t)},n))})},resolve:t=>{if(t instanceof b)return t;if(t&&"function"==typeof t.then)return new b((n,r)=>{t.then(n,r)});var e=new b(Ke,!0,t);return Ut(e,en),e},reject:hn,race:function(){var t=Oe.apply(null,arguments).map(c);return new b((e,n)=>{t.map(r=>b.resolve(r).then(e,n))})},PSD:{get:()=>pe,set:t=>pe=t},totalEchoes:{get:()=>lt},newPSD:ce,usePSD:fe,scheduler:{get:()=>ht,set:t=>{ht=t}},rejectionMapper:{get:()=>Jt,set:t=>{Jt=t}},follow:(t,e)=>new b((n,r)=>ce((i,a)=>{var l=pe;l.unhandleds=[],l.onunhandled=a,l.finalize=Ze(function(){var g;g=()=>{0===this.unhandleds.length?i():a(this.unhandleds[0])},Bt.push(function y(){g(),Bt.splice(Bt.indexOf(y),1)}),++He,ht(()=>{0==--He&&un()},[])},l.finalize),t()},e,n,r))}),U&&(U.allSettled&&z(b,"allSettled",function(){const t=Oe.apply(null,arguments).map(c);return new b(e=>{0===t.length&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,a)=>b.resolve(i).then(l=>r[a]={status:"fulfilled",value:l},l=>r[a]={status:"rejected",reason:l}).then(()=>--n||e(r)))})}),U.any&&typeof AggregateError<"u"&&z(b,"any",function(){const t=Oe.apply(null,arguments).map(c);return new b((e,n)=>{0===t.length&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((a,l)=>b.resolve(a).then(g=>e(g),g=>{i[l]=g,--r||n(new AggregateError(i))}))})}));const wt={awaits:0,echoes:0,id:0};var Tt=0,ct=[],at=0,lt=0,Nt=0;function ce(t,e,n,r){var i=pe,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Nt;var l=$t.env;a.env=T?{Promise:b,PromiseProp:{value:b,configurable:!0,writable:!0},all:b.all,race:b.race,allSettled:b.allSettled,any:b.any,resolve:b.resolve,reject:b.reject,nthen:$e(l.nthen,a),gthen:$e(l.gthen,a)}:{},e&&ue(a,e),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=fe(a,t,n,r);return 0===a.ref&&a.finalize(),g}function u(){return wt.id||(wt.id=++Tt),++wt.awaits,wt.echoes+=Ct,wt.id}function s(){return!!wt.awaits&&(0==--wt.awaits&&(wt.id=0),wt.echoes=wt.awaits*Ct,!0)}function c(t){return wt.echoes&&t&&t.constructor===U?(u(),t.then(e=>(s(),e),e=>(s(),Te(e)))):t}function m(t){++lt,wt.echoes&&0!=--wt.echoes||(wt.echoes=wt.id=0),ct.push(pe),G(t,!0)}function w(){var t=ct[ct.length-1];ct.pop(),G(t,!1)}function G(t,e){var n=pe;if((e?!wt.echoes||at++&&t===pe:!at||--at&&t===pe)||ie(e?m.bind(null,t):w),t!==pe&&(pe=t,n===$t&&($t.env=H()),T)){var r=$t.env.Promise,i=t.env;Dt.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(O,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function H(){var t=O.Promise;return T?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(O,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Dt.then,gthen:t.prototype.then}:{}}function fe(t,e,n,r,i){var a=pe;try{return G(t,!0),e(n,r,i)}finally{G(a,!1)}}function ie(t){d.call(It,t)}function Ae(t,e,n,r){return"function"!=typeof t?t:function(){var i=pe;n&&u(),G(e,!0);try{return t.apply(this,arguments)}finally{G(i,!1),r&&ie(s)}}}function $e(t,e){return function(n,r){return t.call(this,Ae(n,e),Ae(r,e))}}-1===(""+d).indexOf("[native code]")&&(u=s=Me);const Ge="unhandledrejection";function ft(t,e){var n;try{n=e.onuncatched(t)}catch{}if(!1!==n)try{var r,i={promise:e,reason:t};if(O.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Ge,!0,!0),ue(r,i)):O.CustomEvent&&ue(r=new CustomEvent(Ge,{detail:i}),i),r&&O.dispatchEvent&&(dispatchEvent(r),!O.PromiseRejectionEvent&&O.onunhandledrejection))try{O.onunhandledrejection(r)}catch{}nt&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Te=b.reject;function Je(t,e,n,r){if(t.idbdb&&(t._state.openComplete||pe.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(a){return a.name===ge.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Je(t,e,n,r))):Te(a)}return i._promise(e,(a,l)=>ce(()=>(pe.trans=i,r(a,l,i)))).then(a=>i._completion.then(()=>a))}if(t._state.openComplete)return Te(new v.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Te(new v.DatabaseClosed);t.open().catch(Me)}return t._state.dbReadyPromise.then(()=>Je(t,e,n,r))}const ut=String.fromCharCode(65535),Re=-1/0,St="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",he="String expected.",Y=[],Ee=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Se=Ee,ke=Ee,qe=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Ht="__dbnames",Ot="readonly",Qt="readwrite";function Mt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const dt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function nn(t){return"string"!=typeof t||/\./.test(t)?e=>e:e=>(void 0===e[t]&&t in e&&delete(e=vn(e))[t],e)}class xt{_trans(e,n,r){const i=this._tx||pe.trans,a=this.name;function l(y,P,_){if(!_.schema[a])throw new v.NotFound("Table "+a+" not part of transaction");return n(_.idbtrans,_)}const g=Gt();try{return i&&i.db===this.db?i===pe.trans?i._promise(e,l,r):ce(()=>i._promise(e,l,r),{trans:i,transless:pe.transless||pe}):Je(this.db,e,[this.name],l)}finally{g&&tn()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(K(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=W(e);if(1===n.length)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(P=>P.compound&&n.every(_=>P.keyPath.indexOf(_)>=0)&&P.keyPath.every(_=>n.indexOf(_)>=0))[0];if(r&&this.db._maxKey!==ut)return this.where(r.name).equals(r.keyPath.map(P=>e[P]));!r&&nt&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,a=this.db._deps.indexedDB;function l(P,_){try{return 0===a.cmp(P,_)}catch{return!1}}const[g,y]=n.reduce(([P,_],x)=>{const E=i[x],C=e[x];return[P||E,P||!E?Mt(_,E&&E.multi?Z=>{const k=Lt(Z,x);return K(k)&&k.some(q=>l(C,q))}:Z=>l(C,Lt(Z,x))):_]},[null,null]);return g?this.where(g.name).equals(e[g.keyPath]).filter(y):r?this.filter(y):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,K(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var a in r)if(Le(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){ue(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let a=e;return i&&r&&(a=nn(i)(e)),this._trans("readwrite",l=>this.core.mutate({trans:l,type:"add",keys:null!=n?[n]:null,values:[a]})).then(l=>l.numFailures?b.reject(l.failures[0]):l.lastResult).then(l=>{if(i)try{Ve(e,i,l)}catch{}return l})}update(e,n){if("object"!=typeof e||K(e))return this.where(":id").equals(e).modify(n);{const r=Lt(e,this.schema.primKey.keyPath);if(void 0===r)return Te(new v.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof n?W(n).forEach(i=>{Ve(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let a=e;return i&&r&&(a=nn(i)(e)),this._trans("readwrite",l=>this.core.mutate({trans:l,type:"put",values:[a],keys:null!=n?[n]:null})).then(l=>l.numFailures?b.reject(l.failures[0]):l.lastResult).then(l=>{if(i)try{Ve(e,i,l)}catch{}return l})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?b.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:dt})).then(e=>e.numFailures?b.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,a=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",l=>{const{auto:g,keyPath:y}=this.schema.primKey;if(y&&i)throw new v.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new v.InvalidArgument("Arguments objects and keys must have the same length");const P=e.length;let _=y&&g?e.map(nn(y)):e;return this.core.mutate({trans:l,type:"add",keys:i,values:_,wantResults:a}).then(({numFailures:x,results:E,lastResult:C,failures:Z})=>{if(0===x)return a?E:C;throw new S(`${this.name}.bulkAdd(): ${x} of ${P} operations failed`,Z)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,a=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",l=>{const{auto:g,keyPath:y}=this.schema.primKey;if(y&&i)throw new v.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new v.InvalidArgument("Arguments objects and keys must have the same length");const P=e.length;let _=y&&g?e.map(nn(y)):e;return this.core.mutate({trans:l,type:"put",keys:i,values:_,wantResults:a}).then(({numFailures:x,results:E,lastResult:C,failures:Z})=>{if(0===x)return a?E:C;throw new S(`${this.name}.bulkPut(): ${x} of ${P} operations failed`,Z)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:a})=>{if(0===r)return i;throw new S(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,a)})}}function qt(t){var e={},n=function(l,g){if(g){for(var y=arguments.length,P=new Array(y-1);--y;)P[y-1]=arguments[y];return e[l].subscribe.apply(null,P),t}if("string"==typeof l)return e[l]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(l,g,y){if("object"!=typeof l){var P;g||(g=re),y||(y=Me);var _={subscribers:[],fire:y,subscribe:function(x){-1===_.subscribers.indexOf(x)&&(_.subscribers.push(x),_.fire=g(_.fire,x))},unsubscribe:function(x){_.subscribers=_.subscribers.filter(function(E){return E!==x}),_.fire=_.subscribers.reduce(g,y)}};return e[l]=n[l]=_,_}W(P=l).forEach(function(x){var E=P[x];if(K(E))a(x,P[x][0],P[x][1]);else{if("asap"!==E)throw new v.InvalidArgument("Invalid event config");var C=a(x,Et,function(){for(var Z=arguments.length,k=new Array(Z);Z--;)k[Z]=arguments[Z];C.subscribers.forEach(function(q){kt(function(){q.apply(null,k)})})})}})}}function Ft(t,e){return B(e).from({prototype:t}),e}function Xt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function cn(t,e){t.filter=Mt(t.filter,e)}function kn(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Mt(r(),e()):e,t.justLimit=n&&!r}function An(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new v.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Sn(t,e,n){const r=An(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:r,range:t.range}})}function Pn(t,e,n,r){const i=t.replayFilter?Mt(t.filter,t.replayFilter()):t.filter;if(t.or){const a={},l=(g,y,P)=>{if(!i||i(y,P,E=>y.stop(E),E=>y.fail(E))){var _=y.primaryKey,x=""+_;"[object ArrayBuffer]"===x&&(x=""+new Uint8Array(_)),Le(a,x)||(a[x]=!0,e(g,y,P))}};return Promise.all([t.or._iterate(l,n),bn(Sn(t,r,n),t.algorithm,l,!t.keysOnly&&t.valueMapper)])}return bn(Sn(t,r,n),Mt(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function bn(t,e,n,r){var i=We(r?(a,l,g)=>n(r(a),l,g):n);return t.then(a=>{if(a)return a.start(()=>{var l=()=>a.continue();e&&!e(a,g=>l=g,g=>{a.stop(g),l=Me},g=>{a.fail(g),l=Me})||i(a.value,a,g=>l=g),l()})})}function pt(t,e){try{const n=gn(t),r=gn(e);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,a){const l=i.length,g=a.length,y=l<g?l:g;for(let P=0;P<y;++P)if(i[P]!==a[P])return i[P]<a[P]?-1:1;return l===g?0:l<g?-1:1}(wn(t),wn(e));case"Array":return function(i,a){const l=i.length,g=a.length,y=l<g?l:g;for(let P=0;P<y;++P){const _=pt(i[P],a[P]);if(0!==_)return _}return l===g?0:l<g?-1:1}(t,e)}}catch{}return NaN}function gn(t){const e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";const n=te(t);return"ArrayBuffer"===n?"binary":n}function wn(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Kn{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,Te.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,Te.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Mt(n.algorithm,e)}_iterate(e,n){return Pn(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&ue(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Pn(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(Xt(r,!0))return i.count({trans:n,query:{index:An(r,i.schema),range:r.range}}).then(l=>Math.min(l,r.limit));var a=0;return Pn(r,()=>(++a,!1),n,i).then(()=>a)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],a=r.length-1;function l(P,_){return _?l(P[r[_]],_-1):P[i]}var g="next"===this._ctx.dir?1:-1;function y(P,_){var x=l(P,a),E=l(_,a);return x<E?-g:x>E?g:0}return this.toArray(function(P){return P.sort(y)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if("next"===r.dir&&Xt(r,!0)&&r.limit>0){const{valueMapper:i}=r,a=An(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(({result:l})=>i?l.map(i):l)}{const i=[];return Pn(r,a=>i.push(a),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Xt(n)?kn(n,()=>{var r=e;return(i,a)=>0===r||(1===r?(--r,!1):(a(()=>{i.advance(r),r=0}),!1))}):kn(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),kn(this._ctx,()=>{var n=e;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this}until(e,n){return cn(this._ctx,function(r,i,a){return!e(r.value)||(i(a),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n;return cn(this._ctx,function(i){return e(i.value)}),(n=this._ctx).isMatch=Mt(n.isMatch,e),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if("next"===n.dir&&Xt(n,!0)&&n.limit>0)return this._read(i=>{var a=An(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return cn(this._ctx,function(i){var a=i.primaryKey.toString(),l=Le(r,a);return r[a]=!0,!l}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if("function"==typeof e)i=e;else{var a=W(e),l=a.length;i=function(k){for(var q=!1,j=0;j<l;++j){var N=a[j],ee=e[N];Lt(k,N)!==ee&&(Ve(k,N,ee),q=!0)}return q}}const g=n.table.core,{outbound:y,extractKey:P}=g.schema.primaryKey,_=this.db._options.modifyChunkSize||200,x=[];let E=0;const C=[],Z=(k,q)=>{const{failures:j,numFailures:N}=q;E+=k-N;for(let ee of W(j))x.push(j[ee])};return this.clone().primaryKeys().then(k=>{const q=j=>{const N=Math.min(_,k.length-j);return g.getMany({trans:r,keys:k.slice(j,j+N),cache:"immutable"}).then(ee=>{const ye=[],le=[],ae=y?[]:null,Q=[];for(let se=0;se<N;++se){const jt=ee[se],vt={value:vn(jt),primKey:k[j+se]};!1!==i.call(vt,vt.value,vt)&&(null==vt.value?Q.push(k[j+se]):y||0===pt(P(jt),P(vt.value))?(le.push(vt.value),y&&ae.push(k[j+se])):(Q.push(k[j+se]),ye.push(vt.value)))}const et=Xt(n)&&n.limit===1/0&&("function"!=typeof e||e===Hn)&&{index:n.index,range:n.range};return Promise.resolve(ye.length>0&&g.mutate({trans:r,type:"add",values:ye}).then(se=>{for(let jt in se.failures)Q.splice(parseInt(jt),1);Z(ye.length,se)})).then(()=>(le.length>0||et&&"object"==typeof e)&&g.mutate({trans:r,type:"put",keys:ae,values:le,criteria:et,changeSpec:"function"!=typeof e&&e}).then(se=>Z(le.length,se))).then(()=>(Q.length>0||et&&e===Hn)&&g.mutate({trans:r,type:"delete",keys:Q,criteria:et}).then(se=>Z(Q.length,se))).then(()=>k.length>j+N&&q(j+_))})};return q(0).then(()=>{if(x.length>0)throw new A("Error modifying one or more objects",x,E,C);return k.length})})})}delete(){var e=this._ctx,n=e.range;return Xt(e)&&(e.isPrimKey&&!ke||3===n.type)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,a=n;return e.table.core.count({trans:r,query:{index:i,range:a}}).then(l=>e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(({failures:g,numFailures:_})=>{if(_)throw new A("Could not delete some values",Object.keys(g).map(x=>g[x]),l-_);return l-_}))}):this.modify(Hn)}}const Hn=(t,e)=>e.value=null;function Or(t,e){return t<e?-1:t===e?0:1}function Pr(t,e){return t>e?-1:t===e?0:1}function yn(t,e,n){var r=t instanceof mr?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Dn(t){return new t.Collection(t,()=>yr("")).limit(0)}function Ir(t,e,n,r,i,a){for(var l=Math.min(t.length,r.length),g=-1,y=0;y<l;++y){var P=e[y];if(P!==r[y])return i(t[y],n[y])<0?t.substr(0,y)+n[y]+n.substr(y+1):i(t[y],r[y])<0?t.substr(0,y)+r[y]+n.substr(y+1):g>=0?t.substr(0,g)+e[g]+n.substr(g+1):null;i(t[y],P)<0&&(g=y)}return l<r.length&&"next"===a?t+n.substr(t.length):l<t.length&&"prev"===a?t.substr(0,n.length):g<0?null:t.substr(0,g)+r[g]+n.substr(g+1)}function qn(t,e,n,r){var i,a,l,g,y,P,_,x=n.length;if(!n.every(k=>"string"==typeof k))return yn(t,he);function E(k){i="next"===k?N=>N.toUpperCase():N=>N.toLowerCase(),a="next"===k?N=>N.toLowerCase():N=>N.toUpperCase(),l="next"===k?Or:Pr;var q=n.map(function(j){return{lower:a(j),upper:i(j)}}).sort(function(j,N){return l(j.lower,N.lower)});g=q.map(function(j){return j.upper}),y=q.map(function(j){return j.lower}),P=k,_="next"===k?"":r}E("next");var C=new t.Collection(t,()=>In(g[0],y[x-1]+r));C._ondirectionchange=function(k){E(k)};var Z=0;return C._addAlgorithm(function(k,q,j){var N=k.key;if("string"!=typeof N)return!1;var ee=a(N);if(e(ee,y,Z))return!0;for(var ye=null,le=Z;le<x;++le){var ae=Ir(N,ee,g[le],y[le],l,P);null===ae&&null===ye?Z=le+1:(null===ye||l(ye,ae)>0)&&(ye=ae)}return q(null!==ye?function(){k.continue(ye+_)}:j),!1}),C}function In(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function yr(t){return{type:1,lower:t,upper:t}}class mr{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=!1!==r,i=!0===i;try{return this._cmp(e,n)>0||0===this._cmp(e,n)&&(r||i)&&(!r||!i)?Dn(this):new this.Collection(this,()=>In(e,n,!r,!i))}catch{return yn(this,St)}}equals(e){return null==e?yn(this,St):new this.Collection(this,()=>yr(e))}above(e){return null==e?yn(this,St):new this.Collection(this,()=>In(e,void 0,!0))}aboveOrEqual(e){return null==e?yn(this,St):new this.Collection(this,()=>In(e,void 0,!1))}below(e){return null==e?yn(this,St):new this.Collection(this,()=>In(void 0,e,!1,!0))}belowOrEqual(e){return null==e?yn(this,St):new this.Collection(this,()=>In(void 0,e))}startsWith(e){return"string"!=typeof e?yn(this,he):this.between(e,e+ut,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):qn(this,(n,r)=>0===n.indexOf(r[0]),[e],ut)}equalsIgnoreCase(e){return qn(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=Oe.apply(be,arguments);return 0===e.length?Dn(this):qn(this,(n,r)=>-1!==r.indexOf(n),e,"")}startsWithAnyOfIgnoreCase(){var e=Oe.apply(be,arguments);return 0===e.length?Dn(this):qn(this,(n,r)=>r.some(i=>0===n.indexOf(i)),e,ut)}anyOf(){const e=Oe.apply(be,arguments);let n=this._cmp;try{e.sort(n)}catch{return yn(this,St)}if(0===e.length)return Dn(this);const r=new this.Collection(this,()=>In(e[0],e[e.length-1]));r._ondirectionchange=a=>{n="next"===a?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((a,l,g)=>{const y=a.key;for(;n(y,e[i])>0;)if(++i,i===e.length)return l(g),!1;return 0===n(y,e[i])||(l(()=>{a.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[Re,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Oe.apply(be,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch{return yn(this,St)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Re,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,a=this._descending,l=this._min,g=this._max;if(0===e.length)return Dn(this);if(!e.every(N=>void 0!==N[0]&&void 0!==N[1]&&i(N[0],N[1])<=0))return yn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",v.InvalidArgument);const y=!n||!1!==n.includeLowers,P=n&&!0===n.includeUppers;let _,x=i;function E(N,ee){return x(N[0],ee[0])}try{_=e.reduce(function(N,ee){let ye=0,le=N.length;for(;ye<le;++ye){const ae=N[ye];if(r(ee[0],ae[1])<0&&r(ee[1],ae[0])>0){ae[0]=l(ae[0],ee[0]),ae[1]=g(ae[1],ee[1]);break}}return ye===le&&N.push(ee),N},[]),_.sort(E)}catch{return yn(this,St)}let C=0;const Z=P?N=>i(N,_[C][1])>0:N=>i(N,_[C][1])>=0,k=y?N=>a(N,_[C][0])>0:N=>a(N,_[C][0])>=0;let q=Z;const j=new this.Collection(this,()=>In(_[0][0],_[_.length-1][1],!y,!P));return j._ondirectionchange=N=>{"next"===N?(q=Z,x=i):(q=k,x=a),_.sort(E)},j._addAlgorithm((N,ee,ye)=>{for(var le=N.key;q(le);)if(++C,C===_.length)return ee(ye),!1;return!((Z(ae=le)||k(ae))&&(0===this._cmp(le,_[C][1])||0===this._cmp(le,_[C][0])||ee(()=>{N.continue(x===i?_[C][0]:_[C][1])}),1));var ae}),j}startsWithAnyOf(){const e=Oe.apply(be,arguments);return e.every(n=>"string"==typeof n)?0===e.length?Dn(this):this.inAnyRange(e.map(n=>[n,n+ut])):yn(this,"startsWithAnyOf() only works with strings")}}function _n(t){return We(function(e){return Un(e),t(e.target.error),!1})}function Un(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Mn="storagemutated",Tn="x-storagemutated-1",Nn=qt(null,Mn);class Tr{_lock(){return tt(!pe.global),++this._reculock,1!==this._reculock||pe.global||(pe.lockOwnerFor=this),this}_unlock(){if(tt(!pe.global),0==--this._reculock)for(pe.global||(pe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{fe(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&pe.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(tt(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new v.DatabaseClosed(r);case"MissingAPIError":throw new v.MissingAPI(r.message,r);default:throw new v.OpenFailed(r)}if(!this.active)throw new v.TransactionInactive;return tt(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=We(i=>{Un(i),this._reject(e.error)}),e.onabort=We(i=>{Un(i),this.active&&this._reject(new v.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=We(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Nn.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if("readwrite"===e&&"readwrite"!==this.mode)return Te(new v.ReadOnly("Transaction is readonly"));if(!this.active)return Te(new v.TransactionInactive);if(this._locked())return new b((a,l)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(a,l)},pe])});if(r)return ce(()=>{var a=new b((l,g)=>{this._lock();const y=n(l,g,this);y&&y.then&&y.then(l,g)});return a.finally(()=>this._unlock()),a._lib=!0,a});var i=new b((a,l)=>{var g=n(a,l,this);g&&g.then&&g.then(a,l)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=b.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);!function l(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=l)}()}var a=n._waitingFor;return new b((l,g)=>{r.then(y=>n._waitingQueue.push(We(l.bind(null,y))),y=>n._waitingQueue.push(We(g.bind(null,y)))).finally(()=>{n._waitingFor===a&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new v.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Le(n,e))return n[e];const r=this.schema[e];if(!r)throw new v.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function Qn(t,e,n,r,i,a,l){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:a,src:(n&&!l?"&":"")+(r?"*":"")+(i?"++":"")+gr(e)}}function gr(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function vr(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Yt(n,r=>[r.name,r])}}let Zn=t=>{try{return t.only([[]]),Zn=()=>[[]],[[]]}catch{return Zn=()=>ut,ut}};function Xn(t){return null==t?()=>{}:"string"==typeof t?1===(e=t).split(".").length?r=>r[e]:r=>Lt(r,e):e=>Lt(e,t);var e}function br(t){return[].slice.call(t)}let Nr=0;function $n(t){return null==t?":id":"string"==typeof t?t:`[${t.join("+")}]`}function kr(t,e,n){function r(y){if(3===y.type)return null;if(4===y.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:P,upper:_,lowerOpen:x,upperOpen:E}=y;return void 0===P?void 0===_?null:e.upperBound(_,!!E):void 0===_?e.lowerBound(P,!!x):e.bound(P,_,!!x,!!E)}const{schema:i,hasGetAll:a}=function(y,P){const _=br(y.objectStoreNames);return{schema:{name:y.name,tables:_.map(x=>P.objectStore(x)).map(x=>{const{keyPath:E,autoIncrement:C}=x,Z=K(E),q={},j={name:x.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==E,compound:Z,keyPath:E,autoIncrement:C,unique:!0,extractKey:Xn(E)},indexes:br(x.indexNames).map(N=>x.index(N)).map(N=>{const{name:ee,unique:ye,multiEntry:le,keyPath:ae}=N,Q={name:ee,compound:K(ae),keyPath:ae,unique:ye,multiEntry:le,extractKey:Xn(ae)};return q[$n(ae)]=Q,Q}),getIndexByKeyPath:N=>q[$n(N)]};return q[":id"]=j.primaryKey,null!=E&&(q[$n(E)]=j.primaryKey),j})},hasGetAll:_.length>0&&"getAll"in P.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),l=i.tables.map(y=>function(P){const _=P.name;return{name:_,schema:P,mutate:function({trans:x,type:E,keys:C,values:Z,range:k}){return new Promise((q,j)=>{q=We(q);const N=x.objectStore(_),ee=null==N.keyPath,ye="put"===E||"add"===E;if(!ye&&"delete"!==E&&"deleteRange"!==E)throw new Error("Invalid operation type: "+E);const{length:le}=C||Z||{length:1};if(C&&Z&&C.length!==Z.length)throw new Error("Given keys array must have same length as given values array.");if(0===le)return q({numFailures:0,failures:{},results:[],lastResult:void 0});let ae;const Q=[],et=[];let se=0;const jt=ln=>{++se,Un(ln)};if("deleteRange"===E){if(4===k.type)return q({numFailures:se,failures:et,results:[],lastResult:void 0});Q.push(ae=3===k.type?N.clear():N.delete(r(k)))}else{const[ln,sn]=ye?ee?[Z,C]:[Z,null]:[C,null];if(ye)for(let Rt=0;Rt<le;++Rt)Q.push(ae=sn&&void 0!==sn[Rt]?N[E](ln[Rt],sn[Rt]):N[E](ln[Rt])),ae.onerror=jt;else for(let Rt=0;Rt<le;++Rt)Q.push(ae=N[E](ln[Rt])),ae.onerror=jt}const vt=ln=>{const sn=ln.target.result;Q.forEach((Rt,Fn)=>null!=Rt.error&&(et[Fn]=Rt.error)),q({numFailures:se,failures:et,results:"delete"===E?C:Q.map(Rt=>Rt.result),lastResult:sn})};ae.onerror=ln=>{jt(ln),vt(ln)},ae.onsuccess=vt})},getMany:({trans:x,keys:E})=>new Promise((C,Z)=>{C=We(C);const k=x.objectStore(_),q=E.length,j=new Array(q);let N,ee=0,ye=0;const le=Q=>{const et=Q.target;j[et._pos]=et.result,++ye===ee&&C(j)},ae=_n(Z);for(let Q=0;Q<q;++Q)null!=E[Q]&&(N=k.get(E[Q]),N._pos=Q,N.onsuccess=le,N.onerror=ae,++ee);0===ee&&C(j)}),get:({trans:x,key:E})=>new Promise((C,Z)=>{C=We(C);const k=x.objectStore(_).get(E);k.onsuccess=q=>C(q.target.result),k.onerror=_n(Z)}),query:(x=a,E=>new Promise((C,Z)=>{C=We(C);const{trans:k,values:q,limit:j,query:N}=E,ee=j===1/0?void 0:j,{index:ye,range:le}=N,ae=k.objectStore(_),Q=ye.isPrimaryKey?ae:ae.index(ye.name),et=r(le);if(0===j)return C({result:[]});if(x){const se=q?Q.getAll(et,ee):Q.getAllKeys(et,ee);se.onsuccess=jt=>C({result:jt.target.result}),se.onerror=_n(Z)}else{let se=0;const jt=q||!("openKeyCursor"in Q)?Q.openCursor(et):Q.openKeyCursor(et),vt=[];jt.onsuccess=ln=>{const sn=jt.result;return sn?(vt.push(q?sn.value:sn.primaryKey),++se===j?C({result:vt}):void sn.continue()):C({result:vt})},jt.onerror=_n(Z)}})),openCursor:function({trans:x,values:E,query:C,reverse:Z,unique:k}){return new Promise((q,j)=>{q=We(q);const{index:N,range:ee}=C,ye=x.objectStore(_),le=N.isPrimaryKey?ye:ye.index(N.name),ae=Z?k?"prevunique":"prev":k?"nextunique":"next",Q=E||!("openKeyCursor"in le)?le.openCursor(r(ee),ae):le.openKeyCursor(r(ee),ae);Q.onerror=_n(j),Q.onsuccess=We(et=>{const se=Q.result;if(!se)return void q(null);se.___id=++Nr,se.done=!1;const jt=se.continue.bind(se);let vt=se.continuePrimaryKey;vt&&(vt=vt.bind(se));const ln=se.advance.bind(se),sn=()=>{throw new Error("Cursor not stopped")};se.trans=x,se.stop=se.continue=se.continuePrimaryKey=se.advance=()=>{throw new Error("Cursor not started")},se.fail=We(j),se.next=function(){let Rt=1;return this.start(()=>Rt--?this.continue():this.stop()).then(()=>this)},se.start=Rt=>{const Fn=new Promise((dn,jn)=>{dn=We(dn),Q.onerror=_n(jn),se.fail=jn,se.stop=Gn=>{se.stop=se.continue=se.continuePrimaryKey=se.advance=sn,dn(Gn)}}),Ln=()=>{if(Q.result)try{Rt()}catch(dn){se.fail(dn)}else se.done=!0,se.start=()=>{throw new Error("Cursor behind last entry")},se.stop()};return Q.onsuccess=We(dn=>{Q.onsuccess=Ln,Ln()}),se.continue=jt,se.continuePrimaryKey=vt,se.advance=ln,Ln(),Fn},q(se)},j)})},count({query:x,trans:E}){const{index:C,range:Z}=x;return new Promise((k,q)=>{const j=E.objectStore(_),N=C.isPrimaryKey?j:j.index(C.name),ee=r(Z),ye=ee?N.count(ee):N.count();ye.onsuccess=We(le=>k(le.target.result)),ye.onerror=_n(q)})}};var x}(y)),g={};return l.forEach(y=>g[y.name]=y),{stack:"dbcore",transaction:t.transaction.bind(t),table(y){if(!g[y])throw new Error(`Table '${y}' not found`);return g[y]},MIN_KEY:-1/0,MAX_KEY:Zn(e),schema:i}}function er({_novip:t},e){const r=function(i,a,{IDBKeyRange:l},y){return{dbcore:(_=kr(a,l,y),x=i.dbcore,x.reduce((E,{create:C})=>({...E,...C(E)}),_))};var _,x}(t._middlewares,e.db,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const a=i.name;t.core.schema.tables.some(l=>l.name===a)&&(i.core=t.core.table(a),t[a]instanceof t.Table&&(t[a].core=i.core))})}function Yn({_novip:t},e,n,r){n.forEach(i=>{const a=r[i];e.forEach(l=>{const g=Ie(l,i);(!g||"value"in g&&void 0===g.value)&&(l===t.Transaction.prototype||l instanceof t.Transaction?z(l,i,{get(){return this.table(i)},set(y){Be(this,i,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):l[i]=new t.Table(i,a))})})}function tr({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Cr(t,e){return t._cfg.version-e._cfg.version}function wr(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],a=e[r];if(i){const l={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!Ee)l.recreate=!0,n.change.push(l);else{const g=i.idxByName,y=a.idxByName;let P;for(P in g)y[P]||l.del.push(P);for(P in y){const _=g[P],x=y[P];_?_.src!==x.src&&l.change.push(x):l.add.push(x)}(l.del.length>0||l.add.length>0||l.change.length>0)&&n.change.push(l)}}else n.add.push([r,a])}return n}function nr(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(a=>rr(i,a)),i}function rr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function ir(t,e,n){const r={};return je(e.objectStoreNames,0).forEach(i=>{const a=n.objectStore(i);let l=a.keyPath;const g=Qn(gr(l),l||"",!1,!1,!!a.autoIncrement,l&&"string"!=typeof l,!0),y=[];for(let _=0;_<a.indexNames.length;++_){const x=a.index(a.indexNames[_]);l=x.keyPath;var P=Qn(x.name,l,!!x.unique,!!x.multiEntry,!1,l&&"string"!=typeof l,!1);y.push(P)}r[i]=vr(i,g,y)}),r}function sr({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const a=r[i],l=n.objectStore(a);t._hasGetAll="getAll"in l;for(let g=0;g<l.indexNames.length;++g){const y=l.indexNames[g],P=l.index(y).keyPath,_="string"==typeof P?P:"["+je(P).join("+")+"]";if(e[a]){const x=e[a].idxByName[_];x&&(x.name=y,delete e[a].idxByName[_],e[a].idxByName[y]=x)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&O.WorkerGlobalScope&&O instanceof O.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class jr{_parseStoresSpec(e,n){W(e).forEach(r=>{if(null!==e[r]){var i=e[r].split(",").map((l,g)=>{const y=(l=l.trim()).replace(/([&*]|\+\+)/g,""),P=/^\[/.test(y)?y.match(/^\[(.*)\]$/)[1].split("+"):y;return Qn(y,P||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),K(P),0===g)}),a=i.shift();if(a.multi)throw new v.Schema("Primary key cannot be multi-valued");i.forEach(l=>{if(l.auto)throw new v.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new v.Schema("Index must have a name and cannot be an empty string")}),n[r]=vr(r,a,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?ue(this._cfg.storesSource,e):e;const i={};let a={};return n._versions.forEach(l=>{ue(i,l._cfg.storesSource),a=l._cfg.dbschema={},l._parseStoresSpec(i,a)}),n._dbSchema=a,tr(n,[n._allTables,n,n.Transaction.prototype]),Yn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],W(a),a),n._storeNames=W(a),this}upgrade(e){return this._cfg.contentUpgrade=yt(this._cfg.contentUpgrade||Me,e),this}}function or(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Cn(Ht,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function ar(t){return t&&"function"==typeof t.databases}function ur(t){return ce(function(){return pe.letThrough=!0,t()})}function Rr(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function cr(t){var e=a=>t.next(a),n=i(e),r=i(a=>t.throw(a));function i(a){return l=>{var g=a(l),y=g.value;return g.done?y:y&&"function"==typeof y.then?y.then(n,r):K(y)?Promise.all(y).then(n,r):n(y)}}return i(e)()}function Dr(t,e,n){var r=arguments.length;if(r<2)throw new v.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,rn(i),n]}function _r(t,e,n,r,i){return b.resolve().then(()=>{const a=pe.transless||pe,l=t._createTransaction(e,n,t._dbSchema,r),g={trans:l,transless:a};if(r)l.idbtrans=r.idbtrans;else try{l.create(),t._state.PR1398_maxLoop=3}catch(x){return x.name===ge.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>_r(t,e,n,null,i))):Te(x)}const y=Ne(i);let P;y&&u();const _=b.follow(()=>{if(P=i.call(l,l),P)if(y){var x=s.bind(null,null);P.then(x,x)}else"function"==typeof P.next&&"function"==typeof P.throw&&(P=cr(P))},g);return(P&&"function"==typeof P.then?b.resolve(P).then(x=>l.active?x:Te(new v.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):_.then(()=>P)).then(x=>(r&&l._resolve(),l._completion.then(()=>x))).catch(x=>(l._reject(x),Te(x)))})}function Wn(t,e,n){const r=K(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const Fr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},a=[];function l(_,x,E){const C=$n(_),Z=i[C]=i[C]||[],k=null==_?0:"string"==typeof _?1:_.length,q=x>0,j={...E,isVirtual:q,keyTail:x,keyLength:k,extractKey:Xn(_),unique:!q&&E.unique};return Z.push(j),j.isPrimaryKey||a.push(j),k>1&&l(2===k?_[0]:_.slice(0,k-1),x+1,E),Z.sort((N,ee)=>N.keyTail-ee.keyTail),j}const g=l(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[g];for(const _ of r.indexes)l(_.keyPath,0,_);function y(_){const x=_.query.index;return x.isVirtual?{..._,query:{index:x,range:(E=_.query.range,C=x.keyTail,{type:1===E.type?2:E.type,lower:Wn(E.lower,E.lowerOpen?t.MAX_KEY:t.MIN_KEY,C),lowerOpen:!0,upper:Wn(E.upper,E.upperOpen?t.MIN_KEY:t.MAX_KEY,C),upperOpen:!0})}}:_;var E,C}return{...n,schema:{...r,primaryKey:g,indexes:a,getIndexByKeyPath:function(_){const x=i[$n(_)];return x&&x[0]}},count:_=>n.count(y(_)),query:_=>n.query(y(_)),openCursor(_){const{keyTail:x,isVirtual:E,keyLength:C}=_.query.index;return E?n.openCursor(y(_)).then(Z=>{return Z&&(k=Z,Object.create(k,{continue:{value:function(j){null!=j?k.continue(Wn(j,_.reverse?t.MAX_KEY:t.MIN_KEY,x)):_.unique?k.continue(k.key.slice(0,C).concat(_.reverse?t.MIN_KEY:t.MAX_KEY,x)):k.continue()}},continuePrimaryKey:{value(j,N){k.continuePrimaryKey(Wn(j,t.MAX_KEY,x),N)}},primaryKey:{get:()=>k.primaryKey},key:{get(){const j=k.key;return 1===C?j[0]:j.slice(0,C)}},value:{get:()=>k.value}}));var k}):n.openCursor(_)}}}}}};function lr(t,e,n,r){return n=n||{},r=r||"",W(t).forEach(i=>{if(Le(e,i)){var a=t[i],l=e[i];if("object"==typeof a&&"object"==typeof l&&a&&l){const g=te(a);g!==te(l)?n[r+i]=e[i]:"Object"===g?lr(a,l,n,r+i+"."):a!==l&&(n[r+i]=e[i])}else a!==l&&(n[r+i]=e[i])}else n[r+i]=void 0}),W(e).forEach(i=>{Le(t,i)||(n[r+i]=e[i])}),n}const Lr={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(a){const l=pe.trans,{deleting:g,creating:y,updating:P}=l.table(e).hook;switch(a.type){case"add":if(y.fire===Me)break;return l._promise("readwrite",()=>_(a),!0);case"put":if(y.fire===Me&&P.fire===Me)break;return l._promise("readwrite",()=>_(a),!0);case"delete":if(g.fire===Me)break;return l._promise("readwrite",()=>_(a),!0);case"deleteRange":if(g.fire===Me)break;return l._promise("readwrite",()=>{return x((E=a).trans,E.range,1e4);var E},!0)}return n.mutate(a);function _(E){const C=pe.trans,Z=E.keys||("delete"===(q=E).type?q.keys:q.keys||q.values.map(r.extractKey));var q;if(!Z)throw new Error("Keys missing");return"delete"!==(E="add"===E.type||"put"===E.type?{...E,keys:Z}:{...E}).type&&(E.values=[...E.values]),E.keys&&(E.keys=[...E.keys]),function(k,q,j){return"add"===q.type?Promise.resolve([]):k.getMany({trans:q.trans,keys:j,cache:"immutable"})}(n,E,Z).then(k=>{const q=Z.map((j,N)=>{const ee=k[N],ye={onerror:null,onsuccess:null};if("delete"===E.type)g.fire.call(ye,j,ee,C);else if("add"===E.type||void 0===ee){const le=y.fire.call(ye,j,E.values[N],C);null==j&&null!=le&&(E.keys[N]=j=le,r.outbound||Ve(E.values[N],r.keyPath,j))}else{const le=lr(ee,E.values[N]),ae=P.fire.call(ye,le,j,ee,C);if(ae){const Q=E.values[N];Object.keys(ae).forEach(et=>{Le(Q,et)?Q[et]=ae[et]:Ve(Q,et,ae[et])})}}return ye});return n.mutate(E).then(({failures:j,results:N,numFailures:ee,lastResult:ye})=>{for(let le=0;le<Z.length;++le){const ae=N?N[le]:Z[le],Q=q[le];null==ae?Q.onerror&&Q.onerror(j[le]):Q.onsuccess&&Q.onsuccess("put"===E.type&&k[le]?E.values[le]:ae)}return{failures:j,results:N,numFailures:ee,lastResult:ye}}).catch(j=>(q.forEach(N=>N.onerror&&N.onerror(j)),Promise.reject(j)))})}function x(E,C,Z){return n.query({trans:E,values:!1,query:{index:r,range:C},limit:Z}).then(({result:k})=>_({type:"delete",keys:k,trans:E}).then(q=>q.numFailures>0?Promise.reject(q.failures[0]):k.length<Z?{failures:[],numFailures:0,lastResult:void 0}:x(E,{...C,lower:k[k.length-1],lowerOpen:!0},Z)))}}}}})};function Er(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,a=0;i<e.keys.length&&a<t.length;++i)0===pt(e.keys[i],t[a])&&(r.push(n?vn(e.values[i]):e.values[i]),++a);return r.length===t.length?r:null}catch{return null}}const Ur={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=Er(r.keys,r.trans._cache,"clone"===r.cache);return i?b.resolve(i):n.getMany(r).then(a=>(r.trans._cache={keys:r.keys,values:"clone"===r.cache?vn(a):a},a))},mutate:r=>("add"!==r.type&&(r.trans._cache=null),n.mutate(r))}}})};function fr(t){return!("from"in t)}const xn=function(t,e){if(!this){const n=new xn;return t&&"d"in t&&ue(n,t),n}ue(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Vn(t,e,n){const r=pt(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(fr(t))return ue(t,{from:e,to:n,d:1});const i=t.l,a=t.r;if(pt(n,t.from)<0)return i?Vn(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Ar(t);if(pt(e,t.to)>0)return a?Vn(a,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Ar(t);pt(e,t.from)<0&&(t.from=e,t.l=null,t.d=a?a.d+1:1),pt(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const l=!t.r;i&&!t.l&&zn(t,i),a&&l&&zn(t,a)}function zn(t,e){fr(e)||function n(r,{from:i,to:a,l,r:g}){Vn(r,i,a),l&&n(r,l),g&&n(r,g)}(t,e)}function hr(t){let e=fr(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&pt(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||pt(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Ar(t){var e,n;const r=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(n=t.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const a="r"===i?"l":"r",l={...t},g=t[i];t.from=g.from,t.to=g.to,t[i]=g[i],l[i]=g[a],t[a]=l,l.d=Sr(l)}t.d=Sr(t)}function Sr({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}st(xn.prototype,{add(t){return zn(this,t),this},addKey(t){return Vn(this,t,t),this},addKeys(t){return t.forEach(e=>Vn(this,e,e)),this},[F](){return hr(this)}});const Zr={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new xn(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:a}=i,{primaryKey:l}=a,{extractKey:g,outbound:y}=l,P={...i,mutate:E=>{const C=E.trans,Z=C.mutatedParts||(C.mutatedParts={}),k=ae=>{const Q=`idb://${e}/${r}/${ae}`;return Z[Q]||(Z[Q]=new xn)},q=k(""),j=k(":dels"),{type:N}=E;let[ee,ye]="deleteRange"===E.type?[E.range]:"delete"===E.type?[E.keys]:E.values.length<50?[[],E.values]:[];const le=E.trans._cache;return i.mutate(E).then(ae=>{if(K(ee)){"delete"!==N&&(ee=ae.results),q.addKeys(ee);const Q=Er(ee,le);Q||"add"===N||j.addKeys(ee),(Q||ye)&&(et=k,jt=Q,vt=ye,a.indexes.forEach(function ln(sn){const Rt=et(sn.name||"");function Fn(dn){return null!=dn?sn.extractKey(dn):null}const Ln=dn=>sn.multiEntry&&K(dn)?dn.forEach(jn=>Rt.addKey(jn)):Rt.addKey(dn);(jt||vt).forEach((dn,jn)=>{const Gn=jt&&Fn(jt[jn]),pr=vt&&Fn(vt[jn]);0!==pt(Gn,pr)&&(null!=Gn&&Ln(Gn),null!=pr&&Ln(pr))})}))}else if(ee){const Q={from:ee.lower,to:ee.upper};j.add(Q),q.add(Q)}else q.add(n),j.add(n),a.indexes.forEach(Q=>k(Q.name).add(n));var et,jt,vt;return ae})}},_=({query:{index:E,range:C}})=>{var Z,k;return[E,new xn(null!==(Z=C.lower)&&void 0!==Z?Z:t.MIN_KEY,null!==(k=C.upper)&&void 0!==k?k:t.MAX_KEY)]},x={get:E=>[l,new xn(E.key)],getMany:E=>[l,(new xn).addKeys(E.keys)],count:_,query:_,openCursor:_};return W(x).forEach(E=>{P[E]=function(C){const{subscr:Z}=pe;if(Z){const k=ye=>{const le=`idb://${e}/${r}/${ye}`;return Z[le]||(Z[le]=new xn)},q=k(""),j=k(":dels"),[N,ee]=x[E](C);if(k(N.name||"").add(ee),!N.isPrimaryKey){if("count"!==E){const ye="query"===E&&y&&C.values&&i.query({...C,values:!1});return i[E].apply(this,arguments).then(le=>{if("query"===E){if(y&&C.values)return ye.then(({result:Q})=>(q.addKeys(Q),le));const ae=C.values?le.result.map(g):le.result;C.values?q.addKeys(ae):j.addKeys(ae)}else if("openCursor"===E){const ae=le,Q=C.values;return ae&&Object.create(ae,{key:{get:()=>(j.addKey(ae.primaryKey),ae.key)},primaryKey:{get(){const et=ae.primaryKey;return j.addKey(et),et}},value:{get:()=>(Q&&q.addKey(ae.primaryKey),ae.value)}})}return le})}j.add(n)}}return i[E].apply(this,arguments)}}),P}}}};class Cn{constructor(e,n){this._middlewares={},this.verno=0;const r=Cn.dependencies;this._options=n={addons:Cn.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Me,dbReadyPromise:null,cancelOpen:Me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var l,g;a.dbReadyPromise=new b(g=>{a.dbReadyResolve=g}),a.openCanceller=new b((g,y)=>{a.cancelOpen=y}),this._state=a,this.name=e,this.on=qt(this,"populate","blocked","versionchange","close",{ready:[yt,Me]}),this.on.ready.subscribe=_t(this.on.ready.subscribe,g=>(y,P)=>{Cn.vip(()=>{const _=this._state;if(_.openComplete)_.dbOpenError||b.resolve().then(y),P&&g(y);else if(_.onReadyBeingFired)_.onReadyBeingFired.push(y),P&&g(y);else{g(y);const x=this;P||g(function E(){x.on.ready.unsubscribe(y),x.on.ready.unsubscribe(E)})}})}),this.Collection=(l=this,Ft(Kn.prototype,function(g,y){this.db=l;let P=dt,_=null;if(y)try{P=y()}catch(Z){_=Z}const x=g._ctx,E=x.table,C=E.hook.reading.fire;this._ctx={table:E,index:x.index,isPrimKey:!x.index||E.schema.primKey.keyPath&&x.index===E.schema.primKey.name,range:P,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:x.or,valueMapper:C!==Et?C:null}})),this.Table=(g=this,Ft(xt.prototype,function(y,P,_){this.db=g,this._tx=_,this.name=y,this.schema=P,this.hook=g._allTables[y]?g._allTables[y].hook:qt(null,{creating:[mt,Me],reading:[Ce,Et],updating:[Pt,Me],deleting:[an,Me]})})),this.Transaction=function(g){return Ft(Tr.prototype,function(y,P,_,x,E){this.db=g,this.mode=y,this.storeNames=P,this.schema=_,this.chromeTransactionDurability=x,this.idbtrans=null,this.on=qt(this,"complete","error","abort"),this.parent=E||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new b((C,Z)=>{this._resolve=C,this._reject=Z}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},C=>{var Z=this.active;return this.active=!1,this.on.error.fire(C),this.parent?this.parent._reject(C):Z&&this.idbtrans&&this.idbtrans.abort(),Te(C)})})}(this),this.Version=function(g){return Ft(jr.prototype,function(y){this.db=g,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(g){return Ft(mr.prototype,function(y,P,_){this.db=g,this._ctx={table:y,index:":id"===P?null:P,or:_};const x=g._deps.indexedDB;if(!x)throw new v.MissingAPI;this._cmp=this._ascending=x.cmp.bind(x),this._descending=(E,C)=>x.cmp(C,E),this._max=(E,C)=>x.cmp(E,C)>0?E:C,this._min=(E,C)=>x.cmp(E,C)<0?E:C,this._IDBKeyRange=g._deps.IDBKeyRange})}(this),this.on("versionchange",g=>{g.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",g=>{!g.newVersion||g.newVersion<g.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${g.oldVersion/10}`)}),this._maxKey=Zn(n.IDBKeyRange),this._createTransaction=(g,y,P,_)=>new this.Transaction(g,y,P,this._options.chromeTransactionDurability,_),this._fireOnBlocked=g=>{this.on("blocked").fire(g),Y.filter(y=>y.name===this.name&&y!==this&&!y._state.vcFired).map(y=>y.on("versionchange").fire(g))},this.use(Fr),this.use(Lr),this.use(Zr),this.use(Ur),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(g=>g(this))}version(e){if(isNaN(e)||e<.1)throw new v.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new v.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Cr),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||pe.letThrough||this._vip)?e():new b((n,r)=>{if(this._state.openComplete)return r(new v.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new v.DatabaseClosed);this.open().catch(Me)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const a=this._middlewares[e]||(this._middlewares[e]=[]);return a.push({stack:e,create:n,level:r??10,name:i}),a.sort((l,g)=>l.level-g.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return function Kr(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Te(e.dbOpenError):t);nt&&(e.openCanceller._stackHolder=Zt()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new v.DatabaseClosed("db.open() was cancelled")}let a=e.dbReadyResolve,l=null,g=!1;return b.race([r,(typeof navigator>"u"?b.resolve():Rr()).then(()=>new b((y,P)=>{if(i(),!n)throw new v.MissingAPI;const _=t.name,x=e.autoSchema?n.open(_):n.open(_,Math.round(10*t.verno));if(!x)throw new v.MissingAPI;x.onerror=_n(P),x.onblocked=We(t._fireOnBlocked),x.onupgradeneeded=We(E=>{if(l=x.transaction,e.autoSchema&&!t._options.allowEmptyDB){x.onerror=Un,l.abort(),x.result.close();const Z=n.deleteDatabase(_);Z.onsuccess=Z.onerror=We(()=>{P(new v.NoSuchDatabase(`Database ${_} doesnt exist`))})}else{l.onerror=_n(P);var C=E.oldVersion>Math.pow(2,62)?0:E.oldVersion;g=C<1,t._novip.idbdb=x.result,function Br(t,e,n,r){const i=t._dbSchema,a=t._createTransaction("readwrite",t._storeNames,i);a.create(n),a._completion.catch(r);const l=a._reject.bind(a),g=pe.transless||pe;ce(()=>{pe.trans=a,pe.transless=g,0===e?(W(i).forEach(y=>{nr(n,y,i[y].primKey,i[y].indexes)}),er(t,n),b.follow(()=>t.on.populate.fire(a)).catch(l)):function({_novip:y},P,_,x){const E=[],C=y._versions;let Z=y._dbSchema=ir(0,y.idbdb,x),k=!1;return C.filter(N=>N._cfg.version>=P).forEach(N=>{E.push(()=>{const ee=Z,ye=N._cfg.dbschema;sr(y,ee,x),sr(y,ye,x),Z=y._dbSchema=ye;const le=wr(ee,ye);le.add.forEach(Q=>{nr(x,Q[0],Q[1].primKey,Q[1].indexes)}),le.change.forEach(Q=>{if(Q.recreate)throw new v.Upgrade("Not yet support for changing primary key");{const et=x.objectStore(Q.name);Q.add.forEach(se=>rr(et,se)),Q.change.forEach(se=>{et.deleteIndex(se.name),rr(et,se)}),Q.del.forEach(se=>et.deleteIndex(se))}});const ae=N._cfg.contentUpgrade;if(ae&&N._cfg.version>P){er(y,x),_._memoizedTables={},k=!0;let Q=xe(ye);le.del.forEach(vt=>{Q[vt]=ee[vt]}),tr(y,[y.Transaction.prototype]),Yn(y,[y.Transaction.prototype],W(Q),Q),_.schema=Q;const et=Ne(ae);let se;et&&u();const jt=b.follow(()=>{if(se=ae(_),se&&et){var vt=s.bind(null,null);se.then(vt,vt)}});return se&&"function"==typeof se.then?b.resolve(se):jt.then(()=>se)}}),E.push(ee=>{var ye,le;(!k||!Se)&&(ye=N._cfg.dbschema,[].slice.call((le=ee).db.objectStoreNames).forEach(ae=>null==ye[ae]&&le.db.deleteObjectStore(ae))),tr(y,[y.Transaction.prototype]),Yn(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),_.schema=y._dbSchema})}),function j(){return E.length?b.resolve(E.shift()(_.idbtrans)).then(j):b.resolve()}().then(()=>{var N,ee;ee=x,W(N=Z).forEach(ye=>{ee.db.objectStoreNames.contains(ye)||nr(ee,ye,N[ye].primKey,N[ye].indexes)})})}(t,e,a,n).catch(l)})}(t,C/10,l,P)}},P),x.onsuccess=We(()=>{l=null;const E=t._novip.idbdb=x.result,C=je(E.objectStoreNames);if(C.length>0)try{const k=E.transaction(1===(Z=C).length?Z[0]:Z,"readonly");e.autoSchema?function({_novip:q},j,N){q.verno=j.version/10;const ee=q._dbSchema=ir(0,j,N);q._storeNames=je(j.objectStoreNames,0),Yn(q,[q._allTables],W(ee),ee)}(t,E,k):(sr(t,t._dbSchema,k),function(q,j){const N=wr(ir(0,q.idbdb,j),q._dbSchema);return!(N.add.length||N.change.some(ee=>ee.add.length||ee.change.length))}(t,k)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),er(t,k)}catch{}var Z;Y.push(t),E.onversionchange=We(k=>{e.vcFired=!0,t.on("versionchange").fire(k)}),E.onclose=We(k=>{t.on("close").fire(k)}),g&&function({indexedDB:k,IDBKeyRange:q},j){!ar(k)&&j!==Ht&&or(k,q).put({name:j}).catch(Me)}(t._deps,_),y()},P)}))]).then(()=>(i(),e.onReadyBeingFired=[],b.resolve(ur(()=>t.on.ready.fire(t.vip))).then(function y(){if(e.onReadyBeingFired.length>0){let P=e.onReadyBeingFired.reduce(yt,Me);return e.onReadyBeingFired=[],b.resolve(ur(()=>P(t.vip))).then(y)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(y=>{e.dbOpenError=y;try{l&&l.abort()}catch{}return r===e.openCanceller&&t._close(),Te(y)}).finally(()=>{e.openComplete=!0,a()})}(this)}_close(){const e=this._state,n=Y.indexOf(this);if(n>=0&&Y.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new b(r=>{e.dbReadyResolve=r}),e.openCanceller=new b((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new v.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new b((r,i)=>{const a=()=>{this.close();var l=this._deps.indexedDB.deleteDatabase(this.name);l.onsuccess=We(()=>{(function({indexedDB:g,IDBKeyRange:y},P){!ar(g)&&P!==Ht&&or(g,y).delete(P).catch(Me)})(this._deps,this.name),r()}),l.onerror=_n(i),l.onblocked=this._fireOnBlocked};if(e)throw new v.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(a):a()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return W(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Dr.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=pe.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);const a=-1!==e.indexOf("?");let l,g;e=e.replace("!","").replace("?","");try{if(g=n.map(P=>{var _=P instanceof this.Table?P.name:P;if("string"!=typeof _)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return _}),"r"==e||e===Ot)l=Ot;else{if("rw"!=e&&e!=Qt)throw new v.InvalidArgument("Invalid transaction mode: "+e);l=Qt}if(i){if(i.mode===Ot&&l===Qt){if(!a)throw new v.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&g.forEach(P=>{if(i&&-1===i.storeNames.indexOf(P)){if(!a)throw new v.SubTransaction("Table "+P+" not included in parent transaction.");i=null}}),a&&i&&!i.active&&(i=null)}}catch(P){return i?i._promise(null,(_,x)=>{x(P)}):Te(P)}const y=_r.bind(null,this,l,g,i,r);return i?i._promise(l,y,"lock"):pe.trans?fe(pe.transless,()=>this._whenReady(y)):this._whenReady(y)}table(e){if(!Le(this._allTables,e))throw new v.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const $r=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Vr{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:n,complete:r})}[$r](){return this}}function xr(t,e){return W(e).forEach(n=>{zn(t[n]||(t[n]=new xn),e[n])}),t}let dr;try{dr={indexedDB:O.indexedDB||O.mozIndexedDB||O.webkitIndexedDB||O.msIndexedDB,IDBKeyRange:O.IDBKeyRange||O.webkitIDBKeyRange}}catch{dr={indexedDB:null,IDBKeyRange:null}}const Bn=Cn;function Jn(t){let e=On;try{On=!0,Nn.storagemutated.fire(t)}finally{On=e}}st(Bn,{...Fe,delete:t=>new Bn(t,{addons:[]}).delete(),exists:t=>new Bn(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return ar(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==Ht)):or(e,n).toCollection().primaryKeys()}(Bn.dependencies).then(t)}catch{return Te(new v.MissingAPI)}},defineClass:()=>function(t){ue(this,t)},ignoreTransaction:t=>pe.trans?fe(pe.transless,t):t(),vip:ur,async:function(t){return function(){try{var e=cr(t.apply(this,arguments));return e&&"function"==typeof e.then?e:b.resolve(e)}catch(n){return Te(n)}}},spawn:function(t,e,n){try{var r=cr(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:b.resolve(r)}catch(i){return Te(i)}},currentTransaction:{get:()=>pe.trans||null},waitFor:function(t,e){const n=b.resolve("function"==typeof t?Bn.ignoreTransaction(t):t).timeout(e||6e4);return pe.trans?pe.trans.waitFor(n):n},Promise:b,debug:{get:()=>nt,set:t=>{Kt(t,"dexie"===t?()=>!0:qe)}},derive:B,extend:ue,props:st,override:_t,Events:qt,on:Nn,liveQuery:function Gr(t){let e,n=!1;const r=new Vr(i=>{const a=Ne(t);let l=!1,g={},y={};const P={get closed(){return l},unsubscribe:()=>{l=!0,Nn.storagemutated.unsubscribe(C)}};i.start&&i.start(P);let _=!1,x=!1;function E(){return W(y).some(k=>g[k]&&function Mr(t,e){const n=hr(e);let r=n.next();if(r.done)return!1;let i=r.value;const a=hr(t);let l=a.next(i.from),g=l.value;for(;!r.done&&!l.done;){if(pt(g.from,i.to)<=0&&pt(g.to,i.from)>=0)return!0;pt(i.from,g.from)<0?i=(r=n.next(g.from)).value:g=(l=a.next(i.from)).value}return!1}(g[k],y[k]))}const C=k=>{xr(g,k),E()&&Z()},Z=()=>{if(_||l)return;g={};const k={},q=function(j){a&&u();const N=()=>ce(t,{subscr:j,trans:null}),ee=pe.trans?fe(pe.transless,N):N();return a&&ee.then(s,s),ee}(k);x||(Nn(Mn,C),x=!0),_=!0,Promise.resolve(q).then(j=>{n=!0,e=j,_=!1,l||(E()?Z():(g={},y=k,i.next&&i.next(j)))},j=>{_=!1,n=!1,i.error&&i.error(j),P.unsubscribe()})};return Z(),P});return r.hasValue=()=>n,r.getValue=()=>e,r},extendObservabilitySet:xr,getByKeyPath:Lt,setByKeyPath:Ve,delByKeyPath:function(t,e){"string"==typeof e?Ve(t,e,void 0):"length"in e&&[].map.call(e,function(n){Ve(t,n,void 0)})},shallowClone:xe,deepClone:vn,getObjectDiff:lr,cmp:pt,asap:kt,minKey:Re,addons:[],connections:Y,errnames:ge,dependencies:dr,semVer:"3.2.4",version:"3.2.4".split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Bn.maxKey=Zn(Bn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Nn(Mn,t=>{if(!On){let e;Ee?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Tn,!0,!0,t)):e=new CustomEvent(Tn,{detail:t}),On=!0,dispatchEvent(e),On=!1}}),addEventListener(Tn,({detail:t})=>{On||Jn(t)}));let On=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Tn);"function"==typeof t.unref&&t.unref(),Nn(Mn,e=>{On||t.postMessage(e)}),t.onmessage=e=>{e.data&&Jn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Nn(Mn,e=>{try{On||(typeof localStorage<"u"&&localStorage.setItem(Tn,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Tn,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Tn){const n=JSON.parse(e.newValue);n&&Jn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Tn&&Jn(e.changedParts)})}b.rejectionMapper=function(t,e){if(!t||t instanceof h||t instanceof TypeError||t instanceof SyntaxError||!t.name||!oe[t.name])return t;var n=new oe[t.name](e||t.message,t);return"stack"in t&&z(n,"stack",{get:function(){return this.inner.stack}}),n},Kt(nt,qe)},5861:(De,Pe,V)=>{"use strict";function O(K,ue,ne,de,Le,st,Be){try{var z=K[st](Be),B=z.value}catch($){return void ne($)}z.done?ue(B):Promise.resolve(B).then(de,Le)}function W(K){return function(){var ue=this,ne=arguments;return new Promise(function(de,Le){var st=K.apply(ue,ne);function Be(B){O(st,de,Le,Be,z,"next",B)}function z(B){O(st,de,Le,Be,z,"throw",B)}Be(void 0)})}}V.d(Pe,{Z:()=>W})},4942:(De,Pe,V)=>{"use strict";V.d(Pe,{Z:()=>W});var O=V(7343);function W(K,ue,ne){return(ue=(0,O.Z)(ue))in K?Object.defineProperty(K,ue,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[ue]=ne,K}},5512:(De,Pe,V)=>{"use strict";V.d(Pe,{Z:()=>W});var O=V(1002);function W(K,ue){if("object"!==(0,O.Z)(K)||null===K)return K;var ne=K[Symbol.toPrimitive];if(void 0!==ne){var de=ne.call(K,ue||"default");if("object"!==(0,O.Z)(de))return de;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===ue?String:Number)(K)}},7343:(De,Pe,V)=>{"use strict";V.d(Pe,{Z:()=>K});var O=V(1002),W=V(5512);function K(ue){var ne=(0,W.Z)(ue,"string");return"symbol"===(0,O.Z)(ne)?ne:String(ne)}},1002:(De,Pe,V)=>{"use strict";function O(W){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(K){return typeof K}:function(K){return K&&"function"==typeof Symbol&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(W)}V.d(Pe,{Z:()=>O})}}]);