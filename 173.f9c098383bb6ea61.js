(self.webpackChunkgrade_scope_istic=self.webpackChunkgrade_scope_istic||[]).push([[173],{2384:(Ze,Re,de)=>{"use strict";de.d(Re,{z:()=>Ae});var N=de(5861),ee=de(9505),pe=de(4687);function ae(K,s,l,h){return new(l||(l=Promise))(function(E,A){function ue(B){try{O(h.next(B))}catch(Ie){A(Ie)}}function ce(B){try{O(h.throw(B))}catch(Ie){A(Ie)}}function O(B){B.done?E(B.value):function p(E){return E instanceof l?E:new l(function(A){A(E)})}(B.value).then(ue,ce)}O((h=h.apply(K,s||[])).next())})}function Ee(K,s){var h,p,E,A,l={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return A={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function ue(O){return function(B){return function ce(O){if(h)throw new TypeError("Generator is already executing.");for(;l;)try{if(h=1,p&&(E=2&O[0]?p.return:O[0]?p.throw||((E=p.return)&&E.call(p),0):p.next)&&!(E=E.call(p,O[1])).done)return E;switch(p=0,E&&(O=[2&O[0],E.value]),O[0]){case 0:case 1:E=O;break;case 4:return l.label++,{value:O[1],done:!1};case 5:l.label++,p=O[1],O=[0];continue;case 7:O=l.ops.pop(),l.trys.pop();continue;default:if(!(E=(E=l.trys).length>0&&E[E.length-1])&&(6===O[0]||2===O[0])){l=0;continue}if(3===O[0]&&(!E||O[1]>E[0]&&O[1]<E[3])){l.label=O[1];break}if(6===O[0]&&l.label<E[1]){l.label=E[1],E=O;break}if(E&&l.label<E[2]){l.label=E[2],l.ops.push(O);break}E[2]&&l.ops.pop(),l.trys.pop();continue}O=s.call(K,l)}catch(B){O=[6,B],p=0}finally{h=E=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([O,B])}}}function ft(K){return[K.schema.primKey].concat(K.schema.indexes).map(function(l){return l.src}).join(",")}function Et(K,s){return new Promise(function(l,h){var p=new FileReader;p.onabort=function(E){return h(new Error("file read aborted"))},p.onerror=function(E){return h(E.target.error)},p.onload=function(E){return l(E.target.result)},"binary"===s?p.readAsArrayBuffer(K):p.readAsText(K)})}function St(K,s){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var l=new FileReaderSync;return"binary"===s?l.readAsArrayBuffer(K):l.readAsText(K)}var gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vt(K,s){return K(s={exports:{}},s.exports),s.exports}for(var Pe=vt(function(K,s){K.exports=function(){function l(T){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(T)}function h(T,_,D,M,X,De,He){try{var Be=T[De](He),ge=Be.value}catch(Rt){return void D(Rt)}Be.done?_(ge):Promise.resolve(ge).then(M,X)}function p(T){return function(){var _=this,D=arguments;return new Promise(function(M,X){var De=T.apply(_,D);function He(ge){h(De,M,X,He,Be,"next",ge)}function Be(ge){h(De,M,X,He,Be,"throw",ge)}He(void 0)})}}function E(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function A(T,_){for(var D=0;D<_.length;D++){var M=_[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(T,M.key,M)}}function ce(T,_,D){return _ in T?Object.defineProperty(T,_,{value:D,enumerable:!0,configurable:!0,writable:!0}):T[_]=D,T}function O(T,_){var D=Object.keys(T);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(T);_&&(M=M.filter(function(X){return Object.getOwnPropertyDescriptor(T,X).enumerable})),D.push.apply(D,M)}return D}function B(T){for(var _=1;_<arguments.length;_++){var D=null!=arguments[_]?arguments[_]:{};_%2?O(Object(D),!0).forEach(function(M){ce(T,M,D[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(D)):O(Object(D)).forEach(function(M){Object.defineProperty(T,M,Object.getOwnPropertyDescriptor(D,M))})}return T}function Ie(T,_){return function _e(T){if(Array.isArray(T))return T}(T)||function Ve(T,_){if(Symbol.iterator in Object(T)||"[object Arguments]"===Object.prototype.toString.call(T)){var D=[],M=!0,X=!1,De=void 0;try{for(var Be,He=T[Symbol.iterator]();!(M=(Be=He.next()).done)&&(D.push(Be.value),!_||D.length!==_);M=!0);}catch(ge){X=!0,De=ge}finally{try{!M&&null!=He.return&&He.return()}finally{if(X)throw De}}return D}}(T,_)||function xt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Dt(T){return function Se(T){if(Array.isArray(T)){for(var _=0,D=new Array(T.length);_<T.length;_++)D[_]=T[_];return D}}(T)||function qe(T){if(Symbol.iterator in Object(T)||"[object Arguments]"===Object.prototype.toString.call(T))return Array.from(T)}(T)||function rn(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var te=function T(_){E(this,T),this.p=new Promise(_)};te.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(te.prototype[Symbol.toStringTag]="TypesonPromise"),te.prototype.then=function(T,_){var D=this;return new te(function(M,X){D.p.then(function(De){M(T?T(De):De)}).catch(function(De){return _?_(De):Promise.reject(De)}).then(M,X)})},te.prototype.catch=function(T){return this.then(null,T)},te.resolve=function(T){return new te(function(_){_(T)})},te.reject=function(T){return new te(function(_,D){D(T)})},["all","race"].forEach(function(T){te[T]=function(_){return new te(function(D,M){Promise[T](_.map(function(X){return X&&X.constructor&&"TypesonPromise"===X.constructor.__typeson__type__?X.p:X})).then(D,M)})}});var Ne={}.toString,bt={}.hasOwnProperty,Ot=Object.getPrototypeOf,Kt=bt.toString;function P(T,_){return Fe(T)&&"function"==typeof T.then&&(!_||"function"==typeof T.catch)}function d(T){return Ne.call(T).slice(8,-1)}function U(T,_){if(!T||"object"!==l(T))return!1;var D=Ot(T);if(!D)return null===_;var M=bt.call(D,"constructor")&&D.constructor;return"function"!=typeof M?null===_:_===M||null!==_&&Kt.call(M)===Kt.call(_)||"function"==typeof _&&"string"==typeof M.__typeson__type__&&M.__typeson__type__===_.__typeson__type__}function I(T){return!(!T||"Object"!==d(T))&&(!Ot(T)||U(T,Object))}function Fe(T){return T&&"object"===l(T)}function ht(T){return T.replace(/~/g,"~0").replace(/\./g,"~1")}function rt(T){return T.replace(/~1/g,".").replace(/~0/g,"~")}function pt(T,_){if(""===_)return T;var D=_.indexOf(".");if(D>-1){var M=T[rt(_.slice(0,D))];return void 0===M?void 0:pt(M,_.slice(D+1))}return T[rt(_)]}function We(T,_,D){if(""===_)return D;var M=_.indexOf(".");return M>-1?We(T[rt(_.slice(0,M))],_.slice(M+1),D):(T[rt(_)]=D,T)}var Lt=Object.keys,Ut=Array.isArray,Xt={}.hasOwnProperty,on=["type","replaced","iterateIn","iterateUnsetNumeric"];function F(T,_){if(""===T.keypath)return-1;var D=T.keypath.match(/\./g)||0,M=_.keypath.match(/\./g)||0;return D&&(D=D.length),M&&(M=M.length),D>M?-1:D<M?1:T.keypath<_.keypath?-1:T.keypath>_.keypath}var ze=function(){function T(_){E(this,T),this.options=_,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function ue(T,_,D){return _&&A(T.prototype,_),D&&A(T,D),T}(T,[{key:"stringify",value:function(D,M,X,De){De=B({},this.options,{},De,{stringification:!0});var He=this.encapsulate(D,null,De);return Ut(He)?JSON.stringify(He[0],M,X):He.then(function(Be){return JSON.stringify(Be,M,X)})}},{key:"stringifySync",value:function(D,M,X,De){return this.stringify(D,M,X,B({throwOnBadSyncType:!0},De,{sync:!0}))}},{key:"stringifyAsync",value:function(D,M,X,De){return this.stringify(D,M,X,B({throwOnBadSyncType:!0},De,{sync:!1}))}},{key:"parse",value:function(D,M,X){return X=B({},this.options,{},X,{parse:!0}),this.revive(JSON.parse(D,M),X)}},{key:"parseSync",value:function(D,M,X){return this.parse(D,M,B({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"parseAsync",value:function(D,M,X){return this.parse(D,M,B({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"specialTypeNames",value:function(D,M){var X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X.returnTypeNames=!0,this.encapsulate(D,M,X)}},{key:"rootTypeName",value:function(D,M){var X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X.iterateNone=!0,this.encapsulate(D,M,X)}},{key:"encapsulate",value:function(D,M,X){var He=(X=B({sync:!0},this.options,{},X)).sync,Be=this,ge={},Rt=[],Gt=[],Mt=[],Yt=!("cyclic"in X)||X.cyclic,fn=X.encapsulateObserver,$t=et("",D,Yt,M||{},Mt);function Ue(fe){var c=Object.values(ge);if(X.iterateNone)return c.length?c[0]:T.getJSONType(fe);if(c.length){if(X.returnTypeNames)return Dt(new Set(c));fe&&I(fe)&&!Xt.call(fe,"$types")?fe.$types=ge:fe={$:fe,$types:{$:ge}}}else Fe(fe)&&Xt.call(fe,"$types")&&(fe={$:fe,$types:!0});return!X.returnTypeNames&&fe}function je(fe,c){return it.apply(this,arguments)}function it(){return it=p(pe.mark(function fe(c,o){var u;return pe.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,Promise.all(o.map(function(Y){return Y[1].p}));case 2:return u=v.sent,v.next=5,Promise.all(u.map(function(){var Y=p(pe.mark(function V(he){var H,ve,Te,tt,Ye,ut,Oe,ie,J;return pe.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(H=[],ve=o.splice(0,1),Te=Ie(ve,1),tt=Ie(Te[0],7),ut=tt[4],Oe=tt[5],ie=et(Ye=tt[0],he,tt[2],tt[3],H,!0,tt[6]),J=U(ie,te),!Ye||!J){xe.next=11;break}return xe.next=8,ie.p;case 8:return ut[Oe]=xe.sent,xe.abrupt("return",je(c,H));case 11:return Ye?ut[Oe]=ie:c=J?ie.p:ie,xe.abrupt("return",je(c,H));case 13:case"end":return xe.stop()}},V)}));return function(V){return Y.apply(this,arguments)}}()));case 5:return v.abrupt("return",c);case 6:case"end":return v.stop()}},fe)})),it.apply(this,arguments)}function Ge(fe,c,o){Object.assign(fe,c);var u=on.map(function(m){var v=fe[m];return delete fe[m],v});o(),on.forEach(function(m,v){fe[m]=u[v]})}function et(fe,c,o,u,m,v,Y){var V,he={},H=l(c),ve=fn?function(J){var me=Y||u.type||T.getJSONType(c);fn(Object.assign(J||he,{keypath:fe,value:c,cyclic:o,stateObj:u,promisesData:m,resolvingTypesonPromise:v,awaitingTypesonPromise:U(c,te)},{type:me}))}:null;if(["string","boolean","number","undefined"].includes(H))return void 0===c||"number"===H&&(isNaN(c)||c===-1/0||c===1/0)?(V=u.replaced?c:yt(fe,c,u,m,!1,v,ve))!==c&&(he={replaced:V}):V=c,ve&&ve(),V;if(null===c)return ve&&ve(),c;if(o&&!u.iterateIn&&!u.iterateUnsetNumeric&&c&&"object"===l(c)){var Te=Rt.indexOf(c);if(!(Te<0))return ge[fe]="#",ve&&ve({cyclicKeypath:Gt[Te]}),"#"+Gt[Te];!0===o&&(Rt.push(c),Gt.push(fe))}var be,ke=I(c),tt=Ut(c),Ye=(ke||tt)&&(!Be.plainObjectReplacers.length||u.replaced)||u.iterateIn?c:yt(fe,c,u,m,ke||tt,null,ve);if(Ye!==c?(V=Ye,he={replaced:Ye}):""===fe&&U(c,te)?(m.push([fe,c,o,u,void 0,void 0,u.type]),V=c):tt&&"object"!==u.iterateIn||"array"===u.iterateIn?(be=new Array(c.length),he={clone:be}):(["function","symbol"].includes(l(c))||"toJSON"in c||U(c,te)||U(c,Promise)||U(c,ArrayBuffer))&&!ke&&"object"!==u.iterateIn?V=c:(be={},u.addLength&&(be.length=c.length),he={clone:be}),ve&&ve(),X.iterateNone)return be||V;if(!be)return V;if(u.iterateIn){var ot=function(me){var ye={ownKeys:Xt.call(c,me)};Ge(u,ye,function(){var xe=fe+(fe?".":"")+ht(me),Ke=et(xe,c[me],!!o,u,m,v);U(Ke,te)?m.push([xe,Ke,!!o,u,be,me,u.type]):void 0!==Ke&&(be[me]=Ke)})};for(var ut in c)ot(ut);ve&&ve({endIterateIn:!0,end:!0})}else Lt(c).forEach(function(J){var me=fe+(fe?".":"")+ht(J);Ge(u,{ownKeys:!0},function(){var xe=et(me,c[J],!!o,u,m,v);U(xe,te)?m.push([me,xe,!!o,u,be,J,u.type]):void 0!==xe&&(be[J]=xe)})}),ve&&ve({endIterateOwn:!0,end:!0});if(u.iterateUnsetNumeric){for(var Oe=c.length,Ct=function(me){if(!(me in c)){var ye=fe+(fe?".":"")+me;Ge(u,{ownKeys:!1},function(){var Ke=et(ye,void 0,!!o,u,m,v);U(Ke,te)?m.push([ye,Ke,!!o,u,be,me,u.type]):void 0!==Ke&&(be[me]=Ke)})}},ie=0;ie<Oe;ie++)Ct(ie);ve&&ve({endIterateUnsetNumeric:!0,end:!0})}return be}function yt(fe,c,o,u,m,v,Y){for(var V=m?Be.plainObjectReplacers:Be.nonplainObjectReplacers,he=V.length;he--;){var H=V[he];if(H.test(c,o)){var ve=H.type;if(Be.revivers[ve]){var Te=ge[fe];ge[fe]=Te?[ve].concat(Te):ve}return Object.assign(o,{type:ve,replaced:!0}),!He&&H.replaceAsync||H.replace?(Y&&Y({replacing:!0}),et(fe,H[He||!H.replaceAsync?"replace":"replaceAsync"](c,o),Yt&&"readonly",o,u,v,ve)):(Y&&Y({typeDetected:!0}),et(fe,c,Yt&&"readonly",o,u,v,ve))}}return c}return Mt.length?He&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(je($t,Mt)).then(Ue):!He&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():X.stringification&&He?[Ue($t)]:He?Ue($t):Promise.resolve(Ue($t))}},{key:"encapsulateSync",value:function(D,M,X){return this.encapsulate(D,M,B({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"encapsulateAsync",value:function(D,M,X){return this.encapsulate(D,M,B({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"revive",value:function(D,M){var X=D&&D.$types;if(!X)return D;if(!0===X)return D.$;var He=(M=B({sync:!0},this.options,{},M)).sync,Be=[],ge={},Rt=!0;X.$&&I(X.$)&&(D=D.$,X=X.$,Rt=!1);var Gt=this;function Mt(it,Ge){var fe=Ie(Gt.revivers[it]||[],1)[0];if(!fe)throw new Error("Unregistered type: "+it);return He&&!("revive"in fe)?Ge:fe[He&&fe.revive?"revive":!He&&fe.reviveAsync?"reviveAsync":"revive"](Ge,ge)}var Jt=[];function $t(it){return U(it,wt)?void 0:it}var je,Ue=function Yt(){var it=[];if(Object.entries(X).forEach(function(Ge){var et=Ie(Ge,2),yt=et[0],fe=et[1];"#"!==fe&&[].concat(fe).forEach(function(c){Ie(Gt.revivers[c]||[null,{}],2)[1].plain&&(it.push({keypath:yt,type:c}),delete X[yt])})}),it.length)return it.sort(F).reduce(function Ge(et,yt){var fe=yt.keypath,c=yt.type;if(P(et))return et.then(function(m){return Ge(m,{keypath:fe,type:c})});var o=pt(D,fe);if(U(o=Mt(c,o),te))return o.then(function(m){var v=We(D,fe,m);v===m&&(D=v)});var u=We(D,fe,o);u===o&&(D=u)},void 0)}();return U(Ue,te)?je=Ue.then(function(){return D}):(je=function fn(it,Ge,et,yt,fe){if(!Rt||"$types"!==it){var c=X[it],o=Ut(Ge);if(o||I(Ge)){var u=o?new Array(Ge.length):{};for(Lt(Ge).forEach(function(Te){var ke=fn(it+(it?".":"")+ht(Te),Ge[Te],et||u,u,Te),tt=function(be){return U(be,wt)?u[Te]=void 0:void 0!==be&&(u[Te]=be),be};U(ke,te)?Jt.push(ke.then(function(Ye){return tt(Ye)})):tt(ke)}),Ge=u;Be.length;){var m=Ie(Be[0],4),V=m[2],he=m[3],H=pt(m[0],m[1]);if(void 0===H)break;V[he]=H,Be.splice(0,1)}}if(!c)return Ge;if("#"===c){var ve=pt(et,Ge.slice(1));return void 0===ve&&Be.push([et,Ge.slice(1),yt,fe]),ve}return[].concat(c).reduce(function Te(ke,tt){return U(ke,te)?ke.then(function(Ye){return Te(Ye,tt)}):Mt(tt,ke)},Ge)}}("",D,null),Jt.length&&(je=te.resolve(je).then(function(it){return te.all([it].concat(Jt))}).then(function(it){return Ie(it,1)[0]}))),P(je)?He&&M.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():U(je,te)?je.p.then($t):je:!He&&M.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():He?$t(je):Promise.resolve($t(je))}},{key:"reviveSync",value:function(D,M){return this.revive(D,B({throwOnBadSyncType:!0},M,{sync:!0}))}},{key:"reviveAsync",value:function(D,M){return this.revive(D,B({throwOnBadSyncType:!0},M,{sync:!1}))}},{key:"register",value:function(D,M){return M=M||{},[].concat(D).forEach(function X(De){var He=this;if(Ut(De))return De.map(function(Be){return X.call(He,Be)});De&&Lt(De).forEach(function(Be){if("#"===Be)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(T.JSON_TYPES.includes(Be))throw new TypeError("Plain JSON object types are reserved as type names");var ge=De[Be],Rt=ge&&ge.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Gt=Rt.filter(function(et){return et.type===Be});if(Gt.length&&(Rt.splice(Rt.indexOf(Gt[0]),1),delete this.revivers[Be],delete this.types[Be]),"function"==typeof ge){var Mt=ge;ge={test:function(yt){return yt&&yt.constructor===Mt},replace:function(yt){return B({},yt)},revive:function(yt){return Object.assign(Object.create(Mt.prototype),yt)}}}else if(Ut(ge)){var Jt=Ie(ge,3);ge={test:Jt[0],replace:Jt[1],revive:Jt[2]}}if(ge&&ge.test){var je={type:Be,test:ge.test.bind(ge)};ge.replace&&(je.replace=ge.replace.bind(ge)),ge.replaceAsync&&(je.replaceAsync=ge.replaceAsync.bind(ge));var it="number"==typeof M.fallback?M.fallback:M.fallback?0:1/0;if(ge.testPlainObjects?this.plainObjectReplacers.splice(it,0,je):this.nonplainObjectReplacers.splice(it,0,je),ge.revive||ge.reviveAsync){var Ge={};ge.revive&&(Ge.revive=ge.revive.bind(ge)),ge.reviveAsync&&(Ge.reviveAsync=ge.reviveAsync.bind(ge)),this.revivers[Be]=[Ge,{plain:ge.testPlainObjects}]}this.types[Be]=ge}},this)},this),this}}]),T}(),wt=function T(){E(this,T)};return wt.__typeson__type__="TypesonUndefined",ze.Undefined=wt,ze.Promise=te,ze.isThenable=P,ze.toStringTag=d,ze.hasConstructorOf=U,ze.isObject=Fe,ze.isPlainObject=I,ze.isUserObject=function Je(T){if(!T||"Object"!==d(T))return!1;var _=Ot(T);return!_||U(T,Object)||Je(_)},ze.escapeKeyPathComponent=ht,ze.unescapeKeyPathComponent=rt,ze.getByKeyPath=pt,ze.getJSONType=function kt(T){return null===T?"null":Array.isArray(T)?"array":l(T)},ze.JSON_TYPES=["null","boolean","number","string","array","object"],ze}()}),zt=vt(function(K,s){K.exports=function(){function l(c){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(c)}function p(c,o){for(var u=0;u<o.length;u++){var m=o[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}function E(c,o,u){return o in c?Object.defineProperty(c,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[o]=u,c}function A(c,o){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(c);o&&(m=m.filter(function(v){return Object.getOwnPropertyDescriptor(c,v).enumerable})),u.push.apply(u,m)}return u}function ue(c){return function(u){if(Array.isArray(u))return ce(u)}(c)||function(u){if(typeof Symbol<"u"&&Symbol.iterator in Object(u))return Array.from(u)}(c)||function(u,m){if(u){if("string"==typeof u)return ce(u,m);var v=Object.prototype.toString.call(u).slice(8,-1);if("Object"===v&&u.constructor&&(v=u.constructor.name),"Map"===v||"Set"===v)return Array.from(u);if("Arguments"===v||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return ce(u,m)}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(c,o){(null==o||o>c.length)&&(o=c.length);for(var u=0,m=new Array(o);u<o;u++)m[u]=c[u];return m}function O(c){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}function B(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")}function Ie(c,o){for(var u=0;u<o.length;u++){var m=o[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}function Dt(c,o,u){return o in c?Object.defineProperty(c,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[o]=u,c}function Se(c,o){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(c);o&&(m=m.filter(function(v){return Object.getOwnPropertyDescriptor(c,v).enumerable})),u.push.apply(u,m)}return u}function _e(c){for(var o=1;o<arguments.length;o++){var u=null!=arguments[o]?arguments[o]:{};o%2?Se(Object(u),!0).forEach(function(m){Dt(c,m,u[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):Se(Object(u)).forEach(function(m){Object.defineProperty(c,m,Object.getOwnPropertyDescriptor(u,m))})}return c}function qe(c,o){return function(m){if(Array.isArray(m))return m}(c)||function(m,v){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(m)){var Y=[],V=!0,he=!1,H=void 0;try{for(var ve,Te=m[Symbol.iterator]();!(V=(ve=Te.next()).done)&&(Y.push(ve.value),!v||Y.length!==v);V=!0);}catch(ke){he=!0,H=ke}finally{try{V||null==Te.return||Te.return()}finally{if(he)throw H}}return Y}}(c,o)||rn(c,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(c,o){if(c){if("string"==typeof c)return xt(c,o);var u=Object.prototype.toString.call(c).slice(8,-1);return"Object"===u&&c.constructor&&(u=c.constructor.name),"Map"===u||"Set"===u?Array.from(c):"Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?xt(c,o):void 0}}function xt(c,o){(null==o||o>c.length)&&(o=c.length);for(var u=0,m=new Array(o);u<o;u++)m[u]=c[u];return m}var te=function c(o){B(this,c),this.p=new Promise(o)};te.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(te.prototype[Symbol.toStringTag]="TypesonPromise"),te.prototype.then=function(c,o){var u=this;return new te(function(m,v){u.p.then(function(Y){m(c?c(Y):Y)}).catch(function(Y){return o?o(Y):Promise.reject(Y)}).then(m,v)})},te.prototype.catch=function(c){return this.then(null,c)},te.resolve=function(c){return new te(function(o){o(c)})},te.reject=function(c){return new te(function(o,u){u(c)})},["all","race"].forEach(function(c){te[c]=function(o){return new te(function(u,m){Promise[c](o.map(function(v){return v&&v.constructor&&"TypesonPromise"===v.constructor.__typeson__type__?v.p:v})).then(u,m)})}});var lt={}.toString,Ne={}.hasOwnProperty,bt=Object.getPrototypeOf,Ot=Ne.toString;function Kt(c,o){return I(c)&&"function"==typeof c.then&&(!o||"function"==typeof c.catch)}function P(c){return lt.call(c).slice(8,-1)}function d(c,o){if(!c||"object"!==O(c))return!1;var u=bt(c);if(!u)return null===o;var m=Ne.call(u,"constructor")&&u.constructor;return"function"!=typeof m?null===o:o===m||null!==o&&Ot.call(m)===Ot.call(o)||"function"==typeof o&&"string"==typeof m.__typeson__type__&&m.__typeson__type__===o.__typeson__type__}function U(c){return!(!c||"Object"!==P(c))&&(!bt(c)||d(c,Object))}function I(c){return c&&"object"===O(c)}function Je(c){return c.replace(/~/g,"~0").replace(/\./g,"~1")}function Fe(c){return c.replace(/~1/g,".").replace(/~0/g,"~")}function ht(c,o){if(""===o)return c;var u=o.indexOf(".");if(u>-1){var m=c[Fe(o.slice(0,u))];return void 0===m?void 0:ht(m,o.slice(u+1))}return c[Fe(o)]}function rt(c,o,u){if(""===o)return u;var m=o.indexOf(".");return m>-1?rt(c[Fe(o.slice(0,m))],o.slice(m+1),u):(c[Fe(o)]=u,c)}function pt(c,o,u){return u?o?o(c):c:(c&&c.then||(c=Promise.resolve(c)),o?c.then(o):c)}var We=Object.keys,kt=Array.isArray,Lt={}.hasOwnProperty,Ut=["type","replaced","iterateIn","iterateUnsetNumeric"];function Xt(c){return function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];try{return Promise.resolve(c.apply(this,o))}catch(m){return Promise.reject(m)}}}function on(c,o){if(""===c.keypath)return-1;var u=c.keypath.match(/\./g)||0,m=o.keypath.match(/\./g)||0;return u&&(u=u.length),m&&(m=m.length),u>m?-1:u<m?1:c.keypath<o.keypath?-1:c.keypath>o.keypath}var F=function(){function c(o){B(this,c),this.options=o,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return u=c,m=[{key:"stringify",value:function(u,m,v,Y){Y=_e(_e(_e({},this.options),Y),{},{stringification:!0});var V=this.encapsulate(u,null,Y);return kt(V)?JSON.stringify(V[0],m,v):V.then(function(he){return JSON.stringify(he,m,v)})}},{key:"stringifySync",value:function(u,m,v,Y){return this.stringify(u,m,v,_e(_e({throwOnBadSyncType:!0},Y),{},{sync:!0}))}},{key:"stringifyAsync",value:function(u,m,v,Y){return this.stringify(u,m,v,_e(_e({throwOnBadSyncType:!0},Y),{},{sync:!1}))}},{key:"parse",value:function(u,m,v){return v=_e(_e(_e({},this.options),v),{},{parse:!0}),this.revive(JSON.parse(u,m),v)}},{key:"parseSync",value:function(u,m,v){return this.parse(u,m,_e(_e({throwOnBadSyncType:!0},v),{},{sync:!0}))}},{key:"parseAsync",value:function(u,m,v){return this.parse(u,m,_e(_e({throwOnBadSyncType:!0},v),{},{sync:!1}))}},{key:"specialTypeNames",value:function(u,m){var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return v.returnTypeNames=!0,this.encapsulate(u,m,v)}},{key:"rootTypeName",value:function(u,m){var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return v.iterateNone=!0,this.encapsulate(u,m,v)}},{key:"encapsulate",value:function(u,m,v){var Y=Xt(function(ie,J){return pt(Promise.all(J.map(function(me){return me[1].p})),function(me){return pt(Promise.all(me.map(Xt(function(ye){var xn,mn,xe=!1,Ke=[],en=qe(J.splice(0,1),1),mt=qe(en[0],7),Zt=mt[0],sn=mt[4],st=mt[5],Bt=Oe(Zt,ye,mt[2],mt[3],Ke,!0,mt[6]),Wt=d(Bt,te);return xn=function(qt){return xe?qt:(Zt?sn[st]=Bt:ie=Wt?Bt.p:Bt,Y(ie,Ke))},(mn=function(){if(Zt&&Wt)return pt(Bt.p,function(qt){return sn[st]=qt,xe=!0,Y(ie,Ke)})}())&&mn.then?mn.then(xn):xn(mn)}))),function(){return ie})})}),V=(v=_e(_e({sync:!0},this.options),v)).sync,he=this,H={},ve=[],Te=[],ke=[],tt=!("cyclic"in v)||v.cyclic,Ye=v.encapsulateObserver,be=Oe("",u,tt,m||{},ke);function ot(ie){var J=Object.values(H);if(v.iterateNone)return J.length?J[0]:c.getJSONType(ie);if(J.length){if(v.returnTypeNames)return function Ve(c){return function(u){if(Array.isArray(u))return xt(u)}(c)||function(u){if(typeof Symbol<"u"&&Symbol.iterator in Object(u))return Array.from(u)}(c)||rn(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(J));ie&&U(ie)&&!Lt.call(ie,"$types")?ie.$types=H:ie={$:ie,$types:{$:H}}}else I(ie)&&Lt.call(ie,"$types")&&(ie={$:ie,$types:!0});return!v.returnTypeNames&&ie}function ut(ie,J,me){Object.assign(ie,J);var ye=Ut.map(function(xe){var Ke=ie[xe];return delete ie[xe],Ke});me(),Ut.forEach(function(xe,Ke){ie[xe]=ye[Ke]})}function Oe(ie,J,me,ye,xe,Ke,en){var mt,Zt={},tn=O(J),Me=Ye?function(hn){var Vt=en||ye.type||c.getJSONType(J);Ye(Object.assign(hn||Zt,{keypath:ie,value:J,cyclic:me,stateObj:ye,promisesData:xe,resolvingTypesonPromise:Ke,awaitingTypesonPromise:d(J,te)},{type:Vt}))}:null;if(["string","boolean","number","undefined"].includes(tn))return void 0===J||Number.isNaN(J)||J===Number.NEGATIVE_INFINITY||J===Number.POSITIVE_INFINITY?(mt=ye.replaced?J:Ct(ie,J,ye,xe,!1,Ke,Me))!==J&&(Zt={replaced:mt}):mt=J,Me&&Me(),mt;if(null===J)return Me&&Me(),J;if(me&&!ye.iterateIn&&!ye.iterateUnsetNumeric&&J&&"object"===O(J)){var sn=ve.indexOf(J);if(!(sn<0))return H[ie]="#",Me&&Me({cyclicKeypath:Te[sn]}),"#"+Te[sn];!0===me&&(ve.push(J),Te.push(ie))}var st,an=U(J),Bt=kt(J),Wt=(an||Bt)&&(!he.plainObjectReplacers.length||ye.replaced)||ye.iterateIn?J:Ct(ie,J,ye,xe,an||Bt,null,Me);if(Wt!==J?(mt=Wt,Zt={replaced:Wt}):""===ie&&d(J,te)?(xe.push([ie,J,me,ye,void 0,void 0,ye.type]),mt=J):Bt&&"object"!==ye.iterateIn||"array"===ye.iterateIn?(st=new Array(J.length),Zt={clone:st}):(["function","symbol"].includes(O(J))||"toJSON"in J||d(J,te)||d(J,Promise)||d(J,ArrayBuffer))&&!an&&"object"!==ye.iterateIn?mt=J:(st={},ye.addLength&&(st.length=J.length),Zt={clone:st}),Me&&Me(),v.iterateNone)return st||mt;if(!st)return mt;if(ye.iterateIn){var qt=function(Vt){var _t={ownKeys:Lt.call(J,Vt)};ut(ye,_t,function(){var gn=ie+(ie?".":"")+Je(Vt),In=Oe(gn,J[Vt],!!me,ye,xe,Ke);d(In,te)?xe.push([gn,In,!!me,ye,st,Vt,ye.type]):void 0!==In&&(st[Vt]=In)})};for(var Tn in J)qt(Tn);Me&&Me({endIterateIn:!0,end:!0})}else We(J).forEach(function(hn){var Vt=ie+(ie?".":"")+Je(hn);ut(ye,{ownKeys:!0},function(){var _t=Oe(Vt,J[hn],!!me,ye,xe,Ke);d(_t,te)?xe.push([Vt,_t,!!me,ye,st,hn,ye.type]):void 0!==_t&&(st[hn]=_t)})}),Me&&Me({endIterateOwn:!0,end:!0});if(ye.iterateUnsetNumeric){for(var xn=J.length,mn=function(Vt){if(!(Vt in J)){var _t=ie+(ie?".":"")+Vt;ut(ye,{ownKeys:!1},function(){var gn=Oe(_t,void 0,!!me,ye,xe,Ke);d(gn,te)?xe.push([_t,gn,!!me,ye,st,Vt,ye.type]):void 0!==gn&&(st[Vt]=gn)})}},Kn=0;Kn<xn;Kn++)mn(Kn);Me&&Me({endIterateUnsetNumeric:!0,end:!0})}return st}function Ct(ie,J,me,ye,xe,Ke,en){for(var mt=xe?he.plainObjectReplacers:he.nonplainObjectReplacers,Zt=mt.length;Zt--;){var tn=mt[Zt];if(tn.test(J,me)){var Me=tn.type;if(he.revivers[Me]){var sn=H[ie];H[ie]=sn?[Me].concat(sn):Me}return Object.assign(me,{type:Me,replaced:!0}),!V&&tn.replaceAsync||tn.replace?(en&&en({replacing:!0}),Oe(ie,tn[V||!tn.replaceAsync?"replace":"replaceAsync"](J,me),tt&&"readonly",me,ye,Ke,Me)):(en&&en({typeDetected:!0}),Oe(ie,J,tt&&"readonly",me,ye,Ke,Me))}}return J}return ke.length?V&&v.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Y(be,ke)).then(ot):!V&&v.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():v.stringification&&V?[ot(be)]:V?ot(be):Promise.resolve(ot(be))}},{key:"encapsulateSync",value:function(u,m,v){return this.encapsulate(u,m,_e(_e({throwOnBadSyncType:!0},v),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(u,m,v){return this.encapsulate(u,m,_e(_e({throwOnBadSyncType:!0},v),{},{sync:!1}))}},{key:"revive",value:function(u,m){var v=u&&u.$types;if(!v)return u;if(!0===v)return u.$;var Y=(m=_e(_e({sync:!0},this.options),m)).sync,V=[],he={},H=!0;v.$&&U(v.$)&&(u=u.$,v=v.$,H=!1);var ve=this;function Te(ot,ut){var Oe=qe(ve.revivers[ot]||[],1)[0];if(!Oe)throw new Error("Unregistered type: "+ot);return Y&&!("revive"in Oe)?ut:Oe[Y&&Oe.revive?"revive":!Y&&Oe.reviveAsync?"reviveAsync":"revive"](ut,he)}var ke=[];function tt(ot){return d(ot,ze)?void 0:ot}var Ye,be=function(){var ut=[];if(Object.entries(v).forEach(function(Oe){var Ct=qe(Oe,2),ie=Ct[0],J=Ct[1];"#"!==J&&[].concat(J).forEach(function(me){qe(ve.revivers[me]||[null,{}],2)[1].plain&&(ut.push({keypath:ie,type:me}),delete v[ie])})}),ut.length)return ut.sort(on).reduce(function Oe(Ct,ie){var J=ie.keypath,me=ie.type;if(Kt(Ct))return Ct.then(function(Ke){return Oe(Ke,{keypath:J,type:me})});var ye=ht(u,J);if(d(ye=Te(me,ye),te))return ye.then(function(Ke){var en=rt(u,J,Ke);en===Ke&&(u=en)});var xe=rt(u,J,ye);xe===ye&&(u=xe)},void 0)}();return d(be,te)?Ye=be.then(function(){return u}):(Ye=function ot(ut,Oe,Ct,ie,J){if(!H||"$types"!==ut){var me=v[ut],ye=kt(Oe);if(ye||U(Oe)){var xe=ye?new Array(Oe.length):{};for(We(Oe).forEach(function(st){var an=ot(ut+(ut?".":"")+Je(st),Oe[st],Ct||xe,xe,st),Bt=function(qt){return d(qt,ze)?xe[st]=void 0:void 0!==qt&&(xe[st]=qt),qt};d(an,te)?ke.push(an.then(function(Wt){return Bt(Wt)})):Bt(an)}),Oe=xe;V.length;){var Ke=qe(V[0],4),Zt=Ke[2],tn=Ke[3],Me=ht(Ke[0],Ke[1]);if(void 0===Me)break;Zt[tn]=Me,V.splice(0,1)}}if(!me)return Oe;if("#"===me){var sn=ht(Ct,Oe.slice(1));return void 0===sn&&V.push([Ct,Oe.slice(1),ie,J]),sn}return[].concat(me).reduce(function st(an,Bt){return d(an,te)?an.then(function(Wt){return st(Wt,Bt)}):Te(Bt,an)},Oe)}}("",u,null),ke.length&&(Ye=te.resolve(Ye).then(function(ot){return te.all([ot].concat(ke))}).then(function(ot){return qe(ot,1)[0]}))),Kt(Ye)?Y&&m.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():d(Ye,te)?Ye.p.then(tt):Ye:!Y&&m.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Y?tt(Ye):Promise.resolve(tt(Ye))}},{key:"reviveSync",value:function(u,m){return this.revive(u,_e(_e({throwOnBadSyncType:!0},m),{},{sync:!0}))}},{key:"reviveAsync",value:function(u,m){return this.revive(u,_e(_e({throwOnBadSyncType:!0},m),{},{sync:!1}))}},{key:"register",value:function(u,m){return m=m||{},[].concat(u).forEach(function v(Y){var V=this;if(kt(Y))return Y.map(function(he){return v.call(V,he)});Y&&We(Y).forEach(function(he){if("#"===he)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(c.JSON_TYPES.includes(he))throw new TypeError("Plain JSON object types are reserved as type names");var H=Y[he],ve=H&&H.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Te=ve.filter(function(ut){return ut.type===he});if(Te.length&&(ve.splice(ve.indexOf(Te[0]),1),delete this.revivers[he],delete this.types[he]),"function"==typeof H){var ke=H;H={test:function(Oe){return Oe&&Oe.constructor===ke},replace:function(Oe){return _e({},Oe)},revive:function(Oe){return Object.assign(Object.create(ke.prototype),Oe)}}}else if(kt(H)){var tt=qe(H,3);H={test:tt[0],replace:tt[1],revive:tt[2]}}if(H&&H.test){var Ye={type:he,test:H.test.bind(H)};H.replace&&(Ye.replace=H.replace.bind(H)),H.replaceAsync&&(Ye.replaceAsync=H.replaceAsync.bind(H));var be="number"==typeof m.fallback?m.fallback:m.fallback?0:Number.POSITIVE_INFINITY;if(H.testPlainObjects?this.plainObjectReplacers.splice(be,0,Ye):this.nonplainObjectReplacers.splice(be,0,Ye),H.revive||H.reviveAsync){var ot={};H.revive&&(ot.revive=H.revive.bind(H)),H.reviveAsync&&(ot.reviveAsync=H.reviveAsync.bind(H)),this.revivers[he]=[ot,{plain:H.testPlainObjects}]}this.types[he]=H}},this)},this),this}}],m&&Ie(u.prototype,m),c;var u,m}(),ze=function c(){B(this,c)};ze.__typeson__type__="TypesonUndefined",F.Undefined=ze,F.Promise=te,F.isThenable=Kt,F.toStringTag=P,F.hasConstructorOf=d,F.isObject=I,F.isPlainObject=U,F.isUserObject=function c(o){if(!o||"Object"!==P(o))return!1;var u=bt(o);return!u||d(o,Object)||c(u)},F.escapeKeyPathComponent=Je,F.unescapeKeyPathComponent=Fe,F.getByKeyPath=ht,F.getJSONType=function(o){return null===o?"null":Array.isArray(o)?"array":O(o)},F.JSON_TYPES=["null","boolean","number","string","array","object"];for(var wt={userObject:{test:function(o,u){return F.isUserObject(o)},replace:function(o){return function(m){for(var v=1;v<arguments.length;v++){var Y=null!=arguments[v]?arguments[v]:{};v%2?A(Object(Y),!0).forEach(function(V){E(m,V,Y[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(Y)):A(Object(Y)).forEach(function(V){Object.defineProperty(m,V,Object.getOwnPropertyDescriptor(Y,V))})}return m}({},o)},revive:function(o){return o}}},T=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(o,u){return!!Array.isArray(o)&&(Object.keys(o).some(function(m){return String(Number.parseInt(m))!==m})&&(u.iterateIn="object",u.addLength=!0),!0)},replace:function(o,u){return u.iterateUnsetNumeric=!0,o},revive:function(o){if(Array.isArray(o))return o;var u=[];return Object.keys(o).forEach(function(m){u[m]=o[m]}),u}}},{sparseUndefined:{test:function(o,u){return void 0===o&&!1===u.ownKeys},replace:function(o){return 0},revive:function(o){}}}],_={undef:{test:function(o,u){return void 0===o&&(u.ownKeys||!("ownKeys"in u))},replace:function(o){return 0},revive:function(o){return new F.Undefined}}},D={StringObject:{test:function(o){return"String"===F.toStringTag(o)&&"object"===l(o)},replace:function(o){return String(o)},revive:function(o){return new String(o)}},BooleanObject:{test:function(o){return"Boolean"===F.toStringTag(o)&&"object"===l(o)},replace:function(o){return!!o},revive:function(o){return new Boolean(o)}},NumberObject:{test:function(o){return"Number"===F.toStringTag(o)&&"object"===l(o)},replace:function(o){return Number(o)},revive:function(o){return new Number(o)}}},M=[{nan:{test:function(o){return Number.isNaN(o)},replace:function(o){return"NaN"},revive:function(o){return Number.NaN}}},{infinity:{test:function(o){return o===Number.POSITIVE_INFINITY},replace:function(o){return"Infinity"},revive:function(o){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(o){return o===Number.NEGATIVE_INFINITY},replace:function(o){return"-Infinity"},revive:function(o){return Number.NEGATIVE_INFINITY}}}],X={date:{test:function(o){return"Date"===F.toStringTag(o)},replace:function(o){var u=o.getTime();return Number.isNaN(u)?"NaN":u},revive:function(o){return"NaN"===o?new Date(Number.NaN):new Date(o)}}},De={regexp:{test:function(o){return"RegExp"===F.toStringTag(o)},replace:function(o){return{source:o.source,flags:(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":"")}},revive:function(o){return new RegExp(o.source,o.flags)}}},He={map:{test:function(o){return"Map"===F.toStringTag(o)},replace:function(o){return ue(o.entries())},revive:function(o){return new Map(o)}}},Be={set:{test:function(o){return"Set"===F.toStringTag(o)},replace:function(o){return ue(o.values())},revive:function(o){return new Set(o)}}},ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rt=new Uint8Array(256),Gt=0;Gt<64;Gt++)Rt[ge.charCodeAt(Gt)]=Gt;var Mt=function(o,u,m){null==m&&(m=o.byteLength);for(var v=new Uint8Array(o,u||0,m),Y=v.length,V="",he=0;he<Y;he+=3)V+=ge[v[he]>>2],V+=ge[(3&v[he])<<4|v[he+1]>>4],V+=ge[(15&v[he+1])<<2|v[he+2]>>6],V+=ge[63&v[he+2]];return Y%3==2?V=V.slice(0,-1)+"=":Y%3==1&&(V=V.slice(0,-2)+"=="),V},Yt=function(o){var u,m,v,Y,V=o.length,he=.75*o.length,H=0;"="===o[o.length-1]&&(he--,"="===o[o.length-2]&&he--);for(var ve=new ArrayBuffer(he),Te=new Uint8Array(ve),ke=0;ke<V;ke+=4)u=Rt[o.charCodeAt(ke)],m=Rt[o.charCodeAt(ke+1)],v=Rt[o.charCodeAt(ke+2)],Y=Rt[o.charCodeAt(ke+3)],Te[H++]=u<<2|m>>4,Te[H++]=(15&m)<<4|v>>2,Te[H++]=(3&v)<<6|63&Y;return ve},Jt={arraybuffer:{test:function(o){return"ArrayBuffer"===F.toStringTag(o)},replace:function(o,u){u.buffers||(u.buffers=[]);var m=u.buffers.indexOf(o);return m>-1?{index:m}:(u.buffers.push(o),Mt(o))},revive:function(o,u){if(u.buffers||(u.buffers=[]),"object"===l(o))return u.buffers[o.index];var m=Yt(o);return u.buffers.push(m),m}}},fn=typeof self>"u"?gt:self,$t={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(c){var o=c,u=fn[o];u&&($t[c.toLowerCase()]={test:function(v){return F.toStringTag(v)===o},replace:function(v,Y){var V=v.buffer,he=v.byteOffset,H=v.length;Y.buffers||(Y.buffers=[]);var ve=Y.buffers.indexOf(V);return ve>-1?{index:ve,byteOffset:he,length:H}:(Y.buffers.push(V),{encoded:Mt(V),byteOffset:he,length:H})},revive:function(v,Y){Y.buffers||(Y.buffers=[]);var V,he=v.byteOffset,H=v.length;return"index"in v?V=Y.buffers[v.index]:(V=Yt(v.encoded),Y.buffers.push(V)),new u(V,he,H)}})});var Ue={dataview:{test:function(o){return"DataView"===F.toStringTag(o)},replace:function(o,u){var m=o.buffer,v=o.byteOffset,Y=o.byteLength;u.buffers||(u.buffers=[]);var V=u.buffers.indexOf(m);return V>-1?{index:V,byteOffset:v,byteLength:Y}:(u.buffers.push(m),{encoded:Mt(m),byteOffset:v,byteLength:Y})},revive:function(o,u){u.buffers||(u.buffers=[]);var m,v=o.byteOffset,Y=o.byteLength;return"index"in o?m=u.buffers[o.index]:(m=Yt(o.encoded),u.buffers.push(m)),new DataView(m,v,Y)}}},je={IntlCollator:{test:function(o){return F.hasConstructorOf(o,Intl.Collator)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.Collator(o.locale,o)}},IntlDateTimeFormat:{test:function(o){return F.hasConstructorOf(o,Intl.DateTimeFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.DateTimeFormat(o.locale,o)}},IntlNumberFormat:{test:function(o){return F.hasConstructorOf(o,Intl.NumberFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.NumberFormat(o.locale,o)}}};function it(c){for(var o=new Uint8Array(c.length),u=0;u<c.length;u++)o[u]=c.charCodeAt(u);return o.buffer}var Ge={file:{test:function(o){return"File"===F.toStringTag(o)},replace:function(o){var u=new XMLHttpRequest;if(u.overrideMimeType("text/plain; charset=x-user-defined"),u.open("GET",URL.createObjectURL(o),!1),u.send(),200!==u.status&&0!==u.status)throw new Error("Bad File access: "+u.status);return{type:o.type,stringContents:u.responseText,name:o.name,lastModified:o.lastModified}},revive:function(o){var u=o.name,m=o.type,Y=o.lastModified;return new File([it(o.stringContents)],u,{type:m,lastModified:Y})},replaceAsync:function(o){return new F.Promise(function(u,m){var v=new FileReader;v.addEventListener("load",function(){u({type:o.type,stringContents:v.result,name:o.name,lastModified:o.lastModified})}),v.addEventListener("error",function(){m(v.error)}),v.readAsBinaryString(o)})}}},et={bigint:{test:function(o){return"bigint"==typeof o},replace:function(o){return String(o)},revive:function(o){return BigInt(o)}}},yt={bigintObject:{test:function(o){return"object"===l(o)&&F.hasConstructorOf(o,BigInt)},replace:function(o){return String(o)},revive:function(o){return new Object(BigInt(o))}}},fe={cryptokey:{test:function(o){return"CryptoKey"===F.toStringTag(o)&&o.extractable},replaceAsync:function(o){return new F.Promise(function(u,m){crypto.subtle.exportKey("jwk",o).catch(function(v){m(v)}).then(function(v){u({jwk:v,algorithm:o.algorithm,usages:o.usages})})})},revive:function(o){return crypto.subtle.importKey("jwk",o.jwk,o.algorithm,!0,o.usages)}}};return[wt,_,T,D,M,X,De,{imagedata:{test:function(o){return"ImageData"===F.toStringTag(o)},replace:function(o){return{array:ue(o.data),width:o.width,height:o.height}},revive:function(o){return new ImageData(new Uint8ClampedArray(o.array),o.width,o.height)}}},{imagebitmap:{test:function(o){return"ImageBitmap"===F.toStringTag(o)||o&&o.dataset&&"ImageBitmap"===o.dataset.toStringTag},replace:function(o){var u=document.createElement("canvas");return u.getContext("2d").drawImage(o,0,0),u.toDataURL()},revive:function(o){var u=document.createElement("canvas"),m=u.getContext("2d"),v=document.createElement("img");return v.addEventListener("load",function(){m.drawImage(v,0,0)}),v.src=o,u},reviveAsync:function(o){var u=document.createElement("canvas"),m=u.getContext("2d"),v=document.createElement("img");return v.addEventListener("load",function(){m.drawImage(v,0,0)}),v.src=o,createImageBitmap(u)}}},Ge,{file:Ge.file,filelist:{test:function(o){return"FileList"===F.toStringTag(o)},replace:function(o){for(var u=[],m=0;m<o.length;m++)u[m]=o.item(m);return u},revive:function(o){return new(function(){function u(){(function h(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")})(this,u),this._files=arguments[0],this.length=this._files.length}return v=u,Y=[{key:"item",value:function(v){return this._files[v]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}],Y&&p(v.prototype,Y),u;var v,Y}())(o)}}},{blob:{test:function(o){return"Blob"===F.toStringTag(o)},replace:function(o){var u=new XMLHttpRequest;if(u.overrideMimeType("text/plain; charset=x-user-defined"),u.open("GET",URL.createObjectURL(o),!1),u.send(),200!==u.status&&0!==u.status)throw new Error("Bad Blob access: "+u.status);return{type:o.type,stringContents:u.responseText}},revive:function(o){var u=o.type;return new Blob([it(o.stringContents)],{type:u})},replaceAsync:function(o){return new F.Promise(function(u,m){var v=new FileReader;v.addEventListener("load",function(){u({type:o.type,stringContents:v.result})}),v.addEventListener("error",function(){m(v.error)}),v.readAsBinaryString(o)})}}}].concat("function"==typeof Map?He:[],"function"==typeof Set?Be:[],"function"==typeof ArrayBuffer?Jt:[],"function"==typeof Uint8Array?$t:[],"function"==typeof DataView?Ue:[],typeof Intl<"u"?je:[],typeof crypto<"u"?fe:[],typeof BigInt<"u"?[et,yt]:[])}()}),Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xe=new Uint8Array(256),Ft=0;Ft<64;Ft++)Xe[Ce.codePointAt(Ft)]=Ft;var at=function(s,l,h){null==h&&(h=s.byteLength);for(var p=new Uint8Array(s,l||0,h),E=p.length,A="",ue=0;ue<E;ue+=3)A+=Ce[p[ue]>>2],A+=Ce[(3&p[ue])<<4|p[ue+1]>>4],A+=Ce[(15&p[ue+1])<<2|p[ue+2]>>6],A+=Ce[63&p[ue+2]];return E%3==2?A=A.slice(0,-1)+"=":E%3==1&&(A=A.slice(0,-2)+"=="),A},Pt=function(s){var E,A,ue,ce,l=s.length,h=.75*s.length,p=0;"="===s[s.length-1]&&(h--,"="===s[s.length-2]&&h--);for(var O=new ArrayBuffer(h),B=new Uint8Array(O),Ie=0;Ie<l;Ie+=4)E=Xe[s.codePointAt(Ie)],A=Xe[s.codePointAt(Ie+1)],ue=Xe[s.codePointAt(Ie+2)],ce=Xe[s.codePointAt(Ie+3)],B[p++]=E<<2|A>>4,B[p++]=(15&A)<<4|ue>>2,B[p++]=(3&ue)<<6|63&ce;return O},At=typeof self>"u"?global:self,jt={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(K){var s=K,l=At[s];l&&(jt[K.toLowerCase()+"2"]={test:function(h){return Pe.toStringTag(h)===s},replace:function(h){return{buffer:h.buffer,byteOffset:h.byteOffset,length:h.length}},revive:function(h){return new l(h.buffer,h.byteOffset,h.length)}})});var Le={arraybuffer:{test:function(K){return"ArrayBuffer"===Pe.toStringTag(K)},replace:function(K){return at(K,0,K.byteLength)},revive:function(K){return Pt(K)}}},re=(new Pe).register(zt),dt="FileReaderSync"in self,It=[],Ht=0;re.register([Le,jt,{blob2:{test:function(K){return"Blob"===Pe.toStringTag(K)},replace:function(K){if(K.isClosed)throw new Error("The Blob is closed");if(dt){var s=St(K,"binary"),l=at(s,0,s.byteLength);return{type:K.type,data:l}}It.push(K);var h={type:K.type,data:{start:Ht,end:Ht+K.size}};return Ht+=K.size,h},finalize:function(K,s){K.data=at(s,0,s.byteLength)},revive:function(K){var s=K.type;return new Blob([Pt(K.data)],{type:s})}}}]),re.mustFinalize=function(){return It.length>0},re.finalize=function(K){return ae(void 0,void 0,void 0,function(){var s,l,h,p,E,A,ue,O,B;return Ee(this,function(Ie){switch(Ie.label){case 0:return[4,Et(new Blob(It),"binary")];case 1:if(s=Ie.sent(),K)for(l=0,h=K;l<h.length;l++)if((p=h[l]).$types)for(ue in(A=(E=p.$types).$)&&(E=E.$),E)(O=re.types[E[ue]])&&O.finalize&&(B=ee.ZP.getByKeyPath(p,A?"$."+ue:ue),O.finalize(B,s.slice(B.start,B.end)));return It=[],[2]}})})};var pn=1,Nn_Stream=function(){},jn=vt(function(K,s){!function(l){var h="object"==typeof process&&process.env?process.env:self;l.parser=function(P){return new Se(P)},l.CParser=Se,l.CStream=qe,l.createStream=function _e(P){return new qe(P)},l.MAX_BUFFER_LENGTH=10485760,l.DEBUG="debug"===h.CDEBUG,l.INFO="debug"===h.CDEBUG||"info"===h.CDEBUG,l.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var ue,p={textNode:void 0,numberNode:""},E=l.EVENTS.filter(function(P){return"error"!==P&&"end"!==P}),A=0;for(var ce in l.STATE={BEGIN:A++,VALUE:A++,OPEN_OBJECT:A++,CLOSE_OBJECT:A++,OPEN_ARRAY:A++,CLOSE_ARRAY:A++,TEXT_ESCAPE:A++,STRING:A++,BACKSLASH:A++,END:A++,OPEN_KEY:A++,CLOSE_KEY:A++,TRUE:A++,TRUE2:A++,TRUE3:A++,FALSE:A++,FALSE2:A++,FALSE3:A++,FALSE4:A++,NULL:A++,NULL2:A++,NULL3:A++,NUMBER_DECIMAL_POINT:A++,NUMBER_DIGIT:A++},l.STATE)l.STATE[l.STATE[ce]]=ce;A=l.STATE;const O_tab=9,O_lineFeed=10,O_carriageReturn=13,O_space=32,O_doubleQuote=34,O_plus=43,O_comma=44,O_minus=45,O_period=46,O__0=48,O__9=57,O_colon=58,O_E=69,O_openBracket=91,O_backslash=92,O_closeBracket=93,O_a=97,O_b=98,O_e=101,O_f=102,O_l=108,O_n=110,O_r=114,O_s=115,O_t=116,O_u=117,O_openBrace=123,O_closeBrace=125;function Ie(P){for(var d in p)P[d]=p[d]}Object.create||(Object.create=function(P){function d(){this.__proto__=P}return d.prototype=P,new d}),Object.getPrototypeOf||(Object.getPrototypeOf=function(P){return P.__proto__}),Object.keys||(Object.keys=function(P){var d=[];for(var U in P)P.hasOwnProperty(U)&&d.push(U);return d});var Dt=/[\\"\n]/g;function Se(P){if(!(this instanceof Se))return new Se(P);var d=this;Ie(d),d.bufferCheckPosition=l.MAX_BUFFER_LENGTH,d.q=d.c=d.p="",d.opt=P||{},d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.state=A.BEGIN,d.stack=new Array,d.position=d.column=0,d.line=1,d.slashed=!1,d.unicodeI=0,d.unicodeS=null,d.depth=0,Ve(d,"onready")}Se.prototype={end:function(){bt(this)},write:function Kt(P){var d=this;if(this.error)throw this.error;if(d.closed)return Ne(d,"Cannot write after close. Assign an onready handler.");if(null===P)return bt(d);var U=0,I=P.charCodeAt(0),Je=d.p;for(l.DEBUG&&console.log("write -> ["+P+"]");I&&(Je=I,d.c=I=P.charCodeAt(U++),Je!==I?d.p=Je:Je=d.p,I);)switch(l.DEBUG&&console.log(U,I,l.STATE[d.state]),d.position++,I===O_lineFeed?(d.line++,d.column=0):d.column++,d.state){case A.BEGIN:I===O_openBrace?d.state=A.OPEN_OBJECT:I===O_openBracket?d.state=A.OPEN_ARRAY:Ot(I)||Ne(d,"Non-whitespace before {[.");continue;case A.OPEN_KEY:case A.OPEN_OBJECT:if(Ot(I))continue;if(d.state===A.OPEN_KEY)d.stack.push(A.CLOSE_KEY);else{if(I===O_closeBrace){Ve(d,"onopenobject"),this.depth++,Ve(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||A.VALUE;continue}d.stack.push(A.CLOSE_OBJECT)}I===O_doubleQuote?d.state=A.STRING:Ne(d,'Malformed object key should start with "');continue;case A.CLOSE_KEY:case A.CLOSE_OBJECT:if(Ot(I))continue;I===O_colon?(d.state===A.CLOSE_OBJECT?(d.stack.push(A.CLOSE_OBJECT),xt(d,"onopenobject"),this.depth++):xt(d,"onkey"),d.state=A.VALUE):I===O_closeBrace?(rn(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||A.VALUE):I===O_comma?(d.state===A.CLOSE_OBJECT&&d.stack.push(A.CLOSE_OBJECT),xt(d),d.state=A.OPEN_KEY):Ne(d,"Bad object");continue;case A.OPEN_ARRAY:case A.VALUE:if(Ot(I))continue;if(d.state===A.OPEN_ARRAY){if(Ve(d,"onopenarray"),this.depth++,d.state=A.VALUE,I===O_closeBracket){Ve(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||A.VALUE;continue}d.stack.push(A.CLOSE_ARRAY)}I===O_doubleQuote?d.state=A.STRING:I===O_openBrace?d.state=A.OPEN_OBJECT:I===O_openBracket?d.state=A.OPEN_ARRAY:I===O_t?d.state=A.TRUE:I===O_f?d.state=A.FALSE:I===O_n?d.state=A.NULL:I===O_minus?d.numberNode+="-":O__0<=I&&I<=O__9?(d.numberNode+=String.fromCharCode(I),d.state=A.NUMBER_DIGIT):Ne(d,"Bad value");continue;case A.CLOSE_ARRAY:if(I===O_comma)d.stack.push(A.CLOSE_ARRAY),xt(d,"onvalue"),d.state=A.VALUE;else if(I===O_closeBracket)rn(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||A.VALUE;else{if(Ot(I))continue;Ne(d,"Bad array")}continue;case A.STRING:void 0===d.textNode&&(d.textNode="");var Fe=U-1,ht=d.slashed,rt=d.unicodeI;e:for(;;){for(l.DEBUG&&console.log(U,I,l.STATE[d.state],ht);rt>0;)if(d.unicodeS+=String.fromCharCode(I),I=P.charCodeAt(U++),d.position++,4===rt?(d.textNode+=String.fromCharCode(parseInt(d.unicodeS,16)),rt=0,Fe=U-1):rt++,!I)break e;if(I===O_doubleQuote&&!ht){d.state=d.stack.pop()||A.VALUE,d.textNode+=P.substring(Fe,U-1),d.position+=U-1-Fe;break}if(I===O_backslash&&!ht&&(ht=!0,d.textNode+=P.substring(Fe,U-1),d.position+=U-1-Fe,I=P.charCodeAt(U++),d.position++,!I))break;if(ht){if(ht=!1,I===O_n?d.textNode+="\n":I===O_r?d.textNode+="\r":I===O_t?d.textNode+="\t":I===O_f?d.textNode+="\f":I===O_b?d.textNode+="\b":I===O_u?(rt=1,d.unicodeS=""):d.textNode+=String.fromCharCode(I),I=P.charCodeAt(U++),d.position++,Fe=U-1,I)continue;break}Dt.lastIndex=U;var pt=Dt.exec(P);if(null===pt){d.textNode+=P.substring(Fe,(U=P.length+1)-1),d.position+=U-1-Fe;break}if(U=pt.index+1,!(I=P.charCodeAt(pt.index))){d.textNode+=P.substring(Fe,U-1),d.position+=U-1-Fe;break}}d.slashed=ht,d.unicodeI=rt;continue;case A.TRUE:I===O_r?d.state=A.TRUE2:Ne(d,"Invalid true started with t"+I);continue;case A.TRUE2:I===O_u?d.state=A.TRUE3:Ne(d,"Invalid true started with tr"+I);continue;case A.TRUE3:I===O_e?(Ve(d,"onvalue",!0),d.state=d.stack.pop()||A.VALUE):Ne(d,"Invalid true started with tru"+I);continue;case A.FALSE:I===O_a?d.state=A.FALSE2:Ne(d,"Invalid false started with f"+I);continue;case A.FALSE2:I===O_l?d.state=A.FALSE3:Ne(d,"Invalid false started with fa"+I);continue;case A.FALSE3:I===O_s?d.state=A.FALSE4:Ne(d,"Invalid false started with fal"+I);continue;case A.FALSE4:I===O_e?(Ve(d,"onvalue",!1),d.state=d.stack.pop()||A.VALUE):Ne(d,"Invalid false started with fals"+I);continue;case A.NULL:I===O_u?d.state=A.NULL2:Ne(d,"Invalid null started with n"+I);continue;case A.NULL2:I===O_l?d.state=A.NULL3:Ne(d,"Invalid null started with nu"+I);continue;case A.NULL3:I===O_l?(Ve(d,"onvalue",null),d.state=d.stack.pop()||A.VALUE):Ne(d,"Invalid null started with nul"+I);continue;case A.NUMBER_DECIMAL_POINT:I===O_period?(d.numberNode+=".",d.state=A.NUMBER_DIGIT):Ne(d,"Leading zero not followed by .");continue;case A.NUMBER_DIGIT:O__0<=I&&I<=O__9?d.numberNode+=String.fromCharCode(I):I===O_period?(-1!==d.numberNode.indexOf(".")&&Ne(d,"Invalid number has two dots"),d.numberNode+="."):I===O_e||I===O_E?((-1!==d.numberNode.indexOf("e")||-1!==d.numberNode.indexOf("E"))&&Ne(d,"Invalid number has two exponential"),d.numberNode+="e"):I===O_plus||I===O_minus?(Je===O_e||Je===O_E||Ne(d,"Invalid symbol in number"),d.numberNode+=String.fromCharCode(I)):(te(d),U--,d.state=d.stack.pop()||A.VALUE);continue;default:Ne(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&function B(P){var d=Math.max(l.MAX_BUFFER_LENGTH,10),U=0;for(var I in p){var Je=void 0===P[I]?0:P[I].length;Je>d&&("text"===I?closeText(P):Ne(P,"Max buffer length exceeded: "+I)),U=Math.max(U,Je)}P.bufferCheckPosition=l.MAX_BUFFER_LENGTH-U+P.position}(d),d},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{ue=Nn_Stream}catch{ue=function(){}}function qe(P){if(!(this instanceof qe))return new qe(P);this._parser=new Se(P),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var d=this;ue.apply(d),this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(U){d.emit("error",U),d._parser.error=null},E.forEach(function(U){Object.defineProperty(d,"on"+U,{get:function(){return d._parser["on"+U]},set:function(I){if(!I)return d.removeAllListeners(U),d._parser["on"+U]=I,I;d.on(U,I)},enumerable:!0,configurable:!1})})}function Ve(P,d,U){l.INFO&&console.log("-- emit",d,U),P[d]&&P[d](U)}function rn(P,d,U){xt(P),Ve(P,d,U)}function xt(P,d){P.textNode=function lt(P,d){return void 0===d||(P.trim&&(d=d.trim()),P.normalize&&(d=d.replace(/\s+/g," "))),d}(P.opt,P.textNode),void 0!==P.textNode&&Ve(P,d||"onvalue",P.textNode),P.textNode=void 0}function te(P){P.numberNode&&Ve(P,"onvalue",parseFloat(P.numberNode)),P.numberNode=""}function Ne(P,d){return xt(P),d+="\nLine: "+P.line+"\nColumn: "+P.column+"\nChar: "+P.c,d=new Error(d),P.error=d,Ve(P,"onerror",d),P}function bt(P){return(P.state!==A.VALUE||0!==P.depth)&&Ne(P,"Unexpected end"),xt(P),P.c="",P.closed=!0,Ve(P,"onend"),Se.call(P,P.opt),P}function Ot(P){return P===O_carriageReturn||P===O_lineFeed||P===O_space||P===O_tab}(qe.prototype=Object.create(ue.prototype,{constructor:{value:qe}})).write=function(P){P=new Buffer(P);for(var d=0;d<P.length;d++){var U=P[d];if(this.bytes_remaining>0){for(var I=0;I<this.bytes_remaining;I++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+I]=P[I];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,d=d+I-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&U>=128){if(U>=194&&U<=223&&(this.bytes_in_sequence=2),U>=224&&U<=239&&(this.bytes_in_sequence=3),U>=240&&U<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+d>P.length){for(var Je=0;Je<=P.length-1-d;Je++)this.temp_buffs[this.bytes_in_sequence][Je]=P[d+Je];return this.bytes_remaining=d+this.bytes_in_sequence-P.length,!0}this.string=P.slice(d,d+this.bytes_in_sequence).toString(),d=d+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var Fe=d;Fe<P.length&&!(P[Fe]>=128);Fe++);this.string=P.slice(d,Fe).toString(),this._parser.write(this.string),this.emit("data",this.string),d=Fe-1}}},qe.prototype.end=function(P){return P&&P.length&&this._parser.write(P.toString()),this._parser.end(),!0},qe.prototype.on=function(P,d){var U=this;return!U._parser["on"+P]&&-1!==E.indexOf(P)&&(U._parser["on"+P]=function(){var I=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);I.splice(0,0,P),U.emit.apply(U,I)}),ue.prototype.on.call(U,P,d)},qe.prototype.destroy=function(){Ie(this._parser),this.emit("close")}}(s)});function L(K,s,l){return ae(this,void 0,void 0,function(){function h(){return ae(this,void 0,void 0,function(){var _e,qe,Ve;return Ee(this,function(te){switch(te.label){case 0:_e=function(lt){var Ne,bt,Ot,Kt,P,d,U,I,Je,Fe,ht,rt;return Ee(this,function(pt){switch(pt.label){case 0:if(!lt.rows)return[2,"break"];if(!lt.rows.incomplete&&0===lt.rows.length)return[2,"continue"];if(O&&ee.ZP.ignoreTransaction(function(){return O(B)}),bt=K.table(Ne=lt.tableName),Ot=ce.tables.filter(function(We){return We.name===Ne})[0].schema,!bt){if(l.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(lt.tableName," is missing in installed database"))}if(!l.acceptChangedPrimaryKey&&Ot.split(",")[0]!=bt.schema.primKey.src)throw new Error("Primary key differs for table ".concat(lt.tableName,". "));for(Kt=lt.rows,P=[],d=0;d<Kt.length&&!(U=Kt[d]).incomplete;d++)P.push(re.revive(U));return Je=(I=l.filter)?P.filter(lt.inbound?function(We){return I(Ne,We)}:function(We){return I(Ne,We[1],We[0])}):P,Fe=lt.inbound?[void 0,Je]:[Je.map(function(We){return We[0]}),P.map(function(We){return We[1]})],ht=Fe[0],rt=Fe[1],l.overwriteValues?[4,bt.bulkPut(rt,ht)]:[3,2];case 1:return pt.sent(),[3,4];case 2:return[4,bt.bulkAdd(rt,ht)];case 3:pt.sent(),pt.label=4;case 4:return B.completedRows+=P.length,P.incomplete||(B.completedTables+=1),Kt.splice(0,P.length),[2]}})},qe=0,Ve=ce.data,te.label=1;case 1:return qe<Ve.length?[5,_e(Ve[qe])]:[3,4];case 2:if("break"===te.sent())return[3,4];te.label=3;case 3:return qe++,[3,1];case 4:for(;ce.data.length>0&&ce.data[0].rows&&!ce.data[0].rows.incomplete;)ce.data.splice(0,1);return E.done()||E.eof()?[3,8]:ue?(E.pullSync(p),[3,7]):[3,5];case 5:return[4,ee.ZP.waitFor(E.pullAsync(p))];case 6:te.sent(),te.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var p,E,ue,ce,O,B,Ie,Dt;return Ee(this,function(_e){switch(_e.label){case 0:return[4,$(s,p=(l=l||{}).chunkSizeBytes||1048576)];case 1:if(E=_e.sent(),ue="FileReaderSync"in self,ce=E.result.data,!l.acceptNameDiff&&K.name!==ce.databaseName)throw new Error("Name differs. Current database name is ".concat(K.name," but export is ").concat(ce.databaseName));if(!l.acceptVersionDiff&&K.verno!==ce.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(K.verno," but export is ").concat(ce.databaseVersion));if(O=l.progressCallback,B={done:!1,completedRows:0,completedTables:0,totalRows:ce.tables.reduce(function(qe,Ve){return qe+Ve.rowCount},0),totalTables:ce.tables.length},O&&ee.ZP.ignoreTransaction(function(){return O(B)}),!l.clearTablesBeforeImport)return[3,5];Ie=0,Dt=K.tables,_e.label=2;case 2:return Ie<Dt.length?[4,Dt[Ie].clear()]:[3,5];case 3:_e.sent(),_e.label=4;case 4:return Ie++,[3,2];case 5:return l.noTransaction?[4,h()]:[3,7];case 6:return _e.sent(),[3,9];case 7:return[4,K.transaction("rw",K.tables,h)];case 8:_e.sent(),_e.label=9;case 9:return B.done=!0,O&&ee.ZP.ignoreTransaction(function(){return O(B)}),[2]}})})}function $(K,s){return ae(this,void 0,void 0,function(){var l,h;return Ee(this,function(p){switch(p.label){case 0:l="slice"in K?function En(K){var s=0,l=function bn(K){var h,E,A,s=jn.parser(),l=0,p=[],ue=!1,ce=!1;return s.onopenobject=function(O){var B={incomplete:!0};h||(h=B),E&&(p.push([A,E,ce]),K&&(ce?E.push(B):E[A]=B)),E=B,A=O,ce=!1,++l},s.onkey=function(O){return A=O},s.onvalue=function(O){return ce?E.push(O):E[A]=O},s.oncloseobject=function(){var O;if(delete E.incomplete,A=null,0==--l)ue=!0;else{var B=E;O=p.pop(),A=O[0],E=O[1],ce=O[2],K||(ce?E.push(B):E[A]=B)}},s.onopenarray=function(){var O=[];O.incomplete=!0,h||(h=O),E&&(p.push([A,E,ce]),K&&(ce?E.push(O):E[A]=O)),E=O,ce=!0,A=null,++l},s.onclosearray=function(){var O;if(delete E.incomplete,A=null,0==--l)ue=!0;else{var B=E;O=p.pop(),A=O[0],E=O[1],ce=O[2],K||(ce?E.push(B):E[A]=B)}},{write:function(O){return s.write(O),h},done:function(){return ue}}}(!0),h={pullAsync:function(p){return ae(this,void 0,void 0,function(){var E,A,ue;return Ee(this,function(ce){switch(ce.label){case 0:return E=K.slice(s,s+p),s+=p,[4,Et(E,"text")];case 1:return A=ce.sent(),ue=l.write(A),h.result=ue||{},[2,ue]}})})},pullSync:function(p){var E=K.slice(s,s+p);s+=p;var A=St(E,"text"),ue=l.write(A);return h.result=ue||{},ue},done:function(){return l.done()},eof:function(){return s>=K.size},result:{}};return h}(K):K,p.label=1;case 1:return l.eof()?[3,3]:[4,l.pullAsync(s)];case 2:return p.sent(),l.result.data&&l.result.data.data?[3,3]:[3,1];case 3:if(!(h=l.result)||"dexie"!=h.formatName)throw new Error("Given file is not a dexie export");if(h.formatVersion>pn)throw new Error("Format version ".concat(h.formatVersion," not supported"));if(!h.data)throw new Error("No data in export file");if(!h.data.databaseName)throw new Error("Missing databaseName in export file");if(!h.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!h.data.tables)throw new Error("Missing tables in export file");return[2,l]}})})}ee.ZP.prototype.export=function(K){return function ln(K,s){return ae(this,void 0,void 0,function(){function l(){return ae(this,void 0,void 0,function(){var O,B,Ie,Dt,Se,_e,qe,Ve;return Ee(this,function(xt){switch(xt.label){case 0:return[4,Promise.all(K.tables.map(function(te){return te.count()}))];case 1:(O=xt.sent()).forEach(function(te,lt){return p[lt].rowCount=te}),ce.totalRows=O.reduce(function(te,lt){return te+lt}),B=JSON.stringify(A,void 0,E?2:void 0),Ie=B.lastIndexOf("]"),Dt=B.substring(0,Ie),h.push(Dt),Se=s.filter,_e=function(te){var lt,Ne,bt,Ot,P,d,U,I,Je,Fe;return Ee(this,function(rt){switch(rt.label){case 0:lt=K.table(te),bt=!!(Ne=lt.schema.primKey).keyPath,Ot=s.numRowsPerChunk||2e3,P=JSON.stringify(bt?{tableName:lt.name,inbound:!0,rows:[]}:{tableName:lt.name,inbound:!1,rows:[]},void 0,E?2:void 0),E&&(P=P.split("\n").join("\n    ")),d=P.lastIndexOf("]"),h.push(P.substring(0,d)),U=null,I=0,Je=!0,Fe=function(){var pt,We,kt,Lt,Ut,Xt,on,F;return Ee(this,function(ze){switch(ze.label){case 0:return ue&&ee.ZP.ignoreTransaction(function(){return ue(ce)}),[4,(pt=null==U?lt.limit(Ot):lt.where(":id").above(U).limit(Ot)).toArray()];case 1:return 0===(We=ze.sent()).length?[2,"break"]:(null!=U&&I>0&&(h.push(","),E&&h.push("\n      ")),Je=We.length===Ot,bt?(kt=Se?We.filter(function(wt){return Se(te,wt)}):We,Lt=kt.map(function(wt){return re.encapsulate(wt)}),re.mustFinalize()?[4,ee.ZP.waitFor(re.finalize(Lt))]:[3,3]):[3,4]);case 2:ze.sent(),ze.label=3;case 3:return F=JSON.stringify(Lt,void 0,E?2:void 0),E&&(F=F.split("\n").join("\n      ")),h.push(new Blob([F.substring(1,F.length-1)])),I=kt.length,U=We.length>0?ee.ZP.getByKeyPath(We[We.length-1],Ne.keyPath):null,[3,8];case 4:return[4,pt.primaryKeys()];case 5:return Ut=ze.sent(),Xt=Ut.map(function(wt,T){return[wt,We[T]]}),Se&&(Xt=Xt.filter(function(wt){return Se(te,wt[1],wt[0])})),on=Xt.map(function(wt){return re.encapsulate(wt)}),re.mustFinalize()?[4,ee.ZP.waitFor(re.finalize(on))]:[3,7];case 6:ze.sent(),ze.label=7;case 7:F=JSON.stringify(on,void 0,E?2:void 0),E&&(F=F.split("\n").join("\n      ")),h.push(new Blob([F.substring(1,F.length-1)])),I=Xt.length,U=Ut.length>0?Ut[Ut.length-1]:null,ze.label=8;case 8:return ce.completedRows+=We.length,[2]}})},rt.label=1;case 1:return Je?[5,Fe()]:[3,3];case 2:return"break"===rt.sent()?[3,3]:[3,1];case 3:return h.push(P.substr(d)),ce.completedTables+=1,ce.completedTables<ce.totalTables&&h.push(","),[2]}})},qe=0,Ve=p,xt.label=2;case 2:return qe<Ve.length?[5,_e(Ve[qe].name)]:[3,5];case 3:xt.sent(),xt.label=4;case 4:return qe++,[3,2];case 5:return h.push(B.substr(Ie)),ce.done=!0,ue&&ee.ZP.ignoreTransaction(function(){return ue(ce)}),[2]}})})}var h,p,E,A,ue,ce;return Ee(this,function(O){switch(O.label){case 0:s=s||{},h=[],p=K.tables.map(function(B){return{name:B.name,schema:ft(B),rowCount:0}}),E=s.prettyJson,A={formatName:"dexie",formatVersion:1,data:{databaseName:K.name,databaseVersion:K.verno,tables:p,data:[]}},ue=s.progressCallback,ce={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:K.tables.length},O.label=1;case 1:return O.trys.push([1,,6,7]),s.noTransaction?[4,l()]:[3,3];case 2:return O.sent(),[3,5];case 3:return[4,K.transaction("r",K.tables,l)];case 4:O.sent(),O.label=5;case 5:return[3,7];case 6:return re.finalize(),[7];case 7:return[2,new Blob(h,{type:"text/json"})]}})})}(this,K)},ee.ZP.prototype.import=function(K,s){return L(this,K,s)},ee.ZP.import=function(K,s){return function yn(K,s){return ae(this,void 0,void 0,function(){var h,p,E;return Ee(this,function(A){switch(A.label){case 0:return[4,$(K,(s=s||{}).chunkSizeBytes||1048576)];case 1:return h=A.sent(),(E=new ee.ZP((p=h.result.data).databaseName)).version(p.databaseVersion).stores(function Qe(K){for(var s={},l=0,h=K.tables;l<h.length;l++){var p=h[l];s[p.name]=p.schema}return s}(p)),[4,L(E,h,s)];case 2:return A.sent(),[2,E]}})})}(K,s)};class W extends ee.ZP{examId;exams;templates;alignImages;nonAlignImages;constructor(s){super("correctExam"+s),this.examId=s,this.version(3).stores({exams:"++id",templates:"++id, examId, [examId+pageNumber]",alignImages:"++id, examId,[examId+pageNumber]",nonAlignImages:"++id, examId,[examId+pageNumber]"})}resetDatabase(){var s=this;return(0,N.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.exams.clear(),s.templates.clear(),s.alignImages.clear(),s.nonAlignImages.clear()})})()}removeElementForExam(){var s=this;return(0,N.Z)(function*(){return s.delete()})()}removePageAlignForExam(){var s=this;return(0,N.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.exams.delete(s.examId),s.alignImages.where("examId").equals(s.examId).toArray().then(l=>s.alignImages.bulkDelete(l.map(h=>h.id)))})})()}removeElementForExamForPages(s,l){var h=this;return(0,N.Z)(function*(){yield h.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=l).toArray().then(p=>h.alignImages.bulkDelete(p.map(E=>E.id))),h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=l).toArray().then(p=>h.nonAlignImages.bulkDelete(p.map(E=>E.id)))})})()}removePageAlignForExamForPage(s){var l=this;return(0,N.Z)(function*(){yield l.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{l.alignImages.where({examId:l.examId,pageNumber:s}).delete()})})()}removePageNonAlignForExamForPage(s){var l=this;return(0,N.Z)(function*(){yield l.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{l.nonAlignImages.where({examId:l.examId,pageNumber:s}).delete()})})()}removePageAlignForExamForPages(s,l){var h=this;return(0,N.Z)(function*(){yield h.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=l).toArray().then(p=>h.alignImages.bulkDelete(p.map(E=>E.id)))})})()}removePageNonAlignForExamForPages(s,l){var h=this;return(0,N.Z)(function*(){yield h.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=l).toArray().then(p=>h.nonAlignImages.bulkDelete(p.map(E=>E.id)))})})()}removeExam(){var s=this;return(0,N.Z)(function*(){yield s.transaction("rw","exams",()=>{s.exams.delete(s.examId)})})()}addAligneImage(s){var l=this;return(0,N.Z)(function*(){yield l.alignImages.put(s)})()}addNonAligneImage(s){var l=this;return(0,N.Z)(function*(){yield l.nonAlignImages.put(s)})()}addNonAligneImages(s){var l=this;return(0,N.Z)(function*(){yield l.nonAlignImages.bulkAdd(s)})()}export(s){return super.export(s)}import(s,l){return super.import(s,l)}countPageTemplate(){var s=this;return(0,N.Z)(function*(){return yield s.templates.where("examId").equals(s.examId).count()})()}countAlignImage(){var s=this;return(0,N.Z)(function*(){return yield s.alignImages.where("examId").equals(s.examId).count()})()}countNonAlignImage(){var s=this;return(0,N.Z)(function*(){return yield s.nonAlignImages.where("examId").equals(s.examId).count()})()}getFirstNonAlignImage(s){var l=this;return(0,N.Z)(function*(){return yield l.nonAlignImages.where({examId:l.examId,pageNumber:s}).first()})()}getFirstAlignImage(s){var l=this;return(0,N.Z)(function*(){return yield l.alignImages.where({examId:l.examId,pageNumber:s}).first()})()}getFirstTemplate(s){var l=this;return(0,N.Z)(function*(){return yield l.templates.where({examId:l.examId,pageNumber:s}).first()})()}getNonAlignImageBetweenAndSortByPageNumber(s,l){var h=this;return(0,N.Z)(function*(){return yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=l).sortBy("pageNumber")})()}getAlignImageBetweenAndSortByPageNumber(s,l){var h=this;return(0,N.Z)(function*(){return yield h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>=s&&p.pageNumber<=l).sortBy("pageNumber")})()}getNonAlignImagesForPageNumbers(s){var l=this;return(0,N.Z)(function*(){return yield l.nonAlignImages.where({examId:l.examId}).filter(h=>s.includes(h.pageNumber)).sortBy("pageNumber")})()}getAlignImagesForPageNumbers(s){var l=this;return(0,N.Z)(function*(){return yield l.alignImages.where({examId:l.examId}).filter(h=>s.includes(h.pageNumber)).sortBy("pageNumber")})()}getNonAlignSortByPageNumber(){var s=this;return(0,N.Z)(function*(){return yield s.nonAlignImages.where({examId:s.examId}).sortBy("pageNumber")})()}moveNonAlignPages(s,l){var h=this;return(0,N.Z)(function*(){s!==l&&(yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber===s).modify(p=>{p.pageNumber=-1e3}),s<l?yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber>s&&p.pageNumber<=l).modify(p=>{p.pageNumber=p.pageNumber-1}):yield h.nonAlignImages.where({examId:h.examId}).filter(p=>p.pageNumber<s&&p.pageNumber>=l).modify(p=>{p.pageNumber=p.pageNumber+1}),yield h.nonAlignImages.where({examId:h.examId}).filter(p=>-1e3===p.pageNumber).modify(p=>{p.pageNumber=l}))})()}moveAlignPages(s,l){var h=this;return(0,N.Z)(function*(){s!==l&&(yield h.alignImages.where({examId:h.examId,pageNumber:s}).modify(p=>{p.pageNumber=-1e3}),s<l?yield h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber>s&&p.pageNumber<=l).modify(p=>{p.pageNumber=p.pageNumber-1}):yield h.alignImages.where({examId:h.examId}).filter(p=>p.pageNumber<s&&p.pageNumber>=l).modify(p=>{p.pageNumber=p.pageNumber+1}),yield h.alignImages.where({examId:h.examId,pageNumber:-1e3}).modify(p=>{p.pageNumber=l}))})()}getAlignSortByPageNumber(){var s=this;return(0,N.Z)(function*(){return yield s.alignImages.where({examId:s.examId}).sortBy("pageNumber")})()}addExam(){var s=this;return(0,N.Z)(function*(){return yield s.exams.add({id:s.examId})})()}addTemplate(s){var l=this;return(0,N.Z)(function*(){return yield l.templates.add({examId:l.examId,pageNumber:s.pageNumber,value:s.value})})()}countNonAlignWithPageNumber(s){var l=this;return(0,N.Z)(function*(){return yield l.nonAlignImages.where({examId:l.examId,pageNumber:s}).count()})()}countAlignWithPageNumber(s){var l=this;return(0,N.Z)(function*(){return yield l.alignImages.where({examId:l.examId,pageNumber:s}).count()})()}}class Ae{dbs=new Map;resetDatabase(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s);return void 0===h&&(h=new W(s),l.dbs.set(s,h)),h.resetDatabase()})()}removeExam(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s);return void 0===h&&(h=new W(s),l.dbs.set(s,h)),h.removeExam()})()}removeElementForExam(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s);return void 0===h&&(h=new W(s),l.dbs.set(s,h)),l.dbs.delete(s),h.removeElementForExam()})()}removeElementForExamForPages(s,l,h){var p=this;return(0,N.Z)(function*(){let E=p.dbs.get(s);return void 0===E&&(E=new W(s),p.dbs.set(s,E)),E.removeElementForExamForPages(l,h)})()}removePageAlignForExam(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s);return void 0===h&&(h=new W(s),l.dbs.set(s,h)),h.removePageAlignForExam()})()}removePageAlignForExamForPage(s,l){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new W(s),h.dbs.set(s,p)),p.removePageAlignForExamForPage(l)})()}removePageNonAlignForExamForPage(s,l){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new W(s),h.dbs.set(s,p)),p.removePageNonAlignForExamForPage(l)})()}removePageAlignForExamForPages(s,l,h){var p=this;return(0,N.Z)(function*(){let E=p.dbs.get(s);return void 0===E&&(E=new W(s),p.dbs.set(s,E)),E.removePageAlignForExamForPages(l,h)})()}removePageNonAlignForExamForPages(s,l,h){var p=this;return(0,N.Z)(function*(){let E=p.dbs.get(s);return void 0===E&&(E=new W(s),p.dbs.set(s,E)),E.removePageNonAlignForExamForPages(l,h)})()}addAligneImage(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s.examId);return void 0===h&&(h=new W(s.examId),l.dbs.set(s.examId,h)),h.addAligneImage(s)})()}addNonAligneImage(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s.examId);return void 0===h&&(h=new W(s.examId),l.dbs.set(s.examId,h)),h.addNonAligneImage(s)})()}addNonAligneImages(s){var l=this;return(0,N.Z)(function*(){if(s.length>0){let h=l.dbs.get(s[0].examId);return void 0===h&&(h=new W(s[0].examId),l.dbs.set(s[0].examId,h)),h.addNonAligneImages(s)}})()}export(s,l){let h=this.dbs.get(s);return void 0===h&&(h=new W(s),this.dbs.set(s,h)),h.export(l)}import(s,l,h){let p=this.dbs.get(s);return void 0===p&&(p=new W(s),this.dbs.set(s,p)),p.import(l,h)}countPageTemplate(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s);return void 0===h&&(h=new W(s),l.dbs.set(s,h)),h.countPageTemplate()})()}countAlignImage(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s);return void 0===h&&(h=new W(s),l.dbs.set(s,h)),h.countAlignImage()})()}countNonAlignImage(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s);return void 0===h&&(h=new W(s),l.dbs.set(s,h)),h.countNonAlignImage()})()}getFirstNonAlignImage(s,l){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new W(s),h.dbs.set(s,p)),p.getFirstNonAlignImage(l)})()}getFirstAlignImage(s,l){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new W(s),h.dbs.set(s,p)),p.getFirstAlignImage(l)})()}getFirstTemplate(s,l){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new W(s),h.dbs.set(s,p)),p.getFirstTemplate(l)})()}getNonAlignImageBetweenAndSortByPageNumber(s,l,h){var p=this;return(0,N.Z)(function*(){let E=p.dbs.get(s);return void 0===E&&(E=new W(s),p.dbs.set(s,E)),E.getNonAlignImageBetweenAndSortByPageNumber(l,h)})()}getAlignImageBetweenAndSortByPageNumber(s,l,h){var p=this;return(0,N.Z)(function*(){let E=p.dbs.get(s);return void 0===E&&(E=new W(s),p.dbs.set(s,E)),E.getAlignImageBetweenAndSortByPageNumber(l,h)})()}getNonAlignImagesForPageNumbers(s,l){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new W(s),h.dbs.set(s,p)),p.getNonAlignImagesForPageNumbers(l)})()}getAlignImagesForPageNumbers(s,l){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new W(s),h.dbs.set(s,p)),p.getAlignImagesForPageNumbers(l)})()}getNonAlignSortByPageNumber(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s);return void 0===h&&(h=new W(s),l.dbs.set(s,h)),h.getNonAlignSortByPageNumber()})()}getAlignSortByPageNumber(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s);return void 0===h&&(h=new W(s),l.dbs.set(s,h)),h.getAlignSortByPageNumber()})()}addExam(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s);return void 0===h&&(h=new W(s),l.dbs.set(s,h)),h.addExam()})()}addTemplate(s){var l=this;return(0,N.Z)(function*(){let h=l.dbs.get(s.examId);return void 0===h&&(h=new W(s.examId),l.dbs.set(s.examId,h)),h.addTemplate(s)})()}countNonAlignWithPageNumber(s,l){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new W(s),h.dbs.set(s,p)),p.countNonAlignWithPageNumber(l)})()}countAlignWithPageNumber(s,l){var h=this;return(0,N.Z)(function*(){let p=h.dbs.get(s);return void 0===p&&(p=new W(s),h.dbs.set(s,p)),p.countAlignWithPageNumber(l)})()}moveNonAlignPages(s,l,h){var p=this;return(0,N.Z)(function*(){let E=p.dbs.get(s);return void 0===E&&(E=new W(s),p.dbs.set(s,E)),E.moveNonAlignPages(l,h)})()}moveAlignPages(s,l,h){var p=this;return(0,N.Z)(function*(){let E=p.dbs.get(s);return void 0===E&&(E=new W(s),p.dbs.set(s,E)),E.moveAlignPages(l,h)})()}}new Ae},5592:(Ze,Re,de)=>{"use strict";de.d(Re,{y:()=>Et});var N=de(305),ee=de(5113),pe=de(4850),ae=de(8407),Ee=de(2653),ft=de(4674),Qe=de(1441);let Et=(()=>{class Pe{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const Xe=new Pe;return Xe.source=this,Xe.operator=Ce,Xe}subscribe(Ce,Xe,Ft){const at=function vt(Pe){return Pe&&Pe instanceof N.Lv||function gt(Pe){return Pe&&(0,ft.m)(Pe.next)&&(0,ft.m)(Pe.error)&&(0,ft.m)(Pe.complete)}(Pe)&&(0,ee.Nn)(Pe)}(Ce)?Ce:new N.Hp(Ce,Xe,Ft);return(0,Qe.x)(()=>{const{operator:Pt,source:At}=this;at.add(Pt?Pt.call(at,At):At?this._subscribe(at):this._trySubscribe(at))}),at}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(Xe){Ce.error(Xe)}}forEach(Ce,Xe){return new(Xe=St(Xe))((Ft,at)=>{const Pt=new N.Hp({next:At=>{try{Ce(At)}catch(jt){at(jt),Pt.unsubscribe()}},error:at,complete:Ft});this.subscribe(Pt)})}_subscribe(Ce){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(Ce)}[pe.L](){return this}pipe(...Ce){return(0,ae.U)(Ce)(this)}toPromise(Ce){return new(Ce=St(Ce))((Xe,Ft)=>{let at;this.subscribe(Pt=>at=Pt,Pt=>Ft(Pt),()=>Xe(at))})}}return Pe.create=zt=>new Pe(zt),Pe})();function St(Pe){var zt;return null!==(zt=Pe??Ee.config.Promise)&&void 0!==zt?zt:Promise}},305:(Ze,Re,de)=>{"use strict";de.d(Re,{Hp:()=>Ft,Lv:()=>Pe});var N=de(4674),ee=de(5113),pe=de(2653),ae=de(3894),Ee=de(2420);const ft=St("C",void 0,void 0);function St(Le,re,dt){return{kind:Le,value:re,error:dt}}var gt=de(7599),vt=de(1441);class Pe extends ee.w0{constructor(re){super(),this.isStopped=!1,re?(this.destination=re,(0,ee.Nn)(re)&&re.add(this)):this.destination=jt}static create(re,dt,It){return new Ft(re,dt,It)}next(re){this.isStopped?At(function Et(Le){return St("N",Le,void 0)}(re),this):this._next(re)}error(re){this.isStopped?At(function Qe(Le){return St("E",void 0,Le)}(re),this):(this.isStopped=!0,this._error(re))}complete(){this.isStopped?At(ft,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(re){this.destination.next(re)}_error(re){try{this.destination.error(re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const zt=Function.prototype.bind;function Ce(Le,re){return zt.call(Le,re)}class Xe{constructor(re){this.partialObserver=re}next(re){const{partialObserver:dt}=this;if(dt.next)try{dt.next(re)}catch(It){at(It)}}error(re){const{partialObserver:dt}=this;if(dt.error)try{dt.error(re)}catch(It){at(It)}else at(re)}complete(){const{partialObserver:re}=this;if(re.complete)try{re.complete()}catch(dt){at(dt)}}}class Ft extends Pe{constructor(re,dt,It){let Ht;if(super(),(0,N.m)(re)||!re)Ht={next:re??void 0,error:dt??void 0,complete:It??void 0};else{let Qt;this&&pe.config.useDeprecatedNextContext?(Qt=Object.create(re),Qt.unsubscribe=()=>this.unsubscribe(),Ht={next:re.next&&Ce(re.next,Qt),error:re.error&&Ce(re.error,Qt),complete:re.complete&&Ce(re.complete,Qt)}):Ht=re}this.destination=new Xe(Ht)}}function at(Le){pe.config.useDeprecatedSynchronousErrorHandling?(0,vt.O)(Le):(0,ae.h)(Le)}function At(Le,re){const{onStoppedNotification:dt}=pe.config;dt&&gt.z.setTimeout(()=>dt(Le,re))}const jt={closed:!0,next:Ee.Z,error:function Pt(Le){throw Le},complete:Ee.Z}},2653:(Ze,Re,de)=>{"use strict";de.d(Re,{config:()=>N});const N={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7599:(Ze,Re,de)=>{"use strict";de.d(Re,{z:()=>N});const N={setTimeout(ee,pe,...ae){const{delegate:Ee}=N;return Ee?.setTimeout?Ee.setTimeout(ee,pe,...ae):setTimeout(ee,pe,...ae)},clearTimeout(ee){const{delegate:pe}=N;return(pe?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},4850:(Ze,Re,de)=>{"use strict";de.d(Re,{L:()=>N});const N="function"==typeof Symbol&&Symbol.observable||"@@observable"},9732:(Ze,Re,de)=>{"use strict";de.d(Re,{B:()=>ee});const ee=(0,de(2306).d)(pe=>function(Ee){pe(this),this.message=Ee?`${Ee.length} errors occurred during unsubscription:\n${Ee.map((ft,Qe)=>`${Qe+1}) ${ft.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ee})},9039:(Ze,Re,de)=>{"use strict";function N(ee,pe){if(ee){const ae=ee.indexOf(pe);0<=ae&&ee.splice(ae,1)}}de.d(Re,{P:()=>N})},2306:(Ze,Re,de)=>{"use strict";function N(ee){const ae=ee(Ee=>{Error.call(Ee),Ee.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}de.d(Re,{d:()=>N})},1441:(Ze,Re,de)=>{"use strict";de.d(Re,{O:()=>ae,x:()=>pe});var N=de(2653);let ee=null;function pe(Ee){if(N.config.useDeprecatedSynchronousErrorHandling){const ft=!ee;if(ft&&(ee={errorThrown:!1,error:null}),Ee(),ft){const{errorThrown:Qe,error:Et}=ee;if(ee=null,Qe)throw Et}}else Ee()}function ae(Ee){N.config.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=Ee)}},2737:(Ze,Re,de)=>{"use strict";function N(ee){return ee}de.d(Re,{y:()=>N})},4674:(Ze,Re,de)=>{"use strict";function N(ee){return"function"==typeof ee}de.d(Re,{m:()=>N})},2420:(Ze,Re,de)=>{"use strict";function N(){}de.d(Re,{Z:()=>N})},3894:(Ze,Re,de)=>{"use strict";de.d(Re,{h:()=>pe});var N=de(2653),ee=de(7599);function pe(ae){ee.z.setTimeout(()=>{const{onUnhandledError:Ee}=N.config;if(!Ee)throw ae;Ee(ae)})}},7061:(Ze,Re,de)=>{var N=de(8698).default;function ee(){"use strict";Ze.exports=ee=function(){return ae},Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports;var pe,ae={},Ee=Object.prototype,ft=Ee.hasOwnProperty,Qe=Object.defineProperty||function(G,L,$){G[L]=$.value},Et="function"==typeof Symbol?Symbol:{},St=Et.iterator||"@@iterator",gt=Et.asyncIterator||"@@asyncIterator",vt=Et.toStringTag||"@@toStringTag";function Pe(G,L,$){return Object.defineProperty(G,L,{value:$,enumerable:!0,configurable:!0,writable:!0}),G[L]}try{Pe({},"")}catch{Pe=function($,we,W){return $[we]=W}}function zt(G,L,$,we){var Ae=Object.create((L&&L.prototype instanceof jt?L:jt).prototype),nt=new An(we||[]);return Qe(Ae,"_invoke",{value:Nn(G,$,nt)}),Ae}function Ce(G,L,$){try{return{type:"normal",arg:G.call(L,$)}}catch(we){return{type:"throw",arg:we}}}ae.wrap=zt;var Xe="suspendedStart",Ft="suspendedYield",at="executing",Pt="completed",At={};function jt(){}function Le(){}function re(){}var dt={};Pe(dt,St,function(){return this});var It=Object.getPrototypeOf,Ht=It&&It(It(yn([])));Ht&&Ht!==Ee&&ft.call(Ht,St)&&(dt=Ht);var Qt=re.prototype=jt.prototype=Object.create(dt);function ln(G){["next","throw","return"].forEach(function(L){Pe(G,L,function($){return this._invoke(L,$)})})}function pn(G,L){function $(W,Ae,nt,K){var s=Ce(G[W],G,Ae);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==N(h)&&ft.call(h,"__await")?L.resolve(h.__await).then(function(p){$("next",p,nt,K)},function(p){$("throw",p,nt,K)}):L.resolve(h).then(function(p){l.value=p,nt(l)},function(p){return $("throw",p,nt,K)})}K(s.arg)}var we;Qe(this,"_invoke",{value:function(Ae,nt){function K(){return new L(function(s,l){$(Ae,nt,s,l)})}return we=we?we.then(K,K):K()}})}function Nn(G,L,$){var we=Xe;return function(W,Ae){if(we===at)throw new Error("Generator is already running");if(we===Pt){if("throw"===W)throw Ae;return{value:pe,done:!0}}for($.method=W,$.arg=Ae;;){var nt=$.delegate;if(nt){var K=jn(nt,$);if(K){if(K===At)continue;return K}}if("next"===$.method)$.sent=$._sent=$.arg;else if("throw"===$.method){if(we===Xe)throw we=Pt,$.arg;$.dispatchException($.arg)}else"return"===$.method&&$.abrupt("return",$.arg);we=at;var s=Ce(G,L,$);if("normal"===s.type){if(we=$.done?Pt:Ft,s.arg===At)continue;return{value:s.arg,done:$.done}}"throw"===s.type&&(we=Pt,$.method="throw",$.arg=s.arg)}}}function jn(G,L){var $=L.method,we=G.iterator[$];if(we===pe)return L.delegate=null,"throw"===$&&G.iterator.return&&(L.method="return",L.arg=pe,jn(G,L),"throw"===L.method)||"return"!==$&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+$+"' method")),At;var W=Ce(we,G.iterator,L.arg);if("throw"===W.type)return L.method="throw",L.arg=W.arg,L.delegate=null,At;var Ae=W.arg;return Ae?Ae.done?(L[G.resultName]=Ae.value,L.next=G.nextLoc,"return"!==L.method&&(L.method="next",L.arg=pe),L.delegate=null,At):Ae:(L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,At)}function En(G){var L={tryLoc:G[0]};1 in G&&(L.catchLoc=G[1]),2 in G&&(L.finallyLoc=G[2],L.afterLoc=G[3]),this.tryEntries.push(L)}function bn(G){var L=G.completion||{};L.type="normal",delete L.arg,G.completion=L}function An(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(En,this),this.reset(!0)}function yn(G){if(G||""===G){var L=G[St];if(L)return L.call(G);if("function"==typeof G.next)return G;if(!isNaN(G.length)){var $=-1,we=function W(){for(;++$<G.length;)if(ft.call(G,$))return W.value=G[$],W.done=!1,W;return W.value=pe,W.done=!0,W};return we.next=we}}throw new TypeError(N(G)+" is not iterable")}return Le.prototype=re,Qe(Qt,"constructor",{value:re,configurable:!0}),Qe(re,"constructor",{value:Le,configurable:!0}),Le.displayName=Pe(re,vt,"GeneratorFunction"),ae.isGeneratorFunction=function(G){var L="function"==typeof G&&G.constructor;return!!L&&(L===Le||"GeneratorFunction"===(L.displayName||L.name))},ae.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,re):(G.__proto__=re,Pe(G,vt,"GeneratorFunction")),G.prototype=Object.create(Qt),G},ae.awrap=function(G){return{__await:G}},ln(pn.prototype),Pe(pn.prototype,gt,function(){return this}),ae.AsyncIterator=pn,ae.async=function(G,L,$,we,W){void 0===W&&(W=Promise);var Ae=new pn(zt(G,L,$,we),W);return ae.isGeneratorFunction(L)?Ae:Ae.next().then(function(nt){return nt.done?nt.value:Ae.next()})},ln(Qt),Pe(Qt,vt,"Generator"),Pe(Qt,St,function(){return this}),Pe(Qt,"toString",function(){return"[object Generator]"}),ae.keys=function(G){var L=Object(G),$=[];for(var we in L)$.push(we);return $.reverse(),function W(){for(;$.length;){var Ae=$.pop();if(Ae in L)return W.value=Ae,W.done=!1,W}return W.done=!0,W}},ae.values=yn,An.prototype={constructor:An,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=pe,this.done=!1,this.delegate=null,this.method="next",this.arg=pe,this.tryEntries.forEach(bn),!L)for(var $ in this)"t"===$.charAt(0)&&ft.call(this,$)&&!isNaN(+$.slice(1))&&(this[$]=pe)},stop:function(){this.done=!0;var L=this.tryEntries[0].completion;if("throw"===L.type)throw L.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var $=this;function we(l,h){return nt.type="throw",nt.arg=L,$.next=l,h&&($.method="next",$.arg=pe),!!h}for(var W=this.tryEntries.length-1;W>=0;--W){var Ae=this.tryEntries[W],nt=Ae.completion;if("root"===Ae.tryLoc)return we("end");if(Ae.tryLoc<=this.prev){var K=ft.call(Ae,"catchLoc"),s=ft.call(Ae,"finallyLoc");if(K&&s){if(this.prev<Ae.catchLoc)return we(Ae.catchLoc,!0);if(this.prev<Ae.finallyLoc)return we(Ae.finallyLoc)}else if(K){if(this.prev<Ae.catchLoc)return we(Ae.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<Ae.finallyLoc)return we(Ae.finallyLoc)}}}},abrupt:function(L,$){for(var we=this.tryEntries.length-1;we>=0;--we){var W=this.tryEntries[we];if(W.tryLoc<=this.prev&&ft.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var Ae=W;break}}Ae&&("break"===L||"continue"===L)&&Ae.tryLoc<=$&&$<=Ae.finallyLoc&&(Ae=null);var nt=Ae?Ae.completion:{};return nt.type=L,nt.arg=$,Ae?(this.method="next",this.next=Ae.finallyLoc,At):this.complete(nt)},complete:function(L,$){if("throw"===L.type)throw L.arg;return"break"===L.type||"continue"===L.type?this.next=L.arg:"return"===L.type?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):"normal"===L.type&&$&&(this.next=$),At},finish:function(L){for(var $=this.tryEntries.length-1;$>=0;--$){var we=this.tryEntries[$];if(we.finallyLoc===L)return this.complete(we.completion,we.afterLoc),bn(we),At}},catch:function(L){for(var $=this.tryEntries.length-1;$>=0;--$){var we=this.tryEntries[$];if(we.tryLoc===L){var W=we.completion;if("throw"===W.type){var Ae=W.arg;bn(we)}return Ae}}throw new Error("illegal catch attempt")},delegateYield:function(L,$,we){return this.delegate={iterator:yn(L),resultName:$,nextLoc:we},"next"===this.method&&(this.arg=pe),At}},ae}Ze.exports=ee,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},8698:Ze=>{function Re(de){return Ze.exports=Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports,Re(de)}Ze.exports=Re,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},4687:(Ze,Re,de)=>{var N=de(7061)();Ze.exports=N;try{regeneratorRuntime=N}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=N:Function("r","regeneratorRuntime = r")(N)}},9505:(Ze,Re,de)=>{"use strict";de.d(Re,{ZP:()=>kn});const N=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ee=Object.keys,pe=Array.isArray;function ae(t,e){return"object"!=typeof e||ee(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||N.Promise||(N.Promise=Promise);const Ee=Object.getPrototypeOf,ft={}.hasOwnProperty;function Qe(t,e){return ft.call(t,e)}function Et(t,e){"function"==typeof e&&(e=e(Ee(t))),(typeof Reflect>"u"?ee:Reflect.ownKeys)(e).forEach(n=>{gt(t,n,e[n])})}const St=Object.defineProperty;function gt(t,e,n,r){St(t,e,ae(n&&Qe(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function vt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),gt(t.prototype,"constructor",t),{extend:Et.bind(null,t.prototype)}}}}const Pe=Object.getOwnPropertyDescriptor;function zt(t,e){let n;return Pe(t,e)||(n=Ee(t))&&zt(n,e)}const Ce=[].slice;function Xe(t,e,n){return Ce.call(t,e,n)}function Ft(t,e){return e(t)}function at(t){if(!t)throw new Error("Assertion Failed")}function Pt(t){N.setImmediate?setImmediate(t):setTimeout(t,0)}function At(t,e){return t.reduce((n,r,i)=>{var a=e(r,i);return a&&(n[a[0]]=a[1]),n},{})}function jt(t,e){if(Qe(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var a=jt(t,e[r]);n.push(a)}return n}var f=e.indexOf(".");if(-1!==f){var g=t[e.substr(0,f)];return void 0===g?void 0:jt(g,e.substr(f+1))}}function Le(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){at("string"!=typeof n&&"length"in n);for(var r=0,i=e.length;r<i;++r)Le(t,e[r],n[r])}else{var a=e.indexOf(".");if(-1!==a){var f=e.substr(0,a),g=e.substr(a+1);if(""===g)void 0===n?pe(t)&&!isNaN(parseInt(f))?t.splice(f,1):delete t[f]:t[f]=n;else{var y=t[f];y&&Qe(t,f)||(y=t[f]={}),Le(y,g,n)}}else void 0===n?pe(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function re(t){var e={};for(var n in t)Qe(t,n)&&(e[n]=t[n]);return e}const dt=[].concat;function It(t){return dt.apply([],t)}const Ht="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(It([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>N[t]),Qt=Ht.map(t=>N[t]);At(Ht,t=>[t,!0]);let ln=null;function pn(t){ln=typeof WeakMap<"u"&&new WeakMap;const e=Nn(t);return ln=null,e}function Nn(t){if(!t||"object"!=typeof t)return t;let e=ln&&ln.get(t);if(e)return e;if(pe(t)){e=[],ln&&ln.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Nn(t[n]))}else if(Qt.indexOf(t.constructor)>=0)e=t;else{const a=Ee(t);for(var i in e=a===Object.prototype?{}:Object.create(a),ln&&ln.set(t,e),t)Qe(t,i)&&(e[i]=Nn(t[i]))}return e}const{toString:jn}={};function En(t){return jn.call(t).slice(8,-1)}const bn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",An="symbol"==typeof bn?function(t){var e;return null!=t&&(e=t[bn])&&e.apply(t)}:function(){return null},yn={};function G(t){var e,n,r,i;if(1===arguments.length){if(pe(t))return t.slice();if(this===yn&&"string"==typeof t)return[t];if(i=An(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const L=typeof Symbol<"u"?t=>"AsyncFunction"===t[Symbol.toStringTag]:()=>!1;var $=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function we(t,e){$=t,W=e}var W=()=>!0;const Ae=!new Error("").stack;function nt(){if(Ae)try{throw new Error}catch(t){return t}return new Error}function K(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(W).map(r=>"\n"+r).join("")):""}var s=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],l=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(s),h={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function p(t,e){this._e=nt(),this.name=t,this.message=e}function E(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join("\n")}function A(t,e,n,r){this._e=nt(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=E(t,e)}function ue(t,e){this._e=nt(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=E(t,e)}vt(p).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+K(this._e,2))}},toString:function(){return this.name+": "+this.message}}),vt(A).from(p),vt(ue).from(p);var ce=l.reduce((t,e)=>(t[e]=e+"Error",t),{});const O=p;var B=l.reduce((t,e)=>{var n=e+"Error";function r(i,a){this._e=nt(),this.name=n,i?"string"==typeof i?(this.message=`${i}${a?"\n "+a:""}`,this.inner=a||null):"object"==typeof i&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=h[e]||n,this.inner=null)}return vt(r).from(O),t[e]=r,t},{});B.Syntax=SyntaxError,B.Type=TypeError,B.Range=RangeError;var Ie=s.reduce((t,e)=>(t[e+"Error"]=B[e],t),{}),Dt=l.reduce((t,e)=>(-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=B[e]),t),{});function Se(){}function _e(t){return t}function qe(t,e){return null==t||t===_e?e:function(n){return e(t(n))}}function Ve(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function rn(t,e){return t===Se?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ve(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ve(i,this.onerror):i),void 0!==a?a:n}}function xt(t,e){return t===Se?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ve(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ve(r,this.onerror):r)}}function te(t,e){return t===Se?e:function(n){var r=t.apply(this,arguments);ae(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var f=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ve(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Ve(a,this.onerror):a),void 0===r?void 0===f?void 0:f:ae(r,f)}}function lt(t,e){return t===Se?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function Ne(t,e){return t===Se?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return e.apply(r,a)})}return e.apply(this,arguments)}}Dt.ModifyError=A,Dt.DexieError=p,Dt.BulkError=ue;var bt={};const Ot=100,[Kt,P,d]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Ee(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Ee(e),t]})(),U=P&&P.then,I=Kt&&Kt.constructor,Je=!!d;var Fe=!1,ht=d?()=>{d.then(Mt)}:N.setImmediate?setImmediate.bind(null,Mt):N.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Mt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Mt,0)},rt=function(t,e){ze.push([t,e]),We&&(ht(),We=!1)},pt=!0,We=!0,kt=[],Lt=[],Ut=null,Xt=_e,on={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ye,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Ye(t[0],t[1])}catch{}})}},F=on,ze=[],wt=0,T=[];function _(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Se,this._lib=!1;var e=this._PSD=F;if($&&(this._stackHolder=nt(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==bt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&De(this,this._value))}this._state=null,this._value=null,++e.ref,X(this,t)}const D={get:function(){var t=F,e=yt;function n(r,i){var a=!t.global&&(t!==F||e!==yt);const f=a&&!u();var g=new _((y,S)=>{Be(this,new M(Te(r,t,a,f),Te(i,t,a,f),y,S,t))});return $&&Gt(g,this),g}return n.prototype=bt,n},set:function(t){gt(this,"then",t&&t.prototype===bt?D:{get:function(){return t},set:D.set})}};function M(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function X(t,e){try{e(n=>{if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Yt();n&&"function"==typeof n.then?X(t,(i,a)=>{n instanceof _?n._then(i,a):n.then(i,a)}):(t._state=!0,t._value=n,He(t)),r&&Jt()}},De.bind(null,t))}catch(n){De(t,n)}}function De(t,e){if(Lt.push(e),null===t._state){var n=t._lib&&Yt();e=Xt(e),t._state=!1,t._value=e,$&&null!==e&&"object"==typeof e&&!e._promise&&function(r,i,a){try{(()=>{var r=zt(e,"stack");e._promise=t,gt(e,"stack",{get:()=>Fe?r&&(r.get?r.get.apply(e):r.value):t.stack})}).apply(null,void 0)}catch(f){}}(),r=t,kt.some(i=>i._value===r._value)||kt.push(r),He(t),n&&Jt()}var r}function He(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Be(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===wt&&(++wt,rt(()=>{0==--wt&&fn()},[]))}function Be(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++wt,rt(ge,[n,t,e])}else t._listeners.push(e)}function ge(t,e,n){try{Ut=e;var r,i=e._value;e._state?r=t(i):(Lt.length&&(Lt=[]),r=t(i),-1===Lt.indexOf(i)&&function(a){for(var f=kt.length;f;)if(kt[--f]._value===a._value)return void kt.splice(f,1)}(e)),n.resolve(r)}catch(a){n.reject(a)}finally{Ut=null,0==--wt&&fn(),--n.psd.ref||n.psd.finalize()}}function Rt(t,e,n){if(e.length===n)return e;var r="";if(!1===t._state){var i,a,f=t._value;null!=f?(i=f.name||"Error",a=f.message||f,r=K(f,0)):(i=f,a=""),e.push(i+(a?": "+a:"")+r)}return $&&((r=K(t._stackHolder,2))&&-1===e.indexOf(r)&&e.push(r),t._prev&&Rt(t._prev,e,n)),e}function Gt(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Mt(){Yt()&&Jt()}function Yt(){var t=pt;return pt=!1,We=!1,t}function Jt(){var t,e,n;do{for(;ze.length>0;)for(t=ze,ze=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(ze.length>0);pt=!0,We=!0}function fn(){var t=kt;kt=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=T.slice(0),n=e.length;n;)e[--n]()}function $t(t){return new _(bt,!1,t)}function Ue(t,e){var n=F;return function(){var r=Yt(),i=F;try{return V(n,!0),t.apply(this,arguments)}catch(a){e&&e(a)}finally{V(i,!1),r&&Jt()}}}Et(_.prototype,{then:D,_then:function(t,e){Be(this,new M(null,null,t,e,F))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return this.then(null,"function"==typeof e?r=>r instanceof e?n(r):$t(r):r=>r&&r.name===e?n(r):$t(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),$t(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Fe=!0;var t=Rt(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{Fe=!1}}},timeout:function(t,e){return t<1/0?new _((n,r)=>{var i=setTimeout(()=>r(new B.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&gt(_.prototype,Symbol.toStringTag,"Dexie.Promise"),on.env=he(),Et(_,{all:function(){var t=G.apply(null,arguments).map(m);return new _(function(e,n){0===t.length&&e([]);var r=t.length;t.forEach((i,a)=>_.resolve(i).then(f=>{t[a]=f,--r||e(t)},n))})},resolve:t=>{if(t instanceof _)return t;if(t&&"function"==typeof t.then)return new _((n,r)=>{t.then(n,r)});var e=new _(bt,!0,t);return Gt(e,Ut),e},reject:$t,race:function(){var t=G.apply(null,arguments).map(m);return new _((e,n)=>{t.map(r=>_.resolve(r).then(e,n))})},PSD:{get:()=>F,set:t=>F=t},totalEchoes:{get:()=>yt},newPSD:c,usePSD:H,scheduler:{get:()=>rt,set:t=>{rt=t}},rejectionMapper:{get:()=>Xt,set:t=>{Xt=t}},follow:(t,e)=>new _((n,r)=>c((i,a)=>{var f=F;f.unhandleds=[],f.onunhandled=a,f.finalize=Ve(function(){var g;g=()=>{0===this.unhandleds.length?i():a(this.unhandleds[0])},T.push(function y(){g(),T.splice(T.indexOf(y),1)}),++wt,rt(()=>{0==--wt&&fn()},[])},f.finalize),t()},e,n,r))}),I&&(I.allSettled&&gt(_,"allSettled",function(){const t=G.apply(null,arguments).map(m);return new _(e=>{0===t.length&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,a)=>_.resolve(i).then(f=>r[a]={status:"fulfilled",value:f},f=>r[a]={status:"rejected",reason:f}).then(()=>--n||e(r)))})}),I.any&&typeof AggregateError<"u"&&gt(_,"any",function(){const t=G.apply(null,arguments).map(m);return new _((e,n)=>{0===t.length&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((a,f)=>_.resolve(a).then(g=>e(g),g=>{i[f]=g,--r||n(new AggregateError(i))}))})}));const je={awaits:0,echoes:0,id:0};var it=0,Ge=[],et=0,yt=0,fe=0;function c(t,e,n,r){var i=F,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++fe;var f=on.env;a.env=Je?{Promise:_,PromiseProp:{value:_,configurable:!0,writable:!0},all:_.all,race:_.race,allSettled:_.allSettled,any:_.any,resolve:_.resolve,reject:_.reject,nthen:ke(f.nthen,a),gthen:ke(f.gthen,a)}:{},e&&ae(a,e),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=H(a,t,n,r);return 0===a.ref&&a.finalize(),g}function o(){return je.id||(je.id=++it),++je.awaits,je.echoes+=Ot,je.id}function u(){return!!je.awaits&&(0==--je.awaits&&(je.id=0),je.echoes=je.awaits*Ot,!0)}function m(t){return je.echoes&&t&&t.constructor===I?(o(),t.then(e=>(u(),e),e=>(u(),be(e)))):t}function v(t){++yt,je.echoes&&0!=--je.echoes||(je.echoes=je.id=0),Ge.push(F),V(t,!0)}function Y(){var t=Ge[Ge.length-1];Ge.pop(),V(t,!1)}function V(t,e){var n=F;if((e?!je.echoes||et++&&t===F:!et||--et&&t===F)||ve(e?v.bind(null,t):Y),t!==F&&(F=t,n===on&&(on.env=he()),Je)){var r=on.env.Promise,i=t.env;P.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(N,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function he(){var t=N.Promise;return Je?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(N,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:P.then,gthen:t.prototype.then}:{}}function H(t,e,n,r,i){var a=F;try{return V(t,!0),e(n,r,i)}finally{V(a,!1)}}function ve(t){U.call(Kt,t)}function Te(t,e,n,r){return"function"!=typeof t?t:function(){var i=F;n&&o(),V(e,!0);try{return t.apply(this,arguments)}finally{V(i,!1),r&&ve(u)}}}function ke(t,e){return function(n,r){return t.call(this,Te(n,e),Te(r,e))}}-1===(""+U).indexOf("[native code]")&&(o=u=Se);const tt="unhandledrejection";function Ye(t,e){var n;try{n=e.onuncatched(t)}catch{}if(!1!==n)try{var r,i={promise:e,reason:t};if(N.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(tt,!0,!0),ae(r,i)):N.CustomEvent&&ae(r=new CustomEvent(tt,{detail:i}),i),r&&N.dispatchEvent&&(dispatchEvent(r),!N.PromiseRejectionEvent&&N.onunhandledrejection))try{N.onunhandledrejection(r)}catch{}$&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var be=_.reject;function ot(t,e,n,r){if(t.idbdb&&(t._state.openComplete||F.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(a){return a.name===ce.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ot(t,e,n,r))):be(a)}return i._promise(e,(a,f)=>c(()=>(F.trans=i,r(a,f,i)))).then(a=>i._completion.then(()=>a))}if(t._state.openComplete)return be(new B.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return be(new B.DatabaseClosed);t.open().catch(Se)}return t._state.dbReadyPromise.then(()=>ot(t,e,n,r))}const Oe=String.fromCharCode(65535),Ct=-1/0,ie="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",J="String expected.",me=[],ye=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xe=ye,Ke=ye,en=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),mt="__dbnames",Zt="readonly",tn="readwrite";function Me(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const sn={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function st(t){return"string"!=typeof t||/\./.test(t)?e=>e:e=>(void 0===e[t]&&t in e&&delete(e=pn(e))[t],e)}class an{_trans(e,n,r){const i=this._tx||F.trans,a=this.name;function f(y,S,b){if(!b.schema[a])throw new B.NotFound("Table "+a+" not part of transaction");return n(b.idbtrans,b)}const g=Yt();try{return i&&i.db===this.db?i===F.trans?i._promise(e,f,r):c(()=>i._promise(e,f,r),{trans:i,transless:F.transless||F}):ot(this.db,e,[this.name],f)}finally{g&&Jt()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(pe(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=ee(e);if(1===n.length)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(S=>S.compound&&n.every(b=>S.keyPath.indexOf(b)>=0)&&S.keyPath.every(b=>n.indexOf(b)>=0))[0];if(r&&this.db._maxKey!==Oe)return this.where(r.name).equals(r.keyPath.map(S=>e[S]));!r&&$&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,a=this.db._deps.indexedDB;function f(S,b){try{return 0===a.cmp(S,b)}catch{return!1}}const[g,y]=n.reduce(([S,b],x)=>{const w=i[x],j=e[x];return[S||w,S||!w?Me(b,w&&w.multi?Z=>{const C=jt(Z,x);return pe(C)&&C.some(q=>f(j,q))}:Z=>f(j,jt(Z,x))):b]},[null,null]);return g?this.where(g.name).equals(e[g.keyPath]).filter(y):r?this.filter(y):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,pe(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var a in r)if(Qe(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){ae(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let a=e;return i&&r&&(a=st(i)(e)),this._trans("readwrite",f=>this.core.mutate({trans:f,type:"add",keys:null!=n?[n]:null,values:[a]})).then(f=>f.numFailures?_.reject(f.failures[0]):f.lastResult).then(f=>{if(i)try{Le(e,i,f)}catch{}return f})}update(e,n){if("object"!=typeof e||pe(e))return this.where(":id").equals(e).modify(n);{const r=jt(e,this.schema.primKey.keyPath);if(void 0===r)return be(new B.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof n?ee(n).forEach(i=>{Le(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let a=e;return i&&r&&(a=st(i)(e)),this._trans("readwrite",f=>this.core.mutate({trans:f,type:"put",values:[a],keys:null!=n?[n]:null})).then(f=>f.numFailures?_.reject(f.failures[0]):f.lastResult).then(f=>{if(i)try{Le(e,i,f)}catch{}return f})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?_.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:sn})).then(e=>e.numFailures?_.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,a=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",f=>{const{auto:g,keyPath:y}=this.schema.primKey;if(y&&i)throw new B.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");const S=e.length;let b=y&&g?e.map(st(y)):e;return this.core.mutate({trans:f,type:"add",keys:i,values:b,wantResults:a}).then(({numFailures:x,results:w,lastResult:j,failures:Z})=>{if(0===x)return a?w:j;throw new ue(`${this.name}.bulkAdd(): ${x} of ${S} operations failed`,Z)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,a=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",f=>{const{auto:g,keyPath:y}=this.schema.primKey;if(y&&i)throw new B.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");const S=e.length;let b=y&&g?e.map(st(y)):e;return this.core.mutate({trans:f,type:"put",keys:i,values:b,wantResults:a}).then(({numFailures:x,results:w,lastResult:j,failures:Z})=>{if(0===x)return a?w:j;throw new ue(`${this.name}.bulkPut(): ${x} of ${S} operations failed`,Z)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:a})=>{if(0===r)return i;throw new ue(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,a)})}}function Bt(t){var e={},n=function(f,g){if(g){for(var y=arguments.length,S=new Array(y-1);--y;)S[y-1]=arguments[y];return e[f].subscribe.apply(null,S),t}if("string"==typeof f)return e[f]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(f,g,y){if("object"!=typeof f){var S;g||(g=lt),y||(y=Se);var b={subscribers:[],fire:y,subscribe:function(x){-1===b.subscribers.indexOf(x)&&(b.subscribers.push(x),b.fire=g(b.fire,x))},unsubscribe:function(x){b.subscribers=b.subscribers.filter(function(w){return w!==x}),b.fire=b.subscribers.reduce(g,y)}};return e[f]=n[f]=b,b}ee(S=f).forEach(function(x){var w=S[x];if(pe(w))a(x,S[x][0],S[x][1]);else{if("asap"!==w)throw new B.InvalidArgument("Invalid event config");var j=a(x,_e,function(){for(var Z=arguments.length,C=new Array(Z);Z--;)C[Z]=arguments[Z];j.subscribers.forEach(function(q){Pt(function(){q.apply(null,C)})})})}})}}function Wt(t,e){return vt(e).from({prototype:t}),e}function qt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Tn(t,e){t.filter=Me(t.filter,e)}function xn(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Me(r(),e()):e,t.justLimit=n&&!r}function mn(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new B.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Kn(t,e,n){const r=mn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:r,range:t.range}})}function hn(t,e,n,r){const i=t.replayFilter?Me(t.filter,t.replayFilter()):t.filter;if(t.or){const a={},f=(g,y,S)=>{if(!i||i(y,S,w=>y.stop(w),w=>y.fail(w))){var b=y.primaryKey,x=""+b;"[object ArrayBuffer]"===x&&(x=""+new Uint8Array(b)),Qe(a,x)||(a[x]=!0,e(g,y,S))}};return Promise.all([t.or._iterate(f,n),Vt(Kn(t,r,n),t.algorithm,f,!t.keysOnly&&t.valueMapper)])}return Vt(Kn(t,r,n),Me(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Vt(t,e,n,r){var i=Ue(r?(a,f,g)=>n(r(a),f,g):n);return t.then(a=>{if(a)return a.start(()=>{var f=()=>a.continue();e&&!e(a,g=>f=g,g=>{a.stop(g),f=Se},g=>{a.fail(g),f=Se})||i(a.value,a,g=>f=g),f()})})}function _t(t,e){try{const n=gn(t),r=gn(e);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,a){const f=i.length,g=a.length,y=f<g?f:g;for(let S=0;S<y;++S)if(i[S]!==a[S])return i[S]<a[S]?-1:1;return f===g?0:f<g?-1:1}(In(t),In(e));case"Array":return function(i,a){const f=i.length,g=a.length,y=f<g?f:g;for(let S=0;S<y;++S){const b=_t(i[S],a[S]);if(0!==b)return b}return f===g?0:f<g?-1:1}(t,e)}}catch{}return NaN}function gn(t){const e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";const n=En(t);return"ArrayBuffer"===n?"binary":n}function In(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Sr{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,be.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,be.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Me(n.algorithm,e)}_iterate(e,n){return hn(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&ae(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>hn(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(qt(r,!0))return i.count({trans:n,query:{index:mn(r,i.schema),range:r.range}}).then(f=>Math.min(f,r.limit));var a=0;return hn(r,()=>(++a,!1),n,i).then(()=>a)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],a=r.length-1;function f(S,b){return b?f(S[r[b]],b-1):S[i]}var g="next"===this._ctx.dir?1:-1;function y(S,b){var x=f(S,a),w=f(b,a);return x<w?-g:x>w?g:0}return this.toArray(function(S){return S.sort(y)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if("next"===r.dir&&qt(r,!0)&&r.limit>0){const{valueMapper:i}=r,a=mn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(({result:f})=>i?f.map(i):f)}{const i=[];return hn(r,a=>i.push(a),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,qt(n)?xn(n,()=>{var r=e;return(i,a)=>0===r||(1===r?(--r,!1):(a(()=>{i.advance(r),r=0}),!1))}):xn(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),xn(this._ctx,()=>{var n=e;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this}until(e,n){return Tn(this._ctx,function(r,i,a){return!e(r.value)||(i(a),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n;return Tn(this._ctx,function(i){return e(i.value)}),(n=this._ctx).isMatch=Me(n.isMatch,e),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if("next"===n.dir&&qt(n,!0)&&n.limit>0)return this._read(i=>{var a=mn(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Tn(this._ctx,function(i){var a=i.primaryKey.toString(),f=Qe(r,a);return r[a]=!0,!f}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if("function"==typeof e)i=e;else{var a=ee(e),f=a.length;i=function(C){for(var q=!1,R=0;R<f;++R){var k=a[R],Q=e[k];jt(C,k)!==Q&&(Le(C,k,Q),q=!0)}return q}}const g=n.table.core,{outbound:y,extractKey:S}=g.schema.primaryKey,b=this.db._options.modifyChunkSize||200,x=[];let w=0;const j=[],Z=(C,q)=>{const{failures:R,numFailures:k}=q;w+=C-k;for(let Q of ee(R))x.push(R[Q])};return this.clone().primaryKeys().then(C=>{const q=R=>{const k=Math.min(b,C.length-R);return g.getMany({trans:r,keys:C.slice(R,R+k),cache:"immutable"}).then(Q=>{const le=[],se=[],oe=y?[]:null,z=[];for(let ne=0;ne<k;++ne){const Nt=Q[ne],ct={value:pn(Nt),primKey:C[R+ne]};!1!==i.call(ct,ct.value,ct)&&(null==ct.value?z.push(C[R+ne]):y||0===_t(S(Nt),S(ct.value))?(se.push(ct.value),y&&oe.push(C[R+ne])):(z.push(C[R+ne]),le.push(ct.value)))}const $e=qt(n)&&n.limit===1/0&&("function"!=typeof e||e===zn)&&{index:n.index,range:n.range};return Promise.resolve(le.length>0&&g.mutate({trans:r,type:"add",values:le}).then(ne=>{for(let Nt in ne.failures)z.splice(parseInt(Nt),1);Z(le.length,ne)})).then(()=>(se.length>0||$e&&"object"==typeof e)&&g.mutate({trans:r,type:"put",keys:oe,values:se,criteria:$e,changeSpec:"function"!=typeof e&&e}).then(ne=>Z(se.length,ne))).then(()=>(z.length>0||$e&&e===zn)&&g.mutate({trans:r,type:"delete",keys:z,criteria:$e}).then(ne=>Z(z.length,ne))).then(()=>C.length>R+k&&q(R+b))})};return q(0).then(()=>{if(x.length>0)throw new A("Error modifying one or more objects",x,w,j);return C.length})})})}delete(){var e=this._ctx,n=e.range;return qt(e)&&(e.isPrimKey&&!Ke||3===n.type)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,a=n;return e.table.core.count({trans:r,query:{index:i,range:a}}).then(f=>e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(({failures:g,numFailures:b})=>{if(b)throw new A("Could not delete some values",Object.keys(g).map(x=>g[x]),f-b);return f-b}))}):this.modify(zn)}}const zn=(t,e)=>e.value=null;function Or(t,e){return t<e?-1:t===e?0:1}function Pr(t,e){return t>e?-1:t===e?0:1}function dn(t,e,n){var r=t instanceof yr?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Rn(t){return new t.Collection(t,()=>pr("")).limit(0)}function Nr(t,e,n,r,i,a){for(var f=Math.min(t.length,r.length),g=-1,y=0;y<f;++y){var S=e[y];if(S!==r[y])return i(t[y],n[y])<0?t.substr(0,y)+n[y]+n.substr(y+1):i(t[y],r[y])<0?t.substr(0,y)+r[y]+n.substr(y+1):g>=0?t.substr(0,g)+e[g]+n.substr(g+1):null;i(t[y],S)<0&&(g=y)}return f<r.length&&"next"===a?t+n.substr(t.length):f<t.length&&"prev"===a?t.substr(0,n.length):g<0?null:t.substr(0,g)+r[g]+n.substr(g+1)}function Vn(t,e,n,r){var i,a,f,g,y,S,b,x=n.length;if(!n.every(C=>"string"==typeof C))return dn(t,J);function w(C){i="next"===C?k=>k.toUpperCase():k=>k.toLowerCase(),a="next"===C?k=>k.toLowerCase():k=>k.toUpperCase(),f="next"===C?Or:Pr;var q=n.map(function(R){return{lower:a(R),upper:i(R)}}).sort(function(R,k){return f(R.lower,k.lower)});g=q.map(function(R){return R.upper}),y=q.map(function(R){return R.lower}),S=C,b="next"===C?"":r}w("next");var j=new t.Collection(t,()=>Sn(g[0],y[x-1]+r));j._ondirectionchange=function(C){w(C)};var Z=0;return j._addAlgorithm(function(C,q,R){var k=C.key;if("string"!=typeof k)return!1;var Q=a(k);if(e(Q,y,Z))return!0;for(var le=null,se=Z;se<x;++se){var oe=Nr(k,Q,g[se],y[se],f,S);null===oe&&null===le?Z=se+1:(null===le||f(le,oe)>0)&&(le=oe)}return q(null!==le?function(){C.continue(le+b)}:R),!1}),j}function Sn(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function pr(t){return{type:1,lower:t,upper:t}}class yr{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=!1!==r,i=!0===i;try{return this._cmp(e,n)>0||0===this._cmp(e,n)&&(r||i)&&(!r||!i)?Rn(this):new this.Collection(this,()=>Sn(e,n,!r,!i))}catch{return dn(this,ie)}}equals(e){return null==e?dn(this,ie):new this.Collection(this,()=>pr(e))}above(e){return null==e?dn(this,ie):new this.Collection(this,()=>Sn(e,void 0,!0))}aboveOrEqual(e){return null==e?dn(this,ie):new this.Collection(this,()=>Sn(e,void 0,!1))}below(e){return null==e?dn(this,ie):new this.Collection(this,()=>Sn(void 0,e,!1,!0))}belowOrEqual(e){return null==e?dn(this,ie):new this.Collection(this,()=>Sn(void 0,e))}startsWith(e){return"string"!=typeof e?dn(this,J):this.between(e,e+Oe,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):Vn(this,(n,r)=>0===n.indexOf(r[0]),[e],Oe)}equalsIgnoreCase(e){return Vn(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=G.apply(yn,arguments);return 0===e.length?Rn(this):Vn(this,(n,r)=>-1!==r.indexOf(n),e,"")}startsWithAnyOfIgnoreCase(){var e=G.apply(yn,arguments);return 0===e.length?Rn(this):Vn(this,(n,r)=>r.some(i=>0===n.indexOf(i)),e,Oe)}anyOf(){const e=G.apply(yn,arguments);let n=this._cmp;try{e.sort(n)}catch{return dn(this,ie)}if(0===e.length)return Rn(this);const r=new this.Collection(this,()=>Sn(e[0],e[e.length-1]));r._ondirectionchange=a=>{n="next"===a?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((a,f,g)=>{const y=a.key;for(;n(y,e[i])>0;)if(++i,i===e.length)return f(g),!1;return 0===n(y,e[i])||(f(()=>{a.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[Ct,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=G.apply(yn,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch{return dn(this,ie)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[Ct,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,a=this._descending,f=this._min,g=this._max;if(0===e.length)return Rn(this);if(!e.every(k=>void 0!==k[0]&&void 0!==k[1]&&i(k[0],k[1])<=0))return dn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",B.InvalidArgument);const y=!n||!1!==n.includeLowers,S=n&&!0===n.includeUppers;let b,x=i;function w(k,Q){return x(k[0],Q[0])}try{b=e.reduce(function(k,Q){let le=0,se=k.length;for(;le<se;++le){const oe=k[le];if(r(Q[0],oe[1])<0&&r(Q[1],oe[0])>0){oe[0]=f(oe[0],Q[0]),oe[1]=g(oe[1],Q[1]);break}}return le===se&&k.push(Q),k},[]),b.sort(w)}catch{return dn(this,ie)}let j=0;const Z=S?k=>i(k,b[j][1])>0:k=>i(k,b[j][1])>=0,C=y?k=>a(k,b[j][0])>0:k=>a(k,b[j][0])>=0;let q=Z;const R=new this.Collection(this,()=>Sn(b[0][0],b[b.length-1][1],!y,!S));return R._ondirectionchange=k=>{"next"===k?(q=Z,x=i):(q=C,x=a),b.sort(w)},R._addAlgorithm((k,Q,le)=>{for(var se=k.key;q(se);)if(++j,j===b.length)return Q(le),!1;return!((Z(oe=se)||C(oe))&&(0===this._cmp(se,b[j][1])||0===this._cmp(se,b[j][0])||Q(()=>{k.continue(x===i?b[j][0]:b[j][1])}),1));var oe}),R}startsWithAnyOf(){const e=G.apply(yn,arguments);return e.every(n=>"string"==typeof n)?0===e.length?Rn(this):this.inAnyRange(e.map(n=>[n,n+Oe])):dn(this,"startsWithAnyOf() only works with strings")}}function vn(t){return Ue(function(e){return Ln(e),t(e.target.error),!1})}function Ln(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Un="storagemutated",On="x-storagemutated-1",Pn=Bt(null,Un);class Tr{_lock(){return at(!F.global),++this._reculock,1!==this._reculock||F.global||(F.lockOwnerFor=this),this}_unlock(){if(at(!F.global),0==--this._reculock)for(F.global||(F.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{H(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&F.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(at(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new B.DatabaseClosed(r);case"MissingAPIError":throw new B.MissingAPI(r.message,r);default:throw new B.OpenFailed(r)}if(!this.active)throw new B.TransactionInactive;return at(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ue(i=>{Ln(i),this._reject(e.error)}),e.onabort=Ue(i=>{Ln(i),this.active&&this._reject(new B.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=Ue(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Pn.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if("readwrite"===e&&"readwrite"!==this.mode)return be(new B.ReadOnly("Transaction is readonly"));if(!this.active)return be(new B.TransactionInactive);if(this._locked())return new _((a,f)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(a,f)},F])});if(r)return c(()=>{var a=new _((f,g)=>{this._lock();const y=n(f,g,this);y&&y.then&&y.then(f,g)});return a.finally(()=>this._unlock()),a._lib=!0,a});var i=new _((a,f)=>{var g=n(a,f,this);g&&g.then&&g.then(a,f)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=_.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);!function f(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=f)}()}var a=n._waitingFor;return new _((f,g)=>{r.then(y=>n._waitingQueue.push(Ue(f.bind(null,y))),y=>n._waitingQueue.push(Ue(g.bind(null,y)))).finally(()=>{n._waitingFor===a&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new B.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Qe(n,e))return n[e];const r=this.schema[e];if(!r)throw new B.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function Hn(t,e,n,r,i,a,f){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:a,src:(n&&!f?"&":"")+(r?"*":"")+(i?"++":"")+mr(e)}}function mr(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function gr(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:At(n,r=>[r.name,r])}}let Mn=t=>{try{return t.only([[]]),Mn=()=>[[]],[[]]}catch{return Mn=()=>Oe,Oe}};function Qn(t){return null==t?()=>{}:"string"==typeof t?1===(e=t).split(".").length?r=>r[e]:r=>jt(r,e):e=>jt(e,t);var e}function vr(t){return[].slice.call(t)}let Ir=0;function $n(t){return null==t?":id":"string"==typeof t?t:`[${t.join("+")}]`}function kr(t,e,n){function r(y){if(3===y.type)return null;if(4===y.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:S,upper:b,lowerOpen:x,upperOpen:w}=y;return void 0===S?void 0===b?null:e.upperBound(b,!!w):void 0===b?e.lowerBound(S,!!x):e.bound(S,b,!!x,!!w)}const{schema:i,hasGetAll:a}=function(y,S){const b=vr(y.objectStoreNames);return{schema:{name:y.name,tables:b.map(x=>S.objectStore(x)).map(x=>{const{keyPath:w,autoIncrement:j}=x,Z=pe(w),q={},R={name:x.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==w,compound:Z,keyPath:w,autoIncrement:j,unique:!0,extractKey:Qn(w)},indexes:vr(x.indexNames).map(k=>x.index(k)).map(k=>{const{name:Q,unique:le,multiEntry:se,keyPath:oe}=k,z={name:Q,compound:pe(oe),keyPath:oe,unique:le,multiEntry:se,extractKey:Qn(oe)};return q[$n(oe)]=z,z}),getIndexByKeyPath:k=>q[$n(k)]};return q[":id"]=R.primaryKey,null!=w&&(q[$n(w)]=R.primaryKey),R})},hasGetAll:b.length>0&&"getAll"in S.objectStore(b[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),f=i.tables.map(y=>function(S){const b=S.name;return{name:b,schema:S,mutate:function({trans:x,type:w,keys:j,values:Z,range:C}){return new Promise((q,R)=>{q=Ue(q);const k=x.objectStore(b),Q=null==k.keyPath,le="put"===w||"add"===w;if(!le&&"delete"!==w&&"deleteRange"!==w)throw new Error("Invalid operation type: "+w);const{length:se}=j||Z||{length:1};if(j&&Z&&j.length!==Z.length)throw new Error("Given keys array must have same length as given values array.");if(0===se)return q({numFailures:0,failures:{},results:[],lastResult:void 0});let oe;const z=[],$e=[];let ne=0;const Nt=un=>{++ne,Ln(un)};if("deleteRange"===w){if(4===C.type)return q({numFailures:ne,failures:$e,results:[],lastResult:void 0});z.push(oe=3===C.type?k.clear():k.delete(r(C)))}else{const[un,nn]=le?Q?[Z,j]:[Z,null]:[j,null];if(le)for(let Tt=0;Tt<se;++Tt)z.push(oe=nn&&void 0!==nn[Tt]?k[w](un[Tt],nn[Tt]):k[w](un[Tt])),oe.onerror=Nt;else for(let Tt=0;Tt<se;++Tt)z.push(oe=k[w](un[Tt])),oe.onerror=Nt}const ct=un=>{const nn=un.target.result;z.forEach((Tt,Fn)=>null!=Tt.error&&($e[Fn]=Tt.error)),q({numFailures:ne,failures:$e,results:"delete"===w?j:z.map(Tt=>Tt.result),lastResult:nn})};oe.onerror=un=>{Nt(un),ct(un)},oe.onsuccess=ct})},getMany:({trans:x,keys:w})=>new Promise((j,Z)=>{j=Ue(j);const C=x.objectStore(b),q=w.length,R=new Array(q);let k,Q=0,le=0;const se=z=>{const $e=z.target;R[$e._pos]=$e.result,++le===Q&&j(R)},oe=vn(Z);for(let z=0;z<q;++z)null!=w[z]&&(k=C.get(w[z]),k._pos=z,k.onsuccess=se,k.onerror=oe,++Q);0===Q&&j(R)}),get:({trans:x,key:w})=>new Promise((j,Z)=>{j=Ue(j);const C=x.objectStore(b).get(w);C.onsuccess=q=>j(q.target.result),C.onerror=vn(Z)}),query:(x=a,w=>new Promise((j,Z)=>{j=Ue(j);const{trans:C,values:q,limit:R,query:k}=w,Q=R===1/0?void 0:R,{index:le,range:se}=k,oe=C.objectStore(b),z=le.isPrimaryKey?oe:oe.index(le.name),$e=r(se);if(0===R)return j({result:[]});if(x){const ne=q?z.getAll($e,Q):z.getAllKeys($e,Q);ne.onsuccess=Nt=>j({result:Nt.target.result}),ne.onerror=vn(Z)}else{let ne=0;const Nt=q||!("openKeyCursor"in z)?z.openCursor($e):z.openKeyCursor($e),ct=[];Nt.onsuccess=un=>{const nn=Nt.result;return nn?(ct.push(q?nn.value:nn.primaryKey),++ne===R?j({result:ct}):void nn.continue()):j({result:ct})},Nt.onerror=vn(Z)}})),openCursor:function({trans:x,values:w,query:j,reverse:Z,unique:C}){return new Promise((q,R)=>{q=Ue(q);const{index:k,range:Q}=j,le=x.objectStore(b),se=k.isPrimaryKey?le:le.index(k.name),oe=Z?C?"prevunique":"prev":C?"nextunique":"next",z=w||!("openKeyCursor"in se)?se.openCursor(r(Q),oe):se.openKeyCursor(r(Q),oe);z.onerror=vn(R),z.onsuccess=Ue($e=>{const ne=z.result;if(!ne)return void q(null);ne.___id=++Ir,ne.done=!1;const Nt=ne.continue.bind(ne);let ct=ne.continuePrimaryKey;ct&&(ct=ct.bind(ne));const un=ne.advance.bind(ne),nn=()=>{throw new Error("Cursor not stopped")};ne.trans=x,ne.stop=ne.continue=ne.continuePrimaryKey=ne.advance=()=>{throw new Error("Cursor not started")},ne.fail=Ue(R),ne.next=function(){let Tt=1;return this.start(()=>Tt--?this.continue():this.stop()).then(()=>this)},ne.start=Tt=>{const Fn=new Promise((cn,Bn)=>{cn=Ue(cn),z.onerror=vn(Bn),ne.fail=Bn,ne.stop=qn=>{ne.stop=ne.continue=ne.continuePrimaryKey=ne.advance=nn,cn(qn)}}),Dn=()=>{if(z.result)try{Tt()}catch(cn){ne.fail(cn)}else ne.done=!0,ne.start=()=>{throw new Error("Cursor behind last entry")},ne.stop()};return z.onsuccess=Ue(cn=>{z.onsuccess=Dn,Dn()}),ne.continue=Nt,ne.continuePrimaryKey=ct,ne.advance=un,Dn(),Fn},q(ne)},R)})},count({query:x,trans:w}){const{index:j,range:Z}=x;return new Promise((C,q)=>{const R=w.objectStore(b),k=j.isPrimaryKey?R:R.index(j.name),Q=r(Z),le=Q?k.count(Q):k.count();le.onsuccess=Ue(se=>C(se.target.result)),le.onerror=vn(q)})}};var x}(y)),g={};return f.forEach(y=>g[y.name]=y),{stack:"dbcore",transaction:t.transaction.bind(t),table(y){if(!g[y])throw new Error(`Table '${y}' not found`);return g[y]},MIN_KEY:-1/0,MAX_KEY:Mn(e),schema:i}}function Xn({_novip:t},e){const r=function(i,a,{IDBKeyRange:f},y){return{dbcore:(b=kr(a,f,y),x=i.dbcore,x.reduce((w,{create:j})=>({...w,...j(w)}),b))};var b,x}(t._middlewares,e.db,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const a=i.name;t.core.schema.tables.some(f=>f.name===a)&&(i.core=t.core.table(a),t[a]instanceof t.Table&&(t[a].core=i.core))})}function Gn({_novip:t},e,n,r){n.forEach(i=>{const a=r[i];e.forEach(f=>{const g=zt(f,i);(!g||"value"in g&&void 0===g.value)&&(f===t.Transaction.prototype||f instanceof t.Transaction?gt(f,i,{get(){return this.table(i)},set(y){St(this,i,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):f[i]=new t.Table(i,a))})})}function er({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Cr(t,e){return t._cfg.version-e._cfg.version}function br(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],a=e[r];if(i){const f={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!ye)f.recreate=!0,n.change.push(f);else{const g=i.idxByName,y=a.idxByName;let S;for(S in g)y[S]||f.del.push(S);for(S in y){const b=g[S],x=y[S];b?b.src!==x.src&&f.change.push(x):f.add.push(x)}(f.del.length>0||f.add.length>0||f.change.length>0)&&n.change.push(f)}}else n.add.push([r,a])}return n}function tr(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(a=>nr(i,a)),i}function nr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function rr(t,e,n){const r={};return Xe(e.objectStoreNames,0).forEach(i=>{const a=n.objectStore(i);let f=a.keyPath;const g=Hn(mr(f),f||"",!1,!1,!!a.autoIncrement,f&&"string"!=typeof f,!0),y=[];for(let b=0;b<a.indexNames.length;++b){const x=a.index(a.indexNames[b]);f=x.keyPath;var S=Hn(x.name,f,!!x.unique,!!x.multiEntry,!1,f&&"string"!=typeof f,!1);y.push(S)}r[i]=gr(i,g,y)}),r}function ir({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const a=r[i],f=n.objectStore(a);t._hasGetAll="getAll"in f;for(let g=0;g<f.indexNames.length;++g){const y=f.indexNames[g],S=f.index(y).keyPath,b="string"==typeof S?S:"["+Xe(S).join("+")+"]";if(e[a]){const x=e[a].idxByName[b];x&&(x.name=y,delete e[a].idxByName[b],e[a].idxByName[y]=x)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&N.WorkerGlobalScope&&N instanceof N.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class jr{_parseStoresSpec(e,n){ee(e).forEach(r=>{if(null!==e[r]){var i=e[r].split(",").map((f,g)=>{const y=(f=f.trim()).replace(/([&*]|\+\+)/g,""),S=/^\[/.test(y)?y.match(/^\[(.*)\]$/)[1].split("+"):y;return Hn(y,S||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),pe(S),0===g)}),a=i.shift();if(a.multi)throw new B.Schema("Primary key cannot be multi-valued");i.forEach(f=>{if(f.auto)throw new B.Schema("Only primary key can be marked as autoIncrement (++)");if(!f.keyPath)throw new B.Schema("Index must have a name and cannot be an empty string")}),n[r]=gr(r,a,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?ae(this._cfg.storesSource,e):e;const i={};let a={};return n._versions.forEach(f=>{ae(i,f._cfg.storesSource),a=f._cfg.dbschema={},f._parseStoresSpec(i,a)}),n._dbSchema=a,er(n,[n._allTables,n,n.Transaction.prototype]),Gn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ee(a),a),n._storeNames=ee(a),this}upgrade(e){return this._cfg.contentUpgrade=Ne(this._cfg.contentUpgrade||Se,e),this}}function or(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new kn(mt,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function sr(t){return t&&"function"==typeof t.databases}function ar(t){return c(function(){return F.letThrough=!0,t()})}function Kr(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function ur(t){var e=a=>t.next(a),n=i(e),r=i(a=>t.throw(a));function i(a){return f=>{var g=a(f),y=g.value;return g.done?y:y&&"function"==typeof y.then?y.then(n,r):pe(y)?Promise.all(y).then(n,r):n(y)}}return i(e)()}function Fr(t,e,n){var r=arguments.length;if(r<2)throw new B.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,It(i),n]}function wr(t,e,n,r,i){return _.resolve().then(()=>{const a=F.transless||F,f=t._createTransaction(e,n,t._dbSchema,r),g={trans:f,transless:a};if(r)f.idbtrans=r.idbtrans;else try{f.create(),t._state.PR1398_maxLoop=3}catch(x){return x.name===ce.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>wr(t,e,n,null,i))):be(x)}const y=L(i);let S;y&&o();const b=_.follow(()=>{if(S=i.call(f,f),S)if(y){var x=u.bind(null,null);S.then(x,x)}else"function"==typeof S.next&&"function"==typeof S.throw&&(S=ur(S))},g);return(S&&"function"==typeof S.then?_.resolve(S).then(x=>f.active?x:be(new B.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):b.then(()=>S)).then(x=>(r&&f._resolve(),f._completion.then(()=>x))).catch(x=>(f._reject(x),be(x)))})}function Yn(t,e,n){const r=pe(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const Dr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},a=[];function f(b,x,w){const j=$n(b),Z=i[j]=i[j]||[],C=null==b?0:"string"==typeof b?1:b.length,q=x>0,R={...w,isVirtual:q,keyTail:x,keyLength:C,extractKey:Qn(b),unique:!q&&w.unique};return Z.push(R),R.isPrimaryKey||a.push(R),C>1&&f(2===C?b[0]:b.slice(0,C-1),x+1,w),Z.sort((k,Q)=>k.keyTail-Q.keyTail),R}const g=f(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[g];for(const b of r.indexes)f(b.keyPath,0,b);function y(b){const x=b.query.index;return x.isVirtual?{...b,query:{index:x,range:(w=b.query.range,j=x.keyTail,{type:1===w.type?2:w.type,lower:Yn(w.lower,w.lowerOpen?t.MAX_KEY:t.MIN_KEY,j),lowerOpen:!0,upper:Yn(w.upper,w.upperOpen?t.MIN_KEY:t.MAX_KEY,j),upperOpen:!0})}}:b;var w,j}return{...n,schema:{...r,primaryKey:g,indexes:a,getIndexByKeyPath:function(b){const x=i[$n(b)];return x&&x[0]}},count:b=>n.count(y(b)),query:b=>n.query(y(b)),openCursor(b){const{keyTail:x,isVirtual:w,keyLength:j}=b.query.index;return w?n.openCursor(y(b)).then(Z=>{return Z&&(C=Z,Object.create(C,{continue:{value:function(R){null!=R?C.continue(Yn(R,b.reverse?t.MAX_KEY:t.MIN_KEY,x)):b.unique?C.continue(C.key.slice(0,j).concat(b.reverse?t.MIN_KEY:t.MAX_KEY,x)):C.continue()}},continuePrimaryKey:{value(R,k){C.continuePrimaryKey(Yn(R,t.MAX_KEY,x),k)}},primaryKey:{get:()=>C.primaryKey},key:{get(){const R=C.key;return 1===j?R[0]:R.slice(0,j)}},value:{get:()=>C.value}}));var C}):n.openCursor(b)}}}}}};function cr(t,e,n,r){return n=n||{},r=r||"",ee(t).forEach(i=>{if(Qe(e,i)){var a=t[i],f=e[i];if("object"==typeof a&&"object"==typeof f&&a&&f){const g=En(a);g!==En(f)?n[r+i]=e[i]:"Object"===g?cr(a,f,n,r+i+"."):a!==f&&(n[r+i]=e[i])}else a!==f&&(n[r+i]=e[i])}else n[r+i]=void 0}),ee(e).forEach(i=>{Qe(t,i)||(n[r+i]=e[i])}),n}const Lr={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(a){const f=F.trans,{deleting:g,creating:y,updating:S}=f.table(e).hook;switch(a.type){case"add":if(y.fire===Se)break;return f._promise("readwrite",()=>b(a),!0);case"put":if(y.fire===Se&&S.fire===Se)break;return f._promise("readwrite",()=>b(a),!0);case"delete":if(g.fire===Se)break;return f._promise("readwrite",()=>b(a),!0);case"deleteRange":if(g.fire===Se)break;return f._promise("readwrite",()=>{return x((w=a).trans,w.range,1e4);var w},!0)}return n.mutate(a);function b(w){const j=F.trans,Z=w.keys||("delete"===(q=w).type?q.keys:q.keys||q.values.map(r.extractKey));var q;if(!Z)throw new Error("Keys missing");return"delete"!==(w="add"===w.type||"put"===w.type?{...w,keys:Z}:{...w}).type&&(w.values=[...w.values]),w.keys&&(w.keys=[...w.keys]),function(C,q,R){return"add"===q.type?Promise.resolve([]):C.getMany({trans:q.trans,keys:R,cache:"immutable"})}(n,w,Z).then(C=>{const q=Z.map((R,k)=>{const Q=C[k],le={onerror:null,onsuccess:null};if("delete"===w.type)g.fire.call(le,R,Q,j);else if("add"===w.type||void 0===Q){const se=y.fire.call(le,R,w.values[k],j);null==R&&null!=se&&(w.keys[k]=R=se,r.outbound||Le(w.values[k],r.keyPath,R))}else{const se=cr(Q,w.values[k]),oe=S.fire.call(le,se,R,Q,j);if(oe){const z=w.values[k];Object.keys(oe).forEach($e=>{Qe(z,$e)?z[$e]=oe[$e]:Le(z,$e,oe[$e])})}}return le});return n.mutate(w).then(({failures:R,results:k,numFailures:Q,lastResult:le})=>{for(let se=0;se<Z.length;++se){const oe=k?k[se]:Z[se],z=q[se];null==oe?z.onerror&&z.onerror(R[se]):z.onsuccess&&z.onsuccess("put"===w.type&&C[se]?w.values[se]:oe)}return{failures:R,results:k,numFailures:Q,lastResult:le}}).catch(R=>(q.forEach(k=>k.onerror&&k.onerror(R)),Promise.reject(R)))})}function x(w,j,Z){return n.query({trans:w,values:!1,query:{index:r,range:j},limit:Z}).then(({result:C})=>b({type:"delete",keys:C,trans:w}).then(q=>q.numFailures>0?Promise.reject(q.failures[0]):C.length<Z?{failures:[],numFailures:0,lastResult:void 0}:x(w,{...j,lower:C[C.length-1],lowerOpen:!0},Z)))}}}}})};function _r(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,a=0;i<e.keys.length&&a<t.length;++i)0===_t(e.keys[i],t[a])&&(r.push(n?pn(e.values[i]):e.values[i]),++a);return r.length===t.length?r:null}catch{return null}}const Ur={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=_r(r.keys,r.trans._cache,"clone"===r.cache);return i?_.resolve(i):n.getMany(r).then(a=>(r.trans._cache={keys:r.keys,values:"clone"===r.cache?pn(a):a},a))},mutate:r=>("add"!==r.type&&(r.trans._cache=null),n.mutate(r))}}})};function lr(t){return!("from"in t)}const wn=function(t,e){if(!this){const n=new wn;return t&&"d"in t&&ae(n,t),n}ae(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Zn(t,e,n){const r=_t(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(lr(t))return ae(t,{from:e,to:n,d:1});const i=t.l,a=t.r;if(_t(n,t.from)<0)return i?Zn(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Er(t);if(_t(e,t.to)>0)return a?Zn(a,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Er(t);_t(e,t.from)<0&&(t.from=e,t.l=null,t.d=a?a.d+1:1),_t(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const f=!t.r;i&&!t.l&&Jn(t,i),a&&f&&Jn(t,a)}function Jn(t,e){lr(e)||function n(r,{from:i,to:a,l:f,r:g}){Zn(r,i,a),f&&n(r,f),g&&n(r,g)}(t,e)}function fr(t){let e=lr(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&_t(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||_t(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Er(t){var e,n;const r=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(n=t.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const a="r"===i?"l":"r",f={...t},g=t[i];t.from=g.from,t.to=g.to,t[i]=g[i],f[i]=g[a],t[a]=f,f.d=Ar(f)}t.d=Ar(t)}function Ar({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Et(wn.prototype,{add(t){return Jn(this,t),this},addKey(t){return Zn(this,t,t),this},addKeys(t){return t.forEach(e=>Zn(this,e,e)),this},[bn](){return fr(this)}});const $r={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new wn(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:a}=i,{primaryKey:f}=a,{extractKey:g,outbound:y}=f,S={...i,mutate:w=>{const j=w.trans,Z=j.mutatedParts||(j.mutatedParts={}),C=oe=>{const z=`idb://${e}/${r}/${oe}`;return Z[z]||(Z[z]=new wn)},q=C(""),R=C(":dels"),{type:k}=w;let[Q,le]="deleteRange"===w.type?[w.range]:"delete"===w.type?[w.keys]:w.values.length<50?[[],w.values]:[];const se=w.trans._cache;return i.mutate(w).then(oe=>{if(pe(Q)){"delete"!==k&&(Q=oe.results),q.addKeys(Q);const z=_r(Q,se);z||"add"===k||R.addKeys(Q),(z||le)&&($e=C,Nt=z,ct=le,a.indexes.forEach(function un(nn){const Tt=$e(nn.name||"");function Fn(cn){return null!=cn?nn.extractKey(cn):null}const Dn=cn=>nn.multiEntry&&pe(cn)?cn.forEach(Bn=>Tt.addKey(Bn)):Tt.addKey(cn);(Nt||ct).forEach((cn,Bn)=>{const qn=Nt&&Fn(Nt[Bn]),dr=ct&&Fn(ct[Bn]);0!==_t(qn,dr)&&(null!=qn&&Dn(qn),null!=dr&&Dn(dr))})}))}else if(Q){const z={from:Q.lower,to:Q.upper};R.add(z),q.add(z)}else q.add(n),R.add(n),a.indexes.forEach(z=>C(z.name).add(n));var $e,Nt,ct;return oe})}},b=({query:{index:w,range:j}})=>{var Z,C;return[w,new wn(null!==(Z=j.lower)&&void 0!==Z?Z:t.MIN_KEY,null!==(C=j.upper)&&void 0!==C?C:t.MAX_KEY)]},x={get:w=>[f,new wn(w.key)],getMany:w=>[f,(new wn).addKeys(w.keys)],count:b,query:b,openCursor:b};return ee(x).forEach(w=>{S[w]=function(j){const{subscr:Z}=F;if(Z){const C=le=>{const se=`idb://${e}/${r}/${le}`;return Z[se]||(Z[se]=new wn)},q=C(""),R=C(":dels"),[k,Q]=x[w](j);if(C(k.name||"").add(Q),!k.isPrimaryKey){if("count"!==w){const le="query"===w&&y&&j.values&&i.query({...j,values:!1});return i[w].apply(this,arguments).then(se=>{if("query"===w){if(y&&j.values)return le.then(({result:z})=>(q.addKeys(z),se));const oe=j.values?se.result.map(g):se.result;j.values?q.addKeys(oe):R.addKeys(oe)}else if("openCursor"===w){const oe=se,z=j.values;return oe&&Object.create(oe,{key:{get:()=>(R.addKey(oe.primaryKey),oe.key)},primaryKey:{get(){const $e=oe.primaryKey;return R.addKey($e),$e}},value:{get:()=>(z&&q.addKey(oe.primaryKey),oe.value)}})}return se})}R.add(n)}}return i[w].apply(this,arguments)}}),S}}}};class kn{constructor(e,n){this._middlewares={},this.verno=0;const r=kn.dependencies;this._options=n={addons:kn.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var f,g;a.dbReadyPromise=new _(g=>{a.dbReadyResolve=g}),a.openCanceller=new _((g,y)=>{a.cancelOpen=y}),this._state=a,this.name=e,this.on=Bt(this,"populate","blocked","versionchange","close",{ready:[Ne,Se]}),this.on.ready.subscribe=Ft(this.on.ready.subscribe,g=>(y,S)=>{kn.vip(()=>{const b=this._state;if(b.openComplete)b.dbOpenError||_.resolve().then(y),S&&g(y);else if(b.onReadyBeingFired)b.onReadyBeingFired.push(y),S&&g(y);else{g(y);const x=this;S||g(function w(){x.on.ready.unsubscribe(y),x.on.ready.unsubscribe(w)})}})}),this.Collection=(f=this,Wt(Sr.prototype,function(g,y){this.db=f;let S=sn,b=null;if(y)try{S=y()}catch(Z){b=Z}const x=g._ctx,w=x.table,j=w.hook.reading.fire;this._ctx={table:w,index:x.index,isPrimKey:!x.index||w.schema.primKey.keyPath&&x.index===w.schema.primKey.name,range:S,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:b,or:x.or,valueMapper:j!==_e?j:null}})),this.Table=(g=this,Wt(an.prototype,function(y,S,b){this.db=g,this._tx=b,this.name=y,this.schema=S,this.hook=g._allTables[y]?g._allTables[y].hook:Bt(null,{creating:[rn,Se],reading:[qe,_e],updating:[te,Se],deleting:[xt,Se]})})),this.Transaction=function(g){return Wt(Tr.prototype,function(y,S,b,x,w){this.db=g,this.mode=y,this.storeNames=S,this.schema=b,this.chromeTransactionDurability=x,this.idbtrans=null,this.on=Bt(this,"complete","error","abort"),this.parent=w||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _((j,Z)=>{this._resolve=j,this._reject=Z}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},j=>{var Z=this.active;return this.active=!1,this.on.error.fire(j),this.parent?this.parent._reject(j):Z&&this.idbtrans&&this.idbtrans.abort(),be(j)})})}(this),this.Version=function(g){return Wt(jr.prototype,function(y){this.db=g,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(g){return Wt(yr.prototype,function(y,S,b){this.db=g,this._ctx={table:y,index:":id"===S?null:S,or:b};const x=g._deps.indexedDB;if(!x)throw new B.MissingAPI;this._cmp=this._ascending=x.cmp.bind(x),this._descending=(w,j)=>x.cmp(j,w),this._max=(w,j)=>x.cmp(w,j)>0?w:j,this._min=(w,j)=>x.cmp(w,j)<0?w:j,this._IDBKeyRange=g._deps.IDBKeyRange})}(this),this.on("versionchange",g=>{g.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",g=>{!g.newVersion||g.newVersion<g.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${g.oldVersion/10}`)}),this._maxKey=Mn(n.IDBKeyRange),this._createTransaction=(g,y,S,b)=>new this.Transaction(g,y,S,this._options.chromeTransactionDurability,b),this._fireOnBlocked=g=>{this.on("blocked").fire(g),me.filter(y=>y.name===this.name&&y!==this&&!y._state.vcFired).map(y=>y.on("versionchange").fire(g))},this.use(Dr),this.use(Lr),this.use($r),this.use(Ur),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(g=>g(this))}version(e){if(isNaN(e)||e<.1)throw new B.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new B.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Cr),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||F.letThrough||this._vip)?e():new _((n,r)=>{if(this._state.openComplete)return r(new B.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new B.DatabaseClosed);this.open().catch(Se)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const a=this._middlewares[e]||(this._middlewares[e]=[]);return a.push({stack:e,create:n,level:r??10,name:i}),a.sort((f,g)=>f.level-g.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return function Rr(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?be(e.dbOpenError):t);$&&(e.openCanceller._stackHolder=nt()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new B.DatabaseClosed("db.open() was cancelled")}let a=e.dbReadyResolve,f=null,g=!1;return _.race([r,(typeof navigator>"u"?_.resolve():Kr()).then(()=>new _((y,S)=>{if(i(),!n)throw new B.MissingAPI;const b=t.name,x=e.autoSchema?n.open(b):n.open(b,Math.round(10*t.verno));if(!x)throw new B.MissingAPI;x.onerror=vn(S),x.onblocked=Ue(t._fireOnBlocked),x.onupgradeneeded=Ue(w=>{if(f=x.transaction,e.autoSchema&&!t._options.allowEmptyDB){x.onerror=Ln,f.abort(),x.result.close();const Z=n.deleteDatabase(b);Z.onsuccess=Z.onerror=Ue(()=>{S(new B.NoSuchDatabase(`Database ${b} doesnt exist`))})}else{f.onerror=vn(S);var j=w.oldVersion>Math.pow(2,62)?0:w.oldVersion;g=j<1,t._novip.idbdb=x.result,function Br(t,e,n,r){const i=t._dbSchema,a=t._createTransaction("readwrite",t._storeNames,i);a.create(n),a._completion.catch(r);const f=a._reject.bind(a),g=F.transless||F;c(()=>{F.trans=a,F.transless=g,0===e?(ee(i).forEach(y=>{tr(n,y,i[y].primKey,i[y].indexes)}),Xn(t,n),_.follow(()=>t.on.populate.fire(a)).catch(f)):function({_novip:y},S,b,x){const w=[],j=y._versions;let Z=y._dbSchema=rr(0,y.idbdb,x),C=!1;return j.filter(k=>k._cfg.version>=S).forEach(k=>{w.push(()=>{const Q=Z,le=k._cfg.dbschema;ir(y,Q,x),ir(y,le,x),Z=y._dbSchema=le;const se=br(Q,le);se.add.forEach(z=>{tr(x,z[0],z[1].primKey,z[1].indexes)}),se.change.forEach(z=>{if(z.recreate)throw new B.Upgrade("Not yet support for changing primary key");{const $e=x.objectStore(z.name);z.add.forEach(ne=>nr($e,ne)),z.change.forEach(ne=>{$e.deleteIndex(ne.name),nr($e,ne)}),z.del.forEach(ne=>$e.deleteIndex(ne))}});const oe=k._cfg.contentUpgrade;if(oe&&k._cfg.version>S){Xn(y,x),b._memoizedTables={},C=!0;let z=re(le);se.del.forEach(ct=>{z[ct]=Q[ct]}),er(y,[y.Transaction.prototype]),Gn(y,[y.Transaction.prototype],ee(z),z),b.schema=z;const $e=L(oe);let ne;$e&&o();const Nt=_.follow(()=>{if(ne=oe(b),ne&&$e){var ct=u.bind(null,null);ne.then(ct,ct)}});return ne&&"function"==typeof ne.then?_.resolve(ne):Nt.then(()=>ne)}}),w.push(Q=>{var le,se;(!C||!xe)&&(le=k._cfg.dbschema,[].slice.call((se=Q).db.objectStoreNames).forEach(oe=>null==le[oe]&&se.db.deleteObjectStore(oe))),er(y,[y.Transaction.prototype]),Gn(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),b.schema=y._dbSchema})}),function R(){return w.length?_.resolve(w.shift()(b.idbtrans)).then(R):_.resolve()}().then(()=>{var k,Q;Q=x,ee(k=Z).forEach(le=>{Q.db.objectStoreNames.contains(le)||tr(Q,le,k[le].primKey,k[le].indexes)})})}(t,e,a,n).catch(f)})}(t,j/10,f,S)}},S),x.onsuccess=Ue(()=>{f=null;const w=t._novip.idbdb=x.result,j=Xe(w.objectStoreNames);if(j.length>0)try{const C=w.transaction(1===(Z=j).length?Z[0]:Z,"readonly");e.autoSchema?function({_novip:q},R,k){q.verno=R.version/10;const Q=q._dbSchema=rr(0,R,k);q._storeNames=Xe(R.objectStoreNames,0),Gn(q,[q._allTables],ee(Q),Q)}(t,w,C):(ir(t,t._dbSchema,C),function(q,R){const k=br(rr(0,q.idbdb,R),q._dbSchema);return!(k.add.length||k.change.some(Q=>Q.add.length||Q.change.length))}(t,C)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Xn(t,C)}catch{}var Z;me.push(t),w.onversionchange=Ue(C=>{e.vcFired=!0,t.on("versionchange").fire(C)}),w.onclose=Ue(C=>{t.on("close").fire(C)}),g&&function({indexedDB:C,IDBKeyRange:q},R){!sr(C)&&R!==mt&&or(C,q).put({name:R}).catch(Se)}(t._deps,b),y()},S)}))]).then(()=>(i(),e.onReadyBeingFired=[],_.resolve(ar(()=>t.on.ready.fire(t.vip))).then(function y(){if(e.onReadyBeingFired.length>0){let S=e.onReadyBeingFired.reduce(Ne,Se);return e.onReadyBeingFired=[],_.resolve(ar(()=>S(t.vip))).then(y)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(y=>{e.dbOpenError=y;try{f&&f.abort()}catch{}return r===e.openCanceller&&t._close(),be(y)}).finally(()=>{e.openComplete=!0,a()})}(this)}_close(){const e=this._state,n=me.indexOf(this);if(n>=0&&me.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new _(r=>{e.dbReadyResolve=r}),e.openCanceller=new _((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new B.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new _((r,i)=>{const a=()=>{this.close();var f=this._deps.indexedDB.deleteDatabase(this.name);f.onsuccess=Ue(()=>{(function({indexedDB:g,IDBKeyRange:y},S){!sr(g)&&S!==mt&&or(g,y).delete(S).catch(Se)})(this._deps,this.name),r()}),f.onerror=vn(i),f.onblocked=this._fireOnBlocked};if(e)throw new B.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(a):a()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ee(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Fr.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=F.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);const a=-1!==e.indexOf("?");let f,g;e=e.replace("!","").replace("?","");try{if(g=n.map(S=>{var b=S instanceof this.Table?S.name:S;if("string"!=typeof b)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return b}),"r"==e||e===Zt)f=Zt;else{if("rw"!=e&&e!=tn)throw new B.InvalidArgument("Invalid transaction mode: "+e);f=tn}if(i){if(i.mode===Zt&&f===tn){if(!a)throw new B.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&g.forEach(S=>{if(i&&-1===i.storeNames.indexOf(S)){if(!a)throw new B.SubTransaction("Table "+S+" not included in parent transaction.");i=null}}),a&&i&&!i.active&&(i=null)}}catch(S){return i?i._promise(null,(b,x)=>{x(S)}):be(S)}const y=wr.bind(null,this,f,g,i,r);return i?i._promise(f,y,"lock"):F.trans?H(F.transless,()=>this._whenReady(y)):this._whenReady(y)}table(e){if(!Qe(this._allTables,e))throw new B.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Zr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class qr{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:n,complete:r})}[Zr](){return this}}function xr(t,e){return ee(e).forEach(n=>{Jn(t[n]||(t[n]=new wn),e[n])}),t}let hr;try{hr={indexedDB:N.indexedDB||N.mozIndexedDB||N.webkitIndexedDB||N.msIndexedDB,IDBKeyRange:N.IDBKeyRange||N.webkitIDBKeyRange}}catch{hr={indexedDB:null,IDBKeyRange:null}}const Cn=kn;function Wn(t){let e=_n;try{_n=!0,Pn.storagemutated.fire(t)}finally{_n=e}}Et(Cn,{...Dt,delete:t=>new Cn(t,{addons:[]}).delete(),exists:t=>new Cn(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return sr(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==mt)):or(e,n).toCollection().primaryKeys()}(Cn.dependencies).then(t)}catch{return be(new B.MissingAPI)}},defineClass:()=>function(t){ae(this,t)},ignoreTransaction:t=>F.trans?H(F.transless,t):t(),vip:ar,async:function(t){return function(){try{var e=ur(t.apply(this,arguments));return e&&"function"==typeof e.then?e:_.resolve(e)}catch(n){return be(n)}}},spawn:function(t,e,n){try{var r=ur(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:_.resolve(r)}catch(i){return be(i)}},currentTransaction:{get:()=>F.trans||null},waitFor:function(t,e){const n=_.resolve("function"==typeof t?Cn.ignoreTransaction(t):t).timeout(e||6e4);return F.trans?F.trans.waitFor(n):n},Promise:_,debug:{get:()=>$,set:t=>{we(t,"dexie"===t?()=>!0:en)}},derive:vt,extend:ae,props:Et,override:Ft,Events:Bt,on:Pn,liveQuery:function Vr(t){let e,n=!1;const r=new qr(i=>{const a=L(t);let f=!1,g={},y={};const S={get closed(){return f},unsubscribe:()=>{f=!0,Pn.storagemutated.unsubscribe(j)}};i.start&&i.start(S);let b=!1,x=!1;function w(){return ee(y).some(C=>g[C]&&function Mr(t,e){const n=fr(e);let r=n.next();if(r.done)return!1;let i=r.value;const a=fr(t);let f=a.next(i.from),g=f.value;for(;!r.done&&!f.done;){if(_t(g.from,i.to)<=0&&_t(g.to,i.from)>=0)return!0;_t(i.from,g.from)<0?i=(r=n.next(g.from)).value:g=(f=a.next(i.from)).value}return!1}(g[C],y[C]))}const j=C=>{xr(g,C),w()&&Z()},Z=()=>{if(b||f)return;g={};const C={},q=function(R){a&&o();const k=()=>c(t,{subscr:R,trans:null}),Q=F.trans?H(F.transless,k):k();return a&&Q.then(u,u),Q}(C);x||(Pn(Un,j),x=!0),b=!0,Promise.resolve(q).then(R=>{n=!0,e=R,b=!1,f||(w()?Z():(g={},y=C,i.next&&i.next(R)))},R=>{b=!1,n=!1,i.error&&i.error(R),S.unsubscribe()})};return Z(),S});return r.hasValue=()=>n,r.getValue=()=>e,r},extendObservabilitySet:xr,getByKeyPath:jt,setByKeyPath:Le,delByKeyPath:function(t,e){"string"==typeof e?Le(t,e,void 0):"length"in e&&[].map.call(e,function(n){Le(t,n,void 0)})},shallowClone:re,deepClone:pn,getObjectDiff:cr,cmp:_t,asap:Pt,minKey:Ct,addons:[],connections:me,errnames:ce,dependencies:hr,semVer:"3.2.4",version:"3.2.4".split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Cn.maxKey=Mn(Cn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Pn(Un,t=>{if(!_n){let e;ye?(e=document.createEvent("CustomEvent"),e.initCustomEvent(On,!0,!0,t)):e=new CustomEvent(On,{detail:t}),_n=!0,dispatchEvent(e),_n=!1}}),addEventListener(On,({detail:t})=>{_n||Wn(t)}));let _n=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(On);"function"==typeof t.unref&&t.unref(),Pn(Un,e=>{_n||t.postMessage(e)}),t.onmessage=e=>{e.data&&Wn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Pn(Un,e=>{try{_n||(typeof localStorage<"u"&&localStorage.setItem(On,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:On,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===On){const n=JSON.parse(e.newValue);n&&Wn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===On&&Wn(e.changedParts)})}_.rejectionMapper=function(t,e){if(!t||t instanceof p||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Ie[t.name])return t;var n=new Ie[t.name](e||t.message,t);return"stack"in t&&gt(n,"stack",{get:function(){return this.inner.stack}}),n},we($,en)},5861:(Ze,Re,de)=>{"use strict";function N(pe,ae,Ee,ft,Qe,Et,St){try{var gt=pe[Et](St),vt=gt.value}catch(Pe){return void Ee(Pe)}gt.done?ae(vt):Promise.resolve(vt).then(ft,Qe)}function ee(pe){return function(){var ae=this,Ee=arguments;return new Promise(function(ft,Qe){var Et=pe.apply(ae,Ee);function St(vt){N(Et,ft,Qe,St,gt,"next",vt)}function gt(vt){N(Et,ft,Qe,St,gt,"throw",vt)}St(void 0)})}}de.d(Re,{Z:()=>ee})}}]);