(self.webpackChunkgrade_scope_istic=self.webpackChunkgrade_scope_istic||[]).push([[173],{2384:(Ye,Fe,$)=>{"use strict";$.d(Fe,{z:()=>Ee});var D=$(5861),ae=$(7331),pe=$(4687);function le(N,u,f,d){return new(f||(f=Promise))(function(T,P){function ve(se){try{k(d.next(se))}catch(Oe){P(Oe)}}function Ae(se){try{k(d.throw(se))}catch(Oe){P(Oe)}}function k(se){se.done?T(se.value):function y(T){return T instanceof f?T:new f(function(P){P(T)})}(se.value).then(ve,Ae)}k((d=d.apply(N,u||[])).next())})}function ge(N,u){var d,y,T,P,f={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return P={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(P[Symbol.iterator]=function(){return this}),P;function ve(k){return function(se){return function Ae(k){if(d)throw new TypeError("Generator is already executing.");for(;f;)try{if(d=1,y&&(T=2&k[0]?y.return:k[0]?y.throw||((T=y.return)&&T.call(y),0):y.next)&&!(T=T.call(y,k[1])).done)return T;switch(y=0,T&&(k=[2&k[0],T.value]),k[0]){case 0:case 1:T=k;break;case 4:return f.label++,{value:k[1],done:!1};case 5:f.label++,y=k[1],k=[0];continue;case 7:k=f.ops.pop(),f.trys.pop();continue;default:if(!(T=(T=f.trys).length>0&&T[T.length-1])&&(6===k[0]||2===k[0])){f=0;continue}if(3===k[0]&&(!T||k[1]>T[0]&&k[1]<T[3])){f.label=k[1];break}if(6===k[0]&&f.label<T[1]){f.label=T[1],T=k;break}if(T&&f.label<T[2]){f.label=T[2],f.ops.push(k);break}T[2]&&f.ops.pop(),f.trys.pop();continue}k=u.call(N,f)}catch(se){k=[6,se],y=0}finally{d=T=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,se])}}}function it(N){return[N.schema.primKey].concat(N.schema.indexes).map(function(f){return f.src}).join(",")}function ot(N,u){return new Promise(function(f,d){var y=new FileReader;y.onabort=function(T){return d(new Error("file read aborted"))},y.onerror=function(T){return d(T.target.error)},y.onload=function(T){return f(T.target.result)},"binary"===u?y.readAsArrayBuffer(N):y.readAsText(N)})}function gt(N,u){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var f=new FileReaderSync;return"binary"===u?f.readAsArrayBuffer(N):f.readAsText(N)}var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bt(N,u){return N(u={exports:{}},u.exports),u.exports}for(var Pe=bt(function(N,u){N.exports=function(){function f(j){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(j)}function d(j,L,U,M,H,qe,ke){try{var De=j[qe](ke),ye=De.value}catch(Ft){return void U(Ft)}De.done?L(ye):Promise.resolve(ye).then(M,H)}function y(j){return function(){var L=this,U=arguments;return new Promise(function(M,H){var qe=j.apply(L,U);function ke(ye){d(qe,M,H,ke,De,"next",ye)}function De(ye){d(qe,M,H,ke,De,"throw",ye)}ke(void 0)})}}function T(j,L){if(!(j instanceof L))throw new TypeError("Cannot call a class as a function")}function P(j,L){for(var U=0;U<L.length;U++){var M=L[U];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(j,M.key,M)}}function Ae(j,L,U){return L in j?Object.defineProperty(j,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[L]=U,j}function k(j,L){var U=Object.keys(j);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(j);L&&(M=M.filter(function(H){return Object.getOwnPropertyDescriptor(j,H).enumerable})),U.push.apply(U,M)}return U}function se(j){for(var L=1;L<arguments.length;L++){var U=null!=arguments[L]?arguments[L]:{};L%2?k(Object(U),!0).forEach(function(M){Ae(j,M,U[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(U)):k(Object(U)).forEach(function(M){Object.defineProperty(j,M,Object.getOwnPropertyDescriptor(U,M))})}return j}function Oe(j,L){return function Ie(j){if(Array.isArray(j))return j}(j)||function Je(j,L){if(Symbol.iterator in Object(j)||"[object Arguments]"===Object.prototype.toString.call(j)){var U=[],M=!0,H=!1,qe=void 0;try{for(var De,ke=j[Symbol.iterator]();!(M=(De=ke.next()).done)&&(U.push(De.value),!L||U.length!==L);M=!0);}catch(ye){H=!0,qe=ye}finally{try{!M&&null!=ke.return&&ke.return()}finally{if(H)throw qe}}return U}}(j,L)||function St(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function lt(j){return function Ct(j){if(Array.isArray(j)){for(var L=0,U=new Array(j.length);L<j.length;L++)U[L]=j[L];return U}}(j)||function Be(j){if(Symbol.iterator in Object(j)||"[object Arguments]"===Object.prototype.toString.call(j))return Array.from(j)}(j)||function Rt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var he=function j(L){T(this,j),this.p=new Promise(L)};he.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(he.prototype[Symbol.toStringTag]="TypesonPromise"),he.prototype.then=function(j,L){var U=this;return new he(function(M,H){U.p.then(function(qe){M(j?j(qe):qe)}).catch(function(qe){return L?L(qe):Promise.reject(qe)}).then(M,H)})},he.prototype.catch=function(j){return this.then(null,j)},he.resolve=function(j){return new he(function(L){L(j)})},he.reject=function(j){return new he(function(L,U){U(j)})},["all","race"].forEach(function(j){he[j]=function(L){return new he(function(U,M){Promise[j](L.map(function(H){return H&&H.constructor&&"TypesonPromise"===H.constructor.__typeson__type__?H.p:H})).then(U,M)})}});var Se={}.toString,We={}.hasOwnProperty,nt=Object.getPrototypeOf,zt=We.toString;function C(j,L){return Z(j)&&"function"==typeof j.then&&(!L||"function"==typeof j.catch)}function s(j){return Se.call(j).slice(8,-1)}function Y(j,L){if(!j||"object"!==f(j))return!1;var U=nt(j);if(!U)return null===L;var M=We.call(U,"constructor")&&U.constructor;return"function"!=typeof M?null===L:L===M||null!==L&&zt.call(M)===zt.call(L)||"function"==typeof L&&"string"==typeof M.__typeson__type__&&M.__typeson__type__===L.__typeson__type__}function R(j){return!(!j||"Object"!==s(j))&&(!nt(j)||Y(j,Object))}function Z(j){return j&&"object"===f(j)}function at(j){return j.replace(/~/g,"~0").replace(/\./g,"~1")}function At(j){return j.replace(/~1/g,".").replace(/~0/g,"~")}function It(j,L){if(""===L)return j;var U=L.indexOf(".");if(U>-1){var M=j[At(L.slice(0,U))];return void 0===M?void 0:It(M,L.slice(U+1))}return j[At(L)]}function nn(j,L,U){if(""===L)return U;var M=L.indexOf(".");return M>-1?nn(j[At(L.slice(0,M))],L.slice(M+1),U):(j[At(L)]=U,j)}var yt=Object.keys,Pt=Array.isArray,Mt={}.hasOwnProperty,tn=["type","replaced","iterateIn","iterateUnsetNumeric"];function Te(j,L){if(""===j.keypath)return-1;var U=j.keypath.match(/\./g)||0,M=L.keypath.match(/\./g)||0;return U&&(U=U.length),M&&(M=M.length),U>M?-1:U<M?1:j.keypath<L.keypath?-1:j.keypath>L.keypath}var ht=function(){function j(L){T(this,j),this.options=L,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function ve(j,L,U){return L&&P(j.prototype,L),U&&P(j,U),j}(j,[{key:"stringify",value:function(U,M,H,qe){qe=se({},this.options,{},qe,{stringification:!0});var ke=this.encapsulate(U,null,qe);return Pt(ke)?JSON.stringify(ke[0],M,H):ke.then(function(De){return JSON.stringify(De,M,H)})}},{key:"stringifySync",value:function(U,M,H,qe){return this.stringify(U,M,H,se({throwOnBadSyncType:!0},qe,{sync:!0}))}},{key:"stringifyAsync",value:function(U,M,H,qe){return this.stringify(U,M,H,se({throwOnBadSyncType:!0},qe,{sync:!1}))}},{key:"parse",value:function(U,M,H){return H=se({},this.options,{},H,{parse:!0}),this.revive(JSON.parse(U,M),H)}},{key:"parseSync",value:function(U,M,H){return this.parse(U,M,se({throwOnBadSyncType:!0},H,{sync:!0}))}},{key:"parseAsync",value:function(U,M,H){return this.parse(U,M,se({throwOnBadSyncType:!0},H,{sync:!1}))}},{key:"specialTypeNames",value:function(U,M){var H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return H.returnTypeNames=!0,this.encapsulate(U,M,H)}},{key:"rootTypeName",value:function(U,M){var H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return H.iterateNone=!0,this.encapsulate(U,M,H)}},{key:"encapsulate",value:function(U,M,H){var ke=(H=se({sync:!0},this.options,{},H)).sync,De=this,ye={},Ft=[],un=[],Dt=[],vn=!("cyclic"in H)||H.cyclic,bn=H.encapsulateObserver,rn=tt("",U,vn,M||{},Dt);function ut(me){var l=Object.values(ye);if(H.iterateNone)return l.length?l[0]:j.getJSONType(me);if(l.length){if(H.returnTypeNames)return lt(new Set(l));me&&R(me)&&!Mt.call(me,"$types")?me.$types=ye:me={$:me,$types:{$:ye}}}else Z(me)&&Mt.call(me,"$types")&&(me={$:me,$types:!0});return!H.returnTypeNames&&me}function vt(me,l){return $e.apply(this,arguments)}function $e(){return $e=y(pe.mark(function me(l,o){var c;return pe.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Promise.all(o.map(function(q){return q[1].p}));case 2:return c=E.sent,E.next=5,Promise.all(c.map(function(){var q=y(pe.mark(function ee(be){var ce,re,Ce,Qe,Xe,mt,Ne,fe,J;return pe.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(ce=[],re=o.splice(0,1),Ce=Oe(re,1),Qe=Oe(Ce[0],7),mt=Qe[4],Ne=Qe[5],fe=tt(Xe=Qe[0],be,Qe[2],Qe[3],ce,!0,Qe[6]),J=Y(fe,he),!Xe||!J){X.next=11;break}return X.next=8,fe.p;case 8:return mt[Ne]=X.sent,X.abrupt("return",vt(l,ce));case 11:return Xe?mt[Ne]=fe:l=J?fe.p:fe,X.abrupt("return",vt(l,ce));case 13:case"end":return X.stop()}},ee)}));return function(ee){return q.apply(this,arguments)}}()));case 5:return E.abrupt("return",l);case 6:case"end":return E.stop()}},me)})),$e.apply(this,arguments)}function st(me,l,o){Object.assign(me,l);var c=tn.map(function(m){var E=me[m];return delete me[m],E});o(),tn.forEach(function(m,E){me[m]=c[E]})}function tt(me,l,o,c,m,E,q){var ee,be={},ce=f(l),re=bn?function(J){var xe=q||c.type||j.getJSONType(l);bn(Object.assign(J||be,{keypath:me,value:l,cyclic:o,stateObj:c,promisesData:m,resolvingTypesonPromise:E,awaitingTypesonPromise:Y(l,he)},{type:xe}))}:null;if(["string","boolean","number","undefined"].includes(ce))return void 0===l||"number"===ce&&(isNaN(l)||l===-1/0||l===1/0)?(ee=c.replaced?l:Ot(me,l,c,m,!1,E,re))!==l&&(be={replaced:ee}):ee=l,re&&re(),ee;if(null===l)return re&&re(),l;if(o&&!c.iterateIn&&!c.iterateUnsetNumeric&&l&&"object"===f(l)){var Ce=Ft.indexOf(l);if(!(Ce<0))return ye[me]="#",re&&re({cyclicKeypath:un[Ce]}),"#"+un[Ce];!0===o&&(Ft.push(l),un.push(me))}var ze,Ke=R(l),Qe=Pt(l),Xe=(Ke||Qe)&&(!De.plainObjectReplacers.length||c.replaced)||c.iterateIn?l:Ot(me,l,c,m,Ke||Qe,null,re);if(Xe!==l?(ee=Xe,be={replaced:Xe}):""===me&&Y(l,he)?(m.push([me,l,o,c,void 0,void 0,c.type]),ee=l):Qe&&"object"!==c.iterateIn||"array"===c.iterateIn?(ze=new Array(l.length),be={clone:ze}):(["function","symbol"].includes(f(l))||"toJSON"in l||Y(l,he)||Y(l,Promise)||Y(l,ArrayBuffer))&&!Ke&&"object"!==c.iterateIn?ee=l:(ze={},c.addLength&&(ze.length=l.length),be={clone:ze}),re&&re(),H.iterateNone)return ze||ee;if(!ze)return ee;if(c.iterateIn){var dt=function(xe){var we={ownKeys:Mt.call(l,xe)};st(c,we,function(){var X=me+(me?".":"")+at(xe),Le=tt(X,l[xe],!!o,c,m,E);Y(Le,he)?m.push([X,Le,!!o,c,ze,xe,c.type]):void 0!==Le&&(ze[xe]=Le)})};for(var mt in l)dt(mt);re&&re({endIterateIn:!0,end:!0})}else yt(l).forEach(function(J){var xe=me+(me?".":"")+at(J);st(c,{ownKeys:!0},function(){var X=tt(xe,l[J],!!o,c,m,E);Y(X,he)?m.push([xe,X,!!o,c,ze,J,c.type]):void 0!==X&&(ze[J]=X)})}),re&&re({endIterateOwn:!0,end:!0});if(c.iterateUnsetNumeric){for(var Ne=l.length,$t=function(xe){if(!(xe in l)){var we=me+(me?".":"")+xe;st(c,{ownKeys:!1},function(){var Le=tt(we,void 0,!!o,c,m,E);Y(Le,he)?m.push([we,Le,!!o,c,ze,xe,c.type]):void 0!==Le&&(ze[xe]=Le)})}},fe=0;fe<Ne;fe++)$t(fe);re&&re({endIterateUnsetNumeric:!0,end:!0})}return ze}function Ot(me,l,o,c,m,E,q){for(var ee=m?De.plainObjectReplacers:De.nonplainObjectReplacers,be=ee.length;be--;){var ce=ee[be];if(ce.test(l,o)){var re=ce.type;if(De.revivers[re]){var Ce=ye[me];ye[me]=Ce?[re].concat(Ce):re}return Object.assign(o,{type:re,replaced:!0}),!ke&&ce.replaceAsync||ce.replace?(q&&q({replacing:!0}),tt(me,ce[ke||!ce.replaceAsync?"replace":"replaceAsync"](l,o),vn&&"readonly",o,c,E,re)):(q&&q({typeDetected:!0}),tt(me,l,vn&&"readonly",o,c,E,re))}}return l}return Dt.length?ke&&H.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(vt(rn,Dt)).then(ut):!ke&&H.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():H.stringification&&ke?[ut(rn)]:ke?ut(rn):Promise.resolve(ut(rn))}},{key:"encapsulateSync",value:function(U,M,H){return this.encapsulate(U,M,se({throwOnBadSyncType:!0},H,{sync:!0}))}},{key:"encapsulateAsync",value:function(U,M,H){return this.encapsulate(U,M,se({throwOnBadSyncType:!0},H,{sync:!1}))}},{key:"revive",value:function(U,M){var H=U&&U.$types;if(!H)return U;if(!0===H)return U.$;var ke=(M=se({sync:!0},this.options,{},M)).sync,De=[],ye={},Ft=!0;H.$&&R(H.$)&&(U=U.$,H=H.$,Ft=!1);var un=this;function Dt($e,st){var me=Oe(un.revivers[$e]||[],1)[0];if(!me)throw new Error("Unregistered type: "+$e);return ke&&!("revive"in me)?st:me[ke&&me.revive?"revive":!ke&&me.reviveAsync?"reviveAsync":"revive"](st,ye)}var Jt=[];function rn($e){return Y($e,Me)?void 0:$e}var vt,ut=function vn(){var $e=[];if(Object.entries(H).forEach(function(st){var tt=Oe(st,2),Ot=tt[0],me=tt[1];"#"!==me&&[].concat(me).forEach(function(l){Oe(un.revivers[l]||[null,{}],2)[1].plain&&($e.push({keypath:Ot,type:l}),delete H[Ot])})}),$e.length)return $e.sort(Te).reduce(function st(tt,Ot){var me=Ot.keypath,l=Ot.type;if(C(tt))return tt.then(function(m){return st(m,{keypath:me,type:l})});var o=It(U,me);if(Y(o=Dt(l,o),he))return o.then(function(m){var E=nn(U,me,m);E===m&&(U=E)});var c=nn(U,me,o);c===o&&(U=c)},void 0)}();return Y(ut,he)?vt=ut.then(function(){return U}):(vt=function bn($e,st,tt,Ot,me){if(!Ft||"$types"!==$e){var l=H[$e],o=Pt(st);if(o||R(st)){var c=o?new Array(st.length):{};for(yt(st).forEach(function(Ce){var Ke=bn($e+($e?".":"")+at(Ce),st[Ce],tt||c,c,Ce),Qe=function(ze){return Y(ze,Me)?c[Ce]=void 0:void 0!==ze&&(c[Ce]=ze),ze};Y(Ke,he)?Jt.push(Ke.then(function(Xe){return Qe(Xe)})):Qe(Ke)}),st=c;De.length;){var m=Oe(De[0],4),ee=m[2],be=m[3],ce=It(m[0],m[1]);if(void 0===ce)break;ee[be]=ce,De.splice(0,1)}}if(!l)return st;if("#"===l){var re=It(tt,st.slice(1));return void 0===re&&De.push([tt,st.slice(1),Ot,me]),re}return[].concat(l).reduce(function Ce(Ke,Qe){return Y(Ke,he)?Ke.then(function(Xe){return Ce(Xe,Qe)}):Dt(Qe,Ke)},st)}}("",U,null),Jt.length&&(vt=he.resolve(vt).then(function($e){return he.all([$e].concat(Jt))}).then(function($e){return Oe($e,1)[0]}))),C(vt)?ke&&M.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Y(vt,he)?vt.p.then(rn):vt:!ke&&M.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ke?rn(vt):Promise.resolve(rn(vt))}},{key:"reviveSync",value:function(U,M){return this.revive(U,se({throwOnBadSyncType:!0},M,{sync:!0}))}},{key:"reviveAsync",value:function(U,M){return this.revive(U,se({throwOnBadSyncType:!0},M,{sync:!1}))}},{key:"register",value:function(U,M){return M=M||{},[].concat(U).forEach(function H(qe){var ke=this;if(Pt(qe))return qe.map(function(De){return H.call(ke,De)});qe&&yt(qe).forEach(function(De){if("#"===De)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(j.JSON_TYPES.includes(De))throw new TypeError("Plain JSON object types are reserved as type names");var ye=qe[De],Ft=ye&&ye.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,un=Ft.filter(function(tt){return tt.type===De});if(un.length&&(Ft.splice(Ft.indexOf(un[0]),1),delete this.revivers[De],delete this.types[De]),"function"==typeof ye){var Dt=ye;ye={test:function(Ot){return Ot&&Ot.constructor===Dt},replace:function(Ot){return se({},Ot)},revive:function(Ot){return Object.assign(Object.create(Dt.prototype),Ot)}}}else if(Pt(ye)){var Jt=Oe(ye,3);ye={test:Jt[0],replace:Jt[1],revive:Jt[2]}}if(ye&&ye.test){var vt={type:De,test:ye.test.bind(ye)};ye.replace&&(vt.replace=ye.replace.bind(ye)),ye.replaceAsync&&(vt.replaceAsync=ye.replaceAsync.bind(ye));var $e="number"==typeof M.fallback?M.fallback:M.fallback?0:1/0;if(ye.testPlainObjects?this.plainObjectReplacers.splice($e,0,vt):this.nonplainObjectReplacers.splice($e,0,vt),ye.revive||ye.reviveAsync){var st={};ye.revive&&(st.revive=ye.revive.bind(ye)),ye.reviveAsync&&(st.reviveAsync=ye.reviveAsync.bind(ye)),this.revivers[De]=[st,{plain:ye.testPlainObjects}]}this.types[De]=ye}},this)},this),this}}]),j}(),Me=function j(){T(this,j)};return Me.__typeson__type__="TypesonUndefined",ht.Undefined=Me,ht.Promise=he,ht.isThenable=C,ht.toStringTag=s,ht.hasConstructorOf=Y,ht.isObject=Z,ht.isPlainObject=R,ht.isUserObject=function He(j){if(!j||"Object"!==s(j))return!1;var L=nt(j);return!L||Y(j,Object)||He(L)},ht.escapeKeyPathComponent=at,ht.unescapeKeyPathComponent=At,ht.getByKeyPath=It,ht.getJSONType=function Vt(j){return null===j?"null":Array.isArray(j)?"array":f(j)},ht.JSON_TYPES=["null","boolean","number","string","array","object"],ht}()}),dn=bt(function(N,u){N.exports=function(){function f(l){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(l)}function y(l,o){for(var c=0;c<o.length;c++){var m=o[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}function T(l,o,c){return o in l?Object.defineProperty(l,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[o]=c,l}function P(l,o){var c=Object.keys(l);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(l);o&&(m=m.filter(function(E){return Object.getOwnPropertyDescriptor(l,E).enumerable})),c.push.apply(c,m)}return c}function ve(l){return function(c){if(Array.isArray(c))return Ae(c)}(l)||function(c){if(typeof Symbol<"u"&&Symbol.iterator in Object(c))return Array.from(c)}(l)||function(c,m){if(c){if("string"==typeof c)return Ae(c,m);var E=Object.prototype.toString.call(c).slice(8,-1);if("Object"===E&&c.constructor&&(E=c.constructor.name),"Map"===E||"Set"===E)return Array.from(c);if("Arguments"===E||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return Ae(c,m)}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(l,o){(null==o||o>l.length)&&(o=l.length);for(var c=0,m=new Array(o);c<o;c++)m[c]=l[c];return m}function k(l){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function se(l,o){if(!(l instanceof o))throw new TypeError("Cannot call a class as a function")}function Oe(l,o){for(var c=0;c<o.length;c++){var m=o[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}function lt(l,o,c){return o in l?Object.defineProperty(l,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):l[o]=c,l}function Ct(l,o){var c=Object.keys(l);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(l);o&&(m=m.filter(function(E){return Object.getOwnPropertyDescriptor(l,E).enumerable})),c.push.apply(c,m)}return c}function Ie(l){for(var o=1;o<arguments.length;o++){var c=null!=arguments[o]?arguments[o]:{};o%2?Ct(Object(c),!0).forEach(function(m){lt(l,m,c[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(c)):Ct(Object(c)).forEach(function(m){Object.defineProperty(l,m,Object.getOwnPropertyDescriptor(c,m))})}return l}function Be(l,o){return function(m){if(Array.isArray(m))return m}(l)||function(m,E){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(m)){var q=[],ee=!0,be=!1,ce=void 0;try{for(var re,Ce=m[Symbol.iterator]();!(ee=(re=Ce.next()).done)&&(q.push(re.value),!E||q.length!==E);ee=!0);}catch(Ke){be=!0,ce=Ke}finally{try{ee||null==Ce.return||Ce.return()}finally{if(be)throw ce}}return q}}(l,o)||Rt(l,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(l,o){if(l){if("string"==typeof l)return St(l,o);var c=Object.prototype.toString.call(l).slice(8,-1);return"Object"===c&&l.constructor&&(c=l.constructor.name),"Map"===c||"Set"===c?Array.from(l):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?St(l,o):void 0}}function St(l,o){(null==o||o>l.length)&&(o=l.length);for(var c=0,m=new Array(o);c<o;c++)m[c]=l[c];return m}var he=function l(o){se(this,l),this.p=new Promise(o)};he.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(he.prototype[Symbol.toStringTag]="TypesonPromise"),he.prototype.then=function(l,o){var c=this;return new he(function(m,E){c.p.then(function(q){m(l?l(q):q)}).catch(function(q){return o?o(q):Promise.reject(q)}).then(m,E)})},he.prototype.catch=function(l){return this.then(null,l)},he.resolve=function(l){return new he(function(o){o(l)})},he.reject=function(l){return new he(function(o,c){c(l)})},["all","race"].forEach(function(l){he[l]=function(o){return new he(function(c,m){Promise[l](o.map(function(E){return E&&E.constructor&&"TypesonPromise"===E.constructor.__typeson__type__?E.p:E})).then(c,m)})}});var Wt={}.toString,Se={}.hasOwnProperty,We=Object.getPrototypeOf,nt=Se.toString;function zt(l,o){return R(l)&&"function"==typeof l.then&&(!o||"function"==typeof l.catch)}function C(l){return Wt.call(l).slice(8,-1)}function s(l,o){if(!l||"object"!==k(l))return!1;var c=We(l);if(!c)return null===o;var m=Se.call(c,"constructor")&&c.constructor;return"function"!=typeof m?null===o:o===m||null!==o&&nt.call(m)===nt.call(o)||"function"==typeof o&&"string"==typeof m.__typeson__type__&&m.__typeson__type__===o.__typeson__type__}function Y(l){return!(!l||"Object"!==C(l))&&(!We(l)||s(l,Object))}function R(l){return l&&"object"===k(l)}function He(l){return l.replace(/~/g,"~0").replace(/\./g,"~1")}function Z(l){return l.replace(/~1/g,".").replace(/~0/g,"~")}function at(l,o){if(""===o)return l;var c=o.indexOf(".");if(c>-1){var m=l[Z(o.slice(0,c))];return void 0===m?void 0:at(m,o.slice(c+1))}return l[Z(o)]}function At(l,o,c){if(""===o)return c;var m=o.indexOf(".");return m>-1?At(l[Z(o.slice(0,m))],o.slice(m+1),c):(l[Z(o)]=c,l)}function It(l,o,c){return c?o?o(l):l:(l&&l.then||(l=Promise.resolve(l)),o?l.then(o):l)}var nn=Object.keys,Vt=Array.isArray,yt={}.hasOwnProperty,Pt=["type","replaced","iterateIn","iterateUnsetNumeric"];function Mt(l){return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];try{return Promise.resolve(l.apply(this,o))}catch(m){return Promise.reject(m)}}}function tn(l,o){if(""===l.keypath)return-1;var c=l.keypath.match(/\./g)||0,m=o.keypath.match(/\./g)||0;return c&&(c=c.length),m&&(m=m.length),c>m?-1:c<m?1:l.keypath<o.keypath?-1:l.keypath>o.keypath}var Te=function(){function l(o){se(this,l),this.options=o,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return c=l,m=[{key:"stringify",value:function(c,m,E,q){q=Ie(Ie(Ie({},this.options),q),{},{stringification:!0});var ee=this.encapsulate(c,null,q);return Vt(ee)?JSON.stringify(ee[0],m,E):ee.then(function(be){return JSON.stringify(be,m,E)})}},{key:"stringifySync",value:function(c,m,E,q){return this.stringify(c,m,E,Ie(Ie({throwOnBadSyncType:!0},q),{},{sync:!0}))}},{key:"stringifyAsync",value:function(c,m,E,q){return this.stringify(c,m,E,Ie(Ie({throwOnBadSyncType:!0},q),{},{sync:!1}))}},{key:"parse",value:function(c,m,E){return E=Ie(Ie(Ie({},this.options),E),{},{parse:!0}),this.revive(JSON.parse(c,m),E)}},{key:"parseSync",value:function(c,m,E){return this.parse(c,m,Ie(Ie({throwOnBadSyncType:!0},E),{},{sync:!0}))}},{key:"parseAsync",value:function(c,m,E){return this.parse(c,m,Ie(Ie({throwOnBadSyncType:!0},E),{},{sync:!1}))}},{key:"specialTypeNames",value:function(c,m){var E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return E.returnTypeNames=!0,this.encapsulate(c,m,E)}},{key:"rootTypeName",value:function(c,m){var E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return E.iterateNone=!0,this.encapsulate(c,m,E)}},{key:"encapsulate",value:function(c,m,E){var q=Mt(function(fe,J){return It(Promise.all(J.map(function(xe){return xe[1].p})),function(xe){return It(Promise.all(xe.map(Mt(function(we){var Nn,pn,X=!1,Le=[],hn=Be(J.splice(0,1),1),jt=Be(hn[0],7),wt=jt[0],qt=jt[4],_t=jt[5],rt=Ne(wt,we,jt[2],jt[3],Le,!0,jt[6]),Lt=s(rt,he);return Nn=function(on){return X?on:(wt?qt[_t]=rt:fe=Lt?rt.p:rt,q(fe,Le))},(pn=function(){if(wt&&Lt)return It(rt.p,function(on){return qt[_t]=on,X=!0,q(fe,Le)})}())&&pn.then?pn.then(Nn):Nn(pn)}))),function(){return fe})})}),ee=(E=Ie(Ie({sync:!0},this.options),E)).sync,be=this,ce={},re=[],Ce=[],Ke=[],Qe=!("cyclic"in E)||E.cyclic,Xe=E.encapsulateObserver,ze=Ne("",c,Qe,m||{},Ke);function dt(fe){var J=Object.values(ce);if(E.iterateNone)return J.length?J[0]:l.getJSONType(fe);if(J.length){if(E.returnTypeNames)return function Je(l){return function(c){if(Array.isArray(c))return St(c)}(l)||function(c){if(typeof Symbol<"u"&&Symbol.iterator in Object(c))return Array.from(c)}(l)||Rt(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(J));fe&&Y(fe)&&!yt.call(fe,"$types")?fe.$types=ce:fe={$:fe,$types:{$:ce}}}else R(fe)&&yt.call(fe,"$types")&&(fe={$:fe,$types:!0});return!E.returnTypeNames&&fe}function mt(fe,J,xe){Object.assign(fe,J);var we=Pt.map(function(X){var Le=fe[X];return delete fe[X],Le});xe(),Pt.forEach(function(X,Le){fe[X]=we[Le]})}function Ne(fe,J,xe,we,X,Le,hn){var jt,wt={},Ht=k(J),ct=Xe?function(Qt){var Xt=hn||we.type||l.getJSONType(J);Xe(Object.assign(Qt||wt,{keypath:fe,value:J,cyclic:xe,stateObj:we,promisesData:X,resolvingTypesonPromise:Le,awaitingTypesonPromise:s(J,he)},{type:Xt}))}:null;if(["string","boolean","number","undefined"].includes(Ht))return void 0===J||Number.isNaN(J)||J===Number.NEGATIVE_INFINITY||J===Number.POSITIVE_INFINITY?(jt=we.replaced?J:$t(fe,J,we,X,!1,Le,ct))!==J&&(wt={replaced:jt}):jt=J,ct&&ct(),jt;if(null===J)return ct&&ct(),J;if(xe&&!we.iterateIn&&!we.iterateUnsetNumeric&&J&&"object"===k(J)){var qt=re.indexOf(J);if(!(qt<0))return ce[fe]="#",ct&&ct({cyclicKeypath:Ce[qt]}),"#"+Ce[qt];!0===xe&&(re.push(J),Ce.push(fe))}var _t,sn=Y(J),rt=Vt(J),Lt=(sn||rt)&&(!be.plainObjectReplacers.length||we.replaced)||we.iterateIn?J:$t(fe,J,we,X,sn||rt,null,ct);if(Lt!==J?(jt=Lt,wt={replaced:Lt}):""===fe&&s(J,he)?(X.push([fe,J,xe,we,void 0,void 0,we.type]),jt=J):rt&&"object"!==we.iterateIn||"array"===we.iterateIn?(_t=new Array(J.length),wt={clone:_t}):(["function","symbol"].includes(k(J))||"toJSON"in J||s(J,he)||s(J,Promise)||s(J,ArrayBuffer))&&!sn&&"object"!==we.iterateIn?jt=J:(_t={},we.addLength&&(_t.length=J.length),wt={clone:_t}),ct&&ct(),E.iterateNone)return _t||jt;if(!_t)return jt;if(we.iterateIn){var on=function(Xt){var wn={ownKeys:yt.call(J,Xt)};mt(we,wn,function(){var xn=fe+(fe?".":"")+He(Xt),On=Ne(xn,J[Xt],!!xe,we,X,Le);s(On,he)?X.push([xn,On,!!xe,we,_t,Xt,we.type]):void 0!==On&&(_t[Xt]=On)})};for(var Pn in J)on(Pn);ct&&ct({endIterateIn:!0,end:!0})}else nn(J).forEach(function(Qt){var Xt=fe+(fe?".":"")+He(Qt);mt(we,{ownKeys:!0},function(){var wn=Ne(Xt,J[Qt],!!xe,we,X,Le);s(wn,he)?X.push([Xt,wn,!!xe,we,_t,Qt,we.type]):void 0!==wn&&(_t[Qt]=wn)})}),ct&&ct({endIterateOwn:!0,end:!0});if(we.iterateUnsetNumeric){for(var Nn=J.length,pn=function(Xt){if(!(Xt in J)){var wn=fe+(fe?".":"")+Xt;mt(we,{ownKeys:!1},function(){var xn=Ne(wn,void 0,!!xe,we,X,Le);s(xn,he)?X.push([wn,xn,!!xe,we,_t,Xt,we.type]):void 0!==xn&&(_t[Xt]=xn)})}},Dn=0;Dn<Nn;Dn++)pn(Dn);ct&&ct({endIterateUnsetNumeric:!0,end:!0})}return _t}function $t(fe,J,xe,we,X,Le,hn){for(var jt=X?be.plainObjectReplacers:be.nonplainObjectReplacers,wt=jt.length;wt--;){var Ht=jt[wt];if(Ht.test(J,xe)){var ct=Ht.type;if(be.revivers[ct]){var qt=ce[fe];ce[fe]=qt?[ct].concat(qt):ct}return Object.assign(xe,{type:ct,replaced:!0}),!ee&&Ht.replaceAsync||Ht.replace?(hn&&hn({replacing:!0}),Ne(fe,Ht[ee||!Ht.replaceAsync?"replace":"replaceAsync"](J,xe),Qe&&"readonly",xe,we,Le,ct)):(hn&&hn({typeDetected:!0}),Ne(fe,J,Qe&&"readonly",xe,we,Le,ct))}}return J}return Ke.length?ee&&E.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(q(ze,Ke)).then(dt):!ee&&E.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():E.stringification&&ee?[dt(ze)]:ee?dt(ze):Promise.resolve(dt(ze))}},{key:"encapsulateSync",value:function(c,m,E){return this.encapsulate(c,m,Ie(Ie({throwOnBadSyncType:!0},E),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(c,m,E){return this.encapsulate(c,m,Ie(Ie({throwOnBadSyncType:!0},E),{},{sync:!1}))}},{key:"revive",value:function(c,m){var E=c&&c.$types;if(!E)return c;if(!0===E)return c.$;var q=(m=Ie(Ie({sync:!0},this.options),m)).sync,ee=[],be={},ce=!0;E.$&&Y(E.$)&&(c=c.$,E=E.$,ce=!1);var re=this;function Ce(dt,mt){var Ne=Be(re.revivers[dt]||[],1)[0];if(!Ne)throw new Error("Unregistered type: "+dt);return q&&!("revive"in Ne)?mt:Ne[q&&Ne.revive?"revive":!q&&Ne.reviveAsync?"reviveAsync":"revive"](mt,be)}var Ke=[];function Qe(dt){return s(dt,ht)?void 0:dt}var Xe,ze=function(){var mt=[];if(Object.entries(E).forEach(function(Ne){var $t=Be(Ne,2),fe=$t[0],J=$t[1];"#"!==J&&[].concat(J).forEach(function(xe){Be(re.revivers[xe]||[null,{}],2)[1].plain&&(mt.push({keypath:fe,type:xe}),delete E[fe])})}),mt.length)return mt.sort(tn).reduce(function Ne($t,fe){var J=fe.keypath,xe=fe.type;if(zt($t))return $t.then(function(Le){return Ne(Le,{keypath:J,type:xe})});var we=at(c,J);if(s(we=Ce(xe,we),he))return we.then(function(Le){var hn=At(c,J,Le);hn===Le&&(c=hn)});var X=At(c,J,we);X===we&&(c=X)},void 0)}();return s(ze,he)?Xe=ze.then(function(){return c}):(Xe=function dt(mt,Ne,$t,fe,J){if(!ce||"$types"!==mt){var xe=E[mt],we=Vt(Ne);if(we||Y(Ne)){var X=we?new Array(Ne.length):{};for(nn(Ne).forEach(function(_t){var sn=dt(mt+(mt?".":"")+He(_t),Ne[_t],$t||X,X,_t),rt=function(on){return s(on,ht)?X[_t]=void 0:void 0!==on&&(X[_t]=on),on};s(sn,he)?Ke.push(sn.then(function(Lt){return rt(Lt)})):rt(sn)}),Ne=X;ee.length;){var Le=Be(ee[0],4),wt=Le[2],Ht=Le[3],ct=at(Le[0],Le[1]);if(void 0===ct)break;wt[Ht]=ct,ee.splice(0,1)}}if(!xe)return Ne;if("#"===xe){var qt=at($t,Ne.slice(1));return void 0===qt&&ee.push([$t,Ne.slice(1),fe,J]),qt}return[].concat(xe).reduce(function _t(sn,rt){return s(sn,he)?sn.then(function(Lt){return _t(Lt,rt)}):Ce(rt,sn)},Ne)}}("",c,null),Ke.length&&(Xe=he.resolve(Xe).then(function(dt){return he.all([dt].concat(Ke))}).then(function(dt){return Be(dt,1)[0]}))),zt(Xe)?q&&m.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():s(Xe,he)?Xe.p.then(Qe):Xe:!q&&m.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():q?Qe(Xe):Promise.resolve(Qe(Xe))}},{key:"reviveSync",value:function(c,m){return this.revive(c,Ie(Ie({throwOnBadSyncType:!0},m),{},{sync:!0}))}},{key:"reviveAsync",value:function(c,m){return this.revive(c,Ie(Ie({throwOnBadSyncType:!0},m),{},{sync:!1}))}},{key:"register",value:function(c,m){return m=m||{},[].concat(c).forEach(function E(q){var ee=this;if(Vt(q))return q.map(function(be){return E.call(ee,be)});q&&nn(q).forEach(function(be){if("#"===be)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(l.JSON_TYPES.includes(be))throw new TypeError("Plain JSON object types are reserved as type names");var ce=q[be],re=ce&&ce.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Ce=re.filter(function(mt){return mt.type===be});if(Ce.length&&(re.splice(re.indexOf(Ce[0]),1),delete this.revivers[be],delete this.types[be]),"function"==typeof ce){var Ke=ce;ce={test:function(Ne){return Ne&&Ne.constructor===Ke},replace:function(Ne){return Ie({},Ne)},revive:function(Ne){return Object.assign(Object.create(Ke.prototype),Ne)}}}else if(Vt(ce)){var Qe=Be(ce,3);ce={test:Qe[0],replace:Qe[1],revive:Qe[2]}}if(ce&&ce.test){var Xe={type:be,test:ce.test.bind(ce)};ce.replace&&(Xe.replace=ce.replace.bind(ce)),ce.replaceAsync&&(Xe.replaceAsync=ce.replaceAsync.bind(ce));var ze="number"==typeof m.fallback?m.fallback:m.fallback?0:Number.POSITIVE_INFINITY;if(ce.testPlainObjects?this.plainObjectReplacers.splice(ze,0,Xe):this.nonplainObjectReplacers.splice(ze,0,Xe),ce.revive||ce.reviveAsync){var dt={};ce.revive&&(dt.revive=ce.revive.bind(ce)),ce.reviveAsync&&(dt.reviveAsync=ce.reviveAsync.bind(ce)),this.revivers[be]=[dt,{plain:ce.testPlainObjects}]}this.types[be]=ce}},this)},this),this}}],m&&Oe(c.prototype,m),l;var c,m}(),ht=function l(){se(this,l)};ht.__typeson__type__="TypesonUndefined",Te.Undefined=ht,Te.Promise=he,Te.isThenable=zt,Te.toStringTag=C,Te.hasConstructorOf=s,Te.isObject=R,Te.isPlainObject=Y,Te.isUserObject=function l(o){if(!o||"Object"!==C(o))return!1;var c=We(o);return!c||s(o,Object)||l(c)},Te.escapeKeyPathComponent=He,Te.unescapeKeyPathComponent=Z,Te.getByKeyPath=at,Te.getJSONType=function(o){return null===o?"null":Array.isArray(o)?"array":k(o)},Te.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Me={userObject:{test:function(o,c){return Te.isUserObject(o)},replace:function(o){return function(m){for(var E=1;E<arguments.length;E++){var q=null!=arguments[E]?arguments[E]:{};E%2?P(Object(q),!0).forEach(function(ee){T(m,ee,q[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(q)):P(Object(q)).forEach(function(ee){Object.defineProperty(m,ee,Object.getOwnPropertyDescriptor(q,ee))})}return m}({},o)},revive:function(o){return o}}},j=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(o,c){return!!Array.isArray(o)&&(Object.keys(o).some(function(m){return String(Number.parseInt(m))!==m})&&(c.iterateIn="object",c.addLength=!0),!0)},replace:function(o,c){return c.iterateUnsetNumeric=!0,o},revive:function(o){if(Array.isArray(o))return o;var c=[];return Object.keys(o).forEach(function(m){c[m]=o[m]}),c}}},{sparseUndefined:{test:function(o,c){return void 0===o&&!1===c.ownKeys},replace:function(o){return 0},revive:function(o){}}}],L={undef:{test:function(o,c){return void 0===o&&(c.ownKeys||!("ownKeys"in c))},replace:function(o){return 0},revive:function(o){return new Te.Undefined}}},U={StringObject:{test:function(o){return"String"===Te.toStringTag(o)&&"object"===f(o)},replace:function(o){return String(o)},revive:function(o){return new String(o)}},BooleanObject:{test:function(o){return"Boolean"===Te.toStringTag(o)&&"object"===f(o)},replace:function(o){return!!o},revive:function(o){return new Boolean(o)}},NumberObject:{test:function(o){return"Number"===Te.toStringTag(o)&&"object"===f(o)},replace:function(o){return Number(o)},revive:function(o){return new Number(o)}}},M=[{nan:{test:function(o){return Number.isNaN(o)},replace:function(o){return"NaN"},revive:function(o){return Number.NaN}}},{infinity:{test:function(o){return o===Number.POSITIVE_INFINITY},replace:function(o){return"Infinity"},revive:function(o){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(o){return o===Number.NEGATIVE_INFINITY},replace:function(o){return"-Infinity"},revive:function(o){return Number.NEGATIVE_INFINITY}}}],H={date:{test:function(o){return"Date"===Te.toStringTag(o)},replace:function(o){var c=o.getTime();return Number.isNaN(c)?"NaN":c},revive:function(o){return"NaN"===o?new Date(Number.NaN):new Date(o)}}},qe={regexp:{test:function(o){return"RegExp"===Te.toStringTag(o)},replace:function(o){return{source:o.source,flags:(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":"")}},revive:function(o){return new RegExp(o.source,o.flags)}}},ke={map:{test:function(o){return"Map"===Te.toStringTag(o)},replace:function(o){return ve(o.entries())},revive:function(o){return new Map(o)}}},De={set:{test:function(o){return"Set"===Te.toStringTag(o)},replace:function(o){return ve(o.values())},revive:function(o){return new Set(o)}}},ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ft=new Uint8Array(256),un=0;un<64;un++)Ft[ye.charCodeAt(un)]=un;var Dt=function(o,c,m){null==m&&(m=o.byteLength);for(var E=new Uint8Array(o,c||0,m),q=E.length,ee="",be=0;be<q;be+=3)ee+=ye[E[be]>>2],ee+=ye[(3&E[be])<<4|E[be+1]>>4],ee+=ye[(15&E[be+1])<<2|E[be+2]>>6],ee+=ye[63&E[be+2]];return q%3==2?ee=ee.slice(0,-1)+"=":q%3==1&&(ee=ee.slice(0,-2)+"=="),ee},vn=function(o){var c,m,E,q,ee=o.length,be=.75*o.length,ce=0;"="===o[o.length-1]&&(be--,"="===o[o.length-2]&&be--);for(var re=new ArrayBuffer(be),Ce=new Uint8Array(re),Ke=0;Ke<ee;Ke+=4)c=Ft[o.charCodeAt(Ke)],m=Ft[o.charCodeAt(Ke+1)],E=Ft[o.charCodeAt(Ke+2)],q=Ft[o.charCodeAt(Ke+3)],Ce[ce++]=c<<2|m>>4,Ce[ce++]=(15&m)<<4|E>>2,Ce[ce++]=(3&E)<<6|63&q;return re},Jt={arraybuffer:{test:function(o){return"ArrayBuffer"===Te.toStringTag(o)},replace:function(o,c){c.buffers||(c.buffers=[]);var m=c.buffers.indexOf(o);return m>-1?{index:m}:(c.buffers.push(o),Dt(o))},revive:function(o,c){if(c.buffers||(c.buffers=[]),"object"===f(o))return c.buffers[o.index];var m=vn(o);return c.buffers.push(m),m}}},bn=typeof self>"u"?Gt:self,rn={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(l){var o=l,c=bn[o];c&&(rn[l.toLowerCase()]={test:function(E){return Te.toStringTag(E)===o},replace:function(E,q){var ee=E.buffer,be=E.byteOffset,ce=E.length;q.buffers||(q.buffers=[]);var re=q.buffers.indexOf(ee);return re>-1?{index:re,byteOffset:be,length:ce}:(q.buffers.push(ee),{encoded:Dt(ee),byteOffset:be,length:ce})},revive:function(E,q){q.buffers||(q.buffers=[]);var ee,be=E.byteOffset,ce=E.length;return"index"in E?ee=q.buffers[E.index]:(ee=vn(E.encoded),q.buffers.push(ee)),new c(ee,be,ce)}})});var ut={dataview:{test:function(o){return"DataView"===Te.toStringTag(o)},replace:function(o,c){var m=o.buffer,E=o.byteOffset,q=o.byteLength;c.buffers||(c.buffers=[]);var ee=c.buffers.indexOf(m);return ee>-1?{index:ee,byteOffset:E,byteLength:q}:(c.buffers.push(m),{encoded:Dt(m),byteOffset:E,byteLength:q})},revive:function(o,c){c.buffers||(c.buffers=[]);var m,E=o.byteOffset,q=o.byteLength;return"index"in o?m=c.buffers[o.index]:(m=vn(o.encoded),c.buffers.push(m)),new DataView(m,E,q)}}},vt={IntlCollator:{test:function(o){return Te.hasConstructorOf(o,Intl.Collator)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.Collator(o.locale,o)}},IntlDateTimeFormat:{test:function(o){return Te.hasConstructorOf(o,Intl.DateTimeFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.DateTimeFormat(o.locale,o)}},IntlNumberFormat:{test:function(o){return Te.hasConstructorOf(o,Intl.NumberFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.NumberFormat(o.locale,o)}}};function $e(l){for(var o=new Uint8Array(l.length),c=0;c<l.length;c++)o[c]=l.charCodeAt(c);return o.buffer}var st={file:{test:function(o){return"File"===Te.toStringTag(o)},replace:function(o){var c=new XMLHttpRequest;if(c.overrideMimeType("text/plain; charset=x-user-defined"),c.open("GET",URL.createObjectURL(o),!1),c.send(),200!==c.status&&0!==c.status)throw new Error("Bad File access: "+c.status);return{type:o.type,stringContents:c.responseText,name:o.name,lastModified:o.lastModified}},revive:function(o){var c=o.name,m=o.type,q=o.lastModified;return new File([$e(o.stringContents)],c,{type:m,lastModified:q})},replaceAsync:function(o){return new Te.Promise(function(c,m){var E=new FileReader;E.addEventListener("load",function(){c({type:o.type,stringContents:E.result,name:o.name,lastModified:o.lastModified})}),E.addEventListener("error",function(){m(E.error)}),E.readAsBinaryString(o)})}}},tt={bigint:{test:function(o){return"bigint"==typeof o},replace:function(o){return String(o)},revive:function(o){return BigInt(o)}}},Ot={bigintObject:{test:function(o){return"object"===f(o)&&Te.hasConstructorOf(o,BigInt)},replace:function(o){return String(o)},revive:function(o){return new Object(BigInt(o))}}},me={cryptokey:{test:function(o){return"CryptoKey"===Te.toStringTag(o)&&o.extractable},replaceAsync:function(o){return new Te.Promise(function(c,m){crypto.subtle.exportKey("jwk",o).catch(function(E){m(E)}).then(function(E){c({jwk:E,algorithm:o.algorithm,usages:o.usages})})})},revive:function(o){return crypto.subtle.importKey("jwk",o.jwk,o.algorithm,!0,o.usages)}}};return[Me,L,j,U,M,H,qe,{imagedata:{test:function(o){return"ImageData"===Te.toStringTag(o)},replace:function(o){return{array:ve(o.data),width:o.width,height:o.height}},revive:function(o){return new ImageData(new Uint8ClampedArray(o.array),o.width,o.height)}}},{imagebitmap:{test:function(o){return"ImageBitmap"===Te.toStringTag(o)||o&&o.dataset&&"ImageBitmap"===o.dataset.toStringTag},replace:function(o){var c=document.createElement("canvas");return c.getContext("2d").drawImage(o,0,0),c.toDataURL()},revive:function(o){var c=document.createElement("canvas"),m=c.getContext("2d"),E=document.createElement("img");return E.addEventListener("load",function(){m.drawImage(E,0,0)}),E.src=o,c},reviveAsync:function(o){var c=document.createElement("canvas"),m=c.getContext("2d"),E=document.createElement("img");return E.addEventListener("load",function(){m.drawImage(E,0,0)}),E.src=o,createImageBitmap(c)}}},st,{file:st.file,filelist:{test:function(o){return"FileList"===Te.toStringTag(o)},replace:function(o){for(var c=[],m=0;m<o.length;m++)c[m]=o.item(m);return c},revive:function(o){return new(function(){function c(){(function d(l,o){if(!(l instanceof o))throw new TypeError("Cannot call a class as a function")})(this,c),this._files=arguments[0],this.length=this._files.length}return E=c,q=[{key:"item",value:function(E){return this._files[E]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}],q&&y(E.prototype,q),c;var E,q}())(o)}}},{blob:{test:function(o){return"Blob"===Te.toStringTag(o)},replace:function(o){var c=new XMLHttpRequest;if(c.overrideMimeType("text/plain; charset=x-user-defined"),c.open("GET",URL.createObjectURL(o),!1),c.send(),200!==c.status&&0!==c.status)throw new Error("Bad Blob access: "+c.status);return{type:o.type,stringContents:c.responseText}},revive:function(o){var c=o.type;return new Blob([$e(o.stringContents)],{type:c})},replaceAsync:function(o){return new Te.Promise(function(c,m){var E=new FileReader;E.addEventListener("load",function(){c({type:o.type,stringContents:E.result})}),E.addEventListener("error",function(){m(E.error)}),E.readAsBinaryString(o)})}}}].concat("function"==typeof Map?ke:[],"function"==typeof Set?De:[],"function"==typeof ArrayBuffer?Jt:[],"function"==typeof Uint8Array?rn:[],"function"==typeof DataView?ut:[],typeof Intl<"u"?vt:[],typeof crypto<"u"?me:[],typeof BigInt<"u"?[tt,Ot]:[])}()}),Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",et=new Uint8Array(256),en=0;en<64;en++)et[Ue.codePointAt(en)]=en;var pt=function(u,f,d){null==d&&(d=u.byteLength);for(var y=new Uint8Array(u,f||0,d),T=y.length,P="",ve=0;ve<T;ve+=3)P+=Ue[y[ve]>>2],P+=Ue[(3&y[ve])<<4|y[ve+1]>>4],P+=Ue[(15&y[ve+1])<<2|y[ve+2]>>6],P+=Ue[63&y[ve+2]];return T%3==2?P=P.slice(0,-1)+"=":T%3==1&&(P=P.slice(0,-2)+"=="),P},Kt=function(u){var T,P,ve,Ae,f=u.length,d=.75*u.length,y=0;"="===u[u.length-1]&&(d--,"="===u[u.length-2]&&d--);for(var k=new ArrayBuffer(d),se=new Uint8Array(k),Oe=0;Oe<f;Oe+=4)T=et[u.codePointAt(Oe)],P=et[u.codePointAt(Oe+1)],ve=et[u.codePointAt(Oe+2)],Ae=et[u.codePointAt(Oe+3)],se[y++]=T<<2|P>>4,se[y++]=(15&P)<<4|ve>>2,se[y++]=(3&ve)<<6|63&Ae;return k},ft=typeof self>"u"?global:self,Tt={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(N){var u=N,f=ft[u];f&&(Tt[N.toLowerCase()+"2"]={test:function(d){return Pe.toStringTag(d)===u},replace:function(d){return{buffer:d.buffer,byteOffset:d.byteOffset,length:d.length}},revive:function(d){return new f(d.buffer,d.byteOffset,d.length)}})});var xt={arraybuffer:{test:function(N){return"ArrayBuffer"===Pe.toStringTag(N)},replace:function(N){return pt(N,0,N.byteLength)},revive:function(N){return Kt(N)}}},de=(new Pe).register(dn),Et="FileReaderSync"in self,Ut=[],Yt=0;de.register([xt,Tt,{blob2:{test:function(N){return"Blob"===Pe.toStringTag(N)},replace:function(N){if(N.isClosed)throw new Error("The Blob is closed");if(Et){var u=gt(N,"binary"),f=pt(u,0,u.byteLength);return{type:N.type,data:f}}Ut.push(N);var d={type:N.type,data:{start:Yt,end:Yt+N.size}};return Yt+=N.size,d},finalize:function(N,u){N.data=pt(u,0,u.byteLength)},revive:function(N){var u=N.type;return new Blob([Kt(N.data)],{type:u})}}}]),de.mustFinalize=function(){return Ut.length>0},de.finalize=function(N){return le(void 0,void 0,void 0,function(){var u,f,d,y,T,P,ve,k,se;return ge(this,function(Oe){switch(Oe.label){case 0:return[4,ot(new Blob(Ut),"binary")];case 1:if(u=Oe.sent(),N)for(f=0,d=N;f<d.length;f++)if((y=d[f]).$types)for(ve in(P=(T=y.$types).$)&&(T=T.$),T)(k=de.types[T[ve]])&&k.finalize&&(se=ae.ZP.getByKeyPath(y,P?"$."+ve:ve),k.finalize(se,u.slice(se.start,se.end)));return Ut=[],[2]}})})};var An=1,kn_Stream=function(){},Rn=bt(function(N,u){!function(f){var d="object"==typeof process&&process.env?process.env:self;f.parser=function(C){return new Ct(C)},f.CParser=Ct,f.CStream=Be,f.createStream=function Ie(C){return new Be(C)},f.MAX_BUFFER_LENGTH=10485760,f.DEBUG="debug"===d.CDEBUG,f.INFO="debug"===d.CDEBUG||"info"===d.CDEBUG,f.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var ve,y={textNode:void 0,numberNode:""},T=f.EVENTS.filter(function(C){return"error"!==C&&"end"!==C}),P=0;for(var Ae in f.STATE={BEGIN:P++,VALUE:P++,OPEN_OBJECT:P++,CLOSE_OBJECT:P++,OPEN_ARRAY:P++,CLOSE_ARRAY:P++,TEXT_ESCAPE:P++,STRING:P++,BACKSLASH:P++,END:P++,OPEN_KEY:P++,CLOSE_KEY:P++,TRUE:P++,TRUE2:P++,TRUE3:P++,FALSE:P++,FALSE2:P++,FALSE3:P++,FALSE4:P++,NULL:P++,NULL2:P++,NULL3:P++,NUMBER_DECIMAL_POINT:P++,NUMBER_DIGIT:P++},f.STATE)f.STATE[f.STATE[Ae]]=Ae;P=f.STATE;const k_tab=9,k_lineFeed=10,k_carriageReturn=13,k_space=32,k_doubleQuote=34,k_plus=43,k_comma=44,k_minus=45,k_period=46,k__0=48,k__9=57,k_colon=58,k_E=69,k_openBracket=91,k_backslash=92,k_closeBracket=93,k_a=97,k_b=98,k_e=101,k_f=102,k_l=108,k_n=110,k_r=114,k_s=115,k_t=116,k_u=117,k_openBrace=123,k_closeBrace=125;function Oe(C){for(var s in y)C[s]=y[s]}Object.create||(Object.create=function(C){function s(){this.__proto__=C}return s.prototype=C,new s}),Object.getPrototypeOf||(Object.getPrototypeOf=function(C){return C.__proto__}),Object.keys||(Object.keys=function(C){var s=[];for(var Y in C)C.hasOwnProperty(Y)&&s.push(Y);return s});var lt=/[\\"\n]/g;function Ct(C){if(!(this instanceof Ct))return new Ct(C);var s=this;Oe(s),s.bufferCheckPosition=f.MAX_BUFFER_LENGTH,s.q=s.c=s.p="",s.opt=C||{},s.closed=s.closedRoot=s.sawRoot=!1,s.tag=s.error=null,s.state=P.BEGIN,s.stack=new Array,s.position=s.column=0,s.line=1,s.slashed=!1,s.unicodeI=0,s.unicodeS=null,s.depth=0,Je(s,"onready")}Ct.prototype={end:function(){We(this)},write:function zt(C){var s=this;if(this.error)throw this.error;if(s.closed)return Se(s,"Cannot write after close. Assign an onready handler.");if(null===C)return We(s);var Y=0,R=C.charCodeAt(0),He=s.p;for(f.DEBUG&&console.log("write -> ["+C+"]");R&&(He=R,s.c=R=C.charCodeAt(Y++),He!==R?s.p=He:He=s.p,R);)switch(f.DEBUG&&console.log(Y,R,f.STATE[s.state]),s.position++,R===k_lineFeed?(s.line++,s.column=0):s.column++,s.state){case P.BEGIN:R===k_openBrace?s.state=P.OPEN_OBJECT:R===k_openBracket?s.state=P.OPEN_ARRAY:nt(R)||Se(s,"Non-whitespace before {[.");continue;case P.OPEN_KEY:case P.OPEN_OBJECT:if(nt(R))continue;if(s.state===P.OPEN_KEY)s.stack.push(P.CLOSE_KEY);else{if(R===k_closeBrace){Je(s,"onopenobject"),this.depth++,Je(s,"oncloseobject"),this.depth--,s.state=s.stack.pop()||P.VALUE;continue}s.stack.push(P.CLOSE_OBJECT)}R===k_doubleQuote?s.state=P.STRING:Se(s,'Malformed object key should start with "');continue;case P.CLOSE_KEY:case P.CLOSE_OBJECT:if(nt(R))continue;R===k_colon?(s.state===P.CLOSE_OBJECT?(s.stack.push(P.CLOSE_OBJECT),St(s,"onopenobject"),this.depth++):St(s,"onkey"),s.state=P.VALUE):R===k_closeBrace?(Rt(s,"oncloseobject"),this.depth--,s.state=s.stack.pop()||P.VALUE):R===k_comma?(s.state===P.CLOSE_OBJECT&&s.stack.push(P.CLOSE_OBJECT),St(s),s.state=P.OPEN_KEY):Se(s,"Bad object");continue;case P.OPEN_ARRAY:case P.VALUE:if(nt(R))continue;if(s.state===P.OPEN_ARRAY){if(Je(s,"onopenarray"),this.depth++,s.state=P.VALUE,R===k_closeBracket){Je(s,"onclosearray"),this.depth--,s.state=s.stack.pop()||P.VALUE;continue}s.stack.push(P.CLOSE_ARRAY)}R===k_doubleQuote?s.state=P.STRING:R===k_openBrace?s.state=P.OPEN_OBJECT:R===k_openBracket?s.state=P.OPEN_ARRAY:R===k_t?s.state=P.TRUE:R===k_f?s.state=P.FALSE:R===k_n?s.state=P.NULL:R===k_minus?s.numberNode+="-":k__0<=R&&R<=k__9?(s.numberNode+=String.fromCharCode(R),s.state=P.NUMBER_DIGIT):Se(s,"Bad value");continue;case P.CLOSE_ARRAY:if(R===k_comma)s.stack.push(P.CLOSE_ARRAY),St(s,"onvalue"),s.state=P.VALUE;else if(R===k_closeBracket)Rt(s,"onclosearray"),this.depth--,s.state=s.stack.pop()||P.VALUE;else{if(nt(R))continue;Se(s,"Bad array")}continue;case P.STRING:void 0===s.textNode&&(s.textNode="");var Z=Y-1,at=s.slashed,At=s.unicodeI;e:for(;;){for(f.DEBUG&&console.log(Y,R,f.STATE[s.state],at);At>0;)if(s.unicodeS+=String.fromCharCode(R),R=C.charCodeAt(Y++),s.position++,4===At?(s.textNode+=String.fromCharCode(parseInt(s.unicodeS,16)),At=0,Z=Y-1):At++,!R)break e;if(R===k_doubleQuote&&!at){s.state=s.stack.pop()||P.VALUE,s.textNode+=C.substring(Z,Y-1),s.position+=Y-1-Z;break}if(R===k_backslash&&!at&&(at=!0,s.textNode+=C.substring(Z,Y-1),s.position+=Y-1-Z,R=C.charCodeAt(Y++),s.position++,!R))break;if(at){if(at=!1,R===k_n?s.textNode+="\n":R===k_r?s.textNode+="\r":R===k_t?s.textNode+="\t":R===k_f?s.textNode+="\f":R===k_b?s.textNode+="\b":R===k_u?(At=1,s.unicodeS=""):s.textNode+=String.fromCharCode(R),R=C.charCodeAt(Y++),s.position++,Z=Y-1,R)continue;break}lt.lastIndex=Y;var It=lt.exec(C);if(null===It){s.textNode+=C.substring(Z,(Y=C.length+1)-1),s.position+=Y-1-Z;break}if(Y=It.index+1,!(R=C.charCodeAt(It.index))){s.textNode+=C.substring(Z,Y-1),s.position+=Y-1-Z;break}}s.slashed=at,s.unicodeI=At;continue;case P.TRUE:R===k_r?s.state=P.TRUE2:Se(s,"Invalid true started with t"+R);continue;case P.TRUE2:R===k_u?s.state=P.TRUE3:Se(s,"Invalid true started with tr"+R);continue;case P.TRUE3:R===k_e?(Je(s,"onvalue",!0),s.state=s.stack.pop()||P.VALUE):Se(s,"Invalid true started with tru"+R);continue;case P.FALSE:R===k_a?s.state=P.FALSE2:Se(s,"Invalid false started with f"+R);continue;case P.FALSE2:R===k_l?s.state=P.FALSE3:Se(s,"Invalid false started with fa"+R);continue;case P.FALSE3:R===k_s?s.state=P.FALSE4:Se(s,"Invalid false started with fal"+R);continue;case P.FALSE4:R===k_e?(Je(s,"onvalue",!1),s.state=s.stack.pop()||P.VALUE):Se(s,"Invalid false started with fals"+R);continue;case P.NULL:R===k_u?s.state=P.NULL2:Se(s,"Invalid null started with n"+R);continue;case P.NULL2:R===k_l?s.state=P.NULL3:Se(s,"Invalid null started with nu"+R);continue;case P.NULL3:R===k_l?(Je(s,"onvalue",null),s.state=s.stack.pop()||P.VALUE):Se(s,"Invalid null started with nul"+R);continue;case P.NUMBER_DECIMAL_POINT:R===k_period?(s.numberNode+=".",s.state=P.NUMBER_DIGIT):Se(s,"Leading zero not followed by .");continue;case P.NUMBER_DIGIT:k__0<=R&&R<=k__9?s.numberNode+=String.fromCharCode(R):R===k_period?(-1!==s.numberNode.indexOf(".")&&Se(s,"Invalid number has two dots"),s.numberNode+="."):R===k_e||R===k_E?((-1!==s.numberNode.indexOf("e")||-1!==s.numberNode.indexOf("E"))&&Se(s,"Invalid number has two exponential"),s.numberNode+="e"):R===k_plus||R===k_minus?(He===k_e||He===k_E||Se(s,"Invalid symbol in number"),s.numberNode+=String.fromCharCode(R)):(he(s),Y--,s.state=s.stack.pop()||P.VALUE);continue;default:Se(s,"Unknown state: "+s.state)}return s.position>=s.bufferCheckPosition&&function se(C){var s=Math.max(f.MAX_BUFFER_LENGTH,10),Y=0;for(var R in y){var He=void 0===C[R]?0:C[R].length;He>s&&("text"===R?closeText(C):Se(C,"Max buffer length exceeded: "+R)),Y=Math.max(Y,He)}C.bufferCheckPosition=f.MAX_BUFFER_LENGTH-Y+C.position}(s),s},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{ve=kn_Stream}catch{ve=function(){}}function Be(C){if(!(this instanceof Be))return new Be(C);this._parser=new Ct(C),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var s=this;ve.apply(s),this._parser.onend=function(){s.emit("end")},this._parser.onerror=function(Y){s.emit("error",Y),s._parser.error=null},T.forEach(function(Y){Object.defineProperty(s,"on"+Y,{get:function(){return s._parser["on"+Y]},set:function(R){if(!R)return s.removeAllListeners(Y),s._parser["on"+Y]=R,R;s.on(Y,R)},enumerable:!0,configurable:!1})})}function Je(C,s,Y){f.INFO&&console.log("-- emit",s,Y),C[s]&&C[s](Y)}function Rt(C,s,Y){St(C),Je(C,s,Y)}function St(C,s){C.textNode=function Wt(C,s){return void 0===s||(C.trim&&(s=s.trim()),C.normalize&&(s=s.replace(/\s+/g," "))),s}(C.opt,C.textNode),void 0!==C.textNode&&Je(C,s||"onvalue",C.textNode),C.textNode=void 0}function he(C){C.numberNode&&Je(C,"onvalue",parseFloat(C.numberNode)),C.numberNode=""}function Se(C,s){return St(C),s+="\nLine: "+C.line+"\nColumn: "+C.column+"\nChar: "+C.c,s=new Error(s),C.error=s,Je(C,"onerror",s),C}function We(C){return(C.state!==P.VALUE||0!==C.depth)&&Se(C,"Unexpected end"),St(C),C.c="",C.closed=!0,Je(C,"onend"),Ct.call(C,C.opt),C}function nt(C){return C===k_carriageReturn||C===k_lineFeed||C===k_space||C===k_tab}(Be.prototype=Object.create(ve.prototype,{constructor:{value:Be}})).write=function(C){C=new Buffer(C);for(var s=0;s<C.length;s++){var Y=C[s];if(this.bytes_remaining>0){for(var R=0;R<this.bytes_remaining;R++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+R]=C[R];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,s=s+R-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&Y>=128){if(Y>=194&&Y<=223&&(this.bytes_in_sequence=2),Y>=224&&Y<=239&&(this.bytes_in_sequence=3),Y>=240&&Y<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+s>C.length){for(var He=0;He<=C.length-1-s;He++)this.temp_buffs[this.bytes_in_sequence][He]=C[s+He];return this.bytes_remaining=s+this.bytes_in_sequence-C.length,!0}this.string=C.slice(s,s+this.bytes_in_sequence).toString(),s=s+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var Z=s;Z<C.length&&!(C[Z]>=128);Z++);this.string=C.slice(s,Z).toString(),this._parser.write(this.string),this.emit("data",this.string),s=Z-1}}},Be.prototype.end=function(C){return C&&C.length&&this._parser.write(C.toString()),this._parser.end(),!0},Be.prototype.on=function(C,s){var Y=this;return!Y._parser["on"+C]&&-1!==T.indexOf(C)&&(Y._parser["on"+C]=function(){var R=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);R.splice(0,0,C),Y.emit.apply(Y,R)}),ve.prototype.on.call(Y,C,s)},Be.prototype.destroy=function(){Oe(this._parser),this.emit("close")}}(u)});function G(N,u,f){return le(this,void 0,void 0,function(){function d(){return le(this,void 0,void 0,function(){var Be,Je,Rt;return ge(this,function(Wt){switch(Wt.label){case 0:Be=function(Se){var We,nt,zt,C,s,Y,R,He,Z,at,At,It,nn;return ge(this,function(Vt){switch(Vt.label){case 0:if(k.includes(Se.tableName))return[2,"continue"];if(!Se.rows)return[2,"break"];if(!Se.rows.incomplete&&0===Se.rows.length)return[2,"continue"];if(se&&ae.ZP.ignoreTransaction(function(){return se(Oe)}),nt=N.table(We=Se.tableName),zt=Ae.tables.filter(function(yt){return yt.name===We})[0].schema,!nt){if(f.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(Se.tableName," is missing in installed database"))}if(!f.acceptChangedPrimaryKey&&zt.split(",")[0]!=nt.schema.primKey.src)throw new Error("Primary key differs for table ".concat(Se.tableName,". "));for(C=Se.rows,s=[],Y=0;Y<C.length&&!(R=C[Y]).incomplete;Y++)s.push(de.revive(R));return Z=f.transform,at=(He=f.filter)?s.filter(Se.inbound?function(yt){return He(We,yt)}:function(yt){return He(We,yt[1],yt[0])}):s,Z&&(at=at.map(Se.inbound?function(yt){return Z(We,yt).value}:function(yt){var tn=Z(We,yt[1],yt[0]);return[tn.key,tn.value]})),At=Se.inbound?[void 0,at]:[at.map(function(yt){return yt[0]}),s.map(function(yt){return yt[1]})],It=At[0],nn=At[1],f.overwriteValues?[4,nt.bulkPut(nn,It)]:[3,2];case 1:return Vt.sent(),[3,4];case 2:return[4,nt.bulkAdd(nn,It)];case 3:Vt.sent(),Vt.label=4;case 4:return Oe.completedRows+=s.length,s.incomplete||(Oe.completedTables+=1),C.splice(0,s.length),[2]}})},Je=0,Rt=Ae.data,Wt.label=1;case 1:return Je<Rt.length?[5,Be(Rt[Je])]:[3,4];case 2:if("break"===Wt.sent())return[3,4];Wt.label=3;case 3:return Je++,[3,1];case 4:for(;Ae.data.length>0&&Ae.data[0].rows&&!Ae.data[0].rows.incomplete;)Ae.data.splice(0,1);return T.done()||T.eof()?[3,8]:ve?(T.pullSync(y),[3,7]):[3,5];case 5:return[4,ae.ZP.waitFor(T.pullAsync(y))];case 6:Wt.sent(),Wt.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var y,T,ve,Ae,k,se,Oe,lt,Ct,Ie;return ge(this,function(Be){switch(Be.label){case 0:return[4,z(u,y=(f=f||{}).chunkSizeBytes||1048576)];case 1:if(T=Be.sent(),ve="FileReaderSync"in self,Ae=T.result.data,k=f.skipTables?f.skipTables:[],!f.acceptNameDiff&&N.name!==Ae.databaseName)throw new Error("Name differs. Current database name is ".concat(N.name," but export is ").concat(Ae.databaseName));if(!f.acceptVersionDiff&&N.verno!==Ae.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(N.verno," but export is ").concat(Ae.databaseVersion));if(se=f.progressCallback,Oe={done:!1,completedRows:0,completedTables:0,totalRows:Ae.tables.reduce(function(Je,Rt){return Je+Rt.rowCount},0),totalTables:Ae.tables.length},se&&ae.ZP.ignoreTransaction(function(){return se(Oe)}),!f.clearTablesBeforeImport)return[3,5];lt=0,Ct=N.tables,Be.label=2;case 2:return lt<Ct.length?k.includes((Ie=Ct[lt]).name)?[3,4]:[4,Ie.clear()]:[3,5];case 3:Be.sent(),Be.label=4;case 4:return lt++,[3,2];case 5:return f.noTransaction?[4,d()]:[3,7];case 6:return Be.sent(),[3,9];case 7:return[4,N.transaction("rw",N.tables,d)];case 8:Be.sent(),Be.label=9;case 9:return Oe.done=!0,se&&ae.ZP.ignoreTransaction(function(){return se(Oe)}),[2]}})})}function z(N,u){return le(this,void 0,void 0,function(){var f,d;return ge(this,function(y){switch(y.label){case 0:f="slice"in N?function mn(N){var u=0,f=function gn(N){var d,T,P,u=Rn.parser(),f=0,y=[],ve=!1,Ae=!1;return u.onopenobject=function(k){var se={incomplete:!0};d||(d=se),T&&(y.push([P,T,Ae]),N&&(Ae?T.push(se):T[P]=se)),T=se,P=k,Ae=!1,++f},u.onkey=function(k){return P=k},u.onvalue=function(k){return Ae?T.push(k):T[P]=k},u.oncloseobject=function(){var k;if(delete T.incomplete,P=null,0==--f)ve=!0;else{var se=T;k=y.pop(),P=k[0],T=k[1],Ae=k[2],N||(Ae?T.push(se):T[P]=se)}},u.onopenarray=function(){var k=[];k.incomplete=!0,d||(d=k),T&&(y.push([P,T,Ae]),N&&(Ae?T.push(k):T[P]=k)),T=k,Ae=!0,P=null,++f},u.onclosearray=function(){var k;if(delete T.incomplete,P=null,0==--f)ve=!0;else{var se=T;k=y.pop(),P=k[0],T=k[1],Ae=k[2],N||(Ae?T.push(se):T[P]=se)}},{write:function(k){return u.write(k),d},done:function(){return ve}}}(!0),d={pullAsync:function(y){return le(this,void 0,void 0,function(){var T,P,ve;return ge(this,function(Ae){switch(Ae.label){case 0:return T=N.slice(u,u+y),u+=y,[4,ot(T,"text")];case 1:return P=Ae.sent(),ve=f.write(P),d.result=ve||{},[2,ve]}})})},pullSync:function(y){var T=N.slice(u,u+y);u+=y;var P=gt(T,"text"),ve=f.write(P);return d.result=ve||{},ve},done:function(){return f.done()},eof:function(){return u>=N.size},result:{}};return d}(N):N,y.label=1;case 1:return f.eof()?[3,3]:[4,f.pullAsync(u)];case 2:return y.sent(),f.result.data&&f.result.data.data?[3,3]:[3,1];case 3:if(!(d=f.result)||"dexie"!=d.formatName)throw new Error("Given file is not a dexie export");if(d.formatVersion>An)throw new Error("Format version ".concat(d.formatVersion," not supported"));if(!d.data)throw new Error("No data in export file");if(!d.data.databaseName)throw new Error("Missing databaseName in export file");if(!d.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!d.data.tables)throw new Error("Missing tables in export file");return[2,f]}})})}ae.ZP.prototype.export=function(N){return function Kn(N,u){return le(this,void 0,void 0,function(){function f(){return le(this,void 0,void 0,function(){var Oe,lt,Ct,Ie,Be,Je,Rt,St,he;return ge(this,function(Se){switch(Se.label){case 0:return[4,Promise.all(y.map(function(We){return We.count()}))];case 1:(Oe=Se.sent()).forEach(function(We,nt){return P[nt].rowCount=We}),se.totalRows=Oe.reduce(function(We,nt){return We+nt}),lt=JSON.stringify(Ae,void 0,ve?2:void 0),Ct=lt.lastIndexOf("]"),Ie=lt.substring(0,Ct),T.push(Ie),Be=u.filter,Je=u.transform,Rt=function(We){var nt,zt,C,s,R,He,Z,at,At,It;return ge(this,function(Vt){switch(Vt.label){case 0:nt=N.table(We),C=!!(zt=nt.schema.primKey).keyPath,s=u.numRowsPerChunk||2e3,R=JSON.stringify(C?{tableName:nt.name,inbound:!0,rows:[]}:{tableName:nt.name,inbound:!1,rows:[]},void 0,ve?2:void 0),ve&&(R=R.split("\n").join("\n    ")),He=R.lastIndexOf("]"),T.push(R.substring(0,He)),Z=null,at=0,At=!0,It=function(){var yt,Pt,Mt,tn,Te,ht,Me,j,L;return ge(this,function(U){switch(U.label){case 0:return k&&ae.ZP.ignoreTransaction(function(){return k(se)}),[4,(yt=null==Z?nt.limit(s):nt.where(":id").above(Z).limit(s)).toArray()];case 1:return 0===(Pt=U.sent()).length?[2,"break"]:(null!=Z&&at>0&&(T.push(","),ve&&T.push("\n      ")),At=Pt.length===s,C?(Mt=Be?Pt.filter(function(M){return Be(We,M)}):Pt,tn=Je?Mt.map(function(M){return Je(We,M).value}):Mt,Te=tn.map(function(M){return de.encapsulate(M)}),de.mustFinalize()?[4,ae.ZP.waitFor(de.finalize(Te))]:[3,3]):[3,4]);case 2:U.sent(),U.label=3;case 3:return L=JSON.stringify(Te,void 0,ve?2:void 0),ve&&(L=L.split("\n").join("\n      ")),T.push(new Blob([L.substring(1,L.length-1)])),at=tn.length,Z=Pt.length>0?ae.ZP.getByKeyPath(Pt[Pt.length-1],zt.keyPath):null,[3,8];case 4:return[4,yt.primaryKeys()];case 5:return ht=U.sent(),Me=ht.map(function(M,H){return[M,Pt[H]]}),Be&&(Me=Me.filter(function(M){return Be(We,M[1],M[0])})),Je&&(Me=Me.map(function(M){var ke=Je(We,M[1],M[0]);return[ke.key,ke.value]})),j=Me.map(function(M){return de.encapsulate(M)}),de.mustFinalize()?[4,ae.ZP.waitFor(de.finalize(j))]:[3,7];case 6:U.sent(),U.label=7;case 7:L=JSON.stringify(j,void 0,ve?2:void 0),ve&&(L=L.split("\n").join("\n      ")),T.push(new Blob([L.substring(1,L.length-1)])),at=Me.length,Z=ht.length>0?ht[ht.length-1]:null,U.label=8;case 8:return se.completedRows+=Pt.length,[2]}})},Vt.label=1;case 1:return At?[5,It()]:[3,3];case 2:return"break"===Vt.sent()?[3,3]:[3,1];case 3:return T.push(R.substr(He)),se.completedTables+=1,se.completedTables<se.totalTables&&T.push(","),[2]}})},St=0,he=P,Se.label=2;case 2:return St<he.length?[5,Rt(he[St].name)]:[3,5];case 3:Se.sent(),Se.label=4;case 4:return St++,[3,2];case 5:return T.push(lt.substr(Ct)),se.done=!0,k&&ae.ZP.ignoreTransaction(function(){return k(se)}),[2]}})})}var d,y,T,P,ve,Ae,k,se;return ge(this,function(Oe){switch(Oe.label){case 0:d=(u=u||{}).skipTables?u.skipTables:[],y=N.tables.filter(function(lt){return!d.includes(lt.name)}),T=[],P=y.map(function(lt){return{name:lt.name,schema:it(lt),rowCount:0}}),ve=u.prettyJson,Ae={formatName:"dexie",formatVersion:1,data:{databaseName:N.name,databaseVersion:N.verno,tables:P,data:[]}},k=u.progressCallback,se={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:P.length},Oe.label=1;case 1:return Oe.trys.push([1,,6,7]),u.noTransaction?[4,f()]:[3,3];case 2:return Oe.sent(),[3,5];case 3:return[4,N.transaction("r",N.tables,f)];case 4:Oe.sent(),Oe.label=5;case 5:return[3,7];case 6:return de.finalize(),[7];case 7:return[2,new Blob(T,{type:"text/json"})]}})})}(this,N)},ae.ZP.prototype.import=function(N,u){return G(this,N,u)},ae.ZP.import=function(N,u){return function Sn(N,u){return le(this,void 0,void 0,function(){var d,y,T;return ge(this,function(P){switch(P.label){case 0:return[4,z(N,(u=u||{}).chunkSizeBytes||1048576)];case 1:return d=P.sent(),(T=new ae.ZP((y=d.result.data).databaseName)).version(y.databaseVersion).stores(function Bt(N){for(var u={},f=0,d=N.tables;f<d.length;f++){var y=d[f];u[y.name]=y.schema}return u}(y)),[4,G(T,d,u)];case 2:return P.sent(),[2,T]}})})}(N,u)};class Q extends ae.ZP{examId;exams;templates;alignImages;nonAlignImages;constructor(u){super("correctExam"+u),this.examId=u,this.version(3).stores({exams:"++id",templates:"++id, examId, [examId+pageNumber]",alignImages:"++id, examId,[examId+pageNumber]",nonAlignImages:"++id, examId,[examId+pageNumber]"})}resetDatabase(){var u=this;return(0,D.Z)(function*(){yield u.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{u.exams.clear(),u.templates.clear(),u.alignImages.clear(),u.nonAlignImages.clear()})})()}removeElementForExam(){var u=this;return(0,D.Z)(function*(){return u.delete()})()}removePageAlignForExam(){var u=this;return(0,D.Z)(function*(){yield u.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{u.exams.delete(u.examId),u.alignImages.where("examId").equals(u.examId).toArray().then(f=>u.alignImages.bulkDelete(f.map(d=>d.id)))})})()}removeElementForExamForPages(u,f){var d=this;return(0,D.Z)(function*(){yield d.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{d.alignImages.where({examId:d.examId}).filter(y=>y.pageNumber>=u&&y.pageNumber<=f).toArray().then(y=>d.alignImages.bulkDelete(y.map(T=>T.id))),d.nonAlignImages.where({examId:d.examId}).filter(y=>y.pageNumber>=u&&y.pageNumber<=f).toArray().then(y=>d.nonAlignImages.bulkDelete(y.map(T=>T.id)))})})()}removePageAlignForExamForPage(u){var f=this;return(0,D.Z)(function*(){yield f.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{f.alignImages.where({examId:f.examId,pageNumber:u}).delete()})})()}removePageNonAlignForExamForPage(u){var f=this;return(0,D.Z)(function*(){yield f.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{f.nonAlignImages.where({examId:f.examId,pageNumber:u}).delete()})})()}removePageAlignForExamForPages(u,f){var d=this;return(0,D.Z)(function*(){yield d.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{d.alignImages.where({examId:d.examId}).filter(y=>y.pageNumber>=u&&y.pageNumber<=f).toArray().then(y=>d.alignImages.bulkDelete(y.map(T=>T.id)))})})()}removePageNonAlignForExamForPages(u,f){var d=this;return(0,D.Z)(function*(){yield d.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{d.nonAlignImages.where({examId:d.examId}).filter(y=>y.pageNumber>=u&&y.pageNumber<=f).toArray().then(y=>d.nonAlignImages.bulkDelete(y.map(T=>T.id)))})})()}removeExam(){var u=this;return(0,D.Z)(function*(){yield u.transaction("rw","exams",()=>{u.exams.delete(u.examId)})})()}addAligneImage(u){var f=this;return(0,D.Z)(function*(){yield f.alignImages.put(u)})()}addNonAligneImage(u){var f=this;return(0,D.Z)(function*(){yield f.nonAlignImages.put(u)})()}addNonAligneImages(u){var f=this;return(0,D.Z)(function*(){yield f.nonAlignImages.bulkAdd(u)})()}export(u){return super.export(u)}import(u,f){return super.import(u,f)}countPageTemplate(){var u=this;return(0,D.Z)(function*(){return yield u.templates.where("examId").equals(u.examId).count()})()}countAlignImage(){var u=this;return(0,D.Z)(function*(){return yield u.alignImages.where("examId").equals(u.examId).count()})()}countNonAlignImage(){var u=this;return(0,D.Z)(function*(){return yield u.nonAlignImages.where("examId").equals(u.examId).count()})()}getFirstNonAlignImage(u){var f=this;return(0,D.Z)(function*(){return yield f.nonAlignImages.where({examId:f.examId,pageNumber:u}).first()})()}getFirstAlignImage(u){var f=this;return(0,D.Z)(function*(){return yield f.alignImages.where({examId:f.examId,pageNumber:u}).first()})()}getFirstTemplate(u){var f=this;return(0,D.Z)(function*(){return yield f.templates.where({examId:f.examId,pageNumber:u}).first()})()}getNonAlignImageBetweenAndSortByPageNumber(u,f){var d=this;return(0,D.Z)(function*(){return yield d.nonAlignImages.where({examId:d.examId}).filter(y=>y.pageNumber>=u&&y.pageNumber<=f).sortBy("pageNumber")})()}getAlignImageBetweenAndSortByPageNumber(u,f){var d=this;return(0,D.Z)(function*(){return yield d.alignImages.where({examId:d.examId}).filter(y=>y.pageNumber>=u&&y.pageNumber<=f).sortBy("pageNumber")})()}getNonAlignImagesForPageNumbers(u){var f=this;return(0,D.Z)(function*(){return yield f.nonAlignImages.where({examId:f.examId}).filter(d=>u.includes(d.pageNumber)).sortBy("pageNumber")})()}getAlignImagesForPageNumbers(u){var f=this;return(0,D.Z)(function*(){return yield f.alignImages.where({examId:f.examId}).filter(d=>u.includes(d.pageNumber)).sortBy("pageNumber")})()}getNonAlignSortByPageNumber(){var u=this;return(0,D.Z)(function*(){return yield u.nonAlignImages.where({examId:u.examId}).sortBy("pageNumber")})()}moveNonAlignPages(u,f){var d=this;return(0,D.Z)(function*(){u!==f&&(yield d.nonAlignImages.where({examId:d.examId}).filter(y=>y.pageNumber===u).modify(y=>{y.pageNumber=-1e3}),u<f?yield d.nonAlignImages.where({examId:d.examId}).filter(y=>y.pageNumber>u&&y.pageNumber<=f).modify(y=>{y.pageNumber=y.pageNumber-1}):yield d.nonAlignImages.where({examId:d.examId}).filter(y=>y.pageNumber<u&&y.pageNumber>=f).modify(y=>{y.pageNumber=y.pageNumber+1}),yield d.nonAlignImages.where({examId:d.examId}).filter(y=>-1e3===y.pageNumber).modify(y=>{y.pageNumber=f}))})()}moveAlignPages(u,f){var d=this;return(0,D.Z)(function*(){u!==f&&(yield d.alignImages.where({examId:d.examId,pageNumber:u}).modify(y=>{y.pageNumber=-1e3}),u<f?yield d.alignImages.where({examId:d.examId}).filter(y=>y.pageNumber>u&&y.pageNumber<=f).modify(y=>{y.pageNumber=y.pageNumber-1}):yield d.alignImages.where({examId:d.examId}).filter(y=>y.pageNumber<u&&y.pageNumber>=f).modify(y=>{y.pageNumber=y.pageNumber+1}),yield d.alignImages.where({examId:d.examId,pageNumber:-1e3}).modify(y=>{y.pageNumber=f}))})()}getAlignSortByPageNumber(){var u=this;return(0,D.Z)(function*(){return yield u.alignImages.where({examId:u.examId}).sortBy("pageNumber")})()}addExam(){var u=this;return(0,D.Z)(function*(){return yield u.exams.add({id:u.examId})})()}addTemplate(u){var f=this;return(0,D.Z)(function*(){return yield f.templates.add({examId:f.examId,pageNumber:u.pageNumber,value:u.value})})()}countNonAlignWithPageNumber(u){var f=this;return(0,D.Z)(function*(){return yield f.nonAlignImages.where({examId:f.examId,pageNumber:u}).count()})()}countAlignWithPageNumber(u){var f=this;return(0,D.Z)(function*(){return yield f.alignImages.where({examId:f.examId,pageNumber:u}).count()})()}}class Ee{dbs=new Map;resetDatabase(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u);return void 0===d&&(d=new Q(u),f.dbs.set(u,d)),d.resetDatabase()})()}removeExam(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u);return void 0===d&&(d=new Q(u),f.dbs.set(u,d)),d.removeExam()})()}removeElementForExam(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u);return void 0===d&&(d=new Q(u),f.dbs.set(u,d)),f.dbs.delete(u),d.removeElementForExam()})()}removeElementForExamForPages(u,f,d){var y=this;return(0,D.Z)(function*(){let T=y.dbs.get(u);return void 0===T&&(T=new Q(u),y.dbs.set(u,T)),T.removeElementForExamForPages(f,d)})()}removePageAlignForExam(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u);return void 0===d&&(d=new Q(u),f.dbs.set(u,d)),d.removePageAlignForExam()})()}removePageAlignForExamForPage(u,f){var d=this;return(0,D.Z)(function*(){let y=d.dbs.get(u);return void 0===y&&(y=new Q(u),d.dbs.set(u,y)),y.removePageAlignForExamForPage(f)})()}removePageNonAlignForExamForPage(u,f){var d=this;return(0,D.Z)(function*(){let y=d.dbs.get(u);return void 0===y&&(y=new Q(u),d.dbs.set(u,y)),y.removePageNonAlignForExamForPage(f)})()}removePageAlignForExamForPages(u,f,d){var y=this;return(0,D.Z)(function*(){let T=y.dbs.get(u);return void 0===T&&(T=new Q(u),y.dbs.set(u,T)),T.removePageAlignForExamForPages(f,d)})()}removePageNonAlignForExamForPages(u,f,d){var y=this;return(0,D.Z)(function*(){let T=y.dbs.get(u);return void 0===T&&(T=new Q(u),y.dbs.set(u,T)),T.removePageNonAlignForExamForPages(f,d)})()}addAligneImage(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u.examId);return void 0===d&&(d=new Q(u.examId),f.dbs.set(u.examId,d)),d.addAligneImage(u)})()}addNonAligneImage(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u.examId);return void 0===d&&(d=new Q(u.examId),f.dbs.set(u.examId,d)),d.addNonAligneImage(u)})()}addNonAligneImages(u){var f=this;return(0,D.Z)(function*(){if(u.length>0){let d=f.dbs.get(u[0].examId);return void 0===d&&(d=new Q(u[0].examId),f.dbs.set(u[0].examId,d)),d.addNonAligneImages(u)}})()}export(u,f){let d=this.dbs.get(u);return void 0===d&&(d=new Q(u),this.dbs.set(u,d)),d.export(f)}import(u,f,d){let y=this.dbs.get(u);return void 0===y&&(y=new Q(u),this.dbs.set(u,y)),y.import(f,d)}countPageTemplate(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u);return void 0===d&&(d=new Q(u),f.dbs.set(u,d)),d.countPageTemplate()})()}countAlignImage(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u);return void 0===d&&(d=new Q(u),f.dbs.set(u,d)),d.countAlignImage()})()}countNonAlignImage(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u);return void 0===d&&(d=new Q(u),f.dbs.set(u,d)),d.countNonAlignImage()})()}getFirstNonAlignImage(u,f){var d=this;return(0,D.Z)(function*(){let y=d.dbs.get(u);return void 0===y&&(y=new Q(u),d.dbs.set(u,y)),y.getFirstNonAlignImage(f)})()}getFirstAlignImage(u,f){var d=this;return(0,D.Z)(function*(){let y=d.dbs.get(u);return void 0===y&&(y=new Q(u),d.dbs.set(u,y)),y.getFirstAlignImage(f)})()}getFirstTemplate(u,f){var d=this;return(0,D.Z)(function*(){let y=d.dbs.get(u);return void 0===y&&(y=new Q(u),d.dbs.set(u,y)),y.getFirstTemplate(f)})()}getNonAlignImageBetweenAndSortByPageNumber(u,f,d){var y=this;return(0,D.Z)(function*(){let T=y.dbs.get(u);return void 0===T&&(T=new Q(u),y.dbs.set(u,T)),T.getNonAlignImageBetweenAndSortByPageNumber(f,d)})()}getAlignImageBetweenAndSortByPageNumber(u,f,d){var y=this;return(0,D.Z)(function*(){let T=y.dbs.get(u);return void 0===T&&(T=new Q(u),y.dbs.set(u,T)),T.getAlignImageBetweenAndSortByPageNumber(f,d)})()}getNonAlignImagesForPageNumbers(u,f){var d=this;return(0,D.Z)(function*(){let y=d.dbs.get(u);return void 0===y&&(y=new Q(u),d.dbs.set(u,y)),y.getNonAlignImagesForPageNumbers(f)})()}getAlignImagesForPageNumbers(u,f){var d=this;return(0,D.Z)(function*(){let y=d.dbs.get(u);return void 0===y&&(y=new Q(u),d.dbs.set(u,y)),y.getAlignImagesForPageNumbers(f)})()}getNonAlignSortByPageNumber(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u);return void 0===d&&(d=new Q(u),f.dbs.set(u,d)),d.getNonAlignSortByPageNumber()})()}getAlignSortByPageNumber(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u);return void 0===d&&(d=new Q(u),f.dbs.set(u,d)),d.getAlignSortByPageNumber()})()}addExam(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u);return void 0===d&&(d=new Q(u),f.dbs.set(u,d)),d.addExam()})()}addTemplate(u){var f=this;return(0,D.Z)(function*(){let d=f.dbs.get(u.examId);return void 0===d&&(d=new Q(u.examId),f.dbs.set(u.examId,d)),d.addTemplate(u)})()}countNonAlignWithPageNumber(u,f){var d=this;return(0,D.Z)(function*(){let y=d.dbs.get(u);return void 0===y&&(y=new Q(u),d.dbs.set(u,y)),y.countNonAlignWithPageNumber(f)})()}countAlignWithPageNumber(u,f){var d=this;return(0,D.Z)(function*(){let y=d.dbs.get(u);return void 0===y&&(y=new Q(u),d.dbs.set(u,y)),y.countAlignWithPageNumber(f)})()}moveNonAlignPages(u,f,d){var y=this;return(0,D.Z)(function*(){let T=y.dbs.get(u);return void 0===T&&(T=new Q(u),y.dbs.set(u,T)),T.moveNonAlignPages(f,d)})()}moveAlignPages(u,f,d){var y=this;return(0,D.Z)(function*(){let T=y.dbs.get(u);return void 0===T&&(T=new Q(u),y.dbs.set(u,T)),T.moveAlignPages(f,d)})()}}new Ee},3667:function(Ye){Ye.exports=function(){"use strict";var Fe=function(e,t){return(Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)},$=function(){return($=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function D(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var ae=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pe=Object.keys,le=Array.isArray;function ge(e,t){return"object"!=typeof t||pe(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||ae.Promise||(ae.Promise=Promise);var it=Object.getPrototypeOf,Bt={}.hasOwnProperty;function ot(e,t){return Bt.call(e,t)}function gt(e,t){"function"==typeof t&&(t=t(it(e))),(typeof Reflect>"u"?pe:Reflect.ownKeys)(t).forEach(function(n){bt(e,n,t[n])})}var Gt=Object.defineProperty;function bt(e,t,n,r){Gt(e,t,ge(n&&ot(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Pe(e){return{from:function(t){return e.prototype=Object.create(t.prototype),bt(e.prototype,"constructor",e),{extend:gt.bind(null,e.prototype)}}}}var dn=Object.getOwnPropertyDescriptor,Ue=[].slice;function et(e,t,n){return Ue.call(e,t,n)}function en(e,t){return t(e)}function pt(e){if(!e)throw new Error("Assertion Failed")}function Kt(e){ae.setImmediate?setImmediate(e):setTimeout(e,0)}function ft(e,t){if("string"==typeof t&&ot(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var a=ft(e,t[r]);n.push(a)}return n}var h=t.indexOf(".");if(-1!==h){var p=e[t.substr(0,h)];return null==p?void 0:ft(p,t.substr(h+1))}}function Tt(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){pt("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)Tt(e,t[r],n[r])}else{var a,h,p=t.indexOf(".");-1!==p?(a=t.substr(0,p),""===(h=t.substr(p+1))?void 0===n?le(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n:Tt(p=(p=e[a])&&ot(e,a)?p:e[a]={},h,n)):void 0===n?le(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function xt(e){var t,n={};for(t in e)ot(e,t)&&(n[t]=e[t]);return n}var de=[].concat;function Et(e){return de.apply([],e)}var fe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Et([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return ae[e]}),Ut=new Set(fe.map(function(e){return ae[e]})),Yt=null;function kt(e){return Yt=new WeakMap,e=function t(n){if(!n||"object"!=typeof n)return n;var r=Yt.get(n);if(r)return r;if(le(n)){Yt.set(n,r=[]);for(var i=0,a=n.length;i<a;++i)r.push(t(n[i]))}else if(Ut.has(n.constructor))r=n;else{var h,p=it(n);for(h in r=p===Object.prototype?{}:Object.create(p),Yt.set(n,r),n)ot(n,h)&&(r[h]=t(n[h]))}return r}(e),Yt=null,e}var Kn={}.toString;function An(e){return Kn.call(e).slice(8,-1)}var kn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Rn="symbol"==typeof kn?function(e){var t;return null!=e&&(t=e[kn])&&t.apply(e)}:function(){return null};function mn(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var gn={};function an(e){var t,n,r,i;if(1===arguments.length){if(le(e))return e.slice();if(this===gn&&"string"==typeof e)return[e];if(i=Rn(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Sn=typeof Symbol<"u"?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},_n=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Je=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),ue={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function G(e,t){this.name=e,this.message=t}function z(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join("\n")}function _e(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=z(e,t)}function Q(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=z(e,this.failures)}Pe(G).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Pe(_e).from(G),Pe(Q).from(G);var Ee=_n.reduce(function(e,t){return e[t]=t+"Error",e},{}),Nt=G,N=_n.reduce(function(e,t){var n=t+"Error";function r(i,a){this.name=n,i?"string"==typeof i?(this.message="".concat(i).concat(a?"\n "+a:""),this.inner=a||null):"object"==typeof i&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=ue[t]||n,this.inner=null)}return Pe(r).from(Nt),e[t]=r,e},{});N.Syntax=SyntaxError,N.Type=TypeError,N.Range=RangeError;var u=Je.reduce(function(e,t){return e[t+"Error"]=N[t],e},{}),f=_n.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=N[t]),e},{});function d(){}function y(e){return e}function T(e,t){return null==e||e===y?t:function(n){return t(e(n))}}function P(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ve(e,t){return e===d?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?P(r,this.onsuccess):r),i&&(this.onerror=this.onerror?P(i,this.onerror):i),void 0!==a?a:n}}function Ae(e,t){return e===d?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?P(n,this.onsuccess):n),r&&(this.onerror=this.onerror?P(r,this.onerror):r)}}function k(e,t){return e===d?t:function(n){var r=e.apply(this,arguments);ge(n,r);var i=this.onsuccess,a=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?P(i,this.onsuccess):i),a&&(this.onerror=this.onerror?P(a,this.onerror):a),void 0===r?void 0===n?void 0:n:ge(r,n)}}function se(e,t){return e===d?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Oe(e,t){return e===d?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}f.ModifyError=_e,f.DexieError=G,f.BulkError=Q;var lt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ct(e){lt=e}var Je,Ie={},Be=100,Rt=(_n=(_n=(fe=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,it(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,it(t),e]}())[1])&&_n.then,(Je=fe[0])&&Je.constructor),St=!!(fe=fe[2]),he=function(e,t){Y.push([e,t]),Se&&(queueMicrotask(Pt),Se=!1)},Wt=!0,Se=!0,We=[],nt=[],zt=y,C={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:d,pgp:!1,env:{},finalize:d},s=C,Y=[],R=0,He=[];function Z(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=s;if("function"!=typeof e){if(e!==Ie)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&It(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,i){try{i(function(a){if(null===r._state){if(a===r)throw new TypeError("A promise cannot be resolved with itself.");var h=r._lib&&Mt();a&&"function"==typeof a.then?n(r,function(p,w){a instanceof Z?a._then(p,w):a.then(p,w)}):(r._state=!0,r._value=a,nn(r)),h&&tn()}},It.bind(null,r))}catch(a){It(r,a)}}(this,e)}var at={get:function(){var e=s,t=H;function n(r,i){var a=this,h=!e.global&&(e!==s||t!==H),p=h&&!ye(),w=new Z(function(g,A){Vt(a,new At(bn(r,e,h,p),bn(i,e,h,p),g,A,e))});return this._consoleTask&&(w._consoleTask=this._consoleTask),w}return n.prototype=Ie,n},set:function(e){bt(this,"then",e&&e.prototype===Ie?at:{get:function(){return e},set:at.set})}};function At(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function It(e,t){var n,r;nt.push(t),null===e._state&&(n=e._lib&&Mt(),t=zt(t),e._state=!1,e._value=t,r=e,We.some(function(i){return i._value===r._value})||We.push(r),nn(e),n&&tn())}function nn(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Vt(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===R&&(++R,he(function(){0==--R&&Te()},[]))}function Vt(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++R,he(yt,[n,e,t])}else e._listeners.push(t)}function yt(e,t,n){try{var r,i=t._value;!t._state&&nt.length&&(nt=[]),r=lt&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||-1!==nt.indexOf(i)||function(a){for(var h=We.length;h;)if(We[--h]._value===a._value)return We.splice(h,1)}(t),n.resolve(r)}catch(a){n.reject(a)}finally{0==--R&&Te(),--n.psd.ref||n.psd.finalize()}}function Pt(){Jt(C,function(){Mt()&&tn()})}function Mt(){var e=Wt;return Se=Wt=!1,e}function tn(){var e,t,n;do{for(;0<Y.length;)for(e=Y,Y=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<Y.length);Se=Wt=!0}function Te(){var e=We;We=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=He.slice(0),n=t.length;n;)t[--n]()}function ht(e){return new Z(Ie,!1,e)}function Me(e,t){var n=s;return function(){var r=Mt(),i=s;try{return Dt(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{Dt(i,!1),r&&tn()}}}gt(Z.prototype,{then:at,_then:function(e,t){Vt(this,new At(null,null,e,t,s))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return this.then(null,"function"==typeof t?function(r){return(r instanceof t?n:ht)(r)}:function(r){return(r&&r.name===t?n:ht)(r)})},finally:function(e){return this.then(function(t){return Z.resolve(e()).then(function(){return t})},function(t){return Z.resolve(e()).then(function(){return ht(t)})})},timeout:function(e,t){var n=this;return e<1/0?new Z(function(r,i){var a=setTimeout(function(){return i(new N.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&bt(Z.prototype,Symbol.toStringTag,"Dexie.Promise"),C.env=vn(),gt(Z,{all:function(){var e=an.apply(null,arguments).map(Ft);return new Z(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,a){return Z.resolve(i).then(function(h){e[a]=h,--r||t(e)},n)})})},resolve:function(e){return e instanceof Z?e:e&&"function"==typeof e.then?new Z(function(t,n){e.then(t,n)}):new Z(Ie,!0,e)},reject:ht,race:function(){var e=an.apply(null,arguments).map(Ft);return new Z(function(t,n){e.map(function(r){return Z.resolve(r).then(t,n)})})},PSD:{get:function(){return s},set:function(e){return s=e}},totalEchoes:{get:function(){return H}},newPSD:ke,usePSD:Jt,scheduler:{get:function(){return he},set:function(e){he=e}},rejectionMapper:{get:function(){return zt},set:function(e){zt=e}},follow:function(e,t){return new Z(function(n,r){return ke(function(i,a){var h=s;h.unhandleds=[],h.onunhandled=a,h.finalize=P(function(){var p,w=this;p=function(){0===w.unhandleds.length?i():a(w.unhandleds[0])},He.push(function g(){p(),He.splice(He.indexOf(g),1)}),++R,he(function(){0==--R&&Te()},[])},h.finalize),e()},t,n,r)})}}),Rt&&(Rt.allSettled&&bt(Z,"allSettled",function(){var e=an.apply(null,arguments).map(Ft);return new Z(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return Z.resolve(i).then(function(h){return r[a]={status:"fulfilled",value:h}},function(h){return r[a]={status:"rejected",reason:h}}).then(function(){return--n||t(r)})})})}),Rt.any&&typeof AggregateError<"u"&&bt(Z,"any",function(){var e=an.apply(null,arguments).map(Ft);return new Z(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,h){return Z.resolve(a).then(function(p){return t(p)},function(p){i[h]=p,--r||n(new AggregateError(i))})})})}));var j={awaits:0,echoes:0,id:0},L=0,U=[],M=0,H=0,qe=0;function ke(e,t,n,r){var i=s,a=Object.create(i);return a.parent=i,a.ref=0,a.global=!1,a.id=++qe,a.env=St?{Promise:Z,PromiseProp:{value:Z,configurable:!0,writable:!0},all:Z.all,race:Z.race,allSettled:Z.allSettled,any:Z.any,resolve:Z.resolve,reject:Z.reject}:{},t&&ge(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Jt(a,e,n,r),0===a.ref&&a.finalize(),r}function De(){return j.id||(j.id=++L),++j.awaits,j.echoes+=Be,j.id}function ye(){return!!j.awaits&&(0==--j.awaits&&(j.id=0),j.echoes=j.awaits*Be,!0)}function Ft(e){return j.echoes&&e&&e.constructor===Rt?(De(),e.then(function(t){return ye(),t},function(t){return ye(),ut(t)})):e}function un(){var e=U[U.length-1];U.pop(),Dt(e,!1)}function Dt(e,t){var n,r=s;(t?!j.echoes||M++&&e===s:!M||--M&&e===s)||queueMicrotask(t?function(i){++H,j.echoes&&0!=--j.echoes||(j.echoes=j.awaits=j.id=0),U.push(s),Dt(i,!0)}.bind(null,e):un),e!==s&&(s=e,r===C&&(C.env=vn()),St&&(n=C.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(ae,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function vn(){var e=ae.Promise;return St?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(ae,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Jt(e,t,n,r,i){var a=s;try{return Dt(e,!0),t(n,r,i)}finally{Dt(a,!1)}}function bn(e,t,n,r){return"function"!=typeof e?e:function(){var i=s;n&&De(),Dt(t,!0);try{return e.apply(this,arguments)}finally{Dt(i,!1),r&&queueMicrotask(ye)}}}function rn(e){Promise===Rt&&0===j.echoes?0===M?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+_n).indexOf("[native code]")&&(De=ye=d);var ut=Z.reject,$e="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",st="String expected.",tt=[],Ot="__dbnames",me="readonly",l="readwrite";function o(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var c={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function m(e){return"string"!=typeof e||/\./.test(e)?function(t){return t}:function(t){return void 0===t[e]&&e in t&&delete(t=kt(t))[e],t}}function E(){throw N.Type()}function q(e,t){try{var n=ee(e),r=ee(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(i,a){for(var h=i.length,p=a.length,w=h<p?h:p,g=0;g<w;++g)if(i[g]!==a[g])return i[g]<a[g]?-1:1;return h===p?0:h<p?-1:1}(be(e),be(t));case"Array":return function(i,a){for(var h=i.length,p=a.length,w=h<p?h:p,g=0;g<w;++g){var A=q(i[g],a[g]);if(0!==A)return A}return h===p?0:h<p?-1:1}(e,t)}}catch{}return NaN}function ee(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=An(e))?"binary":e}function be(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ce=(re.prototype._trans=function(e,t,n){var r=this._tx||s.trans,i=this.name,a=lt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function h(g,A,v){if(!v.schema[i])throw new N.NotFound("Table "+i+" not part of transaction");return t(v.idbtrans,v)}var p=Mt();try{var w=r&&r.db._novip===this.db._novip?r===s.trans?r._promise(e,h,n):ke(function(){return r._promise(e,h,n)},{trans:r,transless:s.transless||s}):function g(A,v,O,b){if(A.idbdb&&(A._state.openComplete||s.letThrough||A._vip)){var x=A._createTransaction(v,O,A._dbSchema);try{x.create(),A._state.PR1398_maxLoop=3}catch(S){return S.name===Ee.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return g(A,v,O,b)})):ut(S)}return x._promise(v,function(S,_){return ke(function(){return s.trans=x,b(S,_,x)})}).then(function(S){if("readwrite"===v)try{x.idbtrans.commit()}catch{}return"readonly"===v?S:x._completion.then(function(){return S})})}if(A._state.openComplete)return ut(new N.DatabaseClosed(A._state.dbOpenError));if(!A._state.isBeingOpened){if(!A._state.autoOpen)return ut(new N.DatabaseClosed);A.open().catch(d)}return A._state.dbReadyPromise.then(function(){return g(A,v,O,b)})}(this.db,e,[this.name],h);return a&&(w._consoleTask=a,w=w.catch(function(g){return console.trace(g),ut(g)})),w}finally{p&&tn()}},re.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?ut(new N.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(i){return n.hook.reading.fire(i)})}).then(t)},re.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(le(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=pe(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(w){if(w.compound&&t.every(function(A){return 0<=w.keyPath.indexOf(A)})){for(var g=0;g<t.length;++g)if(-1===t.indexOf(w.keyPath[g]))return!1;return!0}return!1}).sort(function(w,g){return w.keyPath.length-g.keyPath.length})[0];if(n&&"\uffff"!==this.db._maxKey){var h=n.keyPath.slice(0,t.length);return this.where(h).equals(h.map(function(g){return e[g]}))}!n&&lt&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName,i=this.db._deps.indexedDB;function a(w,g){return 0===i.cmp(w,g)}h=(p=t.reduce(function(O,g){var A=O[0],v=O[1],b=(O=r[g],e[g]);return[A||O,A||!O?o(v,O&&O.multi?function(x){return x=ft(x,g),le(x)&&x.some(function(S){return a(b,S)})}:function(x){return a(b,ft(x,g))}):v]},[null,null]))[0];var p=p[1];return h?this.where(h.name).equals(e[h.keyPath]).filter(p):n?this.filter(p):this.where(t).equals("")},re.prototype.filter=function(e){return this.toCollection().and(e)},re.prototype.count=function(e){return this.toCollection().count(e)},re.prototype.offset=function(e){return this.toCollection().offset(e)},re.prototype.limit=function(e){return this.toCollection().limit(e)},re.prototype.each=function(e){return this.toCollection().each(e)},re.prototype.toArray=function(e){return this.toCollection().toArray(e)},re.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},re.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,le(e)?"[".concat(e.join("+"),"]"):e))},re.prototype.reverse=function(){return this.toCollection().reverse()},re.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function i(){return null!==t&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof E&&(function(w,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function A(){this.constructor=w}Fe(w,g),w.prototype=null===g?Object.create(g):(A.prototype=g.prototype,new A)}(i,t=e),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return r},e=i);for(var a=new Set,h=e.prototype;h;h=it(h))Object.getOwnPropertyNames(h).forEach(function(w){return a.add(w)});function p(w){if(!w)return w;var g,A=Object.create(e.prototype);for(g in w)if(!a.has(g))try{A[g]=w[g]}catch{}return A}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),e},re.prototype.defineClass=function(){return this.mapToClass(function(e){ge(this,e)})},re.prototype.add=function(e,t){var n=this,r=this.schema.primKey,a=r.keyPath,h=e;return a&&r.auto&&(h=m(a)(e)),this._trans("readwrite",function(p){return n.core.mutate({trans:p,type:"add",keys:null!=t?[t]:null,values:[h]})}).then(function(p){return p.numFailures?Z.reject(p.failures[0]):p.lastResult}).then(function(p){if(a)try{Tt(e,a,p)}catch{}return p})},re.prototype.update=function(e,t){return"object"!=typeof e||le(e)?this.where(":id").equals(e).modify(t):void 0===(e=ft(e,this.schema.primKey.keyPath))?ut(new N.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},re.prototype.put=function(e,t){var n=this,r=this.schema.primKey,a=r.keyPath,h=e;return a&&r.auto&&(h=m(a)(e)),this._trans("readwrite",function(p){return n.core.mutate({trans:p,type:"put",values:[h],keys:null!=t?[t]:null})}).then(function(p){return p.numFailures?Z.reject(p.failures[0]):p.lastResult}).then(function(p){if(a)try{Tt(e,a,p)}catch{}return p})},re.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?Z.reject(n.failures[0]):void 0})},re.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:c})}).then(function(t){return t.numFailures?Z.reject(t.failures[0]):void 0})},re.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(i){return t.hook.reading.fire(i)})})})},re.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(h){var p=(g=r.schema.primKey).auto;if((g=g.keyPath)&&i)throw new N.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new N.InvalidArgument("Arguments objects and keys must have the same length");var w=e.length,g=g&&p?e.map(m(g)):e;return r.core.mutate({trans:h,type:"add",keys:i,values:g,wantResults:a}).then(function(x){var v=x.numFailures,O=x.results,b=x.lastResult;if(x=x.failures,0===v)return a?O:b;throw new Q("".concat(r.name,".bulkAdd(): ").concat(v," of ").concat(w," operations failed"),x)})})},re.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(h){var p=(g=r.schema.primKey).auto;if((g=g.keyPath)&&i)throw new N.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new N.InvalidArgument("Arguments objects and keys must have the same length");var w=e.length,g=g&&p?e.map(m(g)):e;return r.core.mutate({trans:h,type:"put",keys:i,values:g,wantResults:a}).then(function(x){var v=x.numFailures,O=x.results,b=x.lastResult;if(x=x.failures,0===v)return a?O:b;throw new Q("".concat(r.name,".bulkPut(): ").concat(v," of ").concat(w," operations failed"),x)})})},re.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(h){return h.key}),i=e.map(function(h){return h.changes}),a=[];return this._trans("readwrite",function(h){return n.getMany({trans:h,keys:r,cache:"clone"}).then(function(p){var w=[],g=[];e.forEach(function(v,O){var b=v.key,x=v.changes,S=p[O];if(S){for(var _=0,I=Object.keys(x);_<I.length;_++){var B=I[_],K=x[B];if(B===t.schema.primKey.keyPath){if(0!==q(K,b))throw new N.Constraint("Cannot update primary key in bulkUpdate()")}else Tt(S,B,K)}a.push(O),w.push(b),g.push(S)}});var A=w.length;return n.mutate({trans:h,type:"put",keys:w,values:g,updates:{keys:r,changeSpecs:i}}).then(function(v){var O=v.numFailures,b=v.failures;if(0===O)return A;for(var x=0,S=Object.keys(b);x<S.length;x++){var _,I=S[x],B=a[Number(I)];null!=B&&(_=b[I],delete b[I],b[B]=_)}throw new Q("".concat(t.name,".bulkUpdate(): ").concat(O," of ").concat(A," operations failed"),b)})})})},re.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(h){var i=h.numFailures,a=h.lastResult;if(h=h.failures,0===i)return a;throw new Q("".concat(t.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),h)})},re);function re(){}function Ce(e){function t(h,p){if(p){for(var w=arguments.length,g=new Array(w-1);--w;)g[w-1]=arguments[w];return n[h].subscribe.apply(null,g),e}if("string"==typeof h)return n[h]}var n={};t.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return t;function a(h,p,w){if("object"!=typeof h){var g;p=p||se;var A={subscribers:[],fire:w=w||d,subscribe:function(v){-1===A.subscribers.indexOf(v)&&(A.subscribers.push(v),A.fire=p(A.fire,v))},unsubscribe:function(v){A.subscribers=A.subscribers.filter(function(O){return O!==v}),A.fire=A.subscribers.reduce(p,w)}};return n[h]=t[h]=A}pe(g=h).forEach(function(v){var O=g[v];if(le(O))a(v,g[v][0],g[v][1]);else{if("asap"!==O)throw new N.InvalidArgument("Invalid event config");var b=a(v,y,function(){for(var x=arguments.length,S=new Array(x);x--;)S[x]=arguments[x];b.subscribers.forEach(function(_){Kt(function(){_.apply(null,S)})})})}})}}function Ke(e,t){return Pe(t).from({prototype:e}),t}function Qe(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Xe(e,t){e.filter=o(e.filter,t)}function ze(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return o(r(),t())}:t,e.justLimit=n&&!r}function dt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new N.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function mt(e,t,n){var r=dt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Ne(e,t,n,r){var i=e.replayFilter?o(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},h=function(p,w,g){var A,v;i&&!i(w,g,function(O){return w.stop(O)},function(O){return w.fail(O)})||("[object ArrayBuffer]"==(v=""+(A=w.primaryKey))&&(v=""+new Uint8Array(A)),ot(a,v)||(a[v]=!0,t(p,w,g)))};return Promise.all([e.or._iterate(h,n),$t(mt(e,r,n),e.algorithm,h,!e.keysOnly&&e.valueMapper)])}return $t(mt(e,r,n),o(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function $t(e,t,n,r){var i=Me(r?function(a,h,p){return n(r(a),h,p)}:n);return e.then(function(a){if(a)return a.start(function(){var h=function(){return a.continue()};t&&!t(a,function(p){return h=p},function(p){a.stop(p),h=d},function(p){a.fail(p),h=d})||i(a.value,a,function(p){return h=p}),h()})})}fe=Symbol();var J=(xe.prototype.execute=function(e){if(void 0!==this.add){var t=this.add;if(le(t))return D(D([],le(e)?e:[],!0),t,!0).sort();if("number"==typeof t)return(Number(e)||0)+t;if("bigint"==typeof t)try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(void 0!==this.remove){var n=this.remove;if(le(n))return le(e)?e.filter(function(r){return!n.includes(r)}).sort():[];if("number"==typeof n)return Number(e)-n;if("bigint"==typeof n)try{return BigInt(e)-n}catch{return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return(t=null===(t=this.replacePrefix)||void 0===t?void 0:t[0])&&"string"==typeof e&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},xe);function xe(e){Object.assign(this,e)}var we=(X.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ut.bind(null,n.error)):n.table._trans("readonly",e).then(t)},X.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,ut.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},X.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=o(t.algorithm,e)},X.prototype._iterate=function(e,t){return Ne(this._ctx,e,t,this._ctx.table.core)},X.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&ge(n,e),t._ctx=n,t},X.prototype.raw=function(){return this._ctx.valueMapper=null,this},X.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Ne(t,e,n,t.table.core)})},X.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,i=r.table.core;if(Qe(r,!0))return i.count({trans:n,query:{index:dt(r,i.schema),range:r.range}}).then(function(h){return Math.min(h,r.limit)});var a=0;return Ne(r,function(){return++a,!1},n,i).then(function(){return a})}).then(e)},X.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(w,g){return g?a(w[n[g]],g-1):w[r]}var h="next"===this._ctx.dir?1:-1;function p(w,g){return(w=a(w,i))<(g=a(g,i))?-h:g<w?h:0}return this.toArray(function(w){return w.sort(p)}).then(t)},X.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if("next"===r.dir&&Qe(r,!0)&&0<r.limit){var i=r.valueMapper,a=dt(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(function(p){return p=p.result,i?p.map(i):p})}var h=[];return Ne(r,function(p){return h.push(p)},n,r.table.core).then(function(){return h})},e)},X.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Qe(t)?ze(t,function(){var n=e;return function(r,i){return 0===n||(1===n?--n:i(function(){r.advance(n),n=0}),!1)}}):ze(t,function(){var n=e;return function(){return--n<0}})),this},X.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ze(this._ctx,function(){var t=e;return function(n,r,i){return--t<=0&&r(i),0<=t}},!0),this},X.prototype.until=function(e,t){return Xe(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},X.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},X.prototype.last=function(e){return this.reverse().first(e)},X.prototype.filter=function(e){var t;return Xe(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=o(t.isMatch,e),this},X.prototype.and=function(e){return this.filter(e)},X.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},X.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},X.prototype.desc=function(){return this.reverse()},X.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},X.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},X.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},X.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.key)}).then(function(){return n}).then(e)},X.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Qe(t,!0)&&0<t.limit)return this._read(function(r){var i=dt(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:i,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.primaryKey)}).then(function(){return n}).then(e)},X.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},X.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},X.prototype.lastKey=function(e){return this.reverse().firstKey(e)},X.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return Xe(this._ctx,function(i){var r=i.primaryKey.toString();return i=ot(t,r),t[r]=!0,!i}),this},X.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i,a,h;function p(_,K){var B=K.failures;x+=_-(K=K.numFailures);for(var F=0,V=pe(B);F<V.length;F++)b.push(B[V[F]])}h="function"==typeof e?e:(i=pe(e),a=i.length,function(_){for(var I=!1,B=0;B<a;++B){var K=i[B],F=e[K],V=ft(_,K);F instanceof J?(Tt(_,K,F.execute(V)),I=!0):V!==F&&(Tt(_,K,F),I=!0)}return I});var w=n.table.core,g=w.schema.primaryKey,A=g.outbound,v=g.extractKey,O=t.db._options.modifyChunkSize||200,b=[],x=0,S=[];return t.clone().primaryKeys().then(function(_){var B=Qe(n)&&n.limit===1/0&&("function"!=typeof e||e===Le)&&{index:n.index,range:n.range};return function I(K){var F=Math.min(O,_.length-K);return w.getMany({trans:r,keys:_.slice(K,K+F),cache:"immutable"}).then(function(V){for(var ie=[],W=[],ne=A?[]:null,oe=[],te=0;te<F;++te){var je=V[te],Re={value:kt(je),primKey:_[K+te]};!1!==h.call(Re,Re.value,Re)&&(null==Re.value?oe.push(_[K+te]):A||0===q(v(je),v(Re.value))?(W.push(Re.value),A&&ne.push(_[K+te])):(oe.push(_[K+te]),ie.push(Re.value)))}return Promise.resolve(0<ie.length&&w.mutate({trans:r,type:"add",values:ie}).then(function(Ge){for(var Ze in Ge.failures)oe.splice(parseInt(Ze),1);p(ie.length,Ge)})).then(function(){return(0<W.length||B&&"object"==typeof e)&&w.mutate({trans:r,type:"put",keys:ne,values:W,criteria:B,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<K}).then(function(Ge){return p(W.length,Ge)})}).then(function(){return(0<oe.length||B&&e===Le)&&w.mutate({trans:r,type:"delete",keys:oe,criteria:B,isAdditionalChunk:0<K}).then(function(Ge){return p(oe.length,Ge)})}).then(function(){return _.length>K+F&&I(K+O)})})}(0).then(function(){if(0<b.length)throw new _e("Error modifying one or more objects",b,x,S);return _.length})})})},X.prototype.delete=function(){var e=this._ctx,t=e.range;return Qe(e)&&(e.isPrimKey||3===t.type)?this._write(function(n){var i=t;return e.table.core.count({trans:n,query:{index:e.table.core.schema.primaryKey,range:i}}).then(function(a){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(h){var p=h.failures;if(h=h.numFailures)throw new _e("Could not delete some values",Object.keys(p).map(function(w){return p[w]}),a-h);return a-h})})}):this.modify(Le)},X);function X(){}var Le=function(e,t){return t.value=null};function hn(e,t){return e<t?-1:e===t?0:1}function jt(e,t){return t<e?-1:e===t?0:1}function wt(e,t,n){return(e=e instanceof sn?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Ht(e){return new e.Collection(e,function(){return _t("")}).limit(0)}function ct(e,t,n,r){var i,a,h,p,w,g,A,v=n.length;if(!n.every(function(x){return"string"==typeof x}))return wt(e,st);function O(x){i="next"===x?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},a="next"===x?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},h="next"===x?hn:jt;var S=n.map(function(_){return{lower:a(_),upper:i(_)}}).sort(function(_,I){return h(_.lower,I.lower)});p=S.map(function(_){return _.upper}),w=S.map(function(_){return _.lower}),A="next"===(g=x)?"":r}O("next"),(e=new e.Collection(e,function(){return qt(p[0],w[v-1]+r)}))._ondirectionchange=function(x){O(x)};var b=0;return e._addAlgorithm(function(x,S,_){var I=x.key;if("string"!=typeof I)return!1;var B=a(I);if(t(B,w,b))return!0;for(var K=null,F=b;F<v;++F){var V=function(ie,W,ne,oe,te,je){for(var Re=Math.min(ie.length,oe.length),Ge=-1,Ze=0;Ze<Re;++Ze){var En=W[Ze];if(En!==oe[Ze])return te(ie[Ze],ne[Ze])<0?ie.substr(0,Ze)+ne[Ze]+ne.substr(Ze+1):te(ie[Ze],oe[Ze])<0?ie.substr(0,Ze)+oe[Ze]+ne.substr(Ze+1):0<=Ge?ie.substr(0,Ge)+W[Ge]+ne.substr(Ge+1):null;te(ie[Ze],En)<0&&(Ge=Ze)}return Re<oe.length&&"next"===je?ie+ne.substr(ie.length):Re<ie.length&&"prev"===je?ie.substr(0,ne.length):Ge<0?null:ie.substr(0,Ge)+oe[Ge]+ne.substr(Ge+1)}(I,B,p[F],w[F],h,g);null===V&&null===K?b=F+1:(null===K||0<h(K,V))&&(K=V)}return S(null!==K?function(){x.continue(K+A)}:_),!1}),e}function qt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function _t(e){return{type:1,lower:e,upper:e}}var sn=(Object.defineProperty(rt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),rt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Ht(this):new this.Collection(this,function(){return qt(e,t,!n,!r)})}catch{return wt(this,$e)}},rt.prototype.equals=function(e){return null==e?wt(this,$e):new this.Collection(this,function(){return _t(e)})},rt.prototype.above=function(e){return null==e?wt(this,$e):new this.Collection(this,function(){return qt(e,void 0,!0)})},rt.prototype.aboveOrEqual=function(e){return null==e?wt(this,$e):new this.Collection(this,function(){return qt(e,void 0,!1)})},rt.prototype.below=function(e){return null==e?wt(this,$e):new this.Collection(this,function(){return qt(void 0,e,!1,!0)})},rt.prototype.belowOrEqual=function(e){return null==e?wt(this,$e):new this.Collection(this,function(){return qt(void 0,e)})},rt.prototype.startsWith=function(e){return"string"!=typeof e?wt(this,st):this.between(e,e+"\uffff",!0,!0)},rt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):ct(this,function(t,n){return 0===t.indexOf(n[0])},[e],"\uffff")},rt.prototype.equalsIgnoreCase=function(e){return ct(this,function(t,n){return t===n[0]},[e],"")},rt.prototype.anyOfIgnoreCase=function(){var e=an.apply(gn,arguments);return 0===e.length?Ht(this):ct(this,function(t,n){return-1!==n.indexOf(t)},e,"")},rt.prototype.startsWithAnyOfIgnoreCase=function(){var e=an.apply(gn,arguments);return 0===e.length?Ht(this):ct(this,function(t,n){return n.some(function(r){return 0===t.indexOf(r)})},e,"\uffff")},rt.prototype.anyOf=function(){var e=this,t=an.apply(gn,arguments),n=this._cmp;try{t.sort(n)}catch{return wt(this,$e)}if(0===t.length)return Ht(this);var r=new this.Collection(this,function(){return qt(t[0],t[t.length-1])});r._ondirectionchange=function(a){t.sort(n="next"===a?e._ascending:e._descending)};var i=0;return r._addAlgorithm(function(a,h,p){for(var w=a.key;0<n(w,t[i]);)if(++i===t.length)return h(p),!1;return 0===n(w,t[i])||(h(function(){a.continue(t[i])}),!1)}),r},rt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},rt.prototype.noneOf=function(){var e=an.apply(gn,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch{return wt(this,$e)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},rt.prototype.inAnyRange=function(I,t){var n=this,r=this._cmp,i=this._ascending,a=this._descending,h=this._min,p=this._max;if(0===I.length)return Ht(this);if(!I.every(function(B){return void 0!==B[0]&&void 0!==B[1]&&i(B[0],B[1])<=0}))return wt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",N.InvalidArgument);var A,w=!t||!1!==t.includeLowers,g=t&&!0===t.includeUppers,v=i;function O(B,K){return v(B[0],K[0])}try{(A=I.reduce(function(B,K){for(var F=0,V=B.length;F<V;++F){var ie=B[F];if(r(K[0],ie[1])<0&&0<r(K[1],ie[0])){ie[0]=h(ie[0],K[0]),ie[1]=p(ie[1],K[1]);break}}return F===V&&B.push(K),B},[])).sort(O)}catch{return wt(this,$e)}var b=0,x=g?function(B){return 0<i(B,A[b][1])}:function(B){return 0<=i(B,A[b][1])},S=w?function(B){return 0<a(B,A[b][0])}:function(B){return 0<=a(B,A[b][0])},_=x;return(I=new this.Collection(this,function(){return qt(A[0][0],A[A.length-1][1],!w,!g)}))._ondirectionchange=function(B){v="next"===B?(_=x,i):(_=S,a),A.sort(O)},I._addAlgorithm(function(B,K,F){for(var V,ie=B.key;_(ie);)if(++b===A.length)return K(F),!1;return!x(V=ie)&&!S(V)||(0===n._cmp(ie,A[b][1])||0===n._cmp(ie,A[b][0])||K(function(){B.continue(v===i?A[b][0]:A[b][1])}),!1)}),I},rt.prototype.startsWithAnyOf=function(){var e=an.apply(gn,arguments);return e.every(function(t){return"string"==typeof t})?0===e.length?Ht(this):this.inAnyRange(e.map(function(t){return[t,t+"\uffff"]})):wt(this,"startsWithAnyOf() only works with strings")},rt);function rt(){}function Lt(e){return Me(function(t){return on(t),e(t.target.error),!1})}function on(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Pn="storagemutated",Nn="x-storagemutated-1",pn=Ce(null,Pn),Dn=(Qt.prototype._lock=function(){return pt(!s.global),++this._reculock,1!==this._reculock||s.global||(s.lockOwnerFor=this),this},Qt.prototype._unlock=function(){if(pt(!s.global),0==--this._reculock)for(s.global||(s.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Jt(e[1],e[0])}catch{}}return this},Qt.prototype._locked=function(){return this._reculock&&s.lockOwnerFor!==this},Qt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(pt(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new N.DatabaseClosed(r);case"MissingAPIError":throw new N.MissingAPI(r.message,r);default:throw new N.OpenFailed(r)}if(!this.active)throw new N.TransactionInactive;return pt(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Me(function(i){on(i),t._reject(e.error)}),e.onabort=Me(function(i){on(i),t.active&&t._reject(new N.Abort(e.error)),t.active=!1,t.on("abort").fire(i)}),e.oncomplete=Me(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&pn.storagemutated.fire(e.mutatedParts)}),this},Qt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return ut(new N.ReadOnly("Transaction is readonly"));if(!this.active)return ut(new N.TransactionInactive);if(this._locked())return new Z(function(a,h){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,h)},s])});if(n)return ke(function(){var a=new Z(function(h,p){r._lock();var w=t(h,p,r);w&&w.then&&w.then(h,p)});return a.finally(function(){return r._unlock()}),a._lib=!0,a});var i=new Z(function(a,h){var p=t(a,h,r);p&&p.then&&p.then(a,h)});return i._lib=!0,i},Qt.prototype._root=function(){return this.parent?this.parent._root():this},Qt.prototype.waitFor=function(e){var t,n=this._root(),r=Z.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=a)}());var i=n._waitingFor;return new Z(function(a,h){r.then(function(p){return n._waitingQueue.push(Me(a.bind(null,p)))},function(p){return n._waitingQueue.push(Me(h.bind(null,p)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},Qt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new N.Abort))},Qt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(ot(t,e))return t[e];var n=this.schema[e];if(!n)throw new N.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Qt);function Qt(){}function Xt(e,t,n,r,i,a,h){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!h?"&":"")+(r?"*":"")+(i?"++":"")+wn(t)}}function wn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function xn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(i){return[i.name,i]},n.reduce(function(i,a,h){return(h=r(a))&&(i[h[0]]=h[1]),i},{}))};var r}var On=function(e){try{return e.only([[]]),On=function(){return[[]]},[[]]}catch{return On=function(){return"\uffff"},"\uffff"}};function tr(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(n){return n[t]}:function(n){return ft(n,t)}:function(n){return ft(n,e)};var t}function _r(e){return[].slice.call(e)}var Kr=0;function Ln(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Rr(e,t,w){function r(_){if(3===_.type)return null;if(4===_.type)throw new Error("Cannot convert never type to IDBKeyRange");var b=_.lower,x=_.upper,S=_.lowerOpen;return _=_.upperOpen,void 0===b?void 0===x?null:t.upperBound(x,!!_):void 0===x?t.lowerBound(b,!!S):t.bound(b,x,!!S,!!_)}var a,h,p,g=(h=w,p=_r((a=e).objectStoreNames),A={schema:{name:a.name,tables:p.map(function(O){return h.objectStore(O)}).map(function(O){var b=O.keyPath,_=O.autoIncrement,x=le(b),S={};return _={name:O.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==b,compound:x,keyPath:b,autoIncrement:_,unique:!0,extractKey:tr(b)},indexes:_r(O.indexNames).map(function(I){return O.index(I)}).map(function(F){var K=F.unique,V=F.multiEntry;return V={name:F.name,compound:le(F=F.keyPath),keyPath:F,unique:K,multiEntry:V,extractKey:tr(F)},S[Ln(F)]=V}),getIndexByKeyPath:function(I){return S[Ln(I)]}},S[":id"]=_.primaryKey,null!=b&&(S[Ln(b)]=_.primaryKey),_})},hasGetAll:0<p.length&&"getAll"in h.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).hasGetAll,A=(w=A.schema).tables.map(function i(O){var b,x=O.name;return{name:x,schema:O,mutate:function(S){var _=S.trans,I=S.type,B=S.keys,K=S.values,F=S.range;return new Promise(function(V,ie){V=Me(V);var W=_.objectStore(x),ne=null==W.keyPath,oe="put"===I||"add"===I;if(!oe&&"delete"!==I&&"deleteRange"!==I)throw new Error("Invalid operation type: "+I);var te,je=(B||K||{length:1}).length;if(B&&K&&B.length!==K.length)throw new Error("Given keys array must have same length as given values array.");if(0===je)return V({numFailures:0,failures:{},results:[],lastResult:void 0});function Re(yn){++En,on(yn)}var Ge=[],Ze=[],En=0;if("deleteRange"===I){if(4===F.type)return V({numFailures:En,failures:Ze,results:[],lastResult:void 0});Ge.push(te=3===F.type?W.clear():W.delete(r(F)))}else{var Ve=(ne=oe?ne?[K,B]:[K,null]:[B,null])[0],ln=ne[1];if(oe)for(var fn=0;fn<je;++fn)Ge.push(te=ln&&void 0!==ln[fn]?W[I](Ve[fn],ln[fn]):W[I](Ve[fn])),te.onerror=Re;else for(fn=0;fn<je;++fn)Ge.push(te=W[I](Ve[fn])),te.onerror=Re}function er(yn){yn=yn.target.result,Ge.forEach(function(Bn,wr){return null!=Bn.error&&(Ze[wr]=Bn.error)}),V({numFailures:En,failures:Ze,results:"delete"===I?B:Ge.map(function(Bn){return Bn.result}),lastResult:yn})}te.onerror=function(yn){Re(yn),er(yn)},te.onsuccess=er})},getMany:function(S){var _=S.trans,I=S.keys;return new Promise(function(B,K){B=Me(B);for(var F,V=_.objectStore(x),ie=I.length,W=new Array(ie),ne=0,oe=0,te=function(Ge){W[(Ge=Ge.target)._pos]=Ge.result,++oe===ne&&B(W)},je=Lt(K),Re=0;Re<ie;++Re)null!=I[Re]&&((F=V.get(I[Re]))._pos=Re,F.onsuccess=te,F.onerror=je,++ne);0===ne&&B(W)})},get:function(S){var _=S.trans,I=S.key;return new Promise(function(B,K){B=Me(B);var F=_.objectStore(x).get(I);F.onsuccess=function(V){return B(V.target.result)},F.onerror=Lt(K)})},query:(b=g,function(S){return new Promise(function(_,I){_=Me(_);var B,K,F,V=S.values,ie=S.limit,W=ie===1/0?void 0:ie,oe=(te=S.query).index,te=te.range,ne=(ne=S.trans).objectStore(x);if(oe=oe.isPrimaryKey?ne:ne.index(oe.name),te=r(te),0===ie)return _({result:[]});b?((W=V?oe.getAll(te,W):oe.getAllKeys(te,W)).onsuccess=function(je){return _({result:je.target.result})},W.onerror=Lt(I)):(B=0,K=!V&&"openKeyCursor"in oe?oe.openKeyCursor(te):oe.openCursor(te),F=[],K.onsuccess=function(je){var Re=K.result;return Re?(F.push(V?Re.value:Re.primaryKey),++B===ie?_({result:F}):void Re.continue()):_({result:F})},K.onerror=Lt(I))})}),openCursor:function(S){var _=S.trans,I=S.values,B=S.query,K=S.reverse,F=S.unique;return new Promise(function(V,ie){V=Me(V);var oe=B.index,W=B.range,ne=_.objectStore(x),te=(ne=oe.isPrimaryKey?ne:ne.index(oe.name),oe=K?F?"prevunique":"prev":F?"nextunique":"next",!I&&"openKeyCursor"in ne?ne.openKeyCursor(r(W),oe):ne.openCursor(r(W),oe));te.onerror=Lt(ie),te.onsuccess=Me(function(je){var Re,Ge,Ze,En,Ve=te.result;Ve?(Ve.___id=++Kr,Ve.done=!1,Re=Ve.continue.bind(Ve),Ge=(Ge=Ve.continuePrimaryKey)&&Ge.bind(Ve),Ze=Ve.advance.bind(Ve),En=function(){throw new Error("Cursor not stopped")},Ve.trans=_,Ve.stop=Ve.continue=Ve.continuePrimaryKey=Ve.advance=function(){throw new Error("Cursor not started")},Ve.fail=Me(ie),Ve.next=function(){var ln=this,fn=1;return this.start(function(){return fn--?ln.continue():ln.stop()}).then(function(){return ln})},Ve.start=function(ln){function fn(){if(te.result)try{ln()}catch(yn){Ve.fail(yn)}else Ve.done=!0,Ve.start=function(){throw new Error("Cursor behind last entry")},Ve.stop()}var er=new Promise(function(yn,Bn){yn=Me(yn),te.onerror=Lt(Bn),Ve.fail=Bn,Ve.stop=function(wr){Ve.stop=Ve.continue=Ve.continuePrimaryKey=Ve.advance=En,yn(wr)}});return te.onsuccess=Me(function(yn){te.onsuccess=fn,fn()}),Ve.continue=Re,Ve.continuePrimaryKey=Ge,Ve.advance=Ze,fn(),er},V(Ve)):V(null)},ie)})},count:function(S){var _=S.query,I=S.trans,B=_.index,K=_.range;return new Promise(function(F,V){var ie=I.objectStore(x),W=B.isPrimaryKey?ie:ie.index(B.name);(W=(ie=r(K))?W.count(ie):W.count()).onsuccess=Me(function(ne){return F(ne.target.result)}),W.onerror=Lt(V)})}}}),v={};return A.forEach(function(O){return v[O.name]=O}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(O){if(!v[O])throw new Error("Table '".concat(O,"' not found"));return v[O]},MIN_KEY:-1/0,MAX_KEY:On(t),schema:w}}function qn(e,r){r=function Fr(e,t,n,r){return{dbcore:(r=Rr(t,n.IDBKeyRange,r),e.dbcore.reduce(function(a,h){return h=h.create,$($({},a),h(a))},r))}}(e._middlewares,r.db,e._deps,r),e.core=r.dbcore,e.tables.forEach(function(i){var a=i.name;e.core.schema.tables.some(function(h){return h.name===a})&&(i.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=i.core))})}function Zn(e,t,n,r){n.forEach(function(i){var a=r[i];t.forEach(function(h){var p=function w(g,A){return dn(g,A)||(g=it(g))&&w(g,A)}(h,i);(!p||"value"in p&&void 0===p.value)&&(h===e.Transaction.prototype||h instanceof e.Transaction?bt(h,i,{get:function(){return this.table(i)},set:function(w){Gt(this,i,{value:w,writable:!0,configurable:!0,enumerable:!0})}}):h[i]=new e.Table(i,a))})})}function nr(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Dr(e,t){return e._cfg.version-t._cfg.version}function rr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],a=t[n];if(i){var h={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)h.recreate=!0,r.change.push(h);else{var p=i.idxByName,w=a.idxByName,g=void 0;for(g in p)w[g]||h.del.push(g);for(g in w){var A=p[g],v=w[g];A?A.src!==v.src&&h.change.push(v):h.add.push(v)}(0<h.del.length||0<h.add.length||0<h.change.length)&&r.change.push(h)}}else r.add.push([n,a])}return r}function ir(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return Vn(i,a)}),i}function xr(e,t){pe(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(lt&&console.debug("Dexie: Creating missing table",n),ir(t,n,e[n].primKey,e[n].indexes))})}function Vn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function $n(e,t,n){var r={};return et(t.objectStoreNames,0).forEach(function(i){for(var a=n.objectStore(i),h=Xt(wn(g=a.keyPath),g||"",!0,!1,!!a.autoIncrement,g&&"string"!=typeof g,!0),p=[],w=0;w<a.indexNames.length;++w){var g=(A=a.index(a.indexNames[w])).keyPath,A=Xt(A.name,g,!!A.unique,!!A.multiEntry,!1,g&&"string"!=typeof g,!1);p.push(A)}r[i]=xn(i,h,p)}),r}function Gn(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],h=n.objectStore(a);e._hasGetAll="getAll"in h;for(var p=0;p<h.indexNames.length;++p){var w=h.indexNames[p],g=h.index(w).keyPath,A="string"==typeof g?g:"["+et(g).join("+")+"]";!t[a]||(g=t[a].idxByName[A])&&(g.name=w,delete t[a].idxByName[A],t[a].idxByName[w]=g)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ae.WorkerGlobalScope&&ae instanceof ae.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Er(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Xt(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),le(i),0===n)})}var Mr=(Yn.prototype._parseStoresSpec=function(e,t){pe(e).forEach(function(n){if(null!==e[n]){var r=Er(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new N.Schema("Primary key cannot be multi-valued");r.forEach(function(a){if(a.auto)throw new N.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new N.Schema("Index must have a name and cannot be an empty string")}),t[n]=xn(n,i,r)}})},Yn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?ge(this._cfg.storesSource,n):n;var r={},i={};return(n=t._versions).forEach(function(a){ge(r,a._cfg.storesSource),i=a._cfg.dbschema={},a._parseStoresSpec(r,i)}),t._dbSchema=i,nr(t,[t._allTables,t,t.Transaction.prototype]),Zn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],pe(i),i),t._storeNames=pe(i),this},Yn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Oe(this._cfg.contentUpgrade||d,e),this},Yn);function Yn(){}function or(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Tn(Ot,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function ar(e){return e&&"function"==typeof e.databases}function ur(e){return ke(function(){return s.letThrough=!0,e()})}function sr(e){return!("from"in e)}var cn=function(e,t){if(!this){var n=new cn;return e&&"d"in e&&ge(n,e),n}ge(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Un(e,t,n){var r=q(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(sr(e))return ge(e,{from:t,to:n,d:1});var i=e.l;if(r=e.r,q(n,e.from)<0)return i?Un(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ar(e);if(0<q(t,e.to))return r?Un(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ar(e);q(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<q(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&Mn(e,i),r&&n&&Mn(e,r)}}function Mn(e,t){sr(t)||function n(r,w){var a=w.from,h=w.to,p=w.l;w=w.r,Un(r,a,h),p&&n(r,p),w&&n(r,w)}(e,t)}function Wn(e,t){var n=cr(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=cr(e),h=a.next(i.from),p=h.value;!r.done&&!h.done;){if(q(p.from,i.to)<=0&&0<=q(p.to,i.from))return!0;q(i.from,p.from)<0?i=(r=n.next(p.from)).value:p=(h=a.next(i.from)).value}return!1}function cr(e){var t=sr(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&q(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||q(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ar(e){var t,n,r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=1<r?"r":r<-1?"l":"";i&&(t="r"==i?"l":"r",n=$({},e),e.from=(r=e[i]).from,e.to=r.to,e[i]=r[i],n[i]=r[t],(e[t]=n).d=Or(n)),e.d=Or(e)}function Or(n){var t=n.r;return n=n.l,(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function zn(e,t){return pe(t).forEach(function(n){e[n]?Mn(e[n],t[n]):e[n]=function r(i){var a,h,p={};for(a in i)ot(i,a)&&(p[a]=!(h=i[a])||"object"!=typeof h||Ut.has(h.constructor)?h:r(h));return p}(t[n])}),e}function lr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Wn(t[n],e[n])})}gt(cn.prototype,((_n={add:function(e){return Mn(this,e),this},addKey:function(e){return Un(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Un(t,n,n)}),this}})[kn]=function(){return cr(this)},_n));var Cn={},fr={},dr=!1;function Jn(e){zn(fr,e),dr||(dr=!0,setTimeout(function(){dr=!1,hr(fr,!(fr={}))},0))}function hr(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(Cn);r<i.length;r++)Sr(h=i[r],e,n,t);else for(var a in e){var h,p=/^idb\:\/\/(.*)\/(.*)\//.exec(a);p&&(a=p[1],p=p[2],(h=Cn["idb://".concat(a,"/").concat(p)])&&Sr(h,e,n,t))}n.forEach(function(w){return w()})}function Sr(e,t,n,r){for(var i=[],a=0,h=Object.entries(e.queries.query);a<h.length;a++){for(var p=h[a],w=p[0],g=[],A=0,v=p[1];A<v.length;A++){var O=v[A];lr(t,O.obsSet)?O.subscribers.forEach(function(_){return n.add(_)}):r&&g.push(O)}r&&i.push([w,g])}if(r)for(var b=0,x=i;b<x.length;b++){var S=x[b];e.queries.query[w=S[0]]=g=S[1]}}function qr(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ut(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),a=!1;function h(){if(t.openCanceller!==r)throw new N.DatabaseClosed("db.open() was cancelled")}var w,g=t.dbReadyResolve,A=null,v=!1;return Z.race([r,(typeof navigator>"u"?Z.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function b(){return indexedDB.databases().finally(O)}w=setInterval(b,100),b()}).finally(function(){return clearInterval(w)}):Promise.resolve()).then(function p(){return new Z(function(O,b){if(h(),!n)throw new N.MissingAPI;var x=e.name,S=t.autoSchema||!i?n.open(x):n.open(x,i);if(!S)throw new N.MissingAPI;S.onerror=Lt(b),S.onblocked=Me(e._fireOnBlocked),S.onupgradeneeded=Me(function(_){var I;A=S.transaction,t.autoSchema&&!e._options.allowEmptyDB?(S.onerror=on,A.abort(),S.result.close(),(I=n.deleteDatabase(x)).onsuccess=I.onerror=Me(function(){b(new N.NoSuchDatabase("Database ".concat(x," doesnt exist")))})):(A.onerror=Lt(b),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,v=_<1,e.idbdb=S.result,a&&function Ur(e,t){xr(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=$n(0,e.idbdb,t);Gn(e,e._dbSchema,t);for(var r=0,i=rr(n,e._dbSchema).change;r<i.length;r++){var a=function(h){if(h.change.length||h.recreate)return console.warn("Unable to patch indexes of table ".concat(h.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=t.objectStore(h.name);h.add.forEach(function(w){lt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(h.name,".").concat(w.src)),Vn(p,w)})}(i[r]);if("object"==typeof a)return a.value}}(e,A),function Lr(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=xn("$meta",Er("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var h=a._reject.bind(a),p=s.transless||s;ke(function(){return s.trans=a,s.transless=p,0!==t?(qn(e,n),g=t,((w=a).storeNames.includes("$meta")?w.table("$meta").get("version").then(function(A){return A??g}):Z.resolve(g)).then(function(A){return O=A,b=a,S=[],A=(v=e)._versions,_=v._dbSchema=$n(0,v.idbdb,x=n),0!==(A=A.filter(function(I){return I._cfg.version>=O})).length?(A.forEach(function(I){S.push(function(){var B=_,K=I._cfg.dbschema;Gn(v,B,x),Gn(v,K,x),_=v._dbSchema=K;var F=rr(B,K);F.add.forEach(function(oe){ir(x,oe[0],oe[1].primKey,oe[1].indexes)}),F.change.forEach(function(oe){if(oe.recreate)throw new N.Upgrade("Not yet support for changing primary key");var te=x.objectStore(oe.name);oe.add.forEach(function(je){return Vn(te,je)}),oe.change.forEach(function(je){te.deleteIndex(je.name),Vn(te,je)}),oe.del.forEach(function(je){return te.deleteIndex(je)})});var V=I._cfg.contentUpgrade;if(V&&I._cfg.version>O){qn(v,x),b._memoizedTables={};var ie=xt(K);F.del.forEach(function(oe){ie[oe]=B[oe]}),nr(v,[v.Transaction.prototype]),Zn(v,[v.Transaction.prototype],pe(ie),ie),b.schema=ie;var W,ne=Sn(V);return ne&&De(),F=Z.follow(function(){var oe;(W=V(b))&&ne&&(oe=ye.bind(null,null),W.then(oe,oe))}),W&&"function"==typeof W.then?Z.resolve(W):F.then(function(){return W})}}),S.push(function(B){var K,F;K=I._cfg.dbschema,[].slice.call((F=B).db.objectStoreNames).forEach(function(ie){return null==K[ie]&&F.db.deleteObjectStore(ie)}),nr(v,[v.Transaction.prototype]),Zn(v,[v.Transaction.prototype],v._storeNames,v._dbSchema),b.schema=v._dbSchema}),S.push(function(B){v.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(v.idbdb.version/10)===I._cfg.version?(v.idbdb.deleteObjectStore("$meta"),delete v._dbSchema.$meta,v._storeNames=v._storeNames.filter(function(K){return"$meta"!==K})):B.objectStore("$meta").put(I._cfg.version,"version"))})}),function I(){return S.length?Z.resolve(S.shift()(b.idbtrans)).then(I):Z.resolve()}().then(function(){xr(_,x)})):Z.resolve();var v,O,b,x,S,_}).catch(h)):(pe(i).forEach(function(A){ir(n,A,i[A].primKey,i[A].indexes)}),qn(e,n),void Z.follow(function(){return e.on.populate.fire(a)}).catch(h));var w,g})}(e,_/10,A,b))},b),S.onsuccess=Me(function(){A=null;var _,I,B,K,F,V=e.idbdb=S.result,ie=et(V.objectStoreNames);if(0<ie.length)try{var W=V.transaction(1===(K=ie).length?K[0]:K,"readonly");if(t.autoSchema)B=W,(_=e).verno=(I=V).version/10,B=_._dbSchema=$n(0,I,B),_._storeNames=et(I.objectStoreNames,0),Zn(_,[_._allTables],pe(B),B);else if(Gn(e,e._dbSchema,W),((F=rr($n(0,(F=e).idbdb,W),F._dbSchema)).add.length||F.change.some(function(ne){return ne.add.length||ne.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),V.close(),i=V.version+1,a=!0,O(p());qn(e,W)}catch{}tt.push(e),V.onversionchange=Me(function(ne){t.vcFired=!0,e.on("versionchange").fire(ne)}),V.onclose=Me(function(ne){e.on("close").fire(ne)}),v&&(W=x,V=(F=e._deps).indexedDB,F=F.IDBKeyRange,ar(V)||W===Ot||or(V,F).put({name:W}).catch(d)),O()},b)}).catch(function(O){switch(O?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<i)return i=0,p()}return Z.reject(O)})})]).then(function(){return h(),t.onReadyBeingFired=[],Z.resolve(ur(function(){return e.on.ready.fire(e.vip)})).then(function O(){if(0<t.onReadyBeingFired.length){var b=t.onReadyBeingFired.reduce(Oe,d);return t.onReadyBeingFired=[],Z.resolve(ur(function(){return b(e.vip)})).then(O)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(O){t.dbOpenError=O;try{A&&A.abort()}catch{}return r===t.openCanceller&&e._close(),ut(O)}).finally(function(){t.openComplete=!0,g()}).then(function(){var O;return v&&(O={},e.tables.forEach(function(b){b.schema.indexes.forEach(function(x){x.name&&(O["idb://".concat(e.name,"/").concat(b.name,"/").concat(x.name)]=new cn(-1/0,[[[]]]))}),O["idb://".concat(e.name,"/").concat(b.name,"/")]=O["idb://".concat(e.name,"/").concat(b.name,"/:dels")]=new cn(-1/0,[[[]]])}),pn(Pn).fire(O),hr(O,!0)),e})}function pr(e){function t(a){return e.next(a)}var n=i(t),r=i(function(a){return e.throw(a)});function i(a){return function(w){var p=a(w);return w=p.value,p.done?w:w&&"function"==typeof w.then?w.then(n,r):le(w)?Promise.all(w).then(n,r):n(w)}}return i(t)()}function Hn(e,t,n){for(var r=le(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Zr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return $($({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function h(v,O,b){var x=Ln(v),S=i[x]=i[x]||[],_=null==v?0:"string"==typeof v?1:v.length,I=0<O;return I=$($({},b),{name:I?"".concat(x,"(virtual-from:").concat(b.name,")"):b.name,lowLevelIndex:b,isVirtual:I,keyTail:O,keyLength:_,extractKey:tr(v),unique:!I&&b.unique}),S.push(I),I.isPrimaryKey||a.push(I),1<_&&h(2===_?v[0]:v.slice(0,_-1),O+1,b),S.sort(function(B,K){return B.keyTail-K.keyTail}),I}t=h(r.primaryKey.keyPath,0,r.primaryKey),i[":id"]=[t];for(var p=0,w=r.indexes;p<w.length;p++){var g=w[p];h(g.keyPath,0,g)}function A(v){var O,b=v.query.index;return b.isVirtual?$($({},v),{query:{index:b.lowLevelIndex,range:(O=v.query.range,b=b.keyTail,{type:1===O.type?2:O.type,lower:Hn(O.lower,O.lowerOpen?e.MAX_KEY:e.MIN_KEY,b),lowerOpen:!0,upper:Hn(O.upper,O.upperOpen?e.MIN_KEY:e.MAX_KEY,b),upperOpen:!0})}}):v}return $($({},n),{schema:$($({},r),{primaryKey:t,indexes:a,getIndexByKeyPath:function(v){return(v=i[Ln(v)])&&v[0]}}),count:function(v){return n.count(A(v))},query:function(v){return n.query(A(v))},openCursor:function(v){var O=v.query.index,b=O.keyTail,S=O.keyLength;return O.isVirtual?n.openCursor(A(v)).then(function(I){return I&&function _(I){return Object.create(I,{continue:{value:function(B){null!=B?I.continue(Hn(B,v.reverse?e.MAX_KEY:e.MIN_KEY,b)):v.unique?I.continue(I.key.slice(0,S).concat(v.reverse?e.MIN_KEY:e.MAX_KEY,b)):I.continue()}},continuePrimaryKey:{value:function(B,K){I.continuePrimaryKey(Hn(B,e.MAX_KEY,b),K)}},primaryKey:{get:function(){return I.primaryKey}},key:{get:function(){var B=I.key;return 1===S?B[0]:B.slice(0,S)}},value:{get:function(){return I.value}}})}(I)}):n.openCursor(v)}})}})}};function yr(e,t,n,r){return n=n||{},r=r||"",pe(e).forEach(function(i){var a,h,p;ot(t,i)?(h=t[i],"object"==typeof(a=e[i])&&"object"==typeof h&&a&&h?(p=An(a))!==An(h)?n[r+i]=t[i]:"Object"===p?yr(a,h,n,r+i+"."):a!==h&&(n[r+i]=t[i]):a!==h&&(n[r+i]=t[i])):n[r+i]=void 0}),pe(t).forEach(function(i){ot(e,i)||(n[r+i]=t[i])}),n}function vr(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Vr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return $($({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return $($({},n),{mutate:function(i){var a=s.trans,h=a.table(t).hook,p=h.deleting,w=h.creating,g=h.updating;switch(i.type){case"add":if(w.fire===d)break;return a._promise("readwrite",function(){return A(i)},!0);case"put":if(w.fire===d&&g.fire===d)break;return a._promise("readwrite",function(){return A(i)},!0);case"delete":if(p.fire===d)break;return a._promise("readwrite",function(){return A(i)},!0);case"deleteRange":if(p.fire===d)break;return a._promise("readwrite",function(){return function v(O,b,x){return n.query({trans:O,values:!1,query:{index:r,range:b},limit:x}).then(function(S){var _=S.result;return A({type:"delete",keys:_,trans:O}).then(function(I){return 0<I.numFailures?Promise.reject(I.failures[0]):_.length<x?{failures:[],numFailures:0,lastResult:void 0}:v(O,$($({},b),{lower:_[_.length-1],lowerOpen:!0}),x)})})}(i.trans,i.range,1e4)},!0)}return n.mutate(i);function A(v){var O,b,x,S=s.trans,_=v.keys||vr(r,v);if(!_)throw new Error("Keys missing");return"delete"!==(v="add"===v.type||"put"===v.type?$($({},v),{keys:_}):$({},v)).type&&(v.values=D([],v.values,!0)),v.keys&&(v.keys=D([],v.keys,!0)),O=n,x=_,("add"===(b=v).type?Promise.resolve([]):O.getMany({trans:b.trans,keys:x,cache:"immutable"})).then(function(I){var B=_.map(function(K,F){var V,ie,W,ne=I[F],oe={onerror:null,onsuccess:null};return"delete"===v.type?p.fire.call(oe,K,ne,S):"add"===v.type||void 0===ne?(V=w.fire.call(oe,K,v.values[F],S),null==K&&null!=V&&(v.keys[F]=K=V,r.outbound||Tt(v.values[F],r.keyPath,K))):(V=yr(ne,v.values[F]),(ie=g.fire.call(oe,V,K,ne,S))&&(W=v.values[F],Object.keys(ie).forEach(function(te){ot(W,te)?W[te]=ie[te]:Tt(W,te,ie[te])}))),oe});return n.mutate(v).then(function(K){for(var F=K.failures,V=K.results,ie=K.numFailures,W=(K=K.lastResult,0);W<_.length;++W){var ne=(V||_)[W],oe=B[W];null==ne?oe.onerror&&oe.onerror(F[W]):oe.onsuccess&&oe.onsuccess("put"===v.type&&I[W]?v.values[W]:ne)}return{failures:F,results:V,numFailures:ie,lastResult:K}}).catch(function(K){return B.forEach(function(F){return F.onerror&&F.onerror(K)}),Promise.reject(K)})})}}})}})}};function Pr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)0===q(t.keys[i],e[a])&&(r.push(n?kt(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var $r={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return $($({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Pr(r.keys,r.trans._cache,"clone"===r.cache);return i?Z.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:"clone"===r.cache?kt(a):a},a})},mutate:function(r){return"add"!==r.type&&(r.trans._cache=null),n.mutate(r)}})}}}};function Tr(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Nr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gr={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new cn(e.MIN_KEY,e.MAX_KEY);return $($({},e),{transaction:function(r,i,a){if(s.subscr&&"readonly"!==i)throw new N.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(s.querier));return e.transaction(r,i,a)},table:function(r){var i=e.table(r),a=i.schema,h=a.primaryKey,v=a.indexes,p=h.extractKey,w=h.outbound,g=h.autoIncrement&&v.filter(function(b){return b.compound&&b.keyPath.includes(h.keyPath)}),A=$($({},i),{mutate:function(b){function x(te){return te="idb://".concat(t,"/").concat(r,"/").concat(te),K[te]||(K[te]=new cn)}var S,_,I,B=b.trans,K=b.mutatedParts||(b.mutatedParts={}),F=x(""),V=x(":dels"),ie=b.type,W=(oe="deleteRange"===b.type?[b.range]:"delete"===b.type?[b.keys]:b.values.length<50?[vr(h,b).filter(function(te){return te}),b.values]:[])[0],ne=oe[1],oe=b.trans._cache;return le(W)?(F.addKeys(W),(oe="delete"===ie||W.length===ne.length?Pr(W,oe):null)||V.addKeys(W),(oe||ne)&&(S=x,_=oe,I=ne,a.indexes.forEach(function(te){var je=S(te.name||"");function Re(Ze){return null!=Ze?te.extractKey(Ze):null}function Ge(Ze){return te.multiEntry&&le(Ze)?Ze.forEach(function(En){return je.addKey(En)}):je.addKey(Ze)}(_||I).forEach(function(Ze,ln){var Ve=_&&Re(_[ln]);0!==q(Ve,ln=I&&Re(I[ln]))&&(null!=Ve&&Ge(Ve),null!=ln&&Ge(ln))})}))):W?(V.add(ne={from:W.lower,to:W.upper}),F.add(ne)):(F.add(n),V.add(n),a.indexes.forEach(function(te){return x(te.name).add(n)})),i.mutate(b).then(function(te){return!W||"add"!==b.type&&"put"!==b.type||(F.addKeys(te.results),g&&g.forEach(function(je){var Re=b.values.map(function(Ze){return je.extractKey(Ze)}),Ge=je.keyPath.findIndex(function(Ze){return Ze===h.keyPath});te.results.forEach(function(Ze){return Re[Ge]=Ze}),x(je.name).addKeys(Re)})),B.mutatedParts=zn(B.mutatedParts||{},K),te})}}),O={get:function(b){return[h,new cn(b.key)]},getMany:function(b){return[h,(new cn).addKeys(b.keys)]},count:v=function(x){var S;return[x=(S=x.query).index,new cn(null!==(x=(S=S.range).lower)&&void 0!==x?x:e.MIN_KEY,null!==(S=S.upper)&&void 0!==S?S:e.MAX_KEY)]},query:v,openCursor:v};return pe(O).forEach(function(b){A[b]=function(x){var _=!!(S=s.subscr),I=Tr(s,i)&&Nr(b,x)?x.obsSet={}:S;if(_){var B=function(ne){return ne="idb://".concat(t,"/").concat(r,"/").concat(ne),I[ne]||(I[ne]=new cn)},K=B(""),F=B(":dels"),S=(_=(S=O[b](x))[0],S[1]);if(("query"===b&&_.isPrimaryKey&&!x.values?F:B(_.name||"")).add(S),!_.isPrimaryKey){if("count"!==b){var V="query"===b&&w&&x.values&&i.query($($({},x),{values:!1}));return i[b].apply(this,arguments).then(function(ne){if("query"===b){if(w&&x.values)return V.then(function(Re){return K.addKeys(Re=Re.result),ne});var oe=x.values?ne.result.map(p):ne.result;(x.values?K:F).addKeys(oe)}else if("openCursor"===b){var te=ne,je=x.values;return te&&Object.create(te,{key:{get:function(){return F.addKey(te.primaryKey),te.key}},primaryKey:{get:function(){var Re=te.primaryKey;return F.addKey(Re),Re}},value:{get:function(){return je&&K.addKey(te.primaryKey),te.value}}})}return ne})}F.add(n)}}return i[b].apply(this,arguments)}}),A}})}};function Ir(e,t,n){return 0===n.numFailures?t:"deleteRange"===t.type||n.numFailures===(t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1)?null:(t=$({},t),le(t.keys)&&(t.keys=t.keys.filter(function(i,a){return!(a in n.failures)})),"values"in t&&le(t.values)&&(t.values=t.values.filter(function(i,a){return!(a in n.failures)})),t)}function mr(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<q(n,r.lower):0<=q(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?q(e,t.upper)<0:q(e,t.upper)<=0));var n,r}function kr(e,t,O,r,i,a){if(!O||0===O.length)return e;var h=t.query.index,p=h.multiEntry,w=t.query.range,g=r.schema.primaryKey.extractKey,A=h.extractKey,v=(h.lowLevelIndex||h).extractKey;return(O=O.reduce(function(b,x){var S=b,_="add"===x.type||"put"===x.type?x.values.filter(function(F){return F=A(F),p&&le(F)?F.some(function(V){return mr(V,w)}):mr(F,w)}).map(function(F){return F=kt(F),a&&Object.freeze(F),F}):[];switch(x.type){case"add":S=b.concat(t.values?_:_.map(function(V){return g(V)}));break;case"put":var I=(new cn).addKeys(x.values.map(function(V){return g(V)}));S=b.filter(function(V){return V=t.values?g(V):V,!Wn(new cn(V),I)}).concat(t.values?_:_.map(function(V){return g(V)}));break;case"delete":var B=(new cn).addKeys(x.keys);S=b.filter(function(V){return V=t.values?g(V):V,!Wn(new cn(V),B)});break;case"deleteRange":var K=x.range;S=b.filter(function(V){return!mr(g(V),K)})}return S},e))===e?e:(O.sort(function(b,x){return q(v(b),v(x))||q(g(b),g(x))}),t.limit&&t.limit<1/0&&(O.length>t.limit?O.length=t.limit:e.length===t.limit&&O.length<t.limit&&(i.dirty=!0)),a?Object.freeze(O):O)}function Cr(e,t){return 0===q(e.lower,t.lower)&&0===q(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var zr={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return $($({},e),{transaction:function(n,r,i){var a,h,p=e.transaction(n,r,i);return"readwrite"===r&&(h=(a=new AbortController).signal,p.addEventListener("abort",(i=function(w){return function(){if(a.abort(),"readwrite"===r){for(var g=new Set,A=0,v=n;A<v.length;A++){var O=v[A],b=Cn["idb://".concat(t,"/").concat(O)];if(b){var x=e.table(O),S=b.optimisticOps.filter(function(je){return je.trans===p});if(p._explicit&&w&&p.mutatedParts)for(var _=0,I=Object.values(b.queries.query);_<I.length;_++)for(var B=0,K=(ie=I[_]).slice();B<K.length;B++)lr((W=K[B]).obsSet,p.mutatedParts)&&(mn(ie,W),W.subscribers.forEach(function(je){return g.add(je)}));else if(0<S.length){b.optimisticOps=b.optimisticOps.filter(function(je){return je.trans!==p});for(var F=0,V=Object.values(b.queries.query);F<V.length;F++)for(var ie,W,ne,oe=0,te=(ie=V[F]).slice();oe<te.length;oe++)null!=(W=te[oe]).res&&p.mutatedParts&&(w&&!W.dirty?(ne=Object.isFrozen(W.res),ne=kr(W.res,W.req,S,x,W,ne),W.dirty?(mn(ie,W),W.subscribers.forEach(function(je){return g.add(je)})):ne!==W.res&&(W.res=ne,W.promise=Z.resolve({result:ne}))):(W.dirty&&mn(ie,W),W.subscribers.forEach(function(je){return g.add(je)})))}}}g.forEach(function(je){return je()})}}})(!1),{signal:h}),p.addEventListener("error",i(!1),{signal:h}),p.addEventListener("complete",i(!0),{signal:h})),p},table:function(n){var r=e.table(n),i=r.schema.primaryKey;return $($({},r),{mutate:function(a){var h=s.trans;if(i.outbound||"disabled"===h.db._options.cache||h.explicit)return r.mutate(a);var p=Cn["idb://".concat(t,"/").concat(n)];return p?(h=r.mutate(a),"add"!==a.type&&"put"!==a.type||!(50<=a.values.length||vr(i,a).some(function(w){return null==w}))?(p.optimisticOps.push(a),a.mutatedParts&&Jn(a.mutatedParts),h.then(function(w){0<w.numFailures&&(mn(p.optimisticOps,a),(w=Ir(0,a,w))&&p.optimisticOps.push(w),a.mutatedParts&&Jn(a.mutatedParts))}),h.catch(function(){mn(p.optimisticOps,a),a.mutatedParts&&Jn(a.mutatedParts)})):h.then(function(w){var g=Ir(0,$($({},a),{values:a.values.map(function(b,v){var O;return Tt(b=null!==(O=i.keyPath)&&void 0!==O&&O.includes(".")?kt(b):$({},b),i.keyPath,w.results[v]),b})}),w);p.optimisticOps.push(g),queueMicrotask(function(){return a.mutatedParts&&Jn(a.mutatedParts)})}),h):r.mutate(a)},query:function(a){if(!Tr(s,r)||!Nr("query",a))return r.query(a);var h="immutable"===(null===(g=s.trans)||void 0===g?void 0:g.db._options.cache),p=(v=s).requery,w=v.signal,g=function(x,S,_,I){var B=Cn["idb://".concat(x,"/").concat(S)];if(!B)return[];if(!(S=B.queries[_]))return[null,!1,B,null];var K=S[(I.query?I.query.index.name:null)||""];if(!K)return[null,!1,B,null];switch(_){case"query":var F=K.find(function(V){return V.req.limit===I.limit&&V.req.values===I.values&&Cr(V.req.query.range,I.query.range)});return F?[F,!0,B,K]:[K.find(function(V){return("limit"in V.req?V.req.limit:1/0)>=I.limit&&(!I.values||V.req.values)&&function Yr(e,t){return function(n,r,i,a){if(void 0===n)return void 0!==r?-1:0;if(void 0===r)return 1;if(0===(r=q(n,r))){if(i&&a)return 0;if(i)return 1;if(a)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,i,a){if(void 0===n)return void 0!==r?1:0;if(void 0===r)return-1;if(0===(r=q(n,r))){if(i&&a)return 0;if(i)return-1;if(a)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}(V.req.query.range,I.query.range)}),!1,B,K];case"count":return[F=K.find(function(V){return Cr(V.req.query.range,I.query.range)}),!!F,B,K]}}(t,n,"query",a),A=g[0],v=g[1],O=g[2],b=g[3];return A&&v?A.obsSet=a.obsSet:(v=r.query(a).then(function(x){var S=x.result;if(A&&(A.res=S),h){for(var _=0,I=S.length;_<I;++_)Object.freeze(S[_]);Object.freeze(S)}else x.result=kt(S);return x}).catch(function(x){return b&&A&&mn(b,A),Promise.reject(x)}),A={obsSet:a.obsSet,promise:v,subscribers:new Set,type:"query",req:a,dirty:!1},b?b.push(A):(b=[A],(O=O||(Cn["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[a.query.index.name||""]=b)),function Wr(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var i,a;e.subscribers.delete(n),0===e.subscribers.size&&(i=e,a=t,setTimeout(function(){0===i.subscribers.size&&mn(a,i)},3e3))})}(A,b,p,w),A.promise.then(function(x){return{result:kr(x.result,a,O?.optimisticOps,r,A,h)}})}})}})}};function Qn(e,t){return new Proxy(e,{get:function(n,r,i){return"db"===r?t:Reflect.get(n,r,i)}})}var Tn=(Zt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new N.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new N.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(Dr),n.stores({}),this._state.autoSchema=!1,n)},Zt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||s.letThrough||this._vip)?e():new Z(function(n,r){if(t._state.openComplete)return r(new N.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new N.DatabaseClosed);t.open().catch(d)}t._state.dbReadyPromise.then(n,r)}).then(e)},Zt.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:r??10,name:i}),e.sort(function(a,h){return a.level-h.level}),this},Zt.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(i){return r?i.create!==r:!!n&&i.name!==n})),this},Zt.prototype.open=function(){var e=this;return Jt(C,function(){return qr(e)})},Zt.prototype._close=function(){var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Z(function(n){e.dbReadyResolve=n}),e.openCanceller=new Z(function(n,r){e.cancelOpen=r}))},Zt.prototype.close=function(n){var t=(void 0===n?{disableAutoOpen:!0}:n).disableAutoOpen;n=this._state,t?(n.isBeingOpened&&n.cancelOpen(new N.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new N.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Zt.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new Z(function(i,a){function h(){t.close(e);var p=t._deps.indexedDB.deleteDatabase(t.name);p.onsuccess=Me(function(){var w,g,A;g=t.name,A=(w=t._deps).indexedDB,w=w.IDBKeyRange,ar(A)||g===Ot||or(A,w).delete(g).catch(d),i()}),p.onerror=Lt(a),p.onblocked=t._fireOnBlocked}if(n)throw new N.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(h):h()})},Zt.prototype.backendDB=function(){return this.idbdb},Zt.prototype.isOpen=function(){return null!==this.idbdb},Zt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},Zt.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Zt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Zt.prototype,"tables",{get:function(){var e=this;return pe(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Zt.prototype.transaction=function(){var e=function(t,n,r){var i=arguments.length;if(i<2)throw new N.InvalidArgument("Too few arguments");for(var a=new Array(i-1);--i;)a[i-1]=arguments[i];return r=a.pop(),[t,Et(a),r]}.apply(this,arguments);return this._transaction.apply(this,e)},Zt.prototype._transaction=function(e,t,n){var r=this,i=s.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var a,h,p=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(h=t.map(function(g){if("string"!=typeof(g=g instanceof r.Table?g.name:g))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),"r"==e||e===me)a=me;else{if("rw"!=e&&e!=l)throw new N.InvalidArgument("Invalid transaction mode: "+e);a=l}if(i){if(i.mode===me&&a===l){if(!p)throw new N.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&h.forEach(function(g){if(i&&-1===i.storeNames.indexOf(g)){if(!p)throw new N.SubTransaction("Table "+g+" not included in parent transaction.");i=null}}),p&&i&&!i.active&&(i=null)}}catch(g){return i?i._promise(null,function(A,v){v(g)}):ut(g)}var w=function g(A,v,O,b,x){return Z.resolve().then(function(){var S=s.transless||s,_=A._createTransaction(v,O,A._dbSchema,b);if(_.explicit=!0,S={trans:_,transless:S},b)_.idbtrans=b.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,A._state.PR1398_maxLoop=3}catch(K){return K.name===Ee.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return g(A,v,O,null,x)})):ut(K)}var I,B=Sn(x);return B&&De(),S=Z.follow(function(){var K;(I=x.call(_,_))&&(B?(K=ye.bind(null,null),I.then(K,K)):"function"==typeof I.next&&"function"==typeof I.throw&&(I=pr(I)))},S),(I&&"function"==typeof I.then?Z.resolve(I).then(function(K){return _.active?K:ut(new N.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return I})).then(function(K){return b&&_._resolve(),_._completion.then(function(){return K})}).catch(function(K){return _._reject(K),ut(K)})})}.bind(null,this,a,h,i,n);return i?i._promise(a,w,"lock"):s.trans?Jt(s.transless,function(){return r._whenReady(w)}):this._whenReady(w)},Zt.prototype.table=function(e){if(!ot(this._allTables,e))throw new N.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Zt);function Zt(e,t){var n=this;this._middlewares={},this.verno=0;var r=Zt.dependencies;this._options=t=$({addons:Zt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,a,h,p,w,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:d,dbReadyPromise:null,cancelOpen:d,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};g.dbReadyPromise=new Z(function(v){g.dbReadyResolve=v}),g.openCanceller=new Z(function(v,O){g.cancelOpen=O}),this._state=g,this.name=e,this.on=Ce(this,"populate","blocked","versionchange","close",{ready:[Oe,d]}),this.on.ready.subscribe=en(this.on.ready.subscribe,function(v){return function(O,b){Zt.vip(function(){var x,S=n._state;S.openComplete?(S.dbOpenError||Z.resolve().then(O),b&&v(O)):S.onReadyBeingFired?(S.onReadyBeingFired.push(O),b&&v(O)):(v(O),x=n,b||v(function _(){x.on.ready.unsubscribe(O),x.on.ready.unsubscribe(_)}))})}}),this.Collection=(i=this,Ke(we.prototype,function(I,_){this.db=i;var b=c,x=null;if(_)try{b=_()}catch(B){x=B}var S=I._ctx;this._ctx={table:_=S.table,index:S.index,isPrimKey:!S.index||_.schema.primKey.keyPath&&S.index===_.schema.primKey.name,range:b,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:x,or:S.or,valueMapper:(I=_.hook.reading.fire)!==y?I:null}})),this.Table=(a=this,Ke(ce.prototype,function(v,O,b){this.db=a,this._tx=b,this.name=v,this.schema=O,this.hook=a._allTables[v]?a._allTables[v].hook:Ce(null,{creating:[ve,d],reading:[T,y],updating:[k,d],deleting:[Ae,d]})})),this.Transaction=(h=this,Ke(Dn.prototype,function(v,O,b,x,S){var _=this;this.db=h,this.mode=v,this.storeNames=O,this.schema=b,this.chromeTransactionDurability=x,this.idbtrans=null,this.on=Ce(this,"complete","error","abort"),this.parent=S||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Z(function(I,B){_._resolve=I,_._reject=B}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(I){var B=_.active;return _.active=!1,_.on.error.fire(I),_.parent?_.parent._reject(I):B&&_.idbtrans&&_.idbtrans.abort(),ut(I)})})),this.Version=(p=this,Ke(Mr.prototype,function(v){this.db=p,this._cfg={version:v,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(w=this,Ke(sn.prototype,function(v,O,b){if(this.db=w,this._ctx={table:v,index:":id"===O?null:O,or:b},this._cmp=this._ascending=q,this._descending=function(x,S){return q(S,x)},this._max=function(x,S){return 0<q(x,S)?x:S},this._min=function(x,S){return q(x,S)<0?x:S},this._IDBKeyRange=w._deps.IDBKeyRange,!this._IDBKeyRange)throw new N.MissingAPI})),this.on("versionchange",function(v){0<v.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(v){!v.newVersion||v.newVersion<v.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(v.oldVersion/10))}),this._maxKey=On(t.IDBKeyRange),this._createTransaction=function(v,O,b,x){return new n.Transaction(v,O,b,n._options.chromeTransactionDurability,x)},this._fireOnBlocked=function(v){n.on("blocked").fire(v),tt.filter(function(O){return O.name===n.name&&O!==n&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(v)})},this.use($r),this.use(zr),this.use(Gr),this.use(Zr),this.use(Vr);var A=new Proxy(this,{get:function(v,O,b){if("_vip"===O)return!0;if("table"===O)return function(S){return Qn(n.table(S),A)};var x=Reflect.get(v,O,b);return x instanceof ce?Qn(x,A):"tables"===O?x.map(function(S){return Qn(S,A)}):"_createTransaction"===O?function(){return Qn(x.apply(this,arguments),A)}:x}});this.vip=A,r.forEach(function(v){return v(n)})}_n=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";var Xn,Jr=(gr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},gr.prototype[_n]=function(){return this},gr);function gr(e){this._subscribe=e}try{Xn={indexedDB:ae.indexedDB||ae.mozIndexedDB||ae.webkitIndexedDB||ae.msIndexedDB,IDBKeyRange:ae.IDBKeyRange||ae.webkitIDBKeyRange}}catch{Xn={indexedDB:null,IDBKeyRange:null}}function jr(e){var t,n=!1,r=new Jr(function(i){var h,a=Sn(e),p=!1,w={},g={},A={get closed(){return p},unsubscribe:function(){p||(p=!0,h&&h.abort(),v&&pn.storagemutated.unsubscribe(b))}};i.start&&i.start(A);var v=!1,O=function(){return rn(x)},b=function(S){zn(w,S),lr(g,w)&&O()},x=function(){var S,_,I;!p&&Xn.indexedDB&&(w={},S={},h&&h.abort(),h=new AbortController,I=function(B){var K=Mt();try{a&&De();var F=ke(e,B);return F=a?F.finally(ye):F}finally{K&&tn()}}(_={subscr:S,signal:h.signal,requery:O,querier:e,trans:null}),Promise.resolve(I).then(function(B){n=!0,t=B,p||_.signal.aborted||(w={},function(K){for(var F in K)if(ot(K,F))return;return 1}(g=S)||v||(pn(Pn,b),v=!0),rn(function(){return!p&&i.next&&i.next(B)}))},function(B){n=!1,["DatabaseClosedError","AbortError"].includes(B?.name)||p||rn(function(){p||i.error&&i.error(B)})}))};return setTimeout(O,0),A});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var jn=Tn;function br(e){var t=In;try{In=!0,pn.storagemutated.fire(e),hr(e,!0)}finally{In=t}}gt(jn,$($({},f),{delete:function(e){return new jn(e,{addons:[]}).delete()},exists:function(e){return new jn(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=(t=jn.dependencies).indexedDB,t=t.IDBKeyRange,(ar(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Ot})}):or(n,t).toCollection().primaryKeys()).then(e)}catch{return ut(new N.MissingAPI)}var t,n},defineClass:function(){return function(e){ge(this,e)}},ignoreTransaction:function(e){return s.trans?Jt(s.transless,e):e()},vip:ur,async:function(e){return function(){try{var t=pr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Z.resolve(t)}catch(n){return ut(n)}}},spawn:function(e,t,n){try{var r=pr(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Z.resolve(r)}catch(i){return ut(i)}},currentTransaction:{get:function(){return s.trans||null}},waitFor:function(e,t){return t=Z.resolve("function"==typeof e?jn.ignoreTransaction(e):e).timeout(t||6e4),s.trans?s.trans.waitFor(t):t},Promise:Z,debug:{get:function(){return lt},set:function(e){Ct(e)}},derive:Pe,extend:ge,props:gt,override:en,Events:Ce,on:pn,liveQuery:jr,extendObservabilitySet:zn,getByKeyPath:ft,setByKeyPath:Tt,delByKeyPath:function(e,t){"string"==typeof t?Tt(e,t,void 0):"length"in t&&[].map.call(t,function(n){Tt(e,n,void 0)})},shallowClone:xt,deepClone:kt,getObjectDiff:yr,cmp:q,asap:Kt,minKey:-1/0,addons:[],connections:tt,errnames:Ee,dependencies:Xn,cache:Cn,semVer:"4.0.7",version:"4.0.7".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),jn.maxKey=On(jn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(pn(Pn,function(e){In||(e=new CustomEvent(Nn,{detail:e}),In=!0,dispatchEvent(e),In=!1)}),addEventListener(Nn,function(e){e=e.detail,In||br(e)}));var Fn,In=!1,Br=function(){};return typeof BroadcastChannel<"u"&&((Br=function(){(Fn=new BroadcastChannel(Nn)).onmessage=function(e){return e.data&&br(e.data)}})(),"function"==typeof Fn.unref&&Fn.unref(),pn(Pn,function(e){In||Fn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Tn.disableBfCache&&e.persisted){lt&&console.debug("Dexie: handling persisted pagehide"),Fn?.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Tn.disableBfCache&&e.persisted&&(lt&&console.debug("Dexie: handling persisted pageshow"),Br(),br({all:new cn(-1/0,[[]])}))})),Z.rejectionMapper=function(e,t){return!e||e instanceof G||e instanceof TypeError||e instanceof SyntaxError||!e.name||!u[e.name]?e:(t=new u[e.name](t||e.message,e),"stack"in e&&bt(t,"stack",{get:function(){return this.inner.stack}}),t)},Ct(lt),$(Tn,Object.freeze({__proto__:null,Dexie:Tn,liveQuery:jr,Entity:E,cmp:q,PropModSymbol:fe,PropModification:J,replacePrefix:function(e,t){return new J({replacePrefix:[e,t]})},add:function(e){return new J({add:e})},remove:function(e){return new J({remove:e})},default:Tn,RangeSet:cn,mergeRanges:Mn,rangesOverlap:Wn}),{default:Tn}),Tn}()},5592:(Ye,Fe,$)=>{"use strict";$.d(Fe,{y:()=>ot});var D=$(305),ae=$(5113),pe=$(4850),le=$(8407),ge=$(2653),it=$(4674),Bt=$(1441);let ot=(()=>{class Pe{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const et=new Pe;return et.source=this,et.operator=Ue,et}subscribe(Ue,et,en){const pt=function bt(Pe){return Pe&&Pe instanceof D.Lv||function Gt(Pe){return Pe&&(0,it.m)(Pe.next)&&(0,it.m)(Pe.error)&&(0,it.m)(Pe.complete)}(Pe)&&(0,ae.Nn)(Pe)}(Ue)?Ue:new D.Hp(Ue,et,en);return(0,Bt.x)(()=>{const{operator:Kt,source:ft}=this;pt.add(Kt?Kt.call(pt,ft):ft?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(et){Ue.error(et)}}forEach(Ue,et){return new(et=gt(et))((en,pt)=>{const Kt=new D.Hp({next:ft=>{try{Ue(ft)}catch(Tt){pt(Tt),Kt.unsubscribe()}},error:pt,complete:en});this.subscribe(Kt)})}_subscribe(Ue){var et;return null===(et=this.source)||void 0===et?void 0:et.subscribe(Ue)}[pe.L](){return this}pipe(...Ue){return(0,le.U)(Ue)(this)}toPromise(Ue){return new(Ue=gt(Ue))((et,en)=>{let pt;this.subscribe(Kt=>pt=Kt,Kt=>en(Kt),()=>et(pt))})}}return Pe.create=dn=>new Pe(dn),Pe})();function gt(Pe){var dn;return null!==(dn=Pe??ge.config.Promise)&&void 0!==dn?dn:Promise}},305:(Ye,Fe,$)=>{"use strict";$.d(Fe,{Hp:()=>en,Lv:()=>Pe});var D=$(4674),ae=$(5113),pe=$(2653),le=$(3894),ge=$(2420);const it=gt("C",void 0,void 0);function gt(xt,de,Et){return{kind:xt,value:de,error:Et}}var Gt=$(7599),bt=$(1441);class Pe extends ae.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,ae.Nn)(de)&&de.add(this)):this.destination=Tt}static create(de,Et,Ut){return new en(de,Et,Ut)}next(de){this.isStopped?ft(function ot(xt){return gt("N",xt,void 0)}(de),this):this._next(de)}error(de){this.isStopped?ft(function Bt(xt){return gt("E",void 0,xt)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?ft(it,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dn=Function.prototype.bind;function Ue(xt,de){return dn.call(xt,de)}class et{constructor(de){this.partialObserver=de}next(de){const{partialObserver:Et}=this;if(Et.next)try{Et.next(de)}catch(Ut){pt(Ut)}}error(de){const{partialObserver:Et}=this;if(Et.error)try{Et.error(de)}catch(Ut){pt(Ut)}else pt(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(Et){pt(Et)}}}class en extends Pe{constructor(de,Et,Ut){let Yt;if(super(),(0,D.m)(de)||!de)Yt={next:de??void 0,error:Et??void 0,complete:Ut??void 0};else{let kt;this&&pe.config.useDeprecatedNextContext?(kt=Object.create(de),kt.unsubscribe=()=>this.unsubscribe(),Yt={next:de.next&&Ue(de.next,kt),error:de.error&&Ue(de.error,kt),complete:de.complete&&Ue(de.complete,kt)}):Yt=de}this.destination=new et(Yt)}}function pt(xt){pe.config.useDeprecatedSynchronousErrorHandling?(0,bt.O)(xt):(0,le.h)(xt)}function ft(xt,de){const{onStoppedNotification:Et}=pe.config;Et&&Gt.z.setTimeout(()=>Et(xt,de))}const Tt={closed:!0,next:ge.Z,error:function Kt(xt){throw xt},complete:ge.Z}},2653:(Ye,Fe,$)=>{"use strict";$.d(Fe,{config:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7599:(Ye,Fe,$)=>{"use strict";$.d(Fe,{z:()=>D});const D={setTimeout(ae,pe,...le){const{delegate:ge}=D;return ge?.setTimeout?ge.setTimeout(ae,pe,...le):setTimeout(ae,pe,...le)},clearTimeout(ae){const{delegate:pe}=D;return(pe?.clearTimeout||clearTimeout)(ae)},delegate:void 0}},4850:(Ye,Fe,$)=>{"use strict";$.d(Fe,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},9732:(Ye,Fe,$)=>{"use strict";$.d(Fe,{B:()=>ae});const ae=(0,$(2306).d)(pe=>function(ge){pe(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((it,Bt)=>`${Bt+1}) ${it.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge})},9039:(Ye,Fe,$)=>{"use strict";function D(ae,pe){if(ae){const le=ae.indexOf(pe);0<=le&&ae.splice(le,1)}}$.d(Fe,{P:()=>D})},2306:(Ye,Fe,$)=>{"use strict";function D(ae){const le=ae(ge=>{Error.call(ge),ge.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}$.d(Fe,{d:()=>D})},1441:(Ye,Fe,$)=>{"use strict";$.d(Fe,{O:()=>le,x:()=>pe});var D=$(2653);let ae=null;function pe(ge){if(D.config.useDeprecatedSynchronousErrorHandling){const it=!ae;if(it&&(ae={errorThrown:!1,error:null}),ge(),it){const{errorThrown:Bt,error:ot}=ae;if(ae=null,Bt)throw ot}}else ge()}function le(ge){D.config.useDeprecatedSynchronousErrorHandling&&ae&&(ae.errorThrown=!0,ae.error=ge)}},2737:(Ye,Fe,$)=>{"use strict";function D(ae){return ae}$.d(Fe,{y:()=>D})},4674:(Ye,Fe,$)=>{"use strict";function D(ae){return"function"==typeof ae}$.d(Fe,{m:()=>D})},2420:(Ye,Fe,$)=>{"use strict";function D(){}$.d(Fe,{Z:()=>D})},3894:(Ye,Fe,$)=>{"use strict";$.d(Fe,{h:()=>pe});var D=$(2653),ae=$(7599);function pe(le){ae.z.setTimeout(()=>{const{onUnhandledError:ge}=D.config;if(!ge)throw le;ge(le)})}},7061:(Ye,Fe,$)=>{var D=$(8698).default;function ae(){"use strict";Ye.exports=ae=function(){return le},Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports;var pe,le={},ge=Object.prototype,it=ge.hasOwnProperty,Bt=Object.defineProperty||function(ue,G,z){ue[G]=z.value},ot="function"==typeof Symbol?Symbol:{},gt=ot.iterator||"@@iterator",Gt=ot.asyncIterator||"@@asyncIterator",bt=ot.toStringTag||"@@toStringTag";function Pe(ue,G,z){return Object.defineProperty(ue,G,{value:z,enumerable:!0,configurable:!0,writable:!0}),ue[G]}try{Pe({},"")}catch{Pe=function(z,_e,Q){return z[_e]=Q}}function dn(ue,G,z,_e){var Ee=Object.create((G&&G.prototype instanceof Tt?G:Tt).prototype),Nt=new an(_e||[]);return Bt(Ee,"_invoke",{value:kn(ue,z,Nt)}),Ee}function Ue(ue,G,z){try{return{type:"normal",arg:ue.call(G,z)}}catch(_e){return{type:"throw",arg:_e}}}le.wrap=dn;var et="suspendedStart",en="suspendedYield",pt="executing",Kt="completed",ft={};function Tt(){}function xt(){}function de(){}var Et={};Pe(Et,gt,function(){return this});var Ut=Object.getPrototypeOf,Yt=Ut&&Ut(Ut(Sn([])));Yt&&Yt!==ge&&it.call(Yt,gt)&&(Et=Yt);var kt=de.prototype=Tt.prototype=Object.create(Et);function Kn(ue){["next","throw","return"].forEach(function(G){Pe(ue,G,function(z){return this._invoke(G,z)})})}function An(ue,G){function z(Q,Ee,Nt,N){var u=Ue(ue[Q],ue,Ee);if("throw"!==u.type){var f=u.arg,d=f.value;return d&&"object"==D(d)&&it.call(d,"__await")?G.resolve(d.__await).then(function(y){z("next",y,Nt,N)},function(y){z("throw",y,Nt,N)}):G.resolve(d).then(function(y){f.value=y,Nt(f)},function(y){return z("throw",y,Nt,N)})}N(u.arg)}var _e;Bt(this,"_invoke",{value:function(Ee,Nt){function N(){return new G(function(u,f){z(Ee,Nt,u,f)})}return _e=_e?_e.then(N,N):N()}})}function kn(ue,G,z){var _e=et;return function(Q,Ee){if(_e===pt)throw Error("Generator is already running");if(_e===Kt){if("throw"===Q)throw Ee;return{value:pe,done:!0}}for(z.method=Q,z.arg=Ee;;){var Nt=z.delegate;if(Nt){var N=Rn(Nt,z);if(N){if(N===ft)continue;return N}}if("next"===z.method)z.sent=z._sent=z.arg;else if("throw"===z.method){if(_e===et)throw _e=Kt,z.arg;z.dispatchException(z.arg)}else"return"===z.method&&z.abrupt("return",z.arg);_e=pt;var u=Ue(ue,G,z);if("normal"===u.type){if(_e=z.done?Kt:en,u.arg===ft)continue;return{value:u.arg,done:z.done}}"throw"===u.type&&(_e=Kt,z.method="throw",z.arg=u.arg)}}}function Rn(ue,G){var z=G.method,_e=ue.iterator[z];if(_e===pe)return G.delegate=null,"throw"===z&&ue.iterator.return&&(G.method="return",G.arg=pe,Rn(ue,G),"throw"===G.method)||"return"!==z&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+z+"' method")),ft;var Q=Ue(_e,ue.iterator,G.arg);if("throw"===Q.type)return G.method="throw",G.arg=Q.arg,G.delegate=null,ft;var Ee=Q.arg;return Ee?Ee.done?(G[ue.resultName]=Ee.value,G.next=ue.nextLoc,"return"!==G.method&&(G.method="next",G.arg=pe),G.delegate=null,ft):Ee:(G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,ft)}function mn(ue){var G={tryLoc:ue[0]};1 in ue&&(G.catchLoc=ue[1]),2 in ue&&(G.finallyLoc=ue[2],G.afterLoc=ue[3]),this.tryEntries.push(G)}function gn(ue){var G=ue.completion||{};G.type="normal",delete G.arg,ue.completion=G}function an(ue){this.tryEntries=[{tryLoc:"root"}],ue.forEach(mn,this),this.reset(!0)}function Sn(ue){if(ue||""===ue){var G=ue[gt];if(G)return G.call(ue);if("function"==typeof ue.next)return ue;if(!isNaN(ue.length)){var z=-1,_e=function Q(){for(;++z<ue.length;)if(it.call(ue,z))return Q.value=ue[z],Q.done=!1,Q;return Q.value=pe,Q.done=!0,Q};return _e.next=_e}}throw new TypeError(D(ue)+" is not iterable")}return xt.prototype=de,Bt(kt,"constructor",{value:de,configurable:!0}),Bt(de,"constructor",{value:xt,configurable:!0}),xt.displayName=Pe(de,bt,"GeneratorFunction"),le.isGeneratorFunction=function(ue){var G="function"==typeof ue&&ue.constructor;return!!G&&(G===xt||"GeneratorFunction"===(G.displayName||G.name))},le.mark=function(ue){return Object.setPrototypeOf?Object.setPrototypeOf(ue,de):(ue.__proto__=de,Pe(ue,bt,"GeneratorFunction")),ue.prototype=Object.create(kt),ue},le.awrap=function(ue){return{__await:ue}},Kn(An.prototype),Pe(An.prototype,Gt,function(){return this}),le.AsyncIterator=An,le.async=function(ue,G,z,_e,Q){void 0===Q&&(Q=Promise);var Ee=new An(dn(ue,G,z,_e),Q);return le.isGeneratorFunction(G)?Ee:Ee.next().then(function(Nt){return Nt.done?Nt.value:Ee.next()})},Kn(kt),Pe(kt,bt,"Generator"),Pe(kt,gt,function(){return this}),Pe(kt,"toString",function(){return"[object Generator]"}),le.keys=function(ue){var G=Object(ue),z=[];for(var _e in G)z.push(_e);return z.reverse(),function Q(){for(;z.length;){var Ee=z.pop();if(Ee in G)return Q.value=Ee,Q.done=!1,Q}return Q.done=!0,Q}},le.values=Sn,an.prototype={constructor:an,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=pe,this.done=!1,this.delegate=null,this.method="next",this.arg=pe,this.tryEntries.forEach(gn),!G)for(var z in this)"t"===z.charAt(0)&&it.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=pe)},stop:function(){this.done=!0;var G=this.tryEntries[0].completion;if("throw"===G.type)throw G.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var z=this;function _e(f,d){return Nt.type="throw",Nt.arg=G,z.next=f,d&&(z.method="next",z.arg=pe),!!d}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var Ee=this.tryEntries[Q],Nt=Ee.completion;if("root"===Ee.tryLoc)return _e("end");if(Ee.tryLoc<=this.prev){var N=it.call(Ee,"catchLoc"),u=it.call(Ee,"finallyLoc");if(N&&u){if(this.prev<Ee.catchLoc)return _e(Ee.catchLoc,!0);if(this.prev<Ee.finallyLoc)return _e(Ee.finallyLoc)}else if(N){if(this.prev<Ee.catchLoc)return _e(Ee.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<Ee.finallyLoc)return _e(Ee.finallyLoc)}}}},abrupt:function(G,z){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var Q=this.tryEntries[_e];if(Q.tryLoc<=this.prev&&it.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var Ee=Q;break}}Ee&&("break"===G||"continue"===G)&&Ee.tryLoc<=z&&z<=Ee.finallyLoc&&(Ee=null);var Nt=Ee?Ee.completion:{};return Nt.type=G,Nt.arg=z,Ee?(this.method="next",this.next=Ee.finallyLoc,ft):this.complete(Nt)},complete:function(G,z){if("throw"===G.type)throw G.arg;return"break"===G.type||"continue"===G.type?this.next=G.arg:"return"===G.type?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):"normal"===G.type&&z&&(this.next=z),ft},finish:function(G){for(var z=this.tryEntries.length-1;z>=0;--z){var _e=this.tryEntries[z];if(_e.finallyLoc===G)return this.complete(_e.completion,_e.afterLoc),gn(_e),ft}},catch:function(G){for(var z=this.tryEntries.length-1;z>=0;--z){var _e=this.tryEntries[z];if(_e.tryLoc===G){var Q=_e.completion;if("throw"===Q.type){var Ee=Q.arg;gn(_e)}return Ee}}throw Error("illegal catch attempt")},delegateYield:function(G,z,_e){return this.delegate={iterator:Sn(G),resultName:z,nextLoc:_e},"next"===this.method&&(this.arg=pe),ft}},le}Ye.exports=ae,Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports},8698:Ye=>{function Fe($){return Ye.exports=Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports,Fe($)}Ye.exports=Fe,Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports},4687:(Ye,Fe,$)=>{var D=$(7061)();Ye.exports=D;try{regeneratorRuntime=D}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=D:Function("r","regeneratorRuntime = r")(D)}},7331:(Ye,Fe,$)=>{"use strict";$.d(Fe,{ZP:()=>et});var D=$(3667);const ae=Symbol.for("Dexie"),pe=globalThis[ae]||(globalThis[ae]=D);if(D.semVer!==pe.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${D.semVer} and ${pe.semVer}`);const et=pe},5861:(Ye,Fe,$)=>{"use strict";function D(pe,le,ge,it,Bt,ot,gt){try{var Gt=pe[ot](gt),bt=Gt.value}catch(Pe){return void ge(Pe)}Gt.done?le(bt):Promise.resolve(bt).then(it,Bt)}function ae(pe){return function(){var le=this,ge=arguments;return new Promise(function(it,Bt){var ot=pe.apply(le,ge);function gt(bt){D(ot,it,Bt,gt,Gt,"next",bt)}function Gt(bt){D(ot,it,Bt,gt,Gt,"throw",bt)}gt(void 0)})}}$.d(Fe,{Z:()=>ae})}}]);